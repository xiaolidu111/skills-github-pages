<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>labuladong-数组去重算法题总结</title>
      <link href="/2022/11/30/labuladong-shou-ba-shou-shua-lian-biao-suan-fa-shu-zu-qu-chong-suan-fa-ti-zong-jie/"/>
      <url>/2022/11/30/labuladong-shou-ba-shou-shua-lian-biao-suan-fa-shu-zu-qu-chong-suan-fa-ti-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>labuladong-数组去重算法题总结</p><span id="more"></span><h2 id="labuladong-数组去重算法题总结"><a href="#labuladong-数组去重算法题总结" class="headerlink" title="labuladong-数组去重算法题总结"></a>labuladong-数组去重算法题总结</h2><h3 id="解法详解"><a href="#解法详解" class="headerlink" title="解法详解"></a>解法详解</h3><p>读完本文，你可以去力扣解决一下题目：</p><p><a href="https://leetcode.cn/problems/remove-duplicate-letters/">316. 去除重复字母</a></p><p><a href="https://leetcode.cn/problems/smallest-subsequence-of-distinct-characters/">1081. 不同字符的最小子序列</a></p><p>对于一般的去重算法，其实只要是往哈西集合里面塞就行了，最多加一些限制，本文的问题是相关算法中南段最大的，如果把这个问题搞懂，就不用怕数组去重问题了</p><p>下面是<a href="https://leetcode.cn/problems/remove-duplicate-letters/">316. 去除重复字母</a></p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/image-20230112105116251.png" alt="image-20230112105116251"></p><p>从题目中我们可以总结出以下三点</p><ol><li>去重</li><li>去重字符串的字符顺序不能打乱 s 中字符出现的相对顺序</li><li>要符合字典序最小的原则</li></ol><p>按理说，如果我们想要到有序的结果，就得需要对源字符串进行排序，但是题目说不能改变字符的顺序，这似乎是矛盾的，下面我们将用单调栈的思路来解决这一道问题，首先我们先忽略要求 3，用<code>栈</code>来实现要求 1 和要求 2</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">removeDuplicateLetters</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 存放去重的结果的栈</span>  <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 记录单词是否出现过</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> char <span class="token keyword">of</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">continue</span> <span class="token comment">// 如果这个元素存在 就调过</span>    <span class="token comment">// 否则放入栈中</span>    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span>    <span class="token comment">// 标记存在</span>    map<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> stack<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这段代码的含义是将这个元素完成去重和不打乱顺序，但是问题是，如果输入的是<code>bcabc</code>，那么输出的结果是<code>bca</code>，而要求的结果是<code>abc</code></p><p>那么我们想一下，如果要满足 3，那么需要向栈<code>stack</code>中插入<code>a</code>的时候，我们需要让算法知道<code>a</code>的字典序和之前的两个字符<code>b</code>和<code>c</code>相比，谁大谁小？</p><p><strong>如果当前字符<code>a</code>比之前的字符字典序要小，就可能需要把前面的字符<code>pop</code>出栈，让<code>a</code>排在前面，对吧？</strong></p><p>那么我们先来改版一下代码：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">removeDuplicateLetters</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 存放去重的结果的栈</span>  <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 记录单词是否出现过</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> char <span class="token keyword">of</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>char<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span> <span class="token comment">// 如果这个元素存在 就调过</span>    <span class="token comment">// 否则放入栈中</span>    <span class="token comment">// 插入之前,和前面的元素比较一下大小如果字典序小于之前的元素，就弹出前面的元素，然后再插入新元素</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> char<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> charPop <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 弹出栈顶的元素</span>      map<span class="token punctuation">[</span>charPop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span>    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span>    <span class="token comment">// 标记存在</span>    map<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> stack<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这段代码也很好理解，就是加入了一个 while 循环，连续 pop 出比当前字符小的栈顶字符，知道栈顶元素比当前元素的字典序还小而知</p><p>这样，对于输入<code>s=bcabc</code>，我们就可以得到正确的结果<code>abc</code>了</p><p>但是按照之前的逻辑，我们输入<code>s=bcac</code>，按照之前的逻辑我们得到的结果就是<code>ac</code>正确的答案是<code>bac</code>，这是什么原因呢</p><p>这是因为<code>s</code>中只有唯一一个<code>b</code>，所以即使是<code>a</code>也不应该吧<code>b</code>给弹出，那么问题出在哪里呢</p><p>我们的算法在<code>stack[stack.length - 1] &gt; char</code>的时候，才会 pop 元素，其实这个时候应该分为两种情况：</p><ol><li>如果这个栈顶的字符后面还会出现，那么就可以把它 pop 出去，反正后面还会有，后面再 push 进去</li><li>如果这个栈顶的元素不在出现，就不能将其 pop 出去，否则会永远失去这个字符</li></ol><p>回到<code>bcac</code>的例子，插入字符<code>a</code>的时候，发现之前的<code>c</code>比<code>a</code>还大，而且后面还存在<code>c</code>，所以需要 pop 出去</p><p>后面发现<code>b</code>比<code>a</code>大，但是后面不在出现<code>b</code>，所以不能 pop 出去</p><p><strong>所以关键在于，如何让算法知道<code>a</code>后面有几个<code>b</code>,有几个<code>c</code>呢</strong></p><p>下面我们再对这个代码进行改版</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">removeDuplicateLetters</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 存放去重的结果的栈</span>  <span class="token comment">// 使用一个计数器维护字符的数量</span>  <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 记录单词出现的次数</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> char <span class="token keyword">of</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      map<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token punctuation">}</span>    map<span class="token punctuation">[</span>char<span class="token punctuation">]</span><span class="token operator">++</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> inStack <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> char <span class="token keyword">of</span> s<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 每次遍历一个都讲map中的个数-1</span>    map<span class="token punctuation">[</span>char<span class="token punctuation">]</span><span class="token operator">--</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>inStack<span class="token punctuation">[</span>char<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span> <span class="token comment">// 如果这个元素存在 就调过</span>    <span class="token comment">// 否则放入栈中</span>    <span class="token comment">// 插入之前,和前面的元素比较一下大小如果字典序小于之前的元素，就弹出前面的元素，然后再插入新元素</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> char<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 如果后面不再出现这个栈顶元素,就停止pop</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">break</span>      <span class="token punctuation">}</span>      <span class="token comment">// 否则就弹出栈顶的元素</span>      <span class="token keyword">let</span> charPop <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 弹出栈顶的元素</span>      inStack<span class="token punctuation">[</span>charPop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span>    stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>char<span class="token punctuation">)</span>    <span class="token comment">// 标记存在</span>    inStack<span class="token punctuation">[</span>char<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> stack<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里我们使用 map 对每个字符出现的次数进行统计，当字典序较小的字符视图挤掉栈顶的元素的时候，我们利用 map 中的次数判断这个数字是不是还存在，只有还存在的时候才可以挤掉，否则不能挤掉。至此，我们这一道题目就结束了。</p><h3 id="最后总结"><a href="#最后总结" class="headerlink" title="最后总结"></a>最后总结</h3><p><strong>你还记得我们开头提到的三个要求吗？我们是怎么达成这三个要求的</strong>？</p><p>要求一、通过<code>inStack</code>这个布尔数组做到栈<code>stk</code>中不存在重复元素。</p><p>要求二、我们顺序遍历字符串<code>s</code>，通过「栈」这种顺序结构的 push/pop 操作记录结果字符串，保证了字符出现的顺序和<code>s</code>中出现的顺序一致。</p><p>这里也可以想到为什么要用「栈」这种数据结构，因为先进后出的结构允许我们立即操作刚插入的字符，如果用「队列」的话肯定是做不到的。</p><p>要求三、我们用类似单调栈的思路，配合计数器<code>count</code>不断 pop 掉不符合最小字典序的字符，保证了最终得到的结果字典序最小。</p><p>当然，由于栈的结构特点，我们最后需要把栈中元素取出后再反转一次才是最终结果。</p>]]></content>
      
      
      <categories>
          
          <category> labuladong </category>
          
      </categories>
      
      
        <tags>
            
            <tag> labuladong </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>labuladong-我的刷题心得</title>
      <link href="/2022/11/20/labuladong-wo-de-shua-ti-xin-de/"/>
      <url>/2022/11/20/labuladong-wo-de-shua-ti-xin-de/</url>
      
        <content type="html"><![CDATA[<p>labuladong-我的刷题心得</p><span id="more"></span><h2 id="labuladong-我的刷题心得"><a href="#labuladong-我的刷题心得" class="headerlink" title="labuladong-我的刷题心得"></a>labuladong-我的刷题心得</h2><h3 id="算法的本质"><a href="#算法的本质" class="headerlink" title="算法的本质"></a>算法的本质</h3><p>算法的本质其实就是<strong>穷举</strong></p><p><strong>算法工程师</strong>的算法和<strong>数据结构与算法</strong>中的这个算法完全是两码事</p><p>对于前者来说，重点在于学习数学建模和调参经验，计算机就只是拿来做计算的工具而已，而后者的重点是计算机思维，需要能够站在计算机的视角，抽象化简实际问题，然后用合理的数据结构去解决问题</p><p>对计算机算法的误解也许就是以前学习数学留下的<strong>后遗症</strong>，数学题一般都是仔细观察，找几何关系，列方程，然后算出答案，如果说需要进行大规模穷举来寻找答案，那么大概率就是自己的阶梯思路出现了问题。</p><p>而计算机算法的思维恰恰相反：通常情况下是没有特别的数学公式的，如果需要找到一些巧妙的定理那就最好，如果找不到，就只能穷举，只要是复杂度允许，没有什么答案是穷举不出来的</p><p><strong>穷举有两个关键点，无遗漏，无冗余</strong></p><ul><li>如果穷举，无遗漏</li><li>如何聪明的穷举，避免荣誉的计算</li></ul><p>什么算法的难点在 <strong>如何穷举</strong> 呢，一般是递归类的问题，最典型的就是动态规划系列问题</p><p>什么算法的难点在 <strong>如何聪明的穷举</strong> 呢，一些耳熟能详的非递归算法技巧，都可以跪在这一类，比如后面的并查集算法、贪心算法、KMP算法</p><h3 id="数组、单链表系列算法"><a href="#数组、单链表系列算法" class="headerlink" title="数组、单链表系列算法"></a>数组、单链表系列算法</h3><p><strong>对于单链表，常用的技巧就是双指针</strong>，比如如何判断单链表是否成环，可以使用快满指针的方法</p><p><strong>数组常用的技巧有很大一部分还是双指针相关的技巧，说白了就是叫你如何聪明的穷举</strong></p><p><strong>首先说二分搜索技巧</strong>，可以归类为两端向中心的双指针</p><p><strong>又比如滑动窗口算法技巧</strong>，典型的快慢指针，中间的部分就是滑动的窗口，主要是用于解决子串问题</p><p><strong>还有回文串技巧</strong>，判断一个串是否是回文串，使用双指针从两端向中心检查，如何寻找回文串，就从中心向梁端扩散</p><h3 id="二叉树系列算法"><a href="#二叉树系列算法" class="headerlink" title="二叉树系列算法"></a>二叉树系列算法</h3><p>二叉树可以通过遍历一遍二叉树得到答案，这个后续再补充</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这篇文章写在重读labuladong算法书籍，这边，后续还会继续补充</p>]]></content>
      
      
      <categories>
          
          <category> labuladong </category>
          
      </categories>
      
      
        <tags>
            
            <tag> labuladong </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>labuladong-学习算法和刷题的框架思维</title>
      <link href="/2022/11/15/labuladong-xue-xi-suan-fa-he-shua-ti-de-kuang-jia-si-wei/"/>
      <url>/2022/11/15/labuladong-xue-xi-suan-fa-he-shua-ti-de-kuang-jia-si-wei/</url>
      
        <content type="html"><![CDATA[<p>labuladong-学习算法和刷题的框架思维</p><span id="more"></span><h2 id="labuladong-学习算法和刷题的框架思维"><a href="#labuladong-学习算法和刷题的框架思维" class="headerlink" title="labuladong-学习算法和刷题的框架思维"></a>labuladong-学习算法和刷题的框架思维</h2><h3 id="数据结构的存储方式"><a href="#数据结构的存储方式" class="headerlink" title="数据结构的存储方式"></a>数据结构的存储方式</h3><p>数据结构的存储方式只有两种：数组（顺序存储）和链表（链式存储）</p><p>比如说队列和栈这两种数据结构，既可以使用链表来实现也可以使用数组来实现。使用数组就需要处理扩容和缩容的问题；用链表实现，就没有这个问题，但是需要更多的内存空间存储节点指针。</p><p>图的两种表示方法：邻接表就是链表，邻接矩阵就是二维数组</p><p>散列表就是通过散列函数把键映射到一个大数组中</p><p>树，用数组实现就是堆，因为堆是一个完全二叉树，数组存储不需要节点指针，操作也比较简单，用链表实现就是常见的树</p><p>可以看出，数据结构的种类有很多，但是底层逻辑来说无非就是数组和链表，两者的优缺点如下：</p><p>数组：联系存储，可以随机访问，通过索引快速找到对应元素，节约储存空间，但是必须一次分配完空间</p><p>链表：元素不连续，靠着指针指向下一个元素的位置，所以不存在数组的扩容问题，无法根据索引算出对应元素的地址，所以不能随机访问</p><h3 id="数据结构的基本操作"><a href="#数据结构的基本操作" class="headerlink" title="数据结构的基本操作"></a>数据结构的基本操作</h3><p>基本操作可以概括为：遍历+访问，再具体一点就是增删改查</p><p>各种数据结构遍历和访问无非就是两种形式：线性的和非线性的</p><p>线性就是 for、while 为敌爱表，非线性就是递归为代表，再具体一步无非就是一下几种框架</p><p>数组遍历框架，典型的线性迭代结构：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>链表遍历框架,兼具迭代和递归结构</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">ListNode</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> val  <span class="token keyword">this</span><span class="token punctuation">.</span>next <span class="token operator">=</span> next <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> next<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token parameter">head</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> p <span class="token operator">=</span> head<span class="token punctuation">;</span> p <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">;</span> p <span class="token operator">=</span> p<span class="token punctuation">.</span>next<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token parameter">head</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 递归访问</span>  <span class="token function">traverse</span><span class="token punctuation">(</span>head<span class="token punctuation">.</span>next<span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>二叉树的遍历框架,典型的非线性递归遍历结构</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">TreeNode</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> val    <span class="token keyword">this</span><span class="token punctuation">.</span>left <span class="token operator">=</span> left <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> left    <span class="token keyword">this</span><span class="token punctuation">.</span>right <span class="token operator">=</span> right <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token keyword">null</span> <span class="token operator">:</span> right  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>  <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>二叉树可以扩展为 n 叉树的遍历</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">TreeNode</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">val<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>val <span class="token operator">=</span> val <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> val    <span class="token keyword">this</span><span class="token punctuation">.</span>children <span class="token operator">=</span> arr  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 进行遍历操作</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> root<span class="token punctuation">.</span>children<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>children<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="算法刷题指南"><a href="#算法刷题指南" class="headerlink" title="算法刷题指南"></a>算法刷题指南</h3><p>建议的刷题顺序是:</p><ul><li><p>先学习数组链表这种基本数据结构的常用算法,比如单链表的翻转,前缀和数组,二分搜索</p></li><li><p>学会基础算法之后,不要着急上来就写回溯算法,动态规划这类笔试常考题,而是先刷二叉树,因为<em>二叉树是最容易培养框架思维的,而且大部分算法技巧本质上都是树的遍历问题</em></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">traverse</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 前序位置</span>  <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>  <span class="token comment">// 中序位置</span>  <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>  <span class="token comment">// 后续位置</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>例如下一题:</p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/image-20230110104539505.png" alt="image-20230110104539505"></p></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * Definition for a binary tree node. * function TreeNode(val, left, right) { *     this.val = (val===undefined ? 0 : val) *     this.left = (left===undefined ? null : left) *     this.right = (right===undefined ? null : right) * } */</span><span class="token comment">/** * @param {TreeNode} root * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxPathSum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> max <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">Infinity</span>  <span class="token keyword">function</span> <span class="token function">getMax</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">getMax</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 获得左边的最大 但是左边的最大可能是负数</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token function">getMax</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 获得右边的最大</span>    max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span> left <span class="token operator">+</span> right <span class="token operator">+</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token comment">// 更新最大值</span>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> right<span class="token punctuation">)</span> <span class="token operator">+</span> root<span class="token punctuation">.</span>val <span class="token comment">// 单独取左右 因为只能是单独的一条路径</span>  <span class="token punctuation">}</span>  <span class="token function">getMax</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>  <span class="token keyword">return</span> max<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上述的算法其实就是一个后序遍历,算好左右的最大和之后,加上中间的值,将中间的值放在最后</p><p>力扣第 105 题，难度中等</p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/image-20230110105529198.png" alt="image-20230110105529198"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * Definition for a binary tree node. * function TreeNode(val, left, right) { *     this.val = (val===undefined ? 0 : val) *     this.left = (left===undefined ? null : left) *     this.right = (right===undefined ? null : right) * } */</span><span class="token comment">/** * @param {number[]} preorder * @param {number[]} inorder * @return {TreeNode} */</span><span class="token keyword">var</span> <span class="token function-variable function">buildTree</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">preorder<span class="token punctuation">,</span> inorder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>preorder<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 如果现需遍历的数组长度是0 就直接返回</span>  <span class="token keyword">let</span> val <span class="token operator">=</span> preorder<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 得到根节点的值</span>  <span class="token keyword">let</span> index <span class="token operator">=</span> inorder<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token comment">// 得到根节点的坐标</span>  <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 生成根节点</span>  root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>preorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">,</span> inorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> index<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 递归构造 先序遍历就是0到index 中旬遍历也是0,index</span>  root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>preorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span> inorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 现需遍历就是index到最后,中序遍历是index+1栋最后</span>  <span class="token keyword">return</span> root <span class="token comment">// 返回根节点</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个需要找到这个函数的 build 的位置,其实也是一个前序遍历</p><p>力扣第 230 题，难度中等，寻找二叉搜索树中的第 <code>k</code> 小的元素</p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/image-20230110110445547.png" alt="image-20230110110445547"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * Definition for a binary tree node. * function TreeNode(val, left, right) { *     this.val = (val===undefined ? 0 : val) *     this.left = (left===undefined ? null : left) *     this.right = (right===undefined ? null : right) * } */</span><span class="token comment">/** * @param {TreeNode} root * @param {number} k * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">kthSmallest</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 初始化结果</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token comment">// 记录第几个</span>  <span class="token keyword">let</span> rank <span class="token operator">=</span> <span class="token number">0</span>  <span class="token keyword">function</span> <span class="token function">bst</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 如果是null 直接返回</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span>    <span class="token punctuation">}</span>    <span class="token function">bst</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token comment">// 先遍历左边的</span>    rank<span class="token operator">++</span> <span class="token comment">// 计数器+1</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rank <span class="token operator">===</span> k<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 如果相同就记录下来</span>      result <span class="token operator">=</span> root<span class="token punctuation">.</span>val      <span class="token keyword">return</span>    <span class="token punctuation">}</span>    <span class="token function">bst</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> k<span class="token punctuation">)</span> <span class="token comment">// 遍历右边的</span>  <span class="token punctuation">}</span>  <span class="token function">bst</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span> k<span class="token punctuation">)</span>  <span class="token keyword">return</span> result<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上述的代码其实就是一个中序遍历,刷完二叉树的题目,就会发现所有的涉及到递归的问题都是树的问题</p><p>又比如动态规划所有的凑零钱问题,暴力解法就是一个遍历 N 叉树</p><p><img src="https://labuladong.gitee.io/algo/images/%e5%8a%a8%e6%80%81%e8%a7%84%e5%88%92%e8%af%a6%e8%a7%a3%e8%bf%9b%e9%98%b6/5.jpg" alt="img"></p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/image-20230110111820883.png" alt="image-20230110111820883"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} coins * @param {number} amount * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">coinChange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">coins<span class="token punctuation">,</span> amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>amount <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>amount <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">Infinity</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> coin <span class="token keyword">of</span> coins<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> subProblem <span class="token operator">=</span> <span class="token function">coinChange</span><span class="token punctuation">(</span>coins<span class="token punctuation">,</span> amount <span class="token operator">-</span> coin<span class="token punctuation">)</span> <span class="token comment">// 遍历每一个子问题</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>subProblem <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">continue</span> <span class="token comment">// 如果子问题无解就调过</span>    res <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span> subProblem <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 有解就比较最小值</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> res <span class="token operator">===</span> <span class="token number">Infinity</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> res <span class="token comment">// 返回每个子问题的解</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上面的是暴力解法,其实就是一个后序遍历,每次计算得到最后面的值</p><p>动态规划的解法如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} coins * @param {number} amount * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">coinChange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">coins<span class="token punctuation">,</span> amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>amount<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 如果没有cmount或者amount是0的话 那就可以直接返回0</span>    <span class="token keyword">return</span> <span class="token number">0</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>amount <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span> <span class="token comment">// 生成dp数组初始化为都是infinity dp[i]表示凑成i金额所需的最小硬币的个数</span>  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 凑成0金额最小的硬币是0个</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 遍历硬币</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span> j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 遍历总价值容量</span>      dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j <span class="token operator">-</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 金额j所需要的最小的硬币的个数 是 价格为j-coins[i]所需要的硬币数+1 和 金额为j所需要的硬币数其中的最小值</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">Infinity</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token comment">//如果最后是infinity说明没有这个组合 那就直接返回-1  否则返回值这个值</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>再看回溯算法,回溯算法其实就是一个 N 叉树的前后序遍历问题,没有例外,比如全排列问题,本质就是遍历下面的这棵树,到叶子结点的路径就是一个全排列</p><p><img src="https://labuladong.gitee.io/algo/images/backtracking/1.jpg" alt="img"></p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/image-20230110113250776.png" alt="image-20230110113250776"></p><p>主要的代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number[][]} */</span><span class="token keyword">var</span> <span class="token function-variable function">permute</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">let</span> used <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token keyword">return</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span>      used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>      path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>      path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> result<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这个其实也就是一个前序遍历,只不过在遍历的过程中将原来的位置记住了</p><h3 id="最后总结"><a href="#最后总结" class="headerlink" title="最后总结"></a>最后总结</h3><p>数据结构的基本存储方式就是链式和顺序两种，基本操作就是增删查改，遍历方式无非迭代和递归。</p><p>学完基本算法之后，建议从「二叉树」系列问题开始刷，结合框架思维，把树结构理解到位，然后再去看回溯、动规、分治等算法专题，对思路的理解就会更加深</p>]]></content>
      
      
      <categories>
          
          <category> labuladong </category>
          
      </categories>
      
      
        <tags>
            
            <tag> labuladong </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typora+PicoGo+腾讯云OSS服务</title>
      <link href="/2022/10/30/typora-picogo-teng-xun-yun-oss-fu-wu/"/>
      <url>/2022/10/30/typora-picogo-teng-xun-yun-oss-fu-wu/</url>
      
        <content type="html"><![CDATA[<p>Typora+PicoGo+腾讯云 OSS 服务</p><span id="more"></span><h1 id="Typora-PicoGo-腾讯云-OSS-服务"><a href="#Typora-PicoGo-腾讯云-OSS-服务" class="headerlink" title="Typora+PicoGo+腾讯云 OSS 服务"></a>Typora+PicoGo+腾讯云 OSS 服务</h1><h2 id="一、前期准备"><a href="#一、前期准备" class="headerlink" title="一、前期准备"></a>一、前期准备</h2><h3 id="1-1-下载-Typora"><a href="#1-1-下载-Typora" class="headerlink" title="1.1 下载 Typora"></a>1.1 下载 Typora</h3><p>推荐大家进入官网下载，目前是收费的，如果觉得贵可以根据自己的需要寻找其他办法，官网地址：<a href="https://typoraio.cn/">Typora 官方中文站 (typoraio.cn)</a></p><h3 id="1-2-购买腾讯云-OSS-服务"><a href="#1-2-购买腾讯云-OSS-服务" class="headerlink" title="1.2 购买腾讯云 OSS 服务"></a>1.2 购买腾讯云 OSS 服务</h3><ul><li><p>首先需要注册一个腾讯云账号，并进行实名认证，然后选择控制台-&gt;对象存储(OSS)，在之前我是白嫖了 50G 的空间，如果需要更大的可以自行购买，也不是特别贵，一年大概不到一百块。</p></li><li><p>购买完成之后，点击左侧控制栏的概览，点击创建存储桶</p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/1671007515706.png" alt="1671007515706"></p></li></ul><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/1671007522673.png" alt="1671007522673"></p><ul><li><p>点击创建存储桶地址选择离自己较近的一个地区，给存储桶取一个名字，访问权限改为共有读写（重要），然后一直下一步点击创建</p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/1671007583313.png" alt="1671007583313"></p></li><li><p>然后就可以在左侧的存储桶列表看见刚刚创建的存储桶（Bucket）</p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/1671007701352.png" alt="1671007701352"></p></li><li><p>点击进入存储桶，进入存储桶管理，点击创建文件夹，并取名，img_typora</p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/1671007832548.png" alt="1671007832548"></p></li></ul><h2 id="二、PicGo-下载"><a href="#二、PicGo-下载" class="headerlink" title="二、PicGo 下载"></a>二、PicGo 下载</h2><h3 id="2-1-PicGo-下载"><a href="#2-1-PicGo-下载" class="headerlink" title="2.1 PicGo 下载"></a>2.1 PicGo 下载</h3><ul><li><p>推荐去官网下载，选择对应版本，官方网站可能网速有些慢，可以在山东大学镜像站下载，地址：<a href="https://mirrors.sdu.edu.cn/github-release/Molunerfinn_PicGo/v2.3.1/">Index of /github-release/Molunerfinn_PicGo/v2.3.1/ (sdu.edu.cn)</a></p></li><li><p>下载对应版本后，安装完成，打开软件，在图床设置选择腾讯云 COS</p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/1671018654037.png" alt="1671018654037"></p></li><li><p>对应的选项</p><ul><li><p>cos 版本： v5</p></li><li><p>设定 Srcretld：可以在 API 密钥管理页面获取</p><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/1671018728135.png" alt="1671018728135"></p></li><li><p>设定 SecretKey：同样可以在 API 密钥管理页面获取</p></li><li><p>设定 Bucket： 填写刚才取得 bucket（存储桶）名字</p></li><li><p>设定 AppId：可以在 API 密钥管理页面获取</p></li><li><p>设定存储区域：地狱信息，枚举值可见可用地域文档<a href="https://cloud.tencent.com/document/product/436/6224">对象存储 地域和访问域名-产品简介-文档中心-腾讯云 (tencent.com)</a></p></li><li><p>设定存储路径：图片存储到 COS 存储桶中的路径，建议取值 img/</p></li><li><p>其余两项可以自己查询,这里不再赘述</p></li><li><p>点击确定,完成设置</p></li></ul></li></ul><h2 id="三、Typora-设置"><a href="#三、Typora-设置" class="headerlink" title="三、Typora 设置"></a>三、Typora 设置</h2><h3 id="3-1-在-Typora-的偏好设置的图像中，进行如下的配置"><a href="#3-1-在-Typora-的偏好设置的图像中，进行如下的配置" class="headerlink" title="3.1 在 Typora 的偏好设置的图像中，进行如下的配置"></a>3.1 在 Typora 的偏好设置的图像中，进行如下的配置</h3><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/image-20221214203516643.png" alt="image-20221214203516643"></p><h3 id="3-2-重启-Typora-使设置生效"><a href="#3-2-重启-Typora-使设置生效" class="headerlink" title="3.2 重启 Typora,使设置生效"></a>3.2 重启 Typora,使设置生效</h3><h3 id="3-3-进入-typora-编辑区域-直接拖放或者粘贴图片-即可完成图片的自动上传并自动替换为-COS-文件链接"><a href="#3-3-进入-typora-编辑区域-直接拖放或者粘贴图片-即可完成图片的自动上传并自动替换为-COS-文件链接" class="headerlink" title="3.3 进入 typora 编辑区域,直接拖放或者粘贴图片,即可完成图片的自动上传并自动替换为 COS 文件链接"></a>3.3 进入 typora 编辑区域,直接拖放或者粘贴图片,即可完成图片的自动上传并自动替换为 COS 文件链接</h3><p><img src="https://typora-1311348804.cos.ap-guangzhou.myqcloud.com/img_typora/image-20221214203642931.png" alt="image-20221214203642931"></p>]]></content>
      
      
      <categories>
          
          <category> 学习技巧 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习技巧 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>day01-在网站中添加React</title>
      <link href="/2022/10/26/day01-zai-wang-zhan-zhong-tian-jia-react/"/>
      <url>/2022/10/26/day01-zai-wang-zhan-zhong-tian-jia-react/</url>
      
        <content type="html"><![CDATA[<p>day01-在网站中添加 React</p><span id="more"></span><h1 id="day01-在网站中添加-React"><a href="#day01-在网站中添加-React" class="headerlink" title="day01-在网站中添加 React"></a>day01-在网站中添加 React</h1><h2 id="一、一分钟用上-React"><a href="#一、一分钟用上-React" class="headerlink" title="一、一分钟用上 React"></a>一、一分钟用上 React</h2><h3 id="1-1-添加一个-dom-容器到-HTML"><a href="#1-1-添加一个-dom-容器到-HTML" class="headerlink" title="1.1 添加一个 dom 容器到 HTML"></a>1.1 添加一个 dom 容器到 HTML</h3><p>首先打开想要编辑的 HTML 页面，添加一个空的 div 标签作为标记想要用 React 显示内容的位置，如：</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">&gt;</span></span>React学习<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--此处就是防止react元素的位置 --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>结束<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-2-添加-script-标签"><a href="#1-2-添加-script-标签" class="headerlink" title="1.2 添加 script 标签"></a>1.2 添加 script 标签</h3><p>在 body 标签的最后面,添加三个 script 标签,这三个标签的意思是引入 react 元素</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 加载 React。--&gt;</span><span class="token comment">&lt;!-- 注意: 部署时，将 "development.js" 替换为 "production.min.js"。--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react@16/umd/react.development.js<span class="token punctuation">"</span></span>  <span class="token attr-name">crossorigin</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react-dom@16/umd/react-dom.development.js<span class="token punctuation">"</span></span>  <span class="token attr-name">crossorigin</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!-- 加载我们的 React 组件。--&gt;</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>like_button.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>前两个标签加载 react,第三个加载组件代码</p><h3 id="1-3-创建一个-react-组件"><a href="#1-3-创建一个-react-组件" class="headerlink" title="1.3 创建一个 react 组件"></a>1.3 创建一个 react 组件</h3><p>新建 like_button.js 的文件,将这段代码放入到文件中</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token keyword">const</span> e <span class="token operator">=</span> React<span class="token punctuation">.</span>createElement<span class="token keyword">class</span> <span class="token class-name">LikeButton</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>liked<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token string">'You liked this.'</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span>      <span class="token string">'button'</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token string">'Like'</span>    <span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这段代码的意思是定义了一个名字叫做 LikeButton 的 react 组件</p><p>在这段代码的底部,加入一下两行代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> domContainer <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#like_button_container'</span><span class="token punctuation">)</span>ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">e</span><span class="token punctuation">(</span>LikeButton<span class="token punctuation">)</span><span class="token punctuation">,</span> domContainer<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这段代码的意思是找到要渲染的容器,并渲染到页面中</p><p>渲染查看,如下图</p><p><img src="/images/1670640615816.png" alt="1670640615816"></p><p>点击 like</p><p><img src="/images/1670640629083.png" alt="1670640629083"></p><p>这样就完成了最简单的 react 项目</p><h3 id="1-4-重用一个组件"><a href="#1-4-重用一个组件" class="headerlink" title="1.4 重用一个组件"></a>1.4 重用一个组件</h3><p>可以显示多次 like 按钮</p><p>代码如下</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Add React in One Minute<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span>Add React in One Minute<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>This page demonstrates using React with no build tooling.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>React is loaded as a script tag.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>    This is the first comment.    <span class="token comment">&lt;!-- We will put our React component inside this div. --&gt;</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>like_button_container<span class="token punctuation">"</span></span> <span class="token attr-name">data-commentid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>1<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>    This is the second comment.    <span class="token comment">&lt;!-- We will put our React component inside this div. --&gt;</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>like_button_container<span class="token punctuation">"</span></span> <span class="token attr-name">data-commentid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>2<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>    This is the third comment.    <span class="token comment">&lt;!-- We will put our React component inside this div. --&gt;</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>like_button_container<span class="token punctuation">"</span></span> <span class="token attr-name">data-commentid</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>3<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- Load React. --&gt;</span>  <span class="token comment">&lt;!-- Note: when deploying, replace "development.js" with "production.min.js". --&gt;</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react@18/umd/react.development.js<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react-dom@18/umd/react-dom.development.js<span class="token punctuation">"</span></span> <span class="token attr-name">crossorigin</span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>  <span class="token comment">&lt;!-- Load our React component. --&gt;</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>like_button.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'use strict'</span><span class="token keyword">const</span> e <span class="token operator">=</span> React<span class="token punctuation">.</span>createElement<span class="token comment">// 一个类组件</span><span class="token keyword">class</span> <span class="token class-name">LikeButton</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>liked<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token string">'You liked comment number '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>commentID    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span>      <span class="token string">'button'</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token string">'Like'</span>    <span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token comment">// 得到所有的dom容器,并遍历他们</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'.like_button_container'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">domContainer</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// Read the comment ID from a data-* attribute.</span>  <span class="token keyword">const</span> commentID <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>domContainer<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>commentid<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>domContainer<span class="token punctuation">)</span>  root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token function">e</span><span class="token punctuation">(</span>LikeButton<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">commentID</span><span class="token operator">:</span> commentID <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="1-5-为生产环境压缩代码"><a href="#1-5-为生产环境压缩代码" class="headerlink" title="1.5 为生产环境压缩代码"></a>1.5 为生产环境压缩代码</h3><p>将网站部署之前,需要将未经压缩的代码进项压缩,可以使用以 production.min.js 结尾的版本,替换如如下代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/react@16/umd/react.production.min.js"</span> crossorigin<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"</span> crossorigin<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>这里是一个代码压缩的方式:<a href="https://gist.github.com/gaearon/42a2ffa41b8319948f9be4076286e1f3">gist.github.com</a></p><h3 id="1-6-使用-react-和-jsx"><a href="#1-6-使用-react-和-jsx" class="headerlink" title="1.6 使用 react 和 jsx"></a>1.6 使用 react 和 jsx</h3><p>上面的例子中,我们使用了浏览器原生的特性,因此我们需要使用一下的代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 将createElement改名字改为e</span><span class="token keyword">const</span> e <span class="token operator">=</span> React<span class="token punctuation">.</span>createElement<span class="token comment">// 显示一个 "Like" &lt;button&gt;</span><span class="token comment">// 通过e这个函数,渲染一个名字为button,内容为like的有点击事件的标签</span><span class="token keyword">return</span> <span class="token function">e</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token function-variable function">onClick</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'Like'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果使用 JSX 之后,可以直接斜撑下面的这种形式</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">return</span> <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">liked</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>Like<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>但是直接将其修改成是不能成功的,需要在香蜜里面添加以下这个 script 标签</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/@babel/standalone/babel.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>下面就可以在 script 里面使用 jsx 了,方法是给 script 添加 type=”text/babel”属性</p><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span> <span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Hello World<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- 引入react --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react@18/umd/react.development.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- 引入reactdom --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/react-dom@18/umd/react-dom.development.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!-- 引入babel转义 --&gt;</span>    <span class="token comment">&lt;!-- Don't use this in production: --&gt;</span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/@babel/standalone/babel.min.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/babel<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">      <span class="token keyword">function</span> <span class="token function">MyApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Hello<span class="token punctuation">,</span> world<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>      <span class="token punctuation">}</span>      <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>      <span class="token keyword">const</span> root <span class="token operator">=</span> ReactDOM<span class="token punctuation">.</span><span class="token function">createRoot</span><span class="token punctuation">(</span>container<span class="token punctuation">)</span>      root<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>MyApp <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">)</span>    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>    <span class="token comment">&lt;!--      Note: this page is a great way to try React but it's not suitable for production.      It slowly compiles JSX with Babel in the browser and uses a large development build of React.      Read this section for a production-ready setup with JSX:      https://reactjs.org/docs/add-react-to-a-website.html#add-jsx-to-a-project      In a larger project, you can use an integrated toolchain that includes JSX instead:      https://reactjs.org/docs/create-a-new-react-app.html      You can also use React without JSX, in which case you can remove Babel:      https://reactjs.org/docs/react-without-jsx.html    --&gt;</span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这种方式只是适合简单的实例,不适用于生产环境,下面我将会使用 jsx 预处理器来自动转换所有的 script 内容</p><h3 id="1-7-将-jsx-添加到项目"><a href="#1-7-将-jsx-添加到项目" class="headerlink" title="1.7 将 jsx 添加到项目"></a>1.7 将 jsx 添加到项目</h3><p>将 jsx 添加到项目需要的条件很多,位移需要的是在电脑上安装了 node.js</p><p>需要执行的步骤有两步</p><pre class="line-numbers language-node" data-language="node"><code class="language-node">npm init -ynpm install babel-cli@6 babel-preset-react-app@3<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><blockquote><p>这里使用 npm 只是用来安装 jsx 预处理器,也可以使用 yarn 来安装</p></blockquote><h3 id="1-8-运行-jsx-与处理器"><a href="#1-8-运行-jsx-与处理器" class="headerlink" title="1.8 运行 jsx 与处理器"></a>1.8 运行 jsx 与处理器</h3><p>创建一个名为 src 的文件夹并执行这个终端命令</p><pre class="line-numbers language-node" data-language="node"><code class="language-node">npx babel --watch src --out-dir . --presets react-app/prod<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><blockquote><p>注意:这里的 npx 不是拼写错误,他是 npm5.2 附带的 package 运行工具</p></blockquote><p>不要等待它运行结束–这个命令启动了一个对 jsx 的自动监听器</p><p>此时可以使用下面的代码创建一个 src/like_button.js 文件,监听器会创建一个与处理过的 like_button.js,包含了适用于普通浏览器的 js 代码,后续转换将自动进行.</p>]]></content>
      
      
      <categories>
          
          <category> react文档重读 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>docker容器式安装mysql</title>
      <link href="/2022/10/23/shi-docker-rong-qi-shi-an-zhuang-mysql/"/>
      <url>/2022/10/23/shi-docker-rong-qi-shi-an-zhuang-mysql/</url>
      
        <content type="html"><![CDATA[<p>公共组件的封装</p><span id="more"></span><h1 id="十、docker容器式安装mysql"><a href="#十、docker容器式安装mysql" class="headerlink" title="十、docker容器式安装mysql"></a>十、docker容器式安装mysql</h1><h2 id="10-1-mysql数据库-初始mysql数据库"><a href="#10-1-mysql数据库-初始mysql数据库" class="headerlink" title="10.1 mysql数据库-初始mysql数据库"></a>10.1 mysql数据库-初始mysql数据库</h2><ul><li><p>数据库的分类</p><ul><li>关系型诗句哭<ul><li>mysql（现在阶段使用最广泛的免费数据库）</li><li>sqlServer（收费）</li><li>oracle（收费）</li></ul></li><li>非关系型数据库（nosql）<ul><li>mongoDB</li><li>redis</li></ul></li></ul></li><li><p>mysql定义</p><ul><li><p>数据库是按照数据结构来组织、存储管理数据的仓库，是最流行的关系型数据库管理软件</p></li><li><p>在互联网中为了更好的管理数据，将数据存储在数据库中，用户可用在前端页面实现对数据库数据的增删改查</p><p><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220418115324732.png" alt="image-20220418115324732"><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220418115345825.png" alt="image-20220418115345825"></p></li></ul></li><li><p>mysql数据结构</p><ul><li><p>按照数据的不同分类进行换分，与工作中经常使用的excel表格非常相似</p><p><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220418121434337.png" alt="image-20220418121434337"></p></li></ul></li><li><p>mysql术语</p><ul><li>数据库（database）===》文档</li><li>数据表（table）===》 工作表</li><li>数据行（row）===》每行数据</li><li>字段（field）===》每列数据</li></ul></li></ul><h2 id="10-2-docker容器化安装mysql"><a href="#10-2-docker容器化安装mysql" class="headerlink" title="10.2 docker容器化安装mysql"></a>10.2 docker容器化安装mysql</h2><ul><li><p>最简便的方式安装mysql服务器【容器化部署】 直接复制粘贴到终端</p><pre class="line-numbers language-none"><code class="language-none">docker run -p 3306:3306 --name xdclass_mysql \-v /usr/local/docker/mysql/conf:/etc/mysql \-v /usr/local/docker/mysql/logs:/var/log/mysql \-v /usr/local/docker/mysql/data:/var/lib/mysql \-e MYSQL_ROOT_PASSWORD=xdclass.net168 \-d mysql:5.7<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>核心点</p><ul><li>配置用户名+密码,看上面的代码可以看出 名字是xdclass_mysql  密码是xdclass.net168 ,这些都是可以自己换的</li><li>配置持久化路径，就是-v的后面的内容，意思是将文件路径映射到服务器的路径</li></ul></li><li><p>其他安装方式的坑</p><ul><li>企业都是Linux安装mysql,大家就尽量不要在window上安装</li><li>源码安装启动成功却访问不成功,mysql只能当前ip连接,不支持远程连接</li><li>源码缺少包/yum源问题</li><li>开发腾讯云对应的防火墙设置处的3306端口,默认是mysql的连接端口</li></ul></li><li><p>建议安装一个客户端,操控数据库的客户端,对于win系统可以使用navicat,百度可以找到</p></li></ul><h1 id="十一、可视化工具和sql语句的基本使用"><a href="#十一、可视化工具和sql语句的基本使用" class="headerlink" title="十一、可视化工具和sql语句的基本使用"></a>十一、可视化工具和sql语句的基本使用</h1><h2 id="11-1-创建数据库和数据表"><a href="#11-1-创建数据库和数据表" class="headerlink" title="11.1 创建数据库和数据表"></a>11.1 创建数据库和数据表</h2><ul><li>数据库和数据表的创建</li><li>创建数据<ul><li>需要注意的是需要给某个键指定主键，通常是id，并且给他设置自增</li></ul></li><li>我们连接好数据库之后，一般也会有内置的数据库，他们的信息分别是<ul><li>informance——schema：所有其他数据库的信息</li><li>mysql：数据库核心,账户和权限信息,事件的定义信息,日志信息,帮助信息等等</li><li>performance_shcema: 性能监控和状态信息</li><li>sys:把information_shcema和performance_shcema结合,提供mysql的性能信息</li></ul></li></ul><h2 id="11-2-sql语句的使用-上"><a href="#11-2-sql语句的使用-上" class="headerlink" title="11.2 sql语句的使用(上)"></a>11.2 sql语句的使用(上)</h2><ul><li><p>insert into(插入语句)</p><ul><li><p>语法</p><pre class="line-numbers language-none"><code class="language-none">insert into 表名(字段1,字段2) value(值1,值2)<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>示例</p><pre class="line-numbers language-none"><code class="language-none">insert into user(name,pwd,head_img) value("老王","123","图片地址")<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><p>delete(删除语句)</p><ul><li><p>语法</p><pre class="line-numbers language-none"><code class="language-none">delete from 表名 where id=?<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>示例</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">delete</span> from user where id<span class="token operator">=</span><span class="token number">1</span><span class="token comment">// 删除user表中id是1的数据</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>注意</p><p>这个语句一般不在正式的数据库中使用,通常我们在数据库删除一个数据是修改中合格数据库中的某个标识为0,或者1,使用的一般是update语句,后面会说</p></li></ul></li><li><p>update(更新语句)</p><ul><li><p>语法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">update 表名 <span class="token keyword">set</span> 字段<span class="token number">1</span><span class="token operator">=</span><span class="token string">"值1"</span><span class="token punctuation">,</span>字段<span class="token number">2</span><span class="token operator">=</span><span class="token string">"值2"</span> where id<span class="token operator">=</span><span class="token operator">?</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>示例</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">update user <span class="token keyword">set</span> username<span class="token operator">=</span><span class="token string">"李四"</span><span class="token punctuation">,</span>pwd<span class="token operator">=</span><span class="token string">"123456"</span> where id<span class="token operator">=</span><span class="token number">2</span><span class="token comment">// 更新id为2的用户名和密码</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul></li><li><p>select(查询语句)</p><ul><li><p>语法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">select <span class="token operator">*</span> from 表名<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>示例</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">select <span class="token operator">*</span> from user<span class="token comment">// 选取user表中的所有数据</span>select name<span class="token punctuation">,</span>pwd from user<span class="token comment">// 查询user表中的所有的name和pwd字段</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h2 id="11-3-sql语句的使用-下"><a href="#11-3-sql语句的使用-下" class="headerlink" title="11.3 sql语句的使用(下)"></a>11.3 sql语句的使用(下)</h2><ul><li><p>where语法和and,or运算符</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 查询id大于3和del等于1的数据</span>select <span class="token operator">*</span> from user where id<span class="token operator">&gt;</span><span class="token number">3</span> and del<span class="token operator">=</span><span class="token number">1</span><span class="token comment">// 查询id大于3或者del等于1的数据</span>select <span class="token operator">*</span> from user where id<span class="token operator">&gt;</span><span class="token number">3</span> or del<span class="token operator">=</span><span class="token number">1</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>排序 order by</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 以id升序排序,默认就是升序,asc可以不加</span>select <span class="token operator">*</span> from user order by id<span class="token comment">// 以id降序排序</span>select <span class="token operator">*</span> from user order by id desc<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>统计count(*)</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 查询user表中del字段为0的总条数</span>select <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> from user where id<span class="token operator">=</span><span class="token number">0</span>             <span class="token comment">// 通过as给总条数设置别名</span>select <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> total from user where id<span class="token operator">=</span><span class="token number">0</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>分页limit(查询大量数据时必须使用分页查询)</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 从索引为i开始查询,查询n条</span>select <span class="token operator">*</span> from user limit i<span class="token punctuation">,</span>n<span class="token comment">// 实现分页</span>select <span class="token operator">*</span> from user <span class="token function">limit</span> <span class="token punctuation">(</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>n<span class="token punctuation">,</span>n<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul>]]></content>
      
      
      <categories>
          
          <category> 全栈学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nodejs后端学习-基础</title>
      <link href="/2022/10/17/nodejs-hou-duan-xue-xi-ji-chu/"/>
      <url>/2022/10/17/nodejs-hou-duan-xue-xi-ji-chu/</url>
      
        <content type="html"><![CDATA[<p>nodejs后端学习-基础</p><span id="more"></span><h1 id="nodejs学习笔记"><a href="#nodejs学习笔记" class="headerlink" title="nodejs学习笔记"></a>nodejs学习笔记</h1><h1 id="一、Node基础，走进node的世界"><a href="#一、Node基础，走进node的世界" class="headerlink" title="一、Node基础，走进node的世界"></a>一、Node基础，走进node的世界</h1><p>node.js是一个基于chrome v8引擎的js的运行环境,是用来方便前端工程师进行后端开发的语言</p><h3 id="commonjs规范"><a href="#commonjs规范" class="headerlink" title="commonjs规范"></a>commonjs规范</h3><ul><li><p>commonjs是一种广泛使用的js模块化规范,核心思想是通过require来同步的加载依赖的其他模块,通过module.exports导出需要暴露的接口</p></li><li><p>使用演示</p><ul><li>```js<br>const xd = ‘小滴课堂’<br>function fun(){<br>console.log(‘你好,commonjs’)<br>}<br>module.exports = {<br>xd,<br>fun,<br>}<pre class="line-numbers language-none"><code class="language-none">- ```js  const aData = require('./a')  aData.fun()  console.log(aData.xd)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p>node需要使用commonjs的原因</p><ul><li>js自身并没有模块管理系统,不具备封闭的作用域和依赖管理</li><li>缺少文件系统的io流api</li><li>不具备包管理系统</li></ul></li><li><p>commonjs和ES6的区别</p><ul><li>commonjs输出的是值的拷贝,ES6模块输出的是值的引用</li><li>commonjs模块运行的时候加载,ES6模块是编译的时候输出接口</li><li>commonjs模块的require是同步加载模块,ES6模块的import命令是异步加载,有一个独立的模块依赖解析的阶段</li></ul></li></ul><h1 id="二、Node基础-核心模块之文件系统fs模块的使用"><a href="#二、Node基础-核心模块之文件系统fs模块的使用" class="headerlink" title="二、Node基础-核心模块之文件系统fs模块的使用"></a>二、Node基础-核心模块之文件系统fs模块的使用</h1><h2 id="2-1-fs模块-读取文件内容"><a href="#2-1-fs模块-读取文件内容" class="headerlink" title="2.1 fs模块-读取文件内容"></a>2.1 fs模块-读取文件内容</h2><ul><li><p>什么是fs模块</p><ul><li>node提供的用来操作文件的模块，模块里面有很多的属性和方法，用于处理文件</li></ul></li><li><p>fs读取文件内容</p><ul><li><p>方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// path:路径</span><span class="token comment">// options:编码格式</span><span class="token comment">// callback:回调函数</span>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>options<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>使用</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">,</span><span class="token string">'utf8'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>        <span class="token keyword">return</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>注意</p><p>fs.readFile返回数据之前将文件的内容全部读取到内存之中,因此对于大文件最好使用流来读取文件的内容</p></li></ul></li></ul><h2 id="2-2-写入文件内容"><a href="#2-2-写入文件内容" class="headerlink" title="2.2 写入文件内容"></a>2.2 写入文件内容</h2><ul><li><p>方法 fs.writeFile</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// path:路径</span><span class="token comment">// content:写入内容</span><span class="token comment">// callback:回调函数</span>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>content<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>使用</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">,</span><span class="token string">'我不想去工地了'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件写入成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>追加文件内容,使用fs.appendFile</p><ul><li><p>方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// path:路径</span><span class="token comment">// content:写入内容</span><span class="token comment">// callback:回调函数</span>fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>content<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>使用</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">,</span><span class="token string">'分分钟都盼望跟他见面'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'追加文件内容成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>fs.模块的其他方法</p></li></ul></li></ul><h2 id="2-3-个人信息表案例"><a href="#2-3-个人信息表案例" class="headerlink" title="2.3 个人信息表案例"></a>2.3 个人信息表案例</h2><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./b.txt'</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> str <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">':'</span><span class="token punctuation">)</span>    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./b.txt'</span><span class="token punctuation">,</span>str<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件修改成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="三、Node-path模块的使用"><a href="#三、Node-path模块的使用" class="headerlink" title="三、Node-path模块的使用"></a>三、Node-path模块的使用</h1><h2 id="3-1相对路径问题"><a href="#3-1相对路径问题" class="headerlink" title="3.1相对路径问题"></a>3.1相对路径问题</h2><ul><li>在进行路径拼接的时候容易出现路径拼接错误</li></ul><p>解决方法</p><ul><li><p>使用绝对路径解决</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/Users/bigz/Desktop/test_node/test.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span> <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// 如果读取成功，err的值为nul，失败时，err的值为错误对象</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token keyword">return</span>  <span class="token punctuation">}</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>可以使用__dirname来代替绝对路径的字段</p><p>__dirname用来指代当前执行目录的绝对路径</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">gator<span class="token operator">-</span>app  ├──index<span class="token punctuation">.</span>js  ├──<span class="token keyword">public</span>  ├──src  │  ├──helpers<span class="token punctuation">.</span>js  │  └──api  │      └──crocodile<span class="token punctuation">.</span>js  ├──cronjobs  │  ├──swamp<span class="token operator">-</span>pix  │  └──get<span class="token operator">-</span>latest<span class="token operator">-</span>gators<span class="token punctuation">.</span>js  └──<span class="token keyword">package</span><span class="token punctuation">.</span>json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>运行crocodile.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>      <span class="token comment">// "/Users/Sam/gator-app/src/api"</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// "/Users/Sam/gator-app"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>上面的可以改为</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/test.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span> <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// 如果读取成功，err的值为nul，失败时，err的值为错误对象</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token keyword">return</span>  <span class="token punctuation">}</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="3-2-认识path路径模块和使用"><a href="#3-2-认识path路径模块和使用" class="headerlink" title="3.2 认识path路径模块和使用"></a>3.2 认识path路径模块和使用</h2><ul><li><p>path模块的使用</p></li><li><p>路径的拼接方法</p><ul><li><p>方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 路径的个数没限制</span><span class="token keyword">const</span> path<span class="token operator">=</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token comment">// a/b/c</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li><li><p>使用</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'/test.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span> <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// 如果读取成功，err的值为nul，失败时，err的值为错误对象</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>    <span class="token keyword">return</span>  <span class="token punctuation">}</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 也可以进行路径跨域拼接</span><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../a.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h2 id="3-3-文件路径和扩展名的获取"><a href="#3-3-文件路径和扩展名的获取" class="headerlink" title="3.3 文件路径和扩展名的获取"></a>3.3 文件路径和扩展名的获取</h2><ul><li><p>文件路径和扩展名的获取</p></li><li><p>获取文件中最后一部分 path.basename()</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 获取文件名和扩展名,没有扩展名就不获取</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/test/something'</span><span class="token punctuation">)</span> <span class="token comment">//something</span><span class="token comment">// 获取文件名和扩展名 </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/test/something.txt'</span><span class="token punctuation">)</span> <span class="token comment">//something.txt</span><span class="token comment">// 第二个参数是扩展名,跨域剔除扩展名</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/test/something.txt'</span><span class="token punctuation">,</span> <span class="token string">'.txt'</span><span class="token punctuation">)</span> <span class="token comment">//something</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>获取路径中的目录部分dirname</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 路径的目录部分</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token string">'/test/something'</span><span class="token punctuation">)</span> <span class="token comment">// /test</span><span class="token comment">// 路径的目录部分</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token string">'/test/something/file.txt'</span><span class="token punctuation">)</span> <span class="token comment">// /test/something</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>获取文件中的扩展名部分 extname</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 就是获取文件的扩展名</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'/test/something'</span><span class="token punctuation">)</span> <span class="token comment">// ''</span><span class="token comment">// 就是获取文件的扩展名</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'/test/something/file.txt'</span><span class="token punctuation">)</span> <span class="token comment">// '.txt'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h1 id="四、Node基础-http模块的使用"><a href="#四、Node基础-http模块的使用" class="headerlink" title="四、Node基础-http模块的使用"></a>四、Node基础-http模块的使用</h1><h2 id="4-1-快速理解http协议"><a href="#4-1-快速理解http协议" class="headerlink" title="4.1 快速理解http协议"></a>4.1 快速理解http协议</h2><ul><li><p>什么是http协议</p><ul><li>超文本传输协议,是web联网的基础,也是移动或者PC联网常用的协议之一,HTTP是建立在TCP协议之上的一种应用</li><li>HTTP连接最显著的特点是客户端发送的每次请求都需要服务器的响应请求,从建立连接到关闭连接的过程称之为一次连接</li><li>HTTP请求—-&gt;HTTP响应</li></ul></li><li><p>http消息结构</p><ul><li><p>请求报文</p><p><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220412142940655.png" alt="image-20220412142940655"></p></li></ul></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">请求行：请求方法 <span class="token constant">URL</span>地址 协议名<span class="token literal-property property">请求头：报文头包含若干个属性，格式为“属性名</span><span class="token operator">:</span>属性值”，服务端据此获取客户端的基本信息请求体：请求的参数，可是json对象，也可以是前端表单生成的key<span class="token operator">=</span>value<span class="token operator">&amp;</span>key<span class="token operator">=</span>value的字符串<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>响应报文<ul><li><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220412143149324.png" alt="image-20220412143149324"></li></ul></li></ul><pre class="line-numbers language-none"><code class="language-none">响应行：报文协议及版本 状态码响应头：报文头包含若干个属性，格式为“属性名:属性值”响应正文：响应报文体，我们需要的内容，多种形式比如html、json、图片、视频文件等<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>请求方法<ul><li>GET: 向服务器发送请求获取资源</li><li>POST: 向服务器提交数据</li><li>Head: 与get类似,返回响应没有具体的内容,用于获取头部信息</li></ul></li><li>状态码<ul><li>1xx<ul><li>100 收到请求,比较少用</li><li>101 切换请求的协议</li></ul></li><li>2xx<ul><li>请求成功,比较常见的是200</li></ul></li><li>3xx<ul><li>重定向和协商缓存</li><li>301:永久重定向</li><li>302:临时重定向</li><li>304:命中协商缓存</li></ul></li><li>4xx<ul><li>400 请求出错,比如语法协议出错</li><li>403: 没有访问权限</li><li>404: 没有找到该资源</li><li>405: 不允许此方法进行提交</li></ul></li><li>5xx<ul><li>500: 服务器内部报错,完成不了请求</li><li>503: 服务器宕机</li></ul></li></ul></li></ul><h2 id="4-2-Node中的http谋爱的相关知识点"><a href="#4-2-Node中的http谋爱的相关知识点" class="headerlink" title="4.2 Node中的http谋爱的相关知识点"></a>4.2 Node中的http谋爱的相关知识点</h2><ul><li>http模块<ul><li>用来创建web服务器,使用http.createServer()来创建web服务器实例</li></ul></li><li>ip<ul><li>每个服务器都有自己的一个ip,本地的是127.0.0.1或者localhost</li></ul></li><li>域名<ul><li>ip地址不方便记忆,现在诞生了域名来替换ip的访问</li><li>ip地址和域名是一对多的关系,在DNS中进行保存</li></ul></li><li>端口<ul><li>端口是ip地址的窗口,不同的端口提供不同的服务</li></ul></li></ul><h2 id="4-3-http创建一个本地服务器"><a href="#4-3-http创建一个本地服务器" class="headerlink" title="4.3 http创建一个本地服务器"></a>4.3 http创建一个本地服务器</h2><ul><li><p>http模块创建一个本地服务器</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 监听客户端的请求</span>app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token comment">// 输出请求的url地址</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 设置响应头 防止乱码</span>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span>    <span class="token comment">// 返回响应内容</span>    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="4-4-根据请求路径返回不同的资源内容"><a href="#4-4-根据请求路径返回不同的资源内容" class="headerlink" title="4.4 根据请求路径返回不同的资源内容"></a>4.4 根据请求路径返回不同的资源内容</h2><ul><li>根据不同的url返回不同的内容</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> mess <span class="token operator">=</span> <span class="token string">'404 页面未找到'</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/'</span> <span class="token operator">||</span> req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/home'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        mess <span class="token operator">=</span> <span class="token string">'&lt;h1&gt;首页&lt;/h1&gt;'</span>    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        mess <span class="token operator">=</span> <span class="token string">'&lt;h1&gt;登录页&lt;/h1&gt;'</span>    <span class="token punctuation">}</span>    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span>    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>mess<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="五、核心模块Buffer和Stream模块"><a href="#五、核心模块Buffer和Stream模块" class="headerlink" title="五、核心模块Buffer和Stream模块"></a>五、核心模块Buffer和Stream模块</h1><h2 id="5-1-剖析Buffer缓冲区"><a href="#5-1-剖析Buffer缓冲区" class="headerlink" title="5.1 剖析Buffer缓冲区"></a>5.1 剖析Buffer缓冲区</h2><ul><li><p>buffer定义</p><ul><li>Buffer是内存区域，是固定大小的内存块，可以将buffer视作数组，每个元素代表一个数据字节，由buffer类实现</li></ul></li><li><p>Buffer的数据形式</p><ul><li><p>保存在Buffer中的数据是用16进制的形式展示的，更加简短，但是计算机底层处理的还是二进制数据</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'nihao'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;Buffer 6e 69 68 61 6f&gt;</span><span class="token keyword">const</span> buf1 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;Buffer e4 bd a0 e5 a5 bd&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>由上述可以看出 对于英文字符 一个字符对应的是一个16进制的数字, 而对于汉字来说,一个字符是三个16进制的数字表示</p></li></ul><p><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413221013999.png" alt="image-20220413221013999"></p></li></ul><p><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413120543295.png" alt="image-20220413120543295"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 内存的单位</span>1bit <span class="token number">1</span>位8bit <span class="token operator">=</span> 1byte  <span class="token number">1</span>字节1024byte <span class="token operator">=</span> 1kb1024kb <span class="token operator">=</span> 1mb1024mb <span class="token operator">=</span> 1gb1024gb <span class="token operator">=</span> 1tb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>为什么需要Buffer<ul><li>帮助开发者处理二进制数据,传统上数组只是处理字符串,而不是处理二进制的数据,例如图片音视频等</li><li>当文件进行IO操作的时候，输出的速度大于输入的速度，就会讲数据存储到Buffer中</li><li><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413213228294.png" alt="image-20220413213228294"></li></ul></li></ul><h2 id="5-2-Buffer的使用"><a href="#5-2-Buffer的使用" class="headerlink" title="5.2 Buffer的使用"></a>5.2 Buffer的使用</h2><ul><li><p>Buffer.from  将字符串转换为Buffer</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'xiaodiketang'</span><span class="token punctuation">)</span><span class="token comment">// &lt;Buffer 78 69 61 6f 64 69 6b 65 74 61 6e 67&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>Buffer.alloc(size)  创建一个指定大小的Buffer,无法调整大小,  但是指定的是一个空的buffer 可以看出内容是00</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token comment">//&lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>Buffer.allocUnsafe(size) 在Buffer池中使用原有的Buffer,可能含有敏感的数据,但是性能会更好.但是buffer中有的不是00</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token comment">//&lt;Buffer 00 00 00 00 00 00 00 00 64 69&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>Buffer.toString   将buffer转换为字符串</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> buffer <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'小滴课堂'</span><span class="token punctuation">)</span><span class="token keyword">const</span> str <span class="token operator">=</span> buffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// 小滴课堂</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="5-3-深入理解stream流"><a href="#5-3-深入理解stream流" class="headerlink" title="5.3 深入理解stream流"></a>5.3 深入理解stream流</h2><ul><li>stream是什么<ul><li>是一种高校的处理读写io操作,网络通讯,或者任何类型的端到端的信息交换的方式</li><li>在传统的方式中,读取文件的时候,会将文件从头到尾读入内存(buffer)中,然后进行处理</li><li>使用流,则可以逐个片段的读取并处理(而无需全部保存在内存中)</li><li>如下图所示</li></ul></li></ul><p><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413152709631.png" alt="image-20220413152709631"></p><p><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413153202765.png" alt="image-20220413153202765"></p><h2 id="5-4-stream的使用"><a href="#5-4-stream的使用" class="headerlink" title="5.4 stream的使用"></a>5.4 stream的使用</h2><ul><li><p>创建可读流 createReadStream</p></li><li><p>创建可写流 createWriteStream</p></li><li><p>实现</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 通过下面的方式,可以完成一个文件的复制</span><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token comment">// 创建可读流</span><span class="token keyword">const</span> flowa <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'/a.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 创建可写流</span><span class="token keyword">const</span> flowb <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'/b.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 将可读流注入到可写流</span>flowa<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>flowb<span class="token punctuation">)</span><span class="token comment">// 监听注入结束</span>flowa<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数据流向成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此时已经复制了一个文件</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h1 id="六、玩转express框架"><a href="#六、玩转express框架" class="headerlink" title="六、玩转express框架"></a>六、玩转express框架</h1><h2 id="6-1-深入理解express框架"><a href="#6-1-深入理解express框架" class="headerlink" title="6.1 深入理解express框架"></a>6.1 深入理解express框架</h2><ul><li><p>定义</p><ul><li>基于nodejs平台,快速开放极简的web开发框架</li><li>其实就是node npm包管理工具的第三方的包 可以使用express快速创建服务器</li></ul></li><li><p>其他的node框架</p><ul><li>koa2</li><li>egg</li><li>nest.js</li></ul></li><li><p>node可以通过http创建服务器,为什么还需要express呢</p><ul><li>内置http模块比较复杂,降低开发效率</li><li>express框架是局域http框架开发而来的,在创建服务器或者编写接口的时候更加方便</li></ul></li><li><p>安装</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">yarn add express <span class="token comment">// 这样就ok了</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>创建服务器</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h2 id="6-2-监听数据请求和参数处理"><a href="#6-2-监听数据请求和参数处理" class="headerlink" title="6.2 监听数据请求和参数处理"></a>6.2 监听数据请求和参数处理</h2><ul><li><p>get请求</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'&lt;h1&gt;你好&lt;/h1&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>post请求, 进行这一步操作的时候需要下载postman软件进行接口模拟,可以自行查找方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'&lt;h1&gt;你好&lt;/h1&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1&gt;这是登录页面&lt;/h1&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>postman需要了解的知识</p><ul><li>postman的安装使用</li><li>接口请求的方法设置</li><li>接口请求的参数编写</li><li>保存接口信息</li></ul></li></ul><h2 id="6-3-路由配置模块化"><a href="#6-3-路由配置模块化" class="headerlink" title="6.3 路由配置模块化"></a>6.3 路由配置模块化</h2><ul><li><p>express中的路由</p><ul><li>前端中的路由router一样,在不同的路由展示不同的内容</li><li>express中的路由就是不同路径的接口,响应客户端不同的数据</li></ul></li><li><p>创建路由模块</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建路由模块</span><span class="token comment">// 创建路由接口</span>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'登录'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/userInfo'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'获取用户数据'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 导出路由模块</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>使用中间件注册路由模块</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./03.创建路由模块'</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h1 id="七、express中间件"><a href="#七、express中间件" class="headerlink" title="七、express中间件"></a>七、express中间件</h1><h2 id="7-1-初识中间件"><a href="#7-1-初识中间件" class="headerlink" title="7.1 初识中间件"></a>7.1 初识中间件</h2><ul><li><p>中间件</p><ul><li><p>业务逻辑中的中间换届</p></li><li><p>例子</p><p><img src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220414112254403.png" alt="image-20220414112254403"></p></li><li><p>如果在阀门注入珍珠，name这个阀门下游的所有东西都会含有这个新添加的珍珠原料，仪表可以检测到当前的管道流量</p></li><li><p>在express程序中，可以通过app.use这个方法向管道中添加新的中间件,比如有些接口需要token验证,则可以使用use方法插入token校验中间件,或者在业务逻辑的最下游加上错误中间件,根据不同的错误类型抛出对应的错误信息</p></li><li><p>对于每一个中间件则需要在执行完逻辑之后调用next(),让程序继续执行下去</p></li></ul></li></ul><h2 id="7-2-全局和局部中间件"><a href="#7-2-全局和局部中间件" class="headerlink" title="7.2 全局和局部中间件"></a>7.2 全局和局部中间件</h2><ul><li><p>中间件函数</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 中间件是一个函数,有三个参数,请求参数,相应参数以及next参数,用于放行</span><span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'一个中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> middle<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>在主函数中引入</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 引入中间件</span><span class="token keyword">const</span> middle <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./01.中间件函数'</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middle<span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>注册全局生效的中间件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是一个中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">/**     * 逻辑处理     */</span>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 必须要调用这个next 进行放行</span><span class="token punctuation">}</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middle<span class="token punctuation">)</span><span class="token comment">// 登录接口</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'登录'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 注册接口</span>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login/register'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'注册'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 监听3000端口</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>定义公共的属性和方法,对于req和res是共享的</p></li><li><p>定义多个中间件,按照注册的顺序执行</p></li><li><p>具备生效的中间件,不是使用app.use注册的中间件</p><p>这个设置的是只有在访问user/login的时候才会触发这个中间件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 中间件</span><span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是一个局部中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">,</span>middle<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'登录'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user/register'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'注册'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>多个局部中间件,可以在上面的请求的参数的第二个中间件参数设置为数组</p></li></ul><h2 id="7-3-常见的5种类型的中间件"><a href="#7-3-常见的5种类型的中间件" class="headerlink" title="7.3 常见的5种类型的中间件"></a>7.3 常见的5种类型的中间件</h2><ul><li><p>内置中间件</p><ul><li><p>比较重要的 </p><ul><li><p>解析json数据的中间件 </p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>解析url-encoded的中间件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extend</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li></ul></li><li><p>应用级别中间件</p><ul><li><p>全局中间件和局部中间件直接绑定在app的实例上,就叫做应用级别的中间件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 全局中间件</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middleware<span class="token punctuation">)</span><span class="token comment">// 局部中间件</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span>middleware<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p>路由级别中间件</p><ul><li><p>中间件绑定在路由router实例上</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middleware<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li></ul></li><li><p>错误级别中间件</p><p>全局项目中捕获错误异常,防止项目报错异常崩溃</p><p>错误中间件一般放在项目的最后,这个中间件有四个参数,第一个是err就是错误信息,后面可以通过这个错误信息来对项目的报错进行判断</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'项目发生了错误'</span><span class="token punctuation">)</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'响应成功了'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>第三方在中间件</p><ul><li><p>body-parser中间件,可以用来加载json,url-encoded数据</p></li><li><p>下载安装</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">npm install body<span class="token operator">-</span>parser<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>使用</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 用于解析json数据</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extend</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 解析url-encoded数据</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h2 id="7-4-中间件注意事项和自定义中间件"><a href="#7-4-中间件注意事项和自定义中间件" class="headerlink" title="7.4 中间件注意事项和自定义中间件"></a>7.4 中间件注意事项和自定义中间件</h2><ul><li><p>注意事项</p><ul><li>一定要遭注册路由之前注册中间件,否则中间件不会生效</li><li>客户端发起的请求,服务端可以使用多个中间件进行处理</li><li>在中间件处理函数中,写了业务逻辑的代码之后一定要在最后调用next()除了错误中间件</li><li>在调用next之后,不要在写额外的逻辑代码</li><li>多个中间件是可以共享req,res对象的</li></ul></li><li><p>自定义解析表单数据的中间件</p><ul><li>创建自定义中间件文件</li><li>监听接受客户端数据的req.data时间</li><li>监听客户端数据接受完成的req.end时间</li><li>引入querystringfy模块解析请求体的数据</li><li>请求数据解析完成之后,将req.body替换成解析的数据</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token function-variable function">middleware</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> mess <span class="token operator">=</span> <span class="token string">''</span>    <span class="token comment">// 监听data事件,将接受到的内容拼接到信息记录下来</span>    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>        mess <span class="token operator">+=</span> val    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token comment">// 监听req的end事件,利用qs模块进行解析</span>    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>        req<span class="token punctuation">.</span>body <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>mess<span class="token punctuation">)</span>        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token comment">//导出这个中间件</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> middleware<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul><h1 id="八、玩转express框架开发-接口篇"><a href="#八、玩转express框架开发-接口篇" class="headerlink" title="八、玩转express框架开发-接口篇"></a>八、玩转express框架开发-接口篇</h1><h2 id="8-1-后端接口的编写"><a href="#8-1-后端接口的编写" class="headerlink" title="8.1 后端接口的编写"></a>8.1 后端接口的编写</h2><ul><li><p>首先需要对项目进行一个简单的设计</p><ul><li>有一个主要的app.js入口文件,负责服务器的启动.</li><li>针对不同的请求,需要不同的后端路由文件,后面需要引入到appjs中注册</li><li>主要中间件,处理get请求和post请求的参数</li></ul></li><li><p>app.js主文件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 引入路由</span><span class="token keyword">const</span> userRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router/userRouter'</span><span class="token punctuation">)</span><span class="token keyword">const</span> courseRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router/courseRouter'</span><span class="token punctuation">)</span><span class="token comment">// 处理路由中间件</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extended</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 注册路由</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api/v1/user'</span><span class="token punctuation">,</span>userRouter<span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api/v1/course'</span><span class="token punctuation">,</span>courseRouter<span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>其他路由文件</p><ul><li><p>courseRouter.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/** * 课程查询接口 */</span>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/find'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">const</span> query <span class="token operator">=</span> req<span class="token punctuation">.</span>query    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        <span class="token literal-property property">code</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>        <span class="token literal-property property">data</span><span class="token operator">:</span>query    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>userRouter.js</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">/** * 登录接口 */</span>router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> <span class="token punctuation">{</span>username<span class="token punctuation">,</span>password<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body <span class="token comment">// 解析username和密码数据</span>    <span class="token keyword">let</span> mess <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1&gt;登录成功,用户名是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,密码是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h1&gt;</span><span class="token template-punctuation string">`</span></span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mess<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">/** * 注册接口 */</span> router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/register'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> <span class="token punctuation">{</span>username<span class="token punctuation">,</span>password<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body <span class="token comment">// 解析username和密码数据</span>    <span class="token keyword">let</span> mess <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1&gt;注册成功,用户名是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,密码是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h1&gt;</span><span class="token template-punctuation string">`</span></span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mess<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li></ul><h2 id="8-2-使用cors解决跨域问题"><a href="#8-2-使用cors解决跨域问题" class="headerlink" title="8.2 使用cors解决跨域问题"></a>8.2 使用cors解决跨域问题</h2><ul><li><p>什么是跨域问题</p><ul><li>客户端的浏览器有同源策略,不同源会导致请求发生跨域,后端跨域通过相关的配置解决跨域的问题</li></ul></li><li><p>CORS</p><ul><li>是express的第三方中间件,通过安装和配置cors中间件,解决跨域问题</li></ul></li><li><p>安装</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">npm install cors<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li><li><p>配置</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li><li><p>原理</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 设置响应头</span>res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li></ul><h2 id="8-3-使用JSONP解决跨域问题"><a href="#8-3-使用JSONP解决跨域问题" class="headerlink" title="8.3 使用JSONP解决跨域问题"></a>8.3 使用JSONP解决跨域问题</h2><ul><li><p>定义</p><ul><li>利用script的src属性,请求url不存在跨域的问题,所以可以用接口传递函数拿到服务端的数据</li></ul></li><li><p>使用</p><ul><li>通过使用script标签的src属性,增加一个函数参数,请求服务端,同时在服务端拿到函数,把作为参数传入函数中,拼接成函数调用的字符串</li></ul></li><li><p>详细配置</p><ul><li><p>前端.传入的是一个函数名字</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>        <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"http://localhost:3000/api/v1/course/jsonp?callback=getData"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li><li><p>后端: 传出的是这个函数名字的调用</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * jsonp接口 */</span>router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/jsonp'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> <span class="token punctuation">{</span>callback<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">('你好')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li></ul></li><li><p>注意: 使用jsonp的方式解决跨域,只能使用get的方式</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 全栈学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> node </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>手写题汇总仓库</title>
      <link href="/2022/10/13/shou-xie-ti-hui-zong-cang-ku/"/>
      <url>/2022/10/13/shou-xie-ti-hui-zong-cang-ku/</url>
      
        <content type="html"><![CDATA[<p>手写题汇总仓库</p><span id="more"></span><p>博客内手写题汇总仓库：<a href="https://gitee.com/xiaolidu11/js-handWrite">js手写题高频: js的手写题,根据网上找的资源自己敲一遍 (gitee.com)</a></p><p>仓库内有一些手写题，未收入博客，大家可以下载仓库查看。</p><p>上述手写题多是自己搜索、书写，如发现问题，可在码云中的issues提问</p>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总11</title>
      <link href="/2022/10/12/chang-jian-shou-xie-ti-hui-zong-11/"/>
      <url>/2022/10/12/chang-jian-shou-xie-ti-hui-zong-11/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总11</p><span id="more"></span><h4 id="101-查找文章中出现频率最高的单词"><a href="#101-查找文章中出现频率最高的单词" class="headerlink" title="101.查找文章中出现频率最高的单词"></a>101.查找文章中出现频率最高的单词</h4><p>使用<code>空格+单词之间是两个空格+空格</code></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">findMostWord</span> <span class="token punctuation">(</span><span class="token parameter">article</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 合法性判断</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>article<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 如果这个没有article 就直接返回</span>  <span class="token comment">// 参数处理</span>  article <span class="token operator">=</span> article<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将其转换成小写</span>  <span class="token keyword">let</span> wordList <span class="token operator">=</span> article<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[a-z]+</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 正则表达式 匹配所有的单独的单词</span>    visited <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 访问过数组</span>    maxNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">// 最大的个数</span>    maxWord <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span> <span class="token comment">// 最大的单词</span>  article <span class="token operator">=</span> <span class="token string">" "</span> <span class="token operator">+</span> wordList<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"  "</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">;</span> <span class="token comment">// 生成新的article 中间是两个空格 两边是一个空格</span>  <span class="token comment">// 遍历判断单词出现次数</span>  wordList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历列表</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>visited<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果没有记录过</span>      <span class="token comment">// 加入 visited </span>      visited<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 加入到访问数组中</span>      <span class="token keyword">let</span> word <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">" "</span> <span class="token operator">+</span> item <span class="token operator">+</span> <span class="token string">" "</span><span class="token punctuation">,</span> <span class="token string">"g"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 生成一个新的表达式 是左右是空格里面是单词 而且是全局匹配</span>        num <span class="token operator">=</span> article<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 得到他的长度</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">&gt;</span> maxNum<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果长度大于最大的长度</span>        maxNum <span class="token operator">=</span> num<span class="token punctuation">;</span>        maxWord <span class="token operator">=</span> item<span class="token punctuation">;</span> <span class="token comment">// 修改最大的长度和最大的单词</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> maxWord <span class="token operator">+</span> <span class="token string">"  "</span> <span class="token operator">+</span> maxNum<span class="token punctuation">;</span> <span class="token comment">// 输出这个最大的长度和最大的单词</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="106-实现一个底部弹窗"><a href="#106-实现一个底部弹窗" class="headerlink" title="106.实现一个底部弹窗"></a>106.实现一个底部弹窗</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token operator">*</span> <span class="token punctuation">{</span>      <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>dialog <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> pink<span class="token punctuation">;</span>      border<span class="token operator">-</span>top<span class="token operator">-</span>left<span class="token operator">-</span>radius<span class="token operator">:</span> 30px<span class="token punctuation">;</span>      border<span class="token operator">-</span>top<span class="token operator">-</span>right<span class="token operator">-</span>radius<span class="token operator">:</span> 30px<span class="token punctuation">;</span>      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>      line<span class="token operator">-</span>height<span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> fixed<span class="token punctuation">;</span>      <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token literal-property property">transition</span><span class="token operator">:</span> all 1s linear<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>dialog <span class="token punctuation">.</span>inner <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>      <span class="token literal-property property">top</span><span class="token operator">:</span> 10px<span class="token punctuation">;</span>      <span class="token literal-property property">right</span><span class="token operator">:</span> 10px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> blue<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 20px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 20px<span class="token punctuation">;</span>      line<span class="token operator">-</span>height<span class="token operator">:</span> 20px<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn"</span><span class="token operator">&gt;</span>点击显示弹窗<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"dialog"</span><span class="token operator">&gt;</span>弹窗    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"inner"</span><span class="token operator">&gt;</span>x<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> dialog <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.dialog'</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> inner <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.inner'</span><span class="token punctuation">)</span>    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      dialog<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'translateY(0)'</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    inner<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      dialog<span class="token punctuation">.</span>style<span class="token punctuation">.</span>transform <span class="token operator">=</span> <span class="token string">'translate(0, 100%)'</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="107-实现一个对象的扁平化"><a href="#107-实现一个对象的扁平化" class="headerlink" title="107.实现一个对象的扁平化"></a>107.实现一个对象的扁平化</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>      <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      <span class="token literal-property property">h</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">i</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token literal-property property">j</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">flatten</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传入的参数是一个对象</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 结果数组 是个二维数组 key和val</span>  <span class="token keyword">function</span> <span class="token function">backTracking</span> <span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span> str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传入的参数是这个obj 还有这个str</span>    <span class="token keyword">let</span> keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token comment">// 得到所有的key</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">of</span> keys<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历这个所有的key</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果是个对象</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 判断长度是不是0</span>          <span class="token function">backTracking</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> str <span class="token operator">+</span> key<span class="token punctuation">)</span> <span class="token comment">// 如果是0 就没有点 然后继续调用这个函数</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          <span class="token function">backTracking</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> str <span class="token operator">+</span> <span class="token string">'.'</span> <span class="token operator">+</span> key<span class="token punctuation">)</span> <span class="token comment">// 不是就有.</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果不是对象 就可以放入结果数组</span>          result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>str <span class="token operator">+</span> key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>str <span class="token operator">+</span> <span class="token string">'.'</span> <span class="token operator">+</span> key<span class="token punctuation">,</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 不是0 有长度 放入结果数组</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">backTracking</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token comment">// 从二维数组生成对象</span><span class="token punctuation">}</span><span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">flatten</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总10</title>
      <link href="/2022/10/09/chang-jian-shou-xie-ti-hui-zong-10/"/>
      <url>/2022/10/09/chang-jian-shou-xie-ti-hui-zong-10/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总10</p><span id="more"></span><h4 id="91-settimeout中的this指向"><a href="#91-settimeout中的this指向" class="headerlink" title="91.settimeout中的this指向"></a>91.settimeout中的this指向</h4><p>如果settimeout中的是普通函数,this指向的是window,如果是箭头函数指向的是定义位置的this</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">20</span>    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>      <span class="token literal-property property">i</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        i <span class="token operator">=</span> <span class="token number">3</span>        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            i<span class="token operator">++</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> print1 <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">print1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 此时是在全局中调用的所以指向的是window,所以settime中的this指向的也是window  window  因为在fn内部修改了i的值也就是3 所以会打印3 然后宏任务会挂起</span>    <span class="token function">print1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 还是window 打印3 然后宏任务挂起</span>    <span class="token keyword">const</span> print2 <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 新的</span>    <span class="token function">print2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 宏任务 this挂起</span>    <span class="token comment">// 执行宏任务 3 4 5 6</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果是普通函数 还是一样</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">20</span>    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>      <span class="token literal-property property">i</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>      <span class="token function-variable function">fn</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        i <span class="token operator">=</span> <span class="token number">3</span>        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            i<span class="token operator">++</span>            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">const</span> print1 <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token function">print1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 此时是在全局中调用的所以指向的是window,所以settime中的this指向的也是window  window  因为在fn内部修改了i的值也就是3 所以会打印3 然后宏任务会挂起</span>    <span class="token function">print1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 还是window 打印3 然后宏任务挂起</span>    <span class="token keyword">const</span> print2 <span class="token operator">=</span> obj<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 新的</span>    <span class="token function">print2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 宏任务 this挂起</span>    <span class="token comment">// 执行宏任务 3 4 5 6</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="92-实现一个10s的倒计时"><a href="#92-实现一个10s的倒计时" class="headerlink" title="92.实现一个10s的倒计时"></a>92.实现一个10s的倒计时</h4><p>定义一个倒计时的函数</p><p>首先判断时间是不是0 如果是0 就退出</p><p>不是0 就把时间–</p><p>将内容改为时间</p><p>重复调用倒计时的时间</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>head lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>h5 id<span class="token operator">=</span><span class="token string">"id2"</span><span class="token operator">&gt;</span><span class="token number">10</span><span class="token operator">&lt;</span><span class="token operator">/</span>h5<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>button id<span class="token operator">=</span><span class="token string">"id1"</span> onclick<span class="token operator">=</span><span class="token string">"daojishi()"</span><span class="token operator">&gt;</span>开始倒计时<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">"text/javascript"</span><span class="token operator">&gt;</span>    <span class="token keyword">function</span> <span class="token function">daojishi</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">var</span> starttime <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"id2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">;</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>starttime <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token function">setTimeout</span><span class="token punctuation">(</span>daojishi<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      starttime<span class="token operator">--</span><span class="token punctuation">;</span>      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"id2"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText <span class="token operator">=</span> starttime<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="93-实现settimeout轮询"><a href="#93-实现settimeout轮询" class="headerlink" title="93.实现settimeout轮询"></a>93.实现settimeout轮询</h4><p>为了模拟异步任务 定义一个timer方法专门产生promise对象,模拟异步任务</p><p>这个方法需要实现,在3000内是成功,3000后是失败的状态</p><p>创建一个任务队列,将十个任务放在队列中</p><p>实现轮询方法</p><p>首先判断是不是轮询完了,如果轮询完了就退出轮询</p><p>获得第一个轮询的对象</p><p>调用他的then方法,保证前一个执行完成后一次才能继续</p><p>在then方法中继续调用轮询</p><p>通过一个index变量控制轮询的位置</p><p>如果进入失败的回调函数让失败的记录++,当大于等于3的时候 就退出,否则继续调用轮询函数</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> threeCount <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">const</span> <span class="token function-variable function">timer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>threeCount <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">===</span> <span class="token number">4000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        threeCount<span class="token operator">++</span>      <span class="token punctuation">}</span>      <span class="token function">reject</span><span class="token punctuation">(</span>res <span class="token operator">+</span> <span class="token string">'失败'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">let</span> workQueue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">let</span> <span class="token function-variable function">work1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token string">'第一个任务'</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">work2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token string">'第二个任务'</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">work3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">,</span> <span class="token string">'第三个任务'</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">work4</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token string">'第四个任务'</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">work5</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token string">'第五个任务'</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">work6</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token string">'第六个任务'</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">work7</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token string">'第七个任务'</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">work8</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token string">'第八个任务'</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">work9</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token string">'第九个任务'</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">work10</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">timer</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">,</span> <span class="token string">'第十个任务'</span><span class="token punctuation">)</span>workQueue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>work1<span class="token punctuation">,</span> work2<span class="token punctuation">,</span> work3<span class="token punctuation">,</span> work4<span class="token punctuation">,</span> work5<span class="token punctuation">,</span> work6<span class="token punctuation">,</span> work7<span class="token punctuation">,</span> work8<span class="token punctuation">,</span> work9<span class="token punctuation">,</span> work10<span class="token punctuation">)</span><span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">1</span><span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token keyword">function</span> <span class="token function">lunxun</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>workQueue<span class="token punctuation">.</span>length <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">===</span> index<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> p <span class="token operator">=</span> workQueue<span class="token punctuation">[</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span>  <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>    index<span class="token operator">++</span>    <span class="token function">lunxun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>    count<span class="token operator">++</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token function">lunxun</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">lunxun</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="94-计算显示器帧率"><a href="#94-计算显示器帧率" class="headerlink" title="94.计算显示器帧率"></a>94.计算显示器帧率</h4><p>定义一个循环的函数,在里面使用<code>requestAnimationFrame</code>这个api,然后调用这个api,让timer变量++,计算当这个值等于1000的时候,需要的时间,然后计算帧率</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">let</span> startTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> endTime    <span class="token keyword">let</span> times <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">function</span> <span class="token function">loop</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        times<span class="token operator">++</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>times <span class="token operator">===</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          endTime <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1000</span> <span class="token operator">/</span> <span class="token punctuation">(</span>endTime <span class="token operator">-</span> startTime<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token function">loop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="95-大数相乘"><a href="#95-大数相乘" class="headerlink" title="95.大数相乘"></a>95.大数相乘</h4><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">multiplyBigNum</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//判断输入是不是数字</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isNaN</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">""</span><span class="token punctuation">;</span> <span class="token comment">// 不是数字 就返回空字符串</span>  num1 <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> num1  num2 <span class="token operator">=</span> <span class="token string">''</span> <span class="token operator">+</span> num2 <span class="token comment">// 转为字符串</span>  <span class="token keyword">let</span> len1 <span class="token operator">=</span> num1<span class="token punctuation">.</span>length<span class="token punctuation">,</span>    len2 <span class="token operator">=</span> num2<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token comment">// 获得两个的长度</span>  <span class="token keyword">let</span> pos <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token comment">//j放外面，先固定被乘数的一位，分别去乘乘数的每一位，更符合竖式演算法</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> len2 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 固定乘式下面的每一位</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> len1 <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 从后遍历乘式上面的每一位</span>      <span class="token comment">//两个个位数相乘，最多产生两位数，index1代表十位，index2代表个位</span>      <span class="token keyword">let</span> index1 <span class="token operator">=</span> i <span class="token operator">+</span> j<span class="token punctuation">,</span> <span class="token comment">// 十位的位置</span>        index2 <span class="token operator">=</span> i <span class="token operator">+</span> j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 个位的位置</span>      <span class="token comment">//两个个位数乘积加上当前位置个位已累积的数字，会产生进位，比如08 + 7 = 15，产生了进位1</span>      <span class="token keyword">let</span> mul <span class="token operator">=</span> num1<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">*</span> num2<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">(</span>pos<span class="token punctuation">[</span>index2<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 计算两个相乘的积与上次进位的和 如果上次进位没有 就是0</span>      <span class="token comment">//mul包含新计算的十位，加上原有的十位就是最新的十位</span>      pos<span class="token punctuation">[</span>index1<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>mul <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token punctuation">(</span>pos<span class="token punctuation">[</span>index1<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 十位就是和/10 + 上次的十位 没有就是0</span>      <span class="token comment">//mul的个位就是最新的个位</span>      pos<span class="token punctuation">[</span>index2<span class="token punctuation">]</span> <span class="token operator">=</span> mul <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 新的个位</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment">//去掉前置0</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> pos<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^0+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 去掉前置的0</span>  <span class="token comment">// return result - 0 || '0'; // 转换成数字</span>  <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token string">'9999999'</span><span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token string">'9999999'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">multiplyBigNum</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="96-实现实现-add-1-2-3"><a href="#96-实现实现-add-1-2-3" class="headerlink" title="96.实现实现 add(1)(2)(3)"></a>96.实现实现 add(1)(2)(3)</h4><p>实现思路,利用函数的科里化</p><p>add函数会返回一个新的函数,这个函数有个方法可以获得这个的和</p><p>对于返回的函数,依旧可以接受参数,,最后会返回这个外层的函数调用</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">var</span> <span class="token function-variable function">temp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">add</span><span class="token punctuation">(</span>m <span class="token operator">+</span> n<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  temp<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> m<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> temp<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 43</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>参数不固定</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">add</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token function-variable function">temp</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">...</span>m<span class="token punctuation">,</span> <span class="token operator">...</span>n<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  temp<span class="token punctuation">.</span><span class="token function-variable function">toString</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> m<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p <span class="token operator">+</span> val<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> temp<span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 43</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="97-使用reduce求和"><a href="#97-使用reduce求和" class="headerlink" title="97.使用reduce求和"></a>97.使用reduce求和</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token keyword">let</span> res1 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> prev <span class="token operator">+</span> cur <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token keyword">let</span> res2 <span class="token operator">=</span> arr1<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> prev <span class="token operator">+</span> cur <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token keyword">let</span> res3 <span class="token operator">=</span> arr3<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prev<span class="token punctuation">,</span> cur</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> prev <span class="token operator">+</span> cur<span class="token punctuation">[</span><span class="token string">"a"</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res3<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="98-有序数组查找目标值"><a href="#98-有序数组查找目标值" class="headerlink" title="98.有序数组查找目标值"></a>98.有序数组查找目标值</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">findNumberIn2DArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">matrix<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>matrix <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> matrix<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> row <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> column <span class="token operator">=</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>row <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> column <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>column<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>column<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>      column<span class="token operator">--</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      row<span class="token operator">++</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="99-找出element中所有的input子元素"><a href="#99-找出element中所有的input子元素" class="headerlink" title="99.找出element中所有的input子元素"></a>99.找出element中所有的input子元素</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">function</span> <span class="token function">findAllInputElement</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> <span class="token function-variable function">rec</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">element<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"INPUT"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">let</span> children <span class="token operator">=</span> element<span class="token punctuation">.</span>childNodes        children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">element</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>          <span class="token function">rec</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> arr<span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> arr      <span class="token punctuation">}</span>      <span class="token keyword">return</span> <span class="token function">rec</span><span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="100-将手机号中间四位变成"><a href="#100-将手机号中间四位变成" class="headerlink" title="100.将手机号中间四位变成*"></a>100.将手机号中间四位变成*</h4><p>利用数组的方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> tel <span class="token operator">=</span> <span class="token number">18877776666</span><span class="token punctuation">;</span>tel <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">+</span> tel<span class="token punctuation">;</span><span class="token keyword">var</span> ary <span class="token operator">=</span> tel<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>ary<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">"****"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> tel1 <span class="token operator">=</span> ary<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">""</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tel1<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>利用substr的方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> tel <span class="token operator">=</span> <span class="token number">18877776666</span><span class="token punctuation">;</span> tel <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">+</span> tel<span class="token punctuation">;</span> <span class="token keyword">var</span> tel1 <span class="token operator">=</span> tel<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"****"</span> <span class="token operator">+</span> tel<span class="token punctuation">.</span><span class="token function">substr</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tel1<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>使用正则</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> tel <span class="token operator">=</span> <span class="token number">18877776666</span><span class="token punctuation">;</span>tel <span class="token operator">=</span> <span class="token string">""</span> <span class="token operator">+</span> tel<span class="token punctuation">;</span><span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\d{3})\d{4}(\d{4})</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">;</span><span class="token keyword">var</span> tel1 <span class="token operator">=</span> tel<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">"$1****$2"</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tel1<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-lazyload实现组件懒加载</title>
      <link href="/2022/10/07/vue-lazyload-shi-xian-zu-jian-tu-pian-lan-jia-zai/"/>
      <url>/2022/10/07/vue-lazyload-shi-xian-zu-jian-tu-pian-lan-jia-zai/</url>
      
        <content type="html"><![CDATA[<p>vue-lazyload实现组件图片懒加载  </p><span id="more"></span><h2 id="数据懒加载"><a href="#数据懒加载" class="headerlink" title="数据懒加载"></a>数据懒加载</h2><h3 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h3><p>当我们进入到一个页面的时候,如果不加以设置,那么这个页面在一开始加载的过程中会发送很多的请求,这样会影响页面的性能,所以可以采用进入可视区域后才去后台请求相应的数据</p><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>思路就是做出来,组件的数据懒加载,观测这个组件是否进入可视区,如果进入可视区就发起请求,获取数据</p><p>使用的是vueUse中的useIntersectionObserver这个api</p><p>由于不同的组件需要不同的方法,所以这里可以使用vue将其封装成一个方法,使用这个方法,来对不同的组件进行调用</p><h3 id="分析useIntersectionObserve的函数"><a href="#分析useIntersectionObserve的函数" class="headerlink" title="分析useIntersectionObserve的函数"></a>分析useIntersectionObserve的函数</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// stop 是停止观察是否进入或移出可视区域的行为    </span><span class="token keyword">const</span> <span class="token punctuation">{</span> stop <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useIntersectionObserver</span><span class="token punctuation">(</span>  <span class="token comment">// target 是观察的目标dom容器，必须是dom容器，而且是vue3.0方式绑定的dom对象</span>  target<span class="token punctuation">,</span>  <span class="token comment">// isIntersecting 是否进入可视区域，true是进入 false是移出</span>  <span class="token comment">// observerElement 被观察的dom</span>  <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> isIntersecting <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> observerElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token comment">// 在此处可根据isIntersecting来判断，然后做业务</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 提供可以复用的逻辑函数</span><span class="token number">1.</span> 主要的逻辑是  a<span class="token punctuation">.</span> 引入useIntersectionObserver 这个函数  b<span class="token punctuation">.</span> 然后导出一个组件懒加载的函数<span class="token punctuation">,</span>传入一个api函数<span class="token punctuation">,</span>返回这是target和函数计算的结果<span class="token punctuation">,</span>target用来绑定页面中的元素<span class="token punctuation">,</span>result用来赋值给组件中的数据  c<span class="token punctuation">.</span> 首先监测这个是否进入可视区<span class="token punctuation">,</span>如果进入可视区<span class="token punctuation">,</span>会触发<span class="token punctuation">,</span>第二个函数<span class="token punctuation">,</span>isIntersecting 也会变成<span class="token boolean">true</span><span class="token punctuation">,</span>  d<span class="token punctuation">.</span> 如果进入可视区了<span class="token punctuation">,</span>那么就调用传入的api函数<span class="token punctuation">,</span>获得数据的结果<span class="token punctuation">,</span>赋值给result<span class="token punctuation">,</span>最终将结果返回  e<span class="token punctuation">.</span> 在组件内部<span class="token punctuation">,</span>引入这个函数<span class="token punctuation">,</span>接受传过来的target和result<span class="token punctuation">,</span>并通过refiangtarget绑定到页面的目标元素上<span class="token punctuation">,</span>这样就实现了页面组件的懒加载<span class="token comment">// hooks 封装逻辑，提供响应式数据。</span><span class="token keyword">import</span> <span class="token punctuation">{</span> useIntersectionObserver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueuse/core'</span><span class="token keyword">import</span> <span class="token punctuation">{</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token comment">// 数据懒加载函数</span><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useLazyData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">apiFn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// 需要</span>  <span class="token comment">// 1. 被观察的对象</span>  <span class="token comment">// 2. 不同的API函数</span>  <span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token keyword">const</span> <span class="token punctuation">{</span> stop <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useIntersectionObserver</span><span class="token punctuation">(</span>    target<span class="token punctuation">,</span>    <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> isIntersecting <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span> observerElement</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token comment">// 调用API获取数据</span>        <span class="token function">apiFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>          result<span class="token punctuation">.</span>value <span class="token operator">=</span> data<span class="token punctuation">.</span>result        <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">)</span>  <span class="token comment">// 返回---&gt;数据（dom,后台数据）</span>  <span class="token keyword">return</span> <span class="token punctuation">{</span> target<span class="token punctuation">,</span> result <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>后期如果使用这个lazyload函数的时候要向其中传参的话,因为一般要传递的参数一个函数,如果传递函数的时候调用了,那么就相当于传入一个primise对象,所以可以传入一个箭头函数,箭头函数的函数体中执行这个api函数,这样就完成了传参</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token punctuation">{</span>target<span class="token punctuation">,</span>result<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useLazyLoad</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="图片懒加载"><a href="#图片懒加载" class="headerlink" title="图片懒加载"></a>图片懒加载</h2><p>可以将处理图片懒加载的环节封装成指令的方式,通过指令完成图片的懒加载,那么只需要给图片加指令就行了</p><p>写指令的时候用到了一个原生的api,IntersectionObserver,这个api是vueuse中useIntersectionObserver的基础</p><p>接收两个参数,一个是回调函数,一个是一个可选值</p><p>回调函数是在进入可视区和离开可视区都会触发</p><p>有两个回调参数,一个是entries,一个是observer</p><p>返回的就是观察者的实例对象,其中提供了两个方法,一个是observe(target),观察某个对象</p><p>unobserve(dom) 停止观察那个dom</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 创建观察对象实例</span><span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span>callback<span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token comment">// callback 被观察dom进入可视区离开可视区都会触发</span><span class="token comment">// - 两个回调参数 entries , observer</span><span class="token comment">// - entries 被观察的元素信息对象的数组 [{元素信息},{}]，信息中isIntersecting判断进入或离开</span><span class="token comment">// - observer 就是观察实例</span><span class="token comment">// options 配置参数</span><span class="token comment">// - 三个配置属性 root rootMargin threshold</span><span class="token comment">// - root 基于的滚动容器，默认是document</span><span class="token comment">// - rootMargin 容器有没有外边距</span><span class="token comment">// - threshold 交叉的比例</span><span class="token comment">// 实例提供两个方法</span><span class="token comment">// observe(dom) 观察哪个dom</span><span class="token comment">// unobserve(dom) 停止观察那个dom</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="图片懒加载指令的实现原理"><a href="#图片懒加载指令的实现原理" class="headerlink" title="图片懒加载指令的实现原理"></a>图片懒加载指令的实现原理</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> defaultImg <span class="token keyword">from</span> <span class="token string">'@/assets/images/200.png'</span><span class="token comment">// 指令</span><span class="token keyword">const</span> <span class="token function-variable function">defineDirective</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// 图片懒加载指令</span>  app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'lazyload'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">,</span> binding</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> observer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IntersectionObserver</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span><span class="token punctuation">{</span> isIntersecting <span class="token punctuation">}</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>isIntersecting<span class="token punctuation">)</span> <span class="token punctuation">{</span>          observer<span class="token punctuation">.</span><span class="token function">unobserve</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>          el<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>              el<span class="token punctuation">.</span>src <span class="token operator">=</span> defaultImg          <span class="token punctuation">}</span>            el<span class="token punctuation">.</span>src <span class="token operator">=</span> binding<span class="token punctuation">.</span>value        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>        <span class="token literal-property property">threshold</span><span class="token operator">:</span> <span class="token number">0.01</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      observer<span class="token punctuation">.</span><span class="token function">observe</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>首先定义一个函数,传入app这个根组件,利用app个根组件可以使用app.directive昂发来注册指令,第一个参数是指令的名称,第二个参数是配置对象.</p><p>在vue2中,insert方法是监听,这个dom插入到页面上,在vue3中使用的是mounted方法来监听这个dom插入到页面上,所以可以在这个配置对象的mountd中来完成这个指令的编写</p><p>首先mounted会接受两个参数,一个是el,一个是bindling.</p><p>el是dom对象,bindlinghi这个dom对象绑定的参数</p><p>可以利用原生js提供的这个intersectionObserver这个方法来对对象进行监听,这个需要传入两个参数,一个是回调函数,一个是配置对象,返回值是一个观察者对象,可以通过.observe 方法来对对象进行观察,.unobserve的方法来对对象进行取消观察</p><p>回调函数中可以有一个isInterecting参数,可以通过这个参数来判断,元素是否进入可视区,如果进入可视区的话,就可以取消对这个元素的观察,然后将bingling中的src赋值给el的src属性,同时还可以在这里监听,el onerror事件,如果触发了这个事件,就将默认的图片地址赋值给这个页面,完成图片的错误处理</p><p>配置对象里面,可以设置threshold属性,这个是判断页面和这个元素相交多少比例的时候,触发这个事件的,相当于检查页面进入可视区</p><p>使用的话就是在页面中,不要直接将图片的链接赋值给src,而是通过v-lazyLoad=”src”的这种形式,这样的话,当这个dom进入可视区的时候,就会把这个src赋值给这个图片的src,完成图片的懒加载</p>]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总9</title>
      <link href="/2022/10/06/chang-jian-shou-xie-ti-hui-zong-9/"/>
      <url>/2022/10/06/chang-jian-shou-xie-ti-hui-zong-9/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总9</p><span id="more"></span><hr><h4 id="81-css动画"><a href="#81-css动画" class="headerlink" title="81.css动画"></a>81.css动画</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"utf-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span><span class="token function">菜鸟教程</span><span class="token punctuation">(</span>runoob<span class="token punctuation">.</span>com<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      <span class="token literal-property property">background</span><span class="token operator">:</span> red<span class="token punctuation">;</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>      <span class="token comment">/* animation: mymove 3s; */</span>      <span class="token literal-property property">animation</span><span class="token operator">:</span> yourMove 4s<span class="token punctuation">;</span>      animation<span class="token operator">-</span>iteration<span class="token operator">-</span>count<span class="token operator">:</span> infinite<span class="token punctuation">;</span>      animation<span class="token operator">-</span>fill<span class="token operator">-</span>mode<span class="token operator">:</span> forwards<span class="token punctuation">;</span>      <span class="token comment">/* Safari 和 Chrome */</span>      <span class="token comment">/* -webkit-animation: mymove 3s; */</span>      <span class="token comment">/* -webkit-animation-iteration-count: 2;      -webkit-animation-fill-mode: backwards; */</span>    <span class="token punctuation">}</span>    <span class="token comment">/* @keyframes mymove {      from {        top: 0px;      }      to {        top: 200px;      }    } */</span>    @keyframes yourMove <span class="token punctuation">{</span>      <span class="token number">0</span><span class="token operator">%</span> <span class="token punctuation">{</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token number">25</span><span class="token operator">%</span> <span class="token punctuation">{</span>        <span class="token literal-property property">left</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token number">50</span><span class="token operator">%</span> <span class="token punctuation">{</span>        <span class="token literal-property property">left</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token number">75</span><span class="token operator">%</span> <span class="token punctuation">{</span>        <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token number">100</span><span class="token operator">%</span> <span class="token punctuation">{</span>        <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    @<span class="token operator">-</span>webkit<span class="token operator">-</span>keyframes mymove    <span class="token comment">/* Safari 和 Chrome */</span>      <span class="token punctuation">{</span>      from <span class="token punctuation">{</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> 0px<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      to <span class="token punctuation">{</span>        <span class="token literal-property property">top</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>strong<span class="token operator">&gt;</span>注意：<span class="token operator">&lt;</span><span class="token operator">/</span>strong<span class="token operator">&gt;</span>Internet Explorer <span class="token number">9</span> 及其之前的版本不支持 animation<span class="token operator">-</span>fill<span class="token operator">-</span>mode 属性。<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="82-实现每个一秒打印一二三四"><a href="#82-实现每个一秒打印一二三四" class="headerlink" title="82.实现每个一秒打印一二三四"></a>82.实现每个一秒打印一二三四</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> j <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>用let</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 使用 let 块级作用域</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="83-小孩报数问题"><a href="#83-小孩报数问题" class="headerlink" title="83.小孩报数问题"></a>83.小孩报数问题</h4><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">childNum</span> <span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> allplayer <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 生成一个所有的人的数组</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    allplayer<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 给每个人进行编号</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> exitCount <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">// 离开人数</span>  <span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token comment">// 记录报数</span>  <span class="token keyword">let</span> curIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>     <span class="token comment">// 当前下标</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>exitCount <span class="token operator">&lt;</span> num <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当退出的人数小于人数-1 就剩下一个人</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>allplayer<span class="token punctuation">[</span>curIndex<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> counter<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 退出的人就置为0 然后一次报数 如果不是0 就让报数+1</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>counter <span class="token operator">==</span> count<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果报数是要的数 </span>      allplayer<span class="token punctuation">[</span>curIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 设置的当前的变成0 </span>      counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 计数设为0</span>      exitCount<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">//离开的人数++</span>    <span class="token punctuation">}</span>    curIndex<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// 当前的下标++</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>curIndex <span class="token operator">==</span> num<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果走到末尾</span>      curIndex <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 修改当前的下标为0</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 剩下的这一个 寻找不是0的返回</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>allplayer<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> allplayer<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="84-使用promise实现图片的异步加载"><a href="#84-使用promise实现图片的异步加载" class="headerlink" title="84.使用promise实现图片的异步加载"></a>84.使用promise实现图片的异步加载</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">imageAsync</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 创建一个image对象</span>    img<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span> <span class="token comment">// 设置他的src属性</span>    img<span class="token punctuation">.</span><span class="token function-variable function">οnlοad</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 如果是加载成功 就会调用onload方法</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">图片请求成功，此处进行通用操作</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">resolve</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// resolve这个对象</span>    <span class="token punctuation">}</span>    img<span class="token punctuation">.</span><span class="token function-variable function">οnerrοr</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 失败就会调用onerror方法</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">失败，此处进行失败的通用操作</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// reject失败信息</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">imageAsync</span><span class="token punctuation">(</span><span class="token string">"url"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"加载成功"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"加载失败"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="85-实现发布订阅模式"><a href="#85-实现发布订阅模式" class="headerlink" title="85.实现发布订阅模式"></a>85.实现发布订阅模式</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">EventCenter</span> <span class="token punctuation">{</span>  <span class="token comment">// 1. 定义事件容器，用来装事件数组</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handler <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment">// 2. 添加事件方法，参数：事件名 事件方法</span>  <span class="token function">addEventListener</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 创建新数组容器</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>    <span class="token comment">// 存入事件</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment">// 3. 触发事件，参数：事件名 事件参数</span>  <span class="token function">dispatchEvent</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 若没有注册该事件则抛出错误</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'该事件未注册'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token comment">// 触发事件</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">handler</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token operator">...</span>params<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment">// 4. 事件移除，参数：事件名 要删除事件，若无第二个参数则删除该事件的订阅和发布</span>  <span class="token function">removeEventListener</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'事件无效'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 移除事件</span>      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> el <span class="token operator">===</span> handler<span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'无该绑定事件'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token comment">// 移除事件</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="86-数组转树-树转数组"><a href="#86-数组转树-树转数组" class="headerlink" title="86.数组转树 树转数组"></a>86.数组转树 树转数组</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">const</span> nodes <span class="token operator">=</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点C'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点F'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点A'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点H'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点D'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点B'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点E'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点G'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点I'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">arr2tree</span> <span class="token punctuation">(</span><span class="token parameter">nodes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>      nodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        map<span class="token punctuation">[</span>item<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> item      <span class="token punctuation">}</span><span class="token punctuation">)</span>      nodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> parent <span class="token operator">=</span> map<span class="token punctuation">[</span>item<span class="token punctuation">.</span>parentId<span class="token punctuation">]</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">.</span>children <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            parent<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>          <span class="token punctuation">}</span>          parent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> result    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">tree2arr</span> <span class="token punctuation">(</span><span class="token parameter">tree</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      tree<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span>children <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>          <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> key <span class="token operator">!==</span> <span class="token string">'children'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>              obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> item<span class="token punctuation">[</span>key<span class="token punctuation">]</span>            <span class="token punctuation">}</span>          <span class="token punctuation">}</span>          <span class="token keyword">let</span> childrenItems <span class="token operator">=</span> <span class="token function">tree2arr</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">)</span>          result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token function">tree2arr</span><span class="token punctuation">(</span>childrenItems<span class="token punctuation">)</span><span class="token punctuation">)</span>          result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> result    <span class="token punctuation">}</span>    <span class="token keyword">let</span> tree <span class="token operator">=</span> <span class="token function">arr2tree</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> nodesList <span class="token operator">=</span> <span class="token function">tree2arr</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nodesList<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="88-取消promise"><a href="#88-取消promise" class="headerlink" title="88.取消promise"></a>88.取消promise</h4><p>设置一个函数,传入一个要取消的promise对象</p><p>函数内部,生成一个空对象,再生成一个新的promise对象,将这个新对象的resolve,和reject方法挂载到这个promise对象上,然后使用promise.race方法计算这个新的promise对象和要取消的promise对象,最后将这个promise对象返回</p><p>可以在函数外部接收这个promise对象,调用这个的resolve方法完成取消</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 定义一个promise对象</span><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token comment">// 封装一个取消promise的函数,使用promise.race的特性</span><span class="token keyword">function</span> <span class="token function">stopPromise</span> <span class="token punctuation">(</span><span class="token parameter">stopP</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传入promise对象</span>  <span class="token keyword">let</span> proObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 空对象</span>  <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    proObj<span class="token punctuation">.</span>resolve <span class="token operator">=</span> resolve    proObj<span class="token punctuation">.</span>reject <span class="token operator">=</span> reject <span class="token comment">// 创建一个新的promise对象保存这个resolve和reject函数</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  proObj<span class="token punctuation">.</span>promise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>stopP<span class="token punctuation">,</span> promise<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 让这个的promise属性是race的值</span>  <span class="token keyword">return</span> proObj <span class="token comment">// 返回这个对象</span><span class="token punctuation">}</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token function">stopPromise</span><span class="token punctuation">(</span>promise<span class="token punctuation">)</span> <span class="token comment">// 电泳函数返回一个对象</span>obj<span class="token punctuation">.</span>promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 收集返回值</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  obj<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'promise 请求被取消了'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="89-浏览器预加载"><a href="#89-浏览器预加载" class="headerlink" title="89.浏览器预加载"></a>89.浏览器预加载</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    img <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 400px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 300px<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"./img/img1.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>点击加载下一张<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">const</span> imgs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">"./img/img2.jpg"</span><span class="token punctuation">,</span> <span class="token string">"./img/img3.jpg"</span><span class="token punctuation">,</span> <span class="token string">"./img/img4.jfif"</span><span class="token punctuation">,</span> <span class="token string">"./img/img5.jpg"</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> p <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'p'</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> btn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> index <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">function</span> <span class="token function">preLoad</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>      img<span class="token punctuation">.</span>src <span class="token operator">=</span> imgs<span class="token punctuation">[</span>index<span class="token punctuation">]</span>    <span class="token punctuation">}</span>    <span class="token function">preLoad</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>    p<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">这是第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">张图片</span><span class="token template-punctuation string">`</span></span>    btn<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> imgs<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>        img<span class="token punctuation">.</span>src <span class="token operator">=</span> imgs<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token comment">// 显示这个预加载的图片</span>        index<span class="token operator">++</span> <span class="token comment">// 索引后移</span>        p<span class="token punctuation">.</span>innerText <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">这是第</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index <span class="token operator">+</span> <span class="token number">1</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">张图片</span><span class="token template-punctuation string">`</span></span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> imgs<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token function">preLoad</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'没有图片了'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="90-原生ajax获取上传进度"><a href="#90-原生ajax获取上传进度" class="headerlink" title="90.原生ajax获取上传进度"></a>90.原生ajax获取上传进度</h4><p>首先是放下一个<code>input</code>输入框,设置<code>type=file</code>,然后给这个输入框绑定onchange事件,监听该事件,通过dom实例获得到这个里面的<code>file</code>文件对象,然后利用这个生成一个formdata对象,将这个文件添加到formdata对象中,调用xhr的方法进行上传,监听<code>xhr.upload.onprogresss</code>这个事件,可以通过事件对象的<code>loaded</code>属性获得已经上传的大小,通过<code>total</code>获得总大小计算出这个的百分比,完成上传显示</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token punctuation">.</span>box <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 20px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> skyblue<span class="token punctuation">;</span>      border<span class="token operator">-</span>radius<span class="token operator">:</span> 10px<span class="token punctuation">;</span>      line<span class="token operator">-</span>height<span class="token operator">:</span> 20px<span class="token punctuation">;</span>      <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span> 1px<span class="token punctuation">;</span>      <span class="token literal-property property">transition</span><span class="token operator">:</span> all <span class="token number">0</span><span class="token punctuation">.</span>1s ease<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>text <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>      z<span class="token operator">-</span>index<span class="token operator">:</span> <span class="token number">999</span><span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">color</span><span class="token operator">:</span> white<span class="token punctuation">;</span>      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>inner <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>      border<span class="token operator">-</span>radius<span class="token operator">:</span> 10px<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">10</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 20px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> red<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">"file"</span> name<span class="token operator">=</span><span class="token string">""</span> id<span class="token operator">=</span><span class="token string">"fileId"</span> onchange<span class="token operator">=</span><span class="token string">"changeFn()"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"inner"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">%</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">function</span> <span class="token function">changeFn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> fileDOM <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#fileId'</span><span class="token punctuation">)</span>      <span class="token keyword">let</span> inner <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.inner'</span><span class="token punctuation">)</span>      <span class="token keyword">let</span> text <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.text'</span><span class="token punctuation">)</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fileDOM<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是这个的文件列表 FileList</span>      <span class="token keyword">let</span> formdata <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FormData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      formdata<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'file'</span><span class="token punctuation">,</span> fileDOM<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">'POST'</span><span class="token punctuation">,</span> <span class="token string">'http://localhost:3000/api/addUser'</span><span class="token punctuation">)</span>      xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>      <span class="token keyword">let</span> percent <span class="token operator">=</span> <span class="token number">0</span>      xhr<span class="token punctuation">.</span>upload<span class="token punctuation">.</span><span class="token function-variable function">onprogress</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>lengthComputable<span class="token punctuation">)</span> <span class="token punctuation">{</span>          percent <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>loaded <span class="token operator">/</span> event<span class="token punctuation">.</span>total <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>percent<span class="token punctuation">)</span><span class="token punctuation">;</span>          inner<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> percent <span class="token operator">+</span> <span class="token string">'%'</span>          text<span class="token punctuation">.</span>innerText <span class="token operator">=</span> percent <span class="token operator">+</span> <span class="token string">'%'</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>      xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>formdata<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总8</title>
      <link href="/2022/10/03/chang-jian-shou-xie-ti-hui-zong-8/"/>
      <url>/2022/10/03/chang-jian-shou-xie-ti-hui-zong-8/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总8</p><span id="more"></span><h4 id="72-实现一个compose函数"><a href="#72-实现一个compose函数" class="headerlink" title="72.实现一个compose函数"></a>72.实现一个compose函数</h4><p>实现一个能够聚合多个函数的函数,传入一个参数,从右向左执行</p><p>需要对函数参数的个数进行判断</p><p>如果没有参数 直接返回这个参数</p><p>有一个函数,直接使用这一个函数用于计算</p><p>有多个函数,从右到左执行 可以使用reduce方法 调用然后调用 然后返回 继续做下次的调用</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 用法如下:</span><span class="token keyword">function</span> <span class="token function">fn1</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">fn2</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">fn3</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">fn4</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> x <span class="token operator">+</span> <span class="token number">4</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">compose</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>funcs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>funcs<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> v<span class="token punctuation">;</span> <span class="token comment">// 如果没有传入函数 直接返回一个返回该参数的函数</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>funcs<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果是1,直接返回这个的调用</span>    <span class="token keyword">return</span> funcs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> funcs<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 否则的话利用reduce方法 redece的第一个参数是起始的结果,如果没有就是函数的调用第一次的结果</span><span class="token punctuation">}</span><span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>fn1<span class="token punctuation">,</span> fn2<span class="token punctuation">,</span> fn3<span class="token punctuation">,</span> fn4<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// console.log(a.toString())</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">a</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1+4+3+2+1=11</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="73-动态换肤"><a href="#73-动态换肤" class="headerlink" title="73.动态换肤"></a>73.动态换肤</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>css 换肤<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"alternate stylesheet"</span> type<span class="token operator">=</span><span class="token string">"text/css"</span> href<span class="token operator">=</span><span class="token string">"red.css"</span> title<span class="token operator">=</span><span class="token string">"红色"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"alternate stylesheet"</span> type<span class="token operator">=</span><span class="token string">"text/css"</span> href<span class="token operator">=</span><span class="token string">"green.css"</span> title<span class="token operator">=</span><span class="token string">"绿色"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> type<span class="token operator">=</span><span class="token string">"text/css"</span> href<span class="token operator">=</span><span class="token string">"default.css"</span> title<span class="token operator">=</span><span class="token string">"默认"</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  选择样式：  <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"default"</span> type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"skin"</span> value<span class="token operator">=</span><span class="token string">"default.css"</span> checked<span class="token operator">&gt;</span><span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"default"</span><span class="token operator">&gt;</span>默认<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"red"</span> type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"skin"</span> value<span class="token operator">=</span><span class="token string">"red.css"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"red"</span><span class="token operator">&gt;</span>红色<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>input id<span class="token operator">=</span><span class="token string">"green"</span> type<span class="token operator">=</span><span class="token string">"radio"</span> name<span class="token operator">=</span><span class="token string">"skin"</span> value<span class="token operator">=</span><span class="token string">"green.css"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>label <span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"green"</span><span class="token operator">&gt;</span>绿色<span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>  <span class="token keyword">const</span> $ <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> eleLinks <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'link[title]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">var</span> eleRadios <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'input[type="radio"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>eleRadios<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">radio</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    radio<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">var</span> value <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>      <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>eleLinks<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">link</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        link<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>link<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span> <span class="token operator">==</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>          link<span class="token punctuation">.</span>disabled <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="74-每隔一秒输出1-2-3"><a href="#74-每隔一秒输出1-2-3" class="headerlink" title="74.每隔一秒输出1,2,3"></a>74.每隔一秒输出1,2,3</h4><p>可以使用reduce这个方法 让其中返回一个promise对象,不断的调用这个对象的then方法,这样就能够保证这个函数的执行的顺序</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// 定义一个arr数组</span>arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 不断的遍历这个数组</span>  <span class="token keyword">return</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">r</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">r</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 传入的初始值是这个resolve的promise</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用遍历 不断修改第一个promise的状态来进行下面的判断</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  p <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="75-使用Promise实现红绿灯交替亮"><a href="#75-使用Promise实现红绿灯交替亮" class="headerlink" title="75.使用Promise实现红绿灯交替亮"></a>75.使用Promise实现红绿灯交替亮</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">red</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">green</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">yellow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">light</span> <span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">===</span> <span class="token string">'red'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">red</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">===</span> <span class="token string">'green'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">green</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">===</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">yellow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token function">light</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">light</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">light</span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="76-实现mergePromise函数"><a href="#76-实现mergePromise函数" class="headerlink" title="76.实现mergePromise函数"></a>76.实现mergePromise函数</h4><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 实现mergePromise函数，把传进去的数组按顺序先后执行，并且把返回的数据先后放到数组data中。</span><span class="token keyword">const</span> <span class="token function-variable function">time</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">timer</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> timer<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token function-variable function">ajax1</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token function-variable function">ajax2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">const</span> <span class="token function-variable function">ajax3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">function</span> <span class="token function">mergePromise</span> <span class="token punctuation">(</span><span class="token parameter">ajaxArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 存放每个ajax的结果</span>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> promise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  ajaxArray<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">ajax</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token comment">// 第一次的then为了用来调用ajax</span>    <span class="token comment">// 第二次的then是为了获取ajax的结果</span>    promise <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>ajax<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">return</span> data<span class="token punctuation">;</span> <span class="token comment">// 把每次的结果返回</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// 最后得到的promise它的值就是data</span>  <span class="token keyword">return</span> promise<span class="token punctuation">}</span><span class="token function">mergePromise</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ajax1<span class="token punctuation">,</span> ajax2<span class="token punctuation">,</span> ajax3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"done"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// data 为 [1, 2, 3]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用reduce也行</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">mergePromise</span> <span class="token punctuation">(</span><span class="token parameter">ajaxArray</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">let</span> p <span class="token operator">=</span> ajaxArray<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token function">v</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 放入这个data数组中</span>        <span class="token keyword">return</span> data      <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> p<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="77-封装一个异步加载图片的方法"><a href="#77-封装一个异步加载图片的方法" class="headerlink" title="77.封装一个异步加载图片的方法"></a>77.封装一个异步加载图片的方法</h4><p>传入一个图片的地址可以使用then方法完成图片的加载</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">loadImg</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'一张图片加载完成'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token function">resolve</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    img<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'cound not load image at'</span> <span class="token operator">+</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    img<span class="token punctuation">.</span>src <span class="token operator">=</span> url  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="78-限制异步操作的并发个数并尽可能快的完成全部"><a href="#78-限制异步操作的并发个数并尽可能快的完成全部" class="headerlink" title="78.限制异步操作的并发个数并尽可能快的完成全部"></a>78.限制异步操作的并发个数并尽可能快的完成全部</h4><p>这个的整体思路</p><p>首先创建一个加载多个图片的函数,需要传入的参数有,图片的地址数组,加载图片的方法,还有并发的数量,需要返回一个promise对象,然后遍历这个对象的结果将其添加到body中</p><p>这个函数要把这个url分成3组,然后遍历每一组,发送ajax请求,得到请求结果之后,将请求结果的数组加入到结果数组中,请求玩前三个之后才能进入下一个</p><p>请求每个图片的需要返回这个图片的img对象</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    img <span class="token punctuation">{</span>      margin<span class="token operator">-</span>right<span class="token operator">:</span> 20px<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">let</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'https://t7.baidu.com/it/u=2235283139,2108773862&amp;fm=193&amp;f=GIF'</span><span class="token punctuation">,</span> <span class="token string">'https://t7.baidu.com/it/u=2369985169,1283503597&amp;fm=193&amp;f=GIF'</span><span class="token punctuation">,</span> <span class="token string">'https://t7.baidu.com/it/u=2159461460,31424906&amp;fm=193&amp;f=GIF'</span><span class="token punctuation">,</span> <span class="token string">'https://t7.baidu.com/it/u=2159461460,31424906&amp;fm=193&amp;f=GIF'</span><span class="token punctuation">,</span> <span class="token string">'https://t7.baidu.com/it/u=340402538,2113214724&amp;fm=193&amp;f=GIF'</span><span class="token punctuation">,</span> <span class="token string">'https://t7.baidu.com/it/u=2270040441,2487274433&amp;fm=193&amp;f=GIF'</span><span class="token punctuation">,</span> <span class="token string">'https://t7.baidu.com/it/u=3707959938,1767557661&amp;fm=193&amp;f=GIF'</span><span class="token punctuation">,</span> <span class="token string">'https://t7.baidu.com/it/u=1662785792,1988645283&amp;fm=193&amp;f=GIF'</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">loadImg</span> <span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> img <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'一张图片加载完成'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token function">resolve</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        img<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token function">reject</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'cound not load image at'</span> <span class="token operator">+</span> url<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        img<span class="token punctuation">.</span>src <span class="token operator">=</span> url      <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">limitLoad</span> <span class="token punctuation">(</span><span class="token parameter">urls<span class="token punctuation">,</span> handler<span class="token punctuation">,</span> limit</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 存储所有的加载结果</span>      <span class="token keyword">let</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token keyword">const</span> <span class="token function-variable function">handleUrls</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">urls</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 这个函数是为了生成3个url为一组的二维数组</span>        <span class="token keyword">const</span> doubleDim <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">const</span> len <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span>length <span class="token operator">/</span> limit<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Math.ceil(8 / 3) = 3</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span> <span class="token comment">// 3, 表示二维数组的长度为3</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          doubleDim<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>urls<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i <span class="token operator">*</span> limit<span class="token punctuation">,</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> limit<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> doubleDim<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">const</span> <span class="token function-variable function">ajaxImage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">urlCollect</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 将一组字符串url 转换为一个加载图片的数组</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>urlCollect<span class="token punctuation">)</span>        <span class="token keyword">return</span> urlCollect<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">url</span> <span class="token operator">=&gt;</span> <span class="token function">handler</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">const</span> doubleDim <span class="token operator">=</span> <span class="token function">handleUrls</span><span class="token punctuation">(</span>urls<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 得到3个url为一组的二维数组</span>      doubleDim<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">urlCollect</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        p <span class="token operator">=</span> p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token function">ajaxImage</span><span class="token punctuation">(</span>urlCollect<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>          data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将每次的结果展开，并存储到data中 (res为：[img, img, img])</span>          <span class="token keyword">return</span> data<span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> p<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">limitLoad</span><span class="token punctuation">(</span>urls<span class="token punctuation">,</span> loadImg<span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'res'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 最终得到的是长度为8的img数组: [img, img, img, ...]</span>      res<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">img</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>img<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="79-判断对象的循环引用"><a href="#79-判断对象的循环引用" class="headerlink" title="79.判断对象的循环引用"></a>79.判断对象的循环引用</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    a<span class="token punctuation">.</span>b <span class="token operator">=</span> a    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">hasLoop</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 判断对象内部是否有和源相同的属性</span>      <span class="token keyword">function</span> <span class="token function">findLoop</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">,</span> src</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// 源数组，并将自身传入</span>        <span class="token keyword">const</span> source <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span>target<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">// 如果是对象才需要判断</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// 如果在源数组中找到 || 递归查找内部属性找到相同</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>source<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> <span class="token function">findLoop</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>              <span class="token keyword">return</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>      <span class="token comment">// 如果传入值是对象，则执行判断，否则返回false</span>      <span class="token keyword">return</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> <span class="token function">findLoop</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">hasLoop</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="80-函数科里化"><a href="#80-函数科里化" class="headerlink" title="80.函数科里化"></a>80.函数科里化</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 这个巧妙的点是什么地方 </span><span class="token comment">// 在于传入一个参数,需要返回一个函数,这个函数有个属性 可以把当前的函数里面的值都拿到</span><span class="token comment">// 那就可以用到参数 每次都返回这个函数的调用 并且吧这个参数给新的函数 这样就完成了一次循环</span><span class="token keyword">function</span> <span class="token function">curry</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> <span class="token function-variable function">judge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  judge<span class="token punctuation">.</span><span class="token function-variable function">getSum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> p <span class="token operator">+</span> val<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> judge<span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">curry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> addOne <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">addOne</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">addOne</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总7</title>
      <link href="/2022/09/30/chang-jian-shou-xie-ti-hui-zong-7/"/>
      <url>/2022/09/30/chang-jian-shou-xie-ti-hui-zong-7/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总7</p><span id="more"></span><h4 id="61-实现一个宽高自适应的矩形"><a href="#61-实现一个宽高自适应的矩形" class="headerlink" title="61.实现一个宽高自适应的矩形"></a>61.实现一个宽高自适应的矩形</h4><h5 id="61-1利用vw来实现"><a href="#61-1利用vw来实现" class="headerlink" title="61.1利用vw来实现"></a>61.1利用vw来实现</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">10</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 10vw<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> red<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="61-2-使用margin和padding实现"><a href="#61-2-使用margin和padding实现" class="headerlink" title="61.2 使用margin和padding实现"></a>61.2 使用margin和padding实现</h5><p>高度不设置,利用padding撑开盒子,因为给盒子设置颜色,padding返回也有,因此可以使用这样来进行设置</p><p>padding的值是父元素为基准</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">20</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      padding<span class="token operator">-</span>top<span class="token operator">:</span> <span class="token number">20</span><span class="token operator">%</span><span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> red<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="61-3-利用伪子元素的margin"><a href="#61-3-利用伪子元素的margin" class="headerlink" title="61.3 利用伪子元素的margin"></a>61.3 利用伪子元素的margin</h5><p>给父元素设置overflowhidden 然后后面有个伪元素,让他的margin-top是30%</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">30</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">overflow</span><span class="token operator">:</span> hidden<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> red<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token literal-property property">div</span><span class="token operator">:</span><span class="token operator">:</span>after <span class="token punctuation">{</span>      <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>      <span class="token literal-property property">display</span><span class="token operator">:</span> block<span class="token punctuation">;</span>      margin<span class="token operator">-</span>top<span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="62-画一个梯形"><a href="#62-画一个梯形" class="headerlink" title="62.画一个梯形"></a>62.画一个梯形</h4><h5 id="62-1画一个直角梯形"><a href="#62-1画一个直角梯形" class="headerlink" title="62.1画一个直角梯形"></a>62.1画一个直角梯形</h5><p>设置一个bottom是有颜色的 ,这个还要有自己的宽度 那么这个只设置bottom也会显示</p><p>然后right没有颜色透明</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      border<span class="token operator">-</span>bottom<span class="token operator">:</span> 100px solid red<span class="token punctuation">;</span>      border<span class="token operator">-</span>right<span class="token operator">:</span> 100px solid transparent<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="62-2等腰梯形"><a href="#62-2等腰梯形" class="headerlink" title="62.2等腰梯形"></a>62.2等腰梯形</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      border<span class="token operator">-</span>bottom<span class="token operator">:</span> 100px solid red<span class="token punctuation">;</span>      border<span class="token operator">-</span>left<span class="token operator">:</span> 40px solid transparent<span class="token punctuation">;</span>      border<span class="token operator">-</span>right<span class="token operator">:</span> 40px solid transparent<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="63-画一条0-5px的线"><a href="#63-画一条0-5px的线" class="headerlink" title="63.画一条0.5px的线"></a>63.画一条0.5px的线</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      border<span class="token operator">-</span>top<span class="token operator">:</span> 10px solid red<span class="token punctuation">;</span>      <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1"</span><span class="token operator">&gt;</span> <span class="token operator">--</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=0.5, minimum-scale=0.5, maximum-scale=0.5"</span> <span class="token operator">/</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      border<span class="token operator">-</span>top<span class="token operator">:</span> 1px solid red<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="66-格式化日期"><a href="#66-格式化日期" class="headerlink" title="66.格式化日期"></a>66.格式化日期</h4><p>传入两个参数,一个是日期,一个是要转换成什么格式</p><p>yyyy替换成年</p><p>mm替换成月</p><p>dd替换成天</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">dateFormat</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-12-01'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'yyyy/MM/dd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2020/12/01</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">dateFormat</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-04-01'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'yyyy/MM/dd'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2020/04/01</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">dateFormat</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-04-01'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'yyyy年MM月dd日'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2020年04月01日</span><span class="token keyword">function</span> <span class="token function">dateFormat</span> <span class="token punctuation">(</span><span class="token parameter">data<span class="token punctuation">,</span> format</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> year <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> month <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>  <span class="token keyword">let</span> day <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  format <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'yyyy'</span><span class="token punctuation">,</span> year<span class="token punctuation">)</span>  format <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'MM'</span><span class="token punctuation">,</span> month<span class="token punctuation">)</span>  format <span class="token operator">=</span> format<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'dd'</span><span class="token punctuation">,</span> day<span class="token punctuation">)</span>  <span class="token keyword">return</span> format<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="67-实现push方法"><a href="#67-实现push方法" class="headerlink" title="67.实现push方法"></a>67.实现push方法</h4><p>push接受参数序列,拼接在最后面,返回拼接后的长度</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myPush</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token operator">=</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">}</span><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">myPush</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="68-将数字从千分位用逗号隔开"><a href="#68-将数字从千分位用逗号隔开" class="headerlink" title="68.将数字从千分位用逗号隔开"></a>68.将数字从千分位用逗号隔开</h4><p>先分成整数和小数部分</p><p>然后对整数部分进行分</p><p>如果证书长度小于3 直接拼接</p><p>如果整数长度大于3 就计算余数 然后后面用match进行匹配,再拼接</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> <span class="token function-variable function">format</span> <span class="token operator">=</span> <span class="token parameter">n</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> num <span class="token operator">=</span> n<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 转成字符串</span>  <span class="token keyword">let</span> decimals <span class="token operator">=</span> <span class="token string">''</span>  <span class="token comment">// 判断是否有小数</span>  num<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">?</span> decimals <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> decimals  <span class="token keyword">let</span> len <span class="token operator">=</span> num<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length  <span class="token keyword">if</span> <span class="token punctuation">(</span>len <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> num  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token string">''</span>    <span class="token keyword">let</span> remainder <span class="token operator">=</span> len <span class="token operator">%</span> <span class="token number">3</span>    decimals <span class="token operator">?</span> temp <span class="token operator">=</span> <span class="token string">'.'</span> <span class="token operator">+</span> decimals <span class="token operator">:</span> temp    <span class="token keyword">if</span> <span class="token punctuation">(</span>remainder <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 不是3的整数倍</span>      <span class="token keyword">return</span> num<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> remainder<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> num<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>remainder<span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{3}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token operator">+</span> temp    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 是3的整数倍</span>      <span class="token keyword">return</span> num<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> len<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d{3}</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token operator">+</span> temp    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">1011.3334</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// '12,323.33'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="69-循环打印红黄绿"><a href="#69-循环打印红黄绿" class="headerlink" title="69.循环打印红黄绿"></a>69.循环打印红黄绿</h4><h5 id="69-1使用settimeout"><a href="#69-1使用settimeout" class="headerlink" title="69.1使用settimeout"></a>69.1使用settimeout</h5><p>创建一个打印事件的方法,接受参数为,时间,亮灯,和回调函数</p><p>定时器内执行亮灯,亮完之后执行回调函数</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">red</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">green</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">yellow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> light<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>light <span class="token operator">===</span> <span class="token string">'red'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">red</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>light <span class="token operator">===</span> <span class="token string">'green'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">green</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>light <span class="token operator">===</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">yellow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token function-variable function">step</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token function">task</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token function">task</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">task</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> step<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="69-2使用promise"><a href="#69-2使用promise" class="headerlink" title="69.2使用promise"></a>69.2使用promise</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">red</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">green</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'green'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">yellow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'yellow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token function-variable function">task</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">time<span class="token punctuation">,</span> light</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>light <span class="token operator">===</span> <span class="token string">'red'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">red</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>light <span class="token operator">===</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">yellow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>light <span class="token operator">===</span> <span class="token string">'green'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">green</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">const</span> <span class="token function-variable function">step</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token function">task</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">task</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">task</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="70-实现发布订阅模式"><a href="#70-实现发布订阅模式" class="headerlink" title="70.实现发布订阅模式"></a>70.实现发布订阅模式</h4><p>设计一个类,里面有个对象,统计对应的类型,和函数</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">EventCenter</span> <span class="token punctuation">{</span>  <span class="token comment">// 1. 定义事件容器，用来装事件数组</span>  handlers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 2. 添加事件方法，参数：事件名 事件方法</span>  <span class="token function">addEventListener</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 创建新数组容器</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>    <span class="token comment">// 存入事件</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>handler<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment">// 3. 触发事件，参数：事件名 事件参数</span>  <span class="token function">dispatchEvent</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> <span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 若没有注册该事件则抛出错误</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'该事件未注册'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token comment">// 触发事件</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">handler</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token operator">...</span>params<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment">// 4. 事件移除，参数：事件名 要删除事件，若无第二个参数则删除该事件的订阅和发布</span>  <span class="token function">removeEventListener</span> <span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'事件无效'</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>handler<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 移除事件</span>      <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> el <span class="token operator">===</span> handler<span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'无该绑定事件'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token comment">// 移除事件</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>type<span class="token punctuation">]</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> moshi <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventCenter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'nihao'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>moshi<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>moshi<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>moshi<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">,</span> fn<span class="token punctuation">)</span>moshi<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总6</title>
      <link href="/2022/09/27/chang-jian-shou-xie-ti-hui-zong-6/"/>
      <url>/2022/09/27/chang-jian-shou-xie-ti-hui-zong-6/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总6</p><span id="more"></span><h4 id="54-单行文本多行文本溢出"><a href="#54-单行文本多行文本溢出" class="headerlink" title="54.单行文本多行文本溢出"></a>54.单行文本多行文本溢出</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token literal-property property">div</span><span class="token operator">:</span>nth<span class="token operator">-</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token parameter"><span class="token number">1</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> pink<span class="token punctuation">;</span>      <span class="token literal-property property">overflow</span><span class="token operator">:</span> hidden<span class="token punctuation">;</span>      text<span class="token operator">-</span>overflow<span class="token operator">:</span> ellipsis<span class="token punctuation">;</span>      white<span class="token operator">-</span>space<span class="token operator">:</span> wrap<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token literal-property property">div</span><span class="token operator">:</span>nth<span class="token operator">-</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token parameter"><span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> blue<span class="token punctuation">;</span>      <span class="token literal-property property">overflow</span><span class="token operator">:</span> hidden<span class="token punctuation">;</span>      text<span class="token operator">-</span>overflow<span class="token operator">:</span> ellipsis<span class="token punctuation">;</span>      <span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token operator">-</span>webkit<span class="token operator">-</span>box<span class="token punctuation">;</span>      <span class="token operator">-</span>webkit<span class="token operator">-</span>box<span class="token operator">-</span>orient<span class="token operator">:</span> vertical<span class="token punctuation">;</span>      <span class="token operator">-</span>webkit<span class="token operator">-</span>line<span class="token operator">-</span>clamp<span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token number">1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="55-实现两栏布局"><a href="#55-实现两栏布局" class="headerlink" title="55.实现两栏布局"></a>55.实现两栏布局</h4><h5 id="55-1浮动-margin-left"><a href="#55-1浮动-margin-left" class="headerlink" title="55.1浮动+margin-left"></a>55.1浮动+margin-left</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token punctuation">.</span>left <span class="token punctuation">{</span>      <span class="token literal-property property">float</span><span class="token operator">:</span> left<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 800px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> pink<span class="token punctuation">;</span>      <span class="token literal-property property">color</span><span class="token operator">:</span> white<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>right <span class="token punctuation">{</span>      margin<span class="token operator">-</span>left<span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> auto<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 800px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> blue<span class="token punctuation">;</span>      <span class="token literal-property property">color</span><span class="token operator">:</span> white<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"left"</span><span class="token operator">&gt;</span>左边<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"right"</span><span class="token operator">&gt;</span>自适应<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="55-2-浮动-overflow"><a href="#55-2-浮动-overflow" class="headerlink" title="55.2 浮动+overflow"></a>55.2 浮动+overflow</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token punctuation">.</span>left <span class="token punctuation">{</span>      <span class="token literal-property property">float</span><span class="token operator">:</span> left<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 800px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> pink<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>right <span class="token punctuation">{</span>      <span class="token literal-property property">overflow</span><span class="token operator">:</span> hidden<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> auto<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 800px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> blue<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"left"</span><span class="token operator">&gt;</span>左边<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"right"</span><span class="token operator">&gt;</span>自适应<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="55-3flex布局"><a href="#55-3flex布局" class="headerlink" title="55.3flex布局"></a>55.3flex布局</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token punctuation">.</span>box <span class="token punctuation">{</span>      <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>left <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 200px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 800px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> pink<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>right <span class="token punctuation">{</span>      <span class="token literal-property property">flex</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 800px<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> blue<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"left"</span><span class="token operator">&gt;</span>左边<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"right"</span><span class="token operator">&gt;</span>右边<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="56水平垂直居中"><a href="#56水平垂直居中" class="headerlink" title="56水平垂直居中"></a>56水平垂直居中</h4><p><a href="onenote:#常见手写题汇总5&amp;section-id={5CB2B1CE-8E00-4006-BCC1-04D3A16C4D4F}&amp;page-id={2A409DCE-3104-458B-84FD-667B5C68AFF4}&amp;end&amp;base-path=https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/面试笔记1/js手写题.one">常见手写题汇总5</a> 参见47题</p><h4 id="57-实现响应式布局"><a href="#57-实现响应式布局" class="headerlink" title="57.实现响应式布局"></a>57.实现响应式布局</h4><h4 id="58-实现品字布局"><a href="#58-实现品字布局" class="headerlink" title="58.实现品字布局"></a>58.实现品字布局</h4><h5 id="58-1-定位-浮动"><a href="#58-1-定位-浮动" class="headerlink" title="58.1 定位+浮动"></a>58.1 定位+浮动</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>      line<span class="token operator">-</span>height<span class="token operator">:</span> 100px<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>box1 <span class="token punctuation">{</span>      <span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token number">0</span> auto<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> pink<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>box2 <span class="token punctuation">{</span>      <span class="token literal-property property">float</span><span class="token operator">:</span> left<span class="token punctuation">;</span>      margin<span class="token operator">-</span>left<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> blue<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>box3 <span class="token punctuation">{</span>      <span class="token literal-property property">float</span><span class="token operator">:</span> left<span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> yellow<span class="token punctuation">;</span>      margin<span class="token operator">-</span>left<span class="token operator">:</span> <span class="token operator">-</span>200px<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box1"</span><span class="token operator">&gt;</span><span class="token number">100</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box2"</span><span class="token operator">&gt;</span><span class="token number">200</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box3"</span><span class="token operator">&gt;</span><span class="token number">300</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="59-实现9宫格布局"><a href="#59-实现9宫格布局" class="headerlink" title="59 实现9宫格布局"></a>59 实现9宫格布局</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    ul <span class="token punctuation">{</span>      <span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    li <span class="token punctuation">{</span>      list<span class="token operator">-</span>style<span class="token operator">:</span> none<span class="token punctuation">;</span>      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>      border<span class="token operator">-</span>radius<span class="token operator">:</span> 5px<span class="token punctuation">;</span>      <span class="token literal-property property">background</span><span class="token operator">:</span> skyblue<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    ul <span class="token punctuation">{</span>      <span class="token literal-property property">display</span><span class="token operator">:</span> flex<span class="token punctuation">;</span>      flex<span class="token operator">-</span>wrap<span class="token operator">:</span> wrap<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    li <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">30</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 300px<span class="token punctuation">;</span>      margin<span class="token operator">-</span>right<span class="token operator">:</span> <span class="token number">5</span><span class="token operator">%</span><span class="token punctuation">;</span>      margin<span class="token operator">-</span>bottom<span class="token operator">:</span> <span class="token number">5</span><span class="token operator">%</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token literal-property property">li</span><span class="token operator">:</span>nth<span class="token operator">-</span><span class="token keyword">of</span><span class="token operator">-</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token parameter"><span class="token number">3n</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      margin<span class="token operator">-</span>right<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token literal-property property">li</span><span class="token operator">:</span>nth<span class="token operator">-</span><span class="token keyword">of</span><span class="token operator">-</span><span class="token function">type</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token operator">+</span><span class="token number">7</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      margin<span class="token operator">-</span>bottom<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"box"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">6</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">7</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">8</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">9</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="60-实现一个圆和半圆"><a href="#60-实现一个圆和半圆" class="headerlink" title="60.实现一个圆和半圆"></a>60.实现一个圆和半圆</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token punctuation">.</span>div1 <span class="token punctuation">{</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      border<span class="token operator">-</span>radius<span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> red<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>div2 <span class="token punctuation">{</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> red<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>      border<span class="token operator">-</span>radius<span class="token operator">:</span> 0px 0px 100px 100px<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"div1"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"div2"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总5</title>
      <link href="/2022/09/25/chang-jian-shou-xie-ti-hui-zong-5/"/>
      <url>/2022/09/25/chang-jian-shou-xie-ti-hui-zong-5/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总5</p><span id="more"></span><h4 id="41-字符串转驼峰"><a href="#41-字符串转驼峰" class="headerlink" title="41.字符串转驼峰"></a>41.字符串转驼峰</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> foo <span class="token operator">=</span> <span class="token string">'get-element-by-id'</span><span class="token keyword">function</span> <span class="token function">charToTuo</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> arr <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">charToTuo</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-(\w)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$0<span class="token punctuation">,</span> $1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token string">'-'</span> <span class="token operator">+</span> $1<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">charToTuo</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="42-排序算法"><a href="#42-排序算法" class="headerlink" title="42.排序算法"></a>42.排序算法</h4><h5 id="42-1-冒泡排序"><a href="#42-1-冒泡排序" class="headerlink" title="42.1 冒泡排序"></a>42.1 冒泡排序</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">sortArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 判断排序次数 一个是length-1次</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 内层循环 从0到已经排好序的地方</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 有不同就交换</span>        <span class="token punctuation">[</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>nums<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> nums<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sortArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="42-2选择排序"><a href="#42-2选择排序" class="headerlink" title="42.2选择排序"></a>42.2选择排序</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">sortArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> minIndex <span class="token operator">=</span> i    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        minIndex <span class="token operator">=</span> j      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token punctuation">[</span>nums<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> nums<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sortArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="42-3-插入排序"><a href="#42-3-插入排序" class="headerlink" title="42.3 插入排序"></a>42.3 插入排序</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">sortArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> preIndex <span class="token operator">=</span> i <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">let</span> current <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>preIndex <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> current <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>preIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            nums<span class="token punctuation">[</span>preIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>preIndex<span class="token punctuation">]</span>            preIndex<span class="token operator">--</span>        <span class="token punctuation">}</span>        nums<span class="token punctuation">[</span>preIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> current    <span class="token punctuation">}</span>    <span class="token keyword">return</span> nums<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sortArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="42-4归并排序"><a href="#42-4归并排序" class="headerlink" title="42.4归并排序"></a>42.4归并排序</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">sortArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 归并排序需要两个函数 一个是将数组分成两部分 一个是将两部分的数组合并</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> nums <span class="token comment">// 如果数组的长度是1 就直接返回这个数组就可以了</span>  <span class="token keyword">let</span> mid <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 取出中间的位置 为了将数组分成两部分</span>  <span class="token keyword">let</span> left <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> mid<span class="token punctuation">)</span> <span class="token comment">// 左边的部分</span>  <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span> <span class="token comment">// 右边的部分</span>  <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token function">sortArray</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">sortArray</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 递归的调用sort函数进行排序得到两个数组  然后将两个数组进行merge</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">merge</span> <span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// merge函数 参数是两个数组 一个是左 一个是右</span>  <span class="token keyword">let</span> m <span class="token operator">=</span> left <span class="token operator">&amp;&amp;</span> left<span class="token punctuation">.</span>length <span class="token comment">// m 是左边数组的长度</span>  <span class="token keyword">let</span> n <span class="token operator">=</span> right <span class="token operator">&amp;&amp;</span> right<span class="token punctuation">.</span>length <span class="token comment">// n 是右边数组的长度</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 结果数组</span>  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 遍历左边数组的下标</span>  <span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 遍历右边数组的下标</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> m <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>left<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> right<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 如果左边数组的值小于右边数组的值</span>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 将左边数组的值放入结果数组中</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token comment">// 否则将右边结果的值放入结果数组中</span>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>right<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment">// 退出循环 判断左右数组是不是有生意</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">)</span> <span class="token punctuation">{</span>    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>j <span class="token operator">&lt;</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span>    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>right<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> result <span class="token comment">// 返回合并后的数组</span><span class="token punctuation">}</span><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sortArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="42-5快速排序"><a href="#42-5快速排序" class="headerlink" title="42.5快速排序"></a>42.5快速排序</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">sortArray</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">quickSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>  <span class="token keyword">return</span> nums<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">quickSort</span> <span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length  left <span class="token operator">=</span> <span class="token keyword">typeof</span> left <span class="token operator">===</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> <span class="token number">0</span> <span class="token operator">:</span> left  right <span class="token operator">=</span> <span class="token keyword">typeof</span> right <span class="token operator">===</span> <span class="token string">'undefined'</span> <span class="token operator">?</span> len <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> right  <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> partition <span class="token operator">=</span> <span class="token function">getPartition</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right<span class="token punctuation">)</span>    <span class="token function">quickSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> partition <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token function">quickSort</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> partition <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">getPartition</span> <span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> pivot <span class="token operator">=</span> left  <span class="token keyword">let</span> index <span class="token operator">=</span> pivot <span class="token operator">+</span> <span class="token number">1</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> index<span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> right<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>pivot<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> i<span class="token punctuation">,</span> index<span class="token punctuation">)</span>      index<span class="token operator">++</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">swap</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span> pivot<span class="token punctuation">,</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">swap</span> <span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token punctuation">[</span>nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>nums<span class="token punctuation">[</span>right<span class="token punctuation">]</span><span class="token punctuation">,</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sortArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="43-手写轮播图"><a href="#43-手写轮播图" class="headerlink" title="43.手写轮播图"></a>43.手写轮播图</h4><p>轮播图主要实现的功能有一下几种,<code>自动轮播</code>,<code>左右按钮切换图片</code>,<code>小圆点切换图片</code>,<code>鼠标移入暂停轮播</code>,<code>鼠标移除继续轮播</code></p><h5 id="43-1-HTML代码"><a href="#43-1-HTML代码" class="headerlink" title="43.1 HTML代码"></a>43.1 HTML代码</h5><p>布局很简单,一个是图片列表,一个点列表,两个按钮,需要注意<code>data-xx</code>属性来倩如自定义数据</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"wrap"</span><span class="token operator">&gt;</span>       <span class="token operator">&lt;</span>ul <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"list"</span><span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"item active"</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">&gt;</span><span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"item"</span><span class="token operator">&gt;</span><span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>       <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>       <span class="token operator">&lt;</span>ul <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"pointList"</span><span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"point active"</span> data<span class="token operator">-</span>index <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"point"</span> data<span class="token operator">-</span>index <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"point"</span> data<span class="token operator">-</span>index <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"point"</span> data<span class="token operator">-</span>index <span class="token operator">=</span> <span class="token number">3</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>           <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"point"</span> data<span class="token operator">-</span>index <span class="token operator">=</span> <span class="token number">4</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>       <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>       <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn"</span> id<span class="token operator">=</span><span class="token string">"leftBtn"</span><span class="token operator">&gt;</span> <span class="token operator">&lt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>button <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"btn"</span> id<span class="token operator">=</span><span class="token string">"rightBtn"</span><span class="token operator">&gt;</span> <span class="token operator">&gt;</span> <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>   <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h5><p>父容器<code>list</code>相对定位,<code>item</code>绝对定位,实现让所有的图片重叠在容器内.利用<code>z-index</code>来设置图片高度,图片高度最高会显示在顶层上.那么容器中左右切换的按钮,和下面的小圆点要显示在最顶层,activei一个样式,给某张图片绑定这个样式就能在最上层显示.然后就是图片切换的渐变效果.opacity完全不透明到透明,再加一个<code>transition</code>动画效果.最后给cursor,给小圆点添加小手指</p><pre class="line-numbers language-css" data-language="css"><code class="language-css"><span class="token selector">&lt;style&gt;        .wrap</span> <span class="token punctuation">{</span>            <span class="token property">width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.list</span> <span class="token punctuation">{</span>            <span class="token property">width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span>            <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>            <span class="token property">padding-left</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.item</span> <span class="token punctuation">{</span>            <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>            <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>            <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>            <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>            <span class="token property">transition</span><span class="token punctuation">:</span> all .8s<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.item:nth-child(1)</span> <span class="token punctuation">{</span>            <span class="token property">background-color</span><span class="token punctuation">:</span> skyblue<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.item:nth-child(2)</span> <span class="token punctuation">{</span>            <span class="token property">background-color</span><span class="token punctuation">:</span> yellowgreen<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.item:nth-child(3)</span> <span class="token punctuation">{</span>            <span class="token property">background-color</span><span class="token punctuation">:</span> rebeccapurple<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.item:nth-child(4)</span> <span class="token punctuation">{</span>            <span class="token property">background-color</span><span class="token punctuation">:</span> pink<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.item:nth-child(5)</span> <span class="token punctuation">{</span>            <span class="token property">background-color</span><span class="token punctuation">:</span> orange<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.item.active</span> <span class="token punctuation">{</span>            <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span>            <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.btn</span> <span class="token punctuation">{</span>            <span class="token property">width</span><span class="token punctuation">:</span> 60px<span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>            <span class="token property">z-index</span><span class="token punctuation">:</span> 100<span class="token punctuation">;</span>            <span class="token property">top</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">#leftBtn</span> <span class="token punctuation">{</span>            <span class="token property">left</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">#rightBtn</span> <span class="token punctuation">{</span>            <span class="token property">right</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.pointList</span> <span class="token punctuation">{</span>            <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>            <span class="token property">padding-left</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>            <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>            <span class="token property">right</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>            <span class="token property">bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>            <span class="token property">z-index</span><span class="token punctuation">:</span> 200<span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token selector">.point</span> <span class="token punctuation">{</span>            <span class="token property">width</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>            <span class="token property">height</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>            <span class="token property">background-color</span><span class="token punctuation">:</span> antiquewhite<span class="token punctuation">;</span>            <span class="token property">border-radius</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>            <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>            <span class="token property">margin-right</span><span class="token punctuation">:</span> 8px<span class="token punctuation">;</span>            <span class="token property">border-style</span><span class="token punctuation">:</span> solid<span class="token punctuation">;</span>            <span class="token property">border-width</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span>            <span class="token property">border-color</span><span class="token punctuation">:</span> slategray<span class="token punctuation">;</span>            <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>          <span class="token punctuation">}</span>         <span class="token selector">.point.active</span><span class="token punctuation">{</span>            <span class="token property">background-color</span><span class="token punctuation">:</span> cadetblue<span class="token punctuation">;</span>        <span class="token punctuation">}</span>&lt;/style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="javascript"><a href="#javascript" class="headerlink" title="javascript"></a>javascript</h5><p>个方法,先封装个清楚active的方法,这里要给图片清楚active,比如切换到下一站股,上一张图的active就要清楚,还有point的active,然后goindex就是给图片饿小圆点同时加上active,左右按钮就是点击下一张</p><p>用<code>getAttribute</code>拿到刚才给li标签绑定的<code>data-index</code>属性，绑定图片<code>index = pointindex</code>，就能实现点击小圆点图片切换了。由于上面<code>goIndex方法</code>早已经绑定好了给图片<code>添加active样式</code>的时候也给小圆点添加的样式了，就可以实现图片切换小圆点跟随变化的效果。</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>        <span class="token keyword">var</span> items <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".item"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//图片节点</span>        <span class="token keyword">var</span> points <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">".point"</span><span class="token punctuation">)</span><span class="token comment">//点</span>        <span class="token keyword">var</span> left <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"leftBtn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> right <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"rightBtn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> all <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">".wrap"</span><span class="token punctuation">)</span>        <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//定时器跳转参数初始化</span>                 <span class="token comment">//封装一个清除active方法</span>        <span class="token keyword">var</span> <span class="token function-variable function">clearActive</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> items<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                items<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'item'</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> points<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                points<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'point'</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>         <span class="token comment">//改变active方法</span>        <span class="token keyword">var</span> <span class="token function-variable function">goIndex</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">clearActive</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            items<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'item active'</span><span class="token punctuation">;</span>            points<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span>className <span class="token operator">=</span> <span class="token string">'point active'</span>        <span class="token punctuation">}</span>        <span class="token comment">//左按钮事件</span>        <span class="token keyword">var</span> <span class="token function-variable function">goLeft</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                index <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                index<span class="token operator">--</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token function">goIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>         <span class="token comment">//右按钮事件</span>        <span class="token keyword">var</span> <span class="token function-variable function">goRight</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                index<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token function">goIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>                 <span class="token comment">//绑定点击事件监听</span>        left<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">goLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//计时器跳转清零</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>         right<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token function">goRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//计时器跳转清零</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>         <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> points<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            points<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">var</span> pointIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'data-index'</span><span class="token punctuation">)</span>                index <span class="token operator">=</span> pointIndex<span class="token punctuation">;</span>                <span class="token function">goIndex</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//计时器跳转清零</span>            <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token comment">//计时器轮播效果</span>        <span class="token keyword">var</span> timer<span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>         timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            time <span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>time <span class="token operator">==</span> <span class="token number">20</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token function">goRight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                time <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>        <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//移入清除计时器</span>        all<span class="token punctuation">.</span><span class="token function-variable function">onmousemove</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>        <span class="token punctuation">}</span>       <span class="token comment">//移出启动计时器</span>        all<span class="token punctuation">.</span><span class="token function-variable function">onmouseleave</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="44-实现三栏布局"><a href="#44-实现三栏布局" class="headerlink" title="44.实现三栏布局"></a>44.实现三栏布局</h4><p>主要实现方式见<a href="onenote:CSS.one#三栏布局的实现&amp;section-id={9484A077-5EEE-40D7-8E1D-5A02765EFE92}&amp;page-id={56F8F1CF-0FFE-42E9-85C5-D6E30A3EA52C}&amp;end&amp;base-path=https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/面试笔记1">三栏布局的实现</a></p><h4 id="45-实现setinterval"><a href="#45-实现setinterval" class="headerlink" title="45 实现setinterval"></a>45 实现setinterval</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 传入的参数是一个函数和时间</span><span class="token keyword">function</span> <span class="token function">newInterval</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 在内部定义一个函数 这样可以在内部的settime中执行这个函数</span>  <span class="token keyword">function</span> <span class="token function">inside</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// 后面的执行都是隔一段时间执行</span>    <span class="token function">setTimeout</span><span class="token punctuation">(</span>inside<span class="token punctuation">,</span> time<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token comment">// 让第一次执行是隔一段时间执行</span>  <span class="token function">setTimeout</span><span class="token punctuation">(</span>inside<span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">like</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'i like you'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">newInterval</span><span class="token punctuation">(</span>like<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="46-实现大数相加"><a href="#46-实现大数相加" class="headerlink" title="46 实现大数相加"></a>46 实现大数相加</h4><p>首先将两个数字转成字符串,然后不断的弹出,只要两个有一个还有数字,就不断的弹出,相加,需要一个变量保存计算结果</p><p>将计算结果的个位提取出来,然后加上结果</p><p>然后提取进位</p><p>最后,将头部的0给剔除</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">sumBingNumber</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 首先用字符串的方式来保存大数，这样数字在数学表示上就不会发生变化</span>  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token string">''</span>  <span class="token comment">// 初始化res，temp来保存中间的计算结果，并将两个字符串转化为数组，以便进行每一位的加法运算</span>  <span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token number">0</span>  a <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>  b <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>  <span class="token comment">// 将两个数组的对应的位进行相加，两个数相加的结果可能大于10，所以可能要进位，对10进行取余操作，将结果保存在当前位</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>length <span class="token operator">||</span> b<span class="token punctuation">.</span>length <span class="token operator">||</span> temp<span class="token punctuation">)</span> <span class="token punctuation">{</span>    temp <span class="token operator">+=</span> <span class="token operator">~</span><span class="token operator">~</span>a<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token operator">~</span><span class="token operator">~</span>b<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    res <span class="token operator">=</span> <span class="token punctuation">(</span>temp <span class="token operator">%</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">+</span> res <span class="token comment">// 最后一位相加的结果对10取余拼接在结果的前面 因为是从后向前计算</span>    temp <span class="token operator">=</span> temp <span class="token operator">&gt;</span> <span class="token number">9</span> <span class="token comment">// 判断当前位是不是大于9,判断是否有进位,若是就将temp复制为true加法中会转换成1 不是就是false 加法中转换成0 // 一直重复上述操作知道结束</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^0+</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sumBingNumber</span><span class="token punctuation">(</span><span class="token string">'000000009999999999999999999999999999999999'</span><span class="token punctuation">,</span> <span class="token string">'99999999999999999999999999999999999'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="47实现元素水平垂直居中"><a href="#47实现元素水平垂直居中" class="headerlink" title="47实现元素水平垂直居中"></a>47实现元素水平垂直居中</h4><h5 id="47-1-利用定位-margin-auto"><a href="#47-1-利用定位-margin-auto" class="headerlink" title="47.1 利用定位+margin:auto"></a>47.1 利用定位+margin:auto</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"./index.css"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token punctuation">.</span>father <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>son <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>      <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token literal-property property">right</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token literal-property property">bottom</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>      <span class="token literal-property property">margin</span><span class="token operator">:</span> auto<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"father"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"son"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="47-2-定位-margin负值"><a href="#47-2-定位-margin负值" class="headerlink" title="47.2 定位+margin负值"></a>47.2 定位+margin负值</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"./index.css"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token punctuation">.</span>father <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>son <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>      <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token comment">/* 这个是相较于父元素来说的 */</span>      <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>      margin<span class="token operator">-</span>left<span class="token operator">:</span> <span class="token operator">-</span>50px<span class="token punctuation">;</span>      margin<span class="token operator">-</span>top<span class="token operator">:</span> <span class="token operator">-</span>20px<span class="token punctuation">;</span>      <span class="token comment">/* margin也是相较于父元素来说的 */</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"father"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"son"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="47-3利用定位-transform"><a href="#47-3利用定位-transform" class="headerlink" title="47.3利用定位+transform"></a>47.3利用定位+transform</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"./index.css"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token punctuation">.</span>father <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>son <span class="token punctuation">{</span>      <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>      <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>      <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">translate</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">/* transatehi相对于本身来说的 */</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"father"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"son"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="47-4-flex布局"><a href="#47-4-flex布局" class="headerlink" title="47.4 flex布局"></a>47.4 flex布局</h5><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>link rel<span class="token operator">=</span><span class="token string">"stylesheet"</span> href<span class="token operator">=</span><span class="token string">"./index.css"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    <span class="token punctuation">.</span>father <span class="token punctuation">{</span>      <span class="token literal-property property">display</span><span class="token operator">:</span> table<span class="token operator">-</span>cell<span class="token punctuation">;</span>      vertical<span class="token operator">-</span>align<span class="token operator">:</span> middle<span class="token punctuation">;</span>      text<span class="token operator">-</span>align<span class="token operator">:</span> center<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token punctuation">.</span>son <span class="token punctuation">{</span>      <span class="token literal-property property">display</span><span class="token operator">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"father"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"son"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="48使用reduce实现map"><a href="#48使用reduce实现map" class="headerlink" title="48使用reduce实现map"></a>48使用reduce实现map</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myMap</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">let</span> thisV <span class="token operator">=</span> thisArg <span class="token operator">||</span> <span class="token keyword">null</span>  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">total<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> i<span class="token punctuation">,</span> thisArr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisV<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> i<span class="token punctuation">,</span> thisArr<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> arr<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="49-实现一个三角形"><a href="#49-实现一个三角形" class="headerlink" title="49 实现一个三角形"></a>49 实现一个三角形</h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>UTF-8<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">http-equiv</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>X-UA-Compatible<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>IE=edge<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>viewport<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>width=device-width, initial-scale=1.0<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Document<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">    <span class="token selector">.top</span> <span class="token punctuation">{</span>      <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">border-top</span><span class="token punctuation">:</span> 100px solid red<span class="token punctuation">;</span>      <span class="token property">border-left</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>      <span class="token property">border-right</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>      <span class="token property">border-bottom</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">.left</span> <span class="token punctuation">{</span>      <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">border-top</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>      <span class="token property">border-left</span><span class="token punctuation">:</span> 100px solid yellow<span class="token punctuation">;</span>      <span class="token property">border-right</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>      <span class="token property">border-bottom</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">.right</span> <span class="token punctuation">{</span>      <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">border-top</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>      <span class="token property">border-left</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>      <span class="token property">border-right</span><span class="token punctuation">:</span> 100px solid pink<span class="token punctuation">;</span>      <span class="token property">border-bottom</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">.bottom</span> <span class="token punctuation">{</span>      <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">border-top</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>      <span class="token property">border-left</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>      <span class="token property">border-right</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>      <span class="token property">border-bottom</span><span class="token punctuation">:</span> 100px solid green<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token selector">.left-top</span> <span class="token punctuation">{</span>      <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>      <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>      <span class="token property">border-top</span><span class="token punctuation">:</span> 100px solid yellow<span class="token punctuation">;</span>      <span class="token comment">/* border-left: 100px solid yellow; */</span>      <span class="token comment">/* border-bottom: 100px solid transparent; */</span>      <span class="token property">border-right</span><span class="token punctuation">:</span> 100px solid transparent<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>top<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>right<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>bottom<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>left-top<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>对于这个显示的范围是根据左右的范围显示的 top就是顶部,加上一个左右才能显示 只有四个方向相同才能完成</p><h4 id="50实现一个扇形"><a href="#50实现一个扇形" class="headerlink" title="50实现一个扇形"></a>50实现一个扇形</h4><p>设置宽高,高为宽的一般,然后设置边界radius为高度大小</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>    div <span class="token punctuation">{</span>      background<span class="token operator">-</span>color<span class="token operator">:</span> red<span class="token punctuation">;</span>      <span class="token literal-property property">width</span><span class="token operator">:</span> 100px<span class="token punctuation">;</span>      <span class="token literal-property property">height</span><span class="token operator">:</span> 50px<span class="token punctuation">;</span>      border<span class="token operator">-</span>radius<span class="token operator">:</span> 0px 0px 100px 100px<span class="token punctuation">;</span>    <span class="token punctuation">}</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总4</title>
      <link href="/2022/09/23/chang-jian-shou-xie-ti-hui-zong-4/"/>
      <url>/2022/09/23/chang-jian-shou-xie-ti-hui-zong-4/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总4</p><span id="more"></span><h4 id="31-实现new"><a href="#31-实现new" class="headerlink" title="31.实现new"></a>31.实现new</h4><p>new有四步</p><p>创建一个新对象</p><p>让新对象的<code>__proto__</code>指向构造函数的<code>prototype</code></p><p>调用构造函数修改this为新对象</p><p>判断新的对象是不是引用类型,如果是返回引用类型,不是返回obj,注意要使用instanceof而不是null,是引用类型,typeof不能判断null</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type  <span class="token comment">// return {'this':'你好'}</span><span class="token punctuation">}</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'狗是'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">+</span> <span class="token string">'类型'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">mockNew</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> constructor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> constructor<span class="token punctuation">.</span>prototype  <span class="token comment">// console.log(arguments);</span>  <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>  <span class="token keyword">return</span> ret <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> ret <span class="token operator">:</span> obj<span class="token punctuation">}</span><span class="token comment">// let dog = new Animal('dog')</span><span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token function">mockNew</span><span class="token punctuation">(</span>Animal<span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>dog<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="32-实现instanceof"><a href="#32-实现instanceof" class="headerlink" title="32.实现instanceof"></a>32.实现instanceof</h4><p>判断右边的原型是不是在左边的原型链上</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// instanceof 就是判断构造函数的 prototype 属性是否出现在实例的原型链上。</span><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> type<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Dog</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> type<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Miao</span> <span class="token punctuation">(</span><span class="token parameter">tyep</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>type <span class="token operator">=</span> tyep<span class="token punctuation">}</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Dog<span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token function">mockNew</span><span class="token punctuation">(</span>Dog<span class="token punctuation">,</span> <span class="token string">'dog'</span><span class="token punctuation">)</span><span class="token keyword">let</span> miao <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Miao</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myInstanceof</span><span class="token punctuation">(</span>dog<span class="token punctuation">,</span> Dog<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myInstanceof</span><span class="token punctuation">(</span>miao<span class="token punctuation">,</span> Dog<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">mockNew</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> constructor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> constructor<span class="token punctuation">.</span>prototype  <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>  <span class="token keyword">return</span> ret <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> ret <span class="token operator">:</span> obj<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">myInstanceof</span> <span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span> right</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> proto <span class="token operator">=</span> left<span class="token punctuation">.</span>__proto__  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>proto <span class="token operator">===</span> right<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>    proto <span class="token operator">=</span> proto<span class="token punctuation">.</span>__proto__  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="33-实现object-create"><a href="#33-实现object-create" class="headerlink" title="33.实现object.create"></a>33.实现object.create</h4><p>是创建一个新的对象,让新对象的<code>__proto__</code>指向后面的值</p><p>两种方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// Object.create()方法创建一个新对象，使用现有的对象来提供新创建的对象的__proto__。</span><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">}</span>Object<span class="token punctuation">.</span><span class="token function-variable function">create1</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">proto<span class="token punctuation">,</span> propertyObject <span class="token operator">=</span> <span class="token keyword">undefined</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> proto <span class="token operator">!==</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> proto <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 如果传入的第一个对象不是object 不是 function 就报错</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Object prototype may only be an Object or null.'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyObject <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 如果传入的第二个地下是null 也要报错</span>    <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Cannot convert undefined or null to object'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> proto  <span class="token keyword">if</span> <span class="token punctuation">(</span>propertyObject <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> propertyObject<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> obj<span class="token punctuation">}</span>Object<span class="token punctuation">.</span><span class="token function-variable function">create2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">proto<span class="token punctuation">,</span> propertyObject <span class="token operator">=</span> <span class="token keyword">undefined</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// function F () { }</span>  <span class="token comment">// F.prototype = proto</span>  <span class="token comment">// return new F()</span>  <span class="token keyword">function</span> <span class="token constant">F</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>  <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> proto  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Dog</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">nihao</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>dog<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create1</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>dog<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="34-实现Object-assign"><a href="#34-实现Object-assign" class="headerlink" title="34.实现Object.assign"></a>34.实现<code>Object.assign</code></h4><p><code>Object.assign() </code>方法将所有可枚举<code>（Object.propertyIsEnumerable() 返回 true）</code>的自有<code>（Object.hasOwnProperty() 返回 true）</code>属性从一个或多个源对象复制到目标对象，返回修改后的对象</p><p>用法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> target <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> returnedTarget <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// expected output: Object { a: 1, b: 4, c: 5 }</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>returnedTarget <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// expected output: true</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 实现 Object.assign 这个函数就是实现浅拷贝</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>  name<span class="token operator">:</span> <span class="token string">"xiaolidu"</span><span class="token punctuation">,</span>  age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>  hobby<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'吃饭'</span><span class="token punctuation">,</span> <span class="token string">'睡觉'</span><span class="token punctuation">,</span> <span class="token string">'打豆豆'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  power<span class="token operator">:</span> <span class="token punctuation">{</span>    sleep<span class="token operator">:</span> <span class="token string">'8小时'</span><span class="token punctuation">,</span>    eat<span class="token operator">:</span> <span class="token string">"20个馒头"</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>Object<span class="token punctuation">.</span><span class="token function-variable function">assign2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">targrt<span class="token punctuation">,</span> <span class="token operator">...</span>source</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>targrt <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'Cannot convert undefined or null to object'</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> ret <span class="token operator">=</span> <span class="token function">Object</span><span class="token punctuation">(</span>targrt<span class="token punctuation">)</span>  source<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          ret<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token keyword">return</span> ret<span class="token punctuation">}</span><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">30</span> <span class="token punctuation">}</span><span class="token keyword">let</span> newObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign2</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj<span class="token punctuation">)</span>newObj<span class="token punctuation">.</span>hobby<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'吹牛'</span><span class="token punctuation">)</span>newObj<span class="token punctuation">.</span>power<span class="token punctuation">.</span>sleep <span class="token operator">=</span> <span class="token string">'10小时'</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'----------------------'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newObj<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="37-遍历对象所有属性"><a href="#37-遍历对象所有属性" class="headerlink" title="37.遍历对象所有属性"></a>37.遍历对象所有属性</h4><p><code>for in</code>遍历的是<code>自身+原型链上的可枚举的属性</code></p><p><code>object.keys</code>遍历的是自身的可枚举的属性</p><p><code>object.getOwnPropertyName</code>遍历的是自身可枚举和不可枚举的属性</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>  name<span class="token operator">:</span> <span class="token string">'xiaolidu'</span><span class="token punctuation">,</span>  age<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>  hobbies<span class="token operator">:</span> <span class="token punctuation">{</span>    sports<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'游泳'</span><span class="token punctuation">,</span> <span class="token string">'洗澡'</span><span class="token punctuation">,</span> <span class="token string">'睡觉'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>    music<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'lost-river'</span><span class="token punctuation">,</span> <span class="token string">'jinitaimei'</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  birthday<span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020/12/20 20:30:30'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token function-variable function">say</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我的名字是'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span>Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">'power'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>  value<span class="token operator">:</span> <span class="token string">'吃饭'</span><span class="token punctuation">,</span>  enumerable<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token keyword">function</span> <span class="token function">People</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>power <span class="token operator">=</span> <span class="token string">'吃饭'</span><span class="token punctuation">}</span>obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// console.log(obj);</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'自身可枚举'</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [ 'name', 'age', 'hobbies', 'birthday','say' ] // 只是得到自身的可枚举的属性</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'自身可枚举不可枚举'</span><span class="token punctuation">,</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyNames</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 也是没有继承的属性</span><span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>  result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span> <span class="token comment">// 这样的话就会有继承的属性了</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'自身和原型链可枚举'</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 遍历对象的所有属性</span>result<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">[</span>item<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="38-随机排序"><a href="#38-随机排序" class="headerlink" title="38.随机排序"></a>38.随机排序</h4><p>代码如下,可以使用sort方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 随机排序</span><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">]</span>arr<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token comment">// 对数组随机打乱</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 数字的排序会转换为字符串 数字 小于 小写字母 小于 大写字母 小于汉字</span><span class="token keyword">let</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">,</span> <span class="token number">102</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">]</span>arr1<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 先看第一个字符 第一个字符相同 看第二个字符 找最小的那个</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span>arr2<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 另一种思路,遍历到第一个产生一个随机数,让于正随机数互换,遍历到第二个产生一个随机数,这个随机数不能是1然后互换,以此类推</span><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> randomIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">round</span><span class="token punctuation">(</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> i  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>randomIndex<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>randomIndex<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>randomIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="39-实现冒泡排序"><a href="#39-实现冒泡排序" class="headerlink" title="39.实现冒泡排序"></a>39.实现冒泡排序</h4><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 比较相邻的元素。如果第一个比第二个大，就交换他们两个。</span><span class="token comment">// 对每一对相邻元素做同样的工作，从开始第一对到结尾的最后一对。在这一点，最后的元素应该会是最大的数。</span><span class="token comment">// 针对所有的元素重复以上的步骤，除了最后一个。</span><span class="token comment">// 持续每次对越来越少的元素重复上面的步骤，直到没有任何一对数字需要比比较</span>    <span class="token comment">// 编写方法，实现冒泡</span><span class="token keyword">function</span> <span class="token function">bubble</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>     <span class="token comment">// 1:套一个函数的壳子，将参数传入</span><span class="token comment">//外层循环，控制趟数，每一次找到一个最大值</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// 内层循环,控制比较的次数，并且判断两个数的大小</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// 白话解释：如果前面的数大，放到后面(当然是从小到大的冒泡排序)</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">var</span> temp <span class="token operator">=</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>                arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>                arr<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>     <span class="token punctuation">}</span><span class="token keyword">return</span> arr  <span class="token comment">//2: 将执行完的结果返回就可以</span><span class="token punctuation">}</span><span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">29</span><span class="token punctuation">,</span><span class="token number">45</span><span class="token punctuation">,</span><span class="token number">51</span><span class="token punctuation">,</span><span class="token number">68</span><span class="token punctuation">,</span><span class="token number">72</span><span class="token punctuation">,</span><span class="token number">97</span><span class="token punctuation">]</span><span class="token punctuation">;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">bubble</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[2, 4, 5, 12, 31, 32, 45, 52, 78, 89]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="40-随机选取0-100的数加入数组并排序"><a href="#40-随机选取0-100的数加入数组并排序" class="headerlink" title="40.随机选取0~100的数加入数组并排序"></a>40.随机选取0~100的数加入数组并排序</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">xuanqupaixu</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> n <span class="token operator">-</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>result<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> result<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token punctuation">[</span>result<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>result<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>result<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>result<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> result<span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">xuanqupaixu</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总3</title>
      <link href="/2022/09/20/chang-jian-shou-xie-ti-hui-zong-3/"/>
      <url>/2022/09/20/chang-jian-shou-xie-ti-hui-zong-3/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总3</p><span id="more"></span><h4 id="实现JSONP"><a href="#实现JSONP" class="headerlink" title="实现JSONP"></a>实现JSONP</h4><p>定义一个函数，专门用来实现jsonp，传入一个对象，包含url，params，callbackName，这三个属性</p><p>函数内部生成一个script表桥，通过url和params拼接处请求路径字符串</p><p>设置src为这个script的src属性</p><p>将这个script标签添加到页面中</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    window<span class="token punctuation">.</span><span class="token function-variable function">getUserInfo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> <span class="token function-variable function">jsonp</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url<span class="token punctuation">,</span> params<span class="token punctuation">,</span> callbackName <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传入一个对象 有url,params和回调函数名字</span>      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">const</span> scriptSrc <span class="token operator">=</span> <span class="token function">generateUrl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token keyword">const</span> scriptEle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'script'</span><span class="token punctuation">)</span>        scriptEle<span class="token punctuation">.</span>src <span class="token operator">=</span> scriptSrc        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>scriptEle<span class="token punctuation">)</span>        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">function</span> <span class="token function">generateUrl</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> dataSrc <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 解析params对象 生成= &amp; ? 的字符串拼接上callbackName函数名 后端需要返回这个的callbackName(result) result是json数据格式的</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>          dataSrc<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        dataSrc <span class="token operator">=</span> url <span class="token operator">+</span> <span class="token string">"?"</span> <span class="token operator">+</span> dataSrc<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&amp;callbackName=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callbackName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>        <span class="token keyword">return</span> dataSrc      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">jsonp</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://localhost:3000/api/jsonp'</span><span class="token punctuation">,</span>      <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'方现伟'</span><span class="token punctuation">,</span> <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token number">123456</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token literal-property property">callbackName</span><span class="token operator">:</span> <span class="token string">'getUserInfo'</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>服务端代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// app.use(express.urlencoded({ extended: false }))</span>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span>userList <span class="token operator">=</span> <span class="token punctuation">[</span>  <span class="token punctuation">{</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'张三'</span><span class="token punctuation">,</span>    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">'20'</span>  <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token comment">// app.get('/api/jsonp', (req, res) =&gt; {</span><span class="token comment">//   let name = req.query.name</span><span class="token comment">//   let password = req.query.password</span><span class="token comment">//   let callback = req.query.callbackName</span><span class="token comment">//   let data = {</span><span class="token comment">//     name,</span><span class="token comment">//     password,</span><span class="token comment">//     age: 20</span><span class="token comment">//   }</span><span class="token comment">//   let result = JSON.stringify(data)</span><span class="token comment">//   // res.setHeader('content-type','jsonp')</span><span class="token comment">//   res.write(`${callback}(${result})`)</span><span class="token comment">//   res.end()</span><span class="token comment">// })</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/jsonp'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> name <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>name  <span class="token keyword">let</span> password <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>password  <span class="token keyword">let</span> callbackName <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>callbackName  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token literal-property property">name</span><span class="token operator">:</span> name<span class="token punctuation">,</span>    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">'20'</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> dataRes <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>  res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callbackName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dataRes<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/getuser'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> name <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>name  <span class="token keyword">let</span> age <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>age  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>    name<span class="token punctuation">,</span>    age  <span class="token punctuation">}</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>  res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/userlist'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">// let name = req.query.name</span>  <span class="token comment">// let age = req.query.age</span>  <span class="token comment">// console.log(name,age);</span>  <span class="token comment">// let data = {</span>  <span class="token comment">//   name,</span>  <span class="token comment">//   age</span>  <span class="token comment">// }</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>app<span class="token punctuation">.</span>userList<span class="token punctuation">)</span>  res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/addUser'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> name <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>name  <span class="token keyword">let</span> age <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>age  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>    name<span class="token punctuation">,</span>    age  <span class="token punctuation">}</span>  app<span class="token punctuation">.</span>userList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>  res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>    <span class="token literal-property property">msg</span><span class="token operator">:</span> <span class="token string">'数据插入成功'</span><span class="token punctuation">,</span>    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// console.log(data.name);</span><span class="token punctuation">}</span><span class="token punctuation">)</span>app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听了3000端口'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="22-手写ajax"><a href="#22-手写ajax" class="headerlink" title="22.手写ajax"></a>22.手写ajax</h4><p>实现思路,创建一个ajax对象函数传入一个参数对象,里面包含方法,网址,参数,和完成后的函数</p><p>首先创建xhr对象,将方法转为大写,对参数进行拼接,拼接处url</p><p>如果是get方法,调用open方法,将拼接好的加入到url后面,调用send方法</p><p>如果是POST方法,调用open方法,设置请求头为<code>application/x-www-form-urlencoded</code></p><p>将进阶好的字符串传到后端</p><p>监听<code>onreadystatechange</code>事件,如果状态码是4 就输出这个函数</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">function</span> <span class="token function">ajax</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>      method<span class="token punctuation">,</span> <span class="token comment">// 方法名</span>      url<span class="token punctuation">,</span> <span class="token comment">// 请求地址</span>      params<span class="token punctuation">,</span> <span class="token comment">// 参数</span>      done <span class="token comment">// 完成回调函数</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> xhr <span class="token operator">=</span> window<span class="token punctuation">.</span>XMLHttpRequest <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">"Microsoft.XMLHTTP"</span><span class="token punctuation">)</span> <span class="token comment">// 处理兼容性问题</span>      method <span class="token operator">=</span> method<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 转换成大写字母</span>      <span class="token comment">// 参数拼接</span>      <span class="token keyword">let</span> pair <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>        pair<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>key <span class="token operator">+</span> <span class="token string">'='</span> <span class="token operator">+</span> params<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 拼接这个数组</span>      <span class="token punctuation">}</span>      <span class="token keyword">let</span> str <span class="token operator">=</span> pair<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span>      <span class="token comment">// 判断请求方法</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'GET'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url <span class="token operator">+</span> <span class="token string">'?'</span> <span class="token operator">+</span> str<span class="token punctuation">)</span> <span class="token comment">// 拼接路径开始open</span>        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>method <span class="token operator">===</span> <span class="token string">'POST'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>method<span class="token punctuation">,</span> url<span class="token punctuation">)</span> <span class="token comment">// 先open然后setrequestheader</span>        xhr<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">"content-type"</span><span class="token punctuation">,</span> <span class="token string">"application/x-www-form-urlencoded"</span><span class="token punctuation">)</span>        xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>      <span class="token punctuation">}</span>      xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">// open(JSON.parse(xhr.responseText))</span>          <span class="token comment">// console.log(JSON.parse(xhr.responseText));</span>          <span class="token function">done</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// ajax({</span>    <span class="token comment">//   method: 'get',</span>    <span class="token comment">//   url: 'http://localhost:3000/api/getuser',</span>    <span class="token comment">//   params: {</span>    <span class="token comment">//     name: '方现伟',</span>    <span class="token comment">//     age: '20岁'</span>    <span class="token comment">//   },</span>    <span class="token comment">//   done: function (params) {</span>    <span class="token comment">//     console.log(params);</span>    <span class="token comment">//   }</span>    <span class="token comment">// })</span>    <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://localhost:3000/api/addUser'</span><span class="token punctuation">,</span>      <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'方现伟'</span><span class="token punctuation">,</span>        <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token string">'20岁'</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function-variable function">done</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>      <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>      <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://localhost:3000/api/userlist'</span><span class="token punctuation">,</span>      <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token function-variable function">done</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>params<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="23-实现数组原型方法Foreach"><a href="#23-实现数组原型方法Foreach" class="headerlink" title="23.实现数组原型方法Foreach"></a>23.实现数组原型方法Foreach</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token comment">// [1, 2, 3, 4, 5].forEach((item, index) =&gt; {</span>    <span class="token comment">//   console.log(`index=${index},item=${item},this=${this}`);</span>    <span class="token comment">// }, [4, 5, 6])</span>    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// console.log(a, this)</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">index=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,item=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,this=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">forEach2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'this is null'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'callback is not a function'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    arr<span class="token punctuation">.</span><span class="token function">forEach2</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 不能直接使用数组 不知道为啥</span>      <span class="token comment">// console.log(a, this)</span>      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">index=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,item=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,this=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="实现map"><a href="#实现map" class="headerlink" title="实现map"></a>实现map</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> item <span class="token operator">+</span> <span class="token number">1</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">map2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'this is null'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'callback is not a function'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> res    <span class="token punctuation">}</span>    <span class="token keyword">let</span> arr3 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map2</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> item <span class="token operator">+</span> <span class="token number">1</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="25-实现filter"><a href="#25-实现filter" class="headerlink" title="25.实现filter"></a>25.实现filter</h4><p>遍历每一个筛选出有效的</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> item <span class="token operator">&gt;=</span> <span class="token number">3</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">filter2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'this is null'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'callback is not a function'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> res    <span class="token punctuation">}</span>    <span class="token keyword">let</span> arr3 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> item <span class="token operator">&gt;=</span> <span class="token number">3</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="26-实现some"><a href="#26-实现some" class="headerlink" title="26.实现some"></a>26.实现some</h4><p>判断是否有符合条件的</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">2</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">some2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> thisArg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'this is null'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'callback is not a function'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">callback</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>thisArg<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">return</span> <span class="token boolean">true</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span>    res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> item <span class="token operator">&gt;</span> <span class="token number">2</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="27-实现reduce"><a href="#27-实现reduce" class="headerlink" title="27.实现reduce"></a>27.实现reduce</h4><p>通常用于数组求和,接受两个参数,一个是函数,一个是起始值</p><p>函数也有两个参数,一个是起始值也是后面函数内部的上一次的返回值,第二个是当前值</p><p>要注意,遍历的时候碰到undefined需要调过</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> sum <span class="token operator">+</span> item    <span class="token punctuation">}</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">reduce2</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> initialValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">'this is null or not defined'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> callback <span class="token operator">!==</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span>callback <span class="token operator">+</span> <span class="token string">' is not a function'</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">let</span> acc <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 结果</span>      <span class="token keyword">let</span> k <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 第几个</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>initialValue <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传递了初始值</span>        acc <span class="token operator">=</span> initialValue      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 没有传递初始值</span>        <span class="token comment">// 去数组中第一个不是undefined的作为初始值</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            acc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>k<span class="token operator">++</span><span class="token punctuation">]</span>            <span class="token keyword">break</span> <span class="token comment">// 退出循环此时的k是第一个是值的位置 所以要k++从下一位开始累加</span>          <span class="token punctuation">}</span>          k<span class="token operator">++</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>      <span class="token keyword">while</span> <span class="token punctuation">(</span>k <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          acc <span class="token operator">=</span> <span class="token function">callback</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> k<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        k<span class="token operator">++</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> acc    <span class="token punctuation">}</span>    res <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">reduce2</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span> item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> sum <span class="token operator">+</span> item    <span class="token punctuation">}</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="28-实现call"><a href="#28-实现call" class="headerlink" title="28.实现call"></a>28.实现call</h4><p>接受两个参数,一个是this指向,一个是参数序列</p><p>首先获得this指向,如果没有就是window</p><p>获得参数序列</p><p>将原函数挂载到新this上</p><p>调用新函数的方法获得返回值</p><p>删除this的属性</p><p>返回这个函数</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 使用一个指定的 this 值和一个或多个参数来调用一个函数。</span><span class="token comment">// 实现要点：</span><span class="token comment">// this 可能传入 null；</span><span class="token comment">// 传入不固定个数的参数；</span><span class="token comment">// 函数可能有返回值；</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// context = context || window // context是否存在 不存在就是window</span>  <span class="token comment">// context.fn = this // 将该方法添加到传进来的this上</span>  <span class="token comment">// let args = [...arguments].slice(1) // 接收传递过来的参数</span>  <span class="token comment">// let result = null // 初始化返回值</span>  <span class="token comment">// result = context.fn(...args)</span>  <span class="token comment">// delete context.fn</span>  <span class="token comment">// return result</span>  context <span class="token operator">=</span> context <span class="token operator">||</span> window  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span>  <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn  <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">a</span> <span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'方现伟'</span><span class="token punctuation">,</span>  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">}</span>a<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="29-实现apply"><a href="#29-实现apply" class="headerlink" title="29.实现apply"></a>29.实现apply</h4><p>方法差不多</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  context <span class="token operator">=</span> context <span class="token operator">||</span> window  context<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span>  <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 截取之后是数组包着数组 去除这个数组中的第一个元素</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>args <span class="token operator">&amp;&amp;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>    result <span class="token operator">=</span> context<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">delete</span> context<span class="token punctuation">.</span>fn  <span class="token keyword">return</span> result<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="30-实现bind"><a href="#30-实现bind" class="headerlink" title="30.实现bind"></a>30.实现bind</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  context <span class="token operator">=</span> context <span class="token operator">||</span> window  <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> self <span class="token operator">=</span> <span class="token keyword">this</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token function">self</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><p>*const *express = require(‘express’)</p><p>*const *cors = require(‘cors’)</p><p><em>const</em> app = express()</p><p>app.use(cors())</p><p>app.use(express.urlencoded({ extended: false }))</p><p>app.get(‘/api/jsonp’, (<em>req</em>, <em>res</em>) <em>=&gt;</em> {</p><p>&nbsp; <em>let</em> name = <em>req</em>.query.name</p><p>&nbsp; <em>let</em> password = <em>req</em>.query.password</p><p>&nbsp; <em>let</em> callbackName = <em>req</em>.query.callbackName</p><p>&nbsp; console.log(<em>req</em>.query);</p><p>&nbsp; <em>let</em> data = {</p><p>&nbsp; &nbsp; name: name,</p><p>&nbsp; &nbsp; age: 20</p><p>&nbsp; }</p><p>&nbsp; data = JSON.stringify(data)</p><p>&nbsp; <em>res</em>.write(`${callbackName}(${data})`)</p><p>&nbsp; <em>res</em>.end()</p><p>})</p><p>app.listen(3000, () <em>=&gt;</em> {</p><p>&nbsp; console.log(‘监听了3000端口’);</p><p>})</p><hr>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总2</title>
      <link href="/2022/09/17/chang-jian-shou-xie-ti-hui-zong-2/"/>
      <url>/2022/09/17/chang-jian-shou-xie-ti-hui-zong-2/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总 2</p><span id="more"></span><h4 id="11-事件总线"><a href="#11-事件总线" class="headerlink" title="11 事件总线"></a>11 事件总线</h4><p>事件总线也就是发布订阅模式，可以通过一个类来进行创建</p><p>首先构造函数创建一个容器，也就是 cache，用来存放对应的键值对</p><p>键名表示被订阅者，值是一个数组，表示所有的订阅者</p><p>这个要实现订阅函数的方法、取消时间的方法、发布事件的方法这三个方法</p><p>对于订阅方法，传入的参数是被订阅者的名字和函数</p><p>如果这个存在就 push 这个函数，不存在就设置为数组</p><p>取消的放啊 如果这个不存在，就直接返回</p><p>否则找到所有的函数的下标 然后删除这个函数</p><p>发布，找到这个名字所关联的任务，然后遍历这个任务进行执行</p><p>只有一次 就删除掉这个 key</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 存储名字和幻术的对应关系</span>  <span class="token punctuation">}</span>  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 订阅函数方法</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 有这个时间名</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token comment">// 放入函数</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>fn<span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 取消时间方法</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token keyword">return</span>    <span class="token keyword">let</span> tasks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token comment">// 找到这个task</span>    <span class="token keyword">let</span> index <span class="token operator">=</span> tasks<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">f</span> <span class="token operator">=&gt;</span> f <span class="token operator">===</span> fn <span class="token operator">||</span> f<span class="token punctuation">.</span>callback <span class="token operator">===</span> fn<span class="token punctuation">)</span> <span class="token comment">// 找个这个的索引</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 删除</span>      tasks<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> once <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 发布事件</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> tasks <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 拷贝一份改时间</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> fn <span class="token keyword">of</span> tasks<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// 遍历事件传入参数</span>        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>once<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// 如果只有一次 删除该事件</span>        <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>cache<span class="token punctuation">[</span>name<span class="token punctuation">]</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="12-解析-URL-为对象"><a href="#12-解析-URL-为对象" class="headerlink" title="12.解析 URL 为对象"></a>12.解析 URL 为对象</h4><p>思路见代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">parseParam</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 接受一个参数为url字符串</span>  <span class="token keyword">let</span> paramsStr <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'?'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 首先用?进行分解 取出?后面的 是键值对对象</span>  <span class="token keyword">let</span> paramsArr <span class="token operator">=</span> paramsStr<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'&amp;'</span><span class="token punctuation">)</span> <span class="token comment">// 然后用&amp;进行分解 得出这个每个键值对</span>  <span class="token keyword">let</span> paramsObj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 键值对对象初始化</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> paramsArr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 遍历键值对数组</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>paramsArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 如果有等于号</span>      <span class="token keyword">let</span> <span class="token punctuation">[</span>key<span class="token punctuation">,</span> val<span class="token punctuation">]</span> <span class="token operator">=</span> paramsArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span> <span class="token comment">// 分割出key和value</span>      val <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token comment">// 对val进行字符串转义</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>paramsObj<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// 如果对象中已经存在了这个key</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>paramsObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>          <span class="token comment">// 如果是数组 就加入到数组中</span>          paramsObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          paramsObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>paramsObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> val<span class="token punctuation">]</span> <span class="token comment">// 不是数组就转成数组 然后加入数组中</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token comment">// 如果kye不存在 就是一个值</span>        paramsObj<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val      <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      paramsObj<span class="token punctuation">[</span>paramsArr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 如果没有等于号 那默认是true</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> paramsObj <span class="token comment">// 返回这个对象</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="13-字符串模板"><a href="#13-字符串模板" class="headerlink" title="13.字符串模板"></a>13.字符串模板</h4><p>将对象中的数据替换到字符串中,使用正则来进行匹配</p><p>首先定义一个正则表达式 用来匹配<code>{{}}</code>中的字符</p><p>调用 test 方法 判断是不是能匹配到 如果能匹配到 调用 exec 返回数组,具体用法如下</p><p>reg.exec() 的作用是专门在正则中查找字符串中所有敏感词的内容和位置的函数。找到一个敏感词，就会返回一个数组：</p><p>数组:[ 0: “敏感词的内容”, index: 敏感词的下标位置 i ]</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'1ab2zzzzz'</span><span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\d(\w)(\w)\d</span><span class="token regex-delimiter">/</span></span> <span class="token comment">//注意：每个(\w)代表一个子表达式</span><span class="token keyword">var</span> ret <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//1ab2</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//a</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">//b</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果带括号的话就是子表达式,而且是在匹配内容的后面进行排序</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token parameter">template<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\{\{(\w+)\}\}</span><span class="token regex-delimiter">/</span></span> <span class="token comment">// 模板字符串正则</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>template<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 判断模板里是否有模板字符串</span>    <span class="token keyword">const</span> name <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>template<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 查找当前模板里第一个模板字符串的字段</span>    template <span class="token operator">=</span> template<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> data<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 将第一个模板字符串渲染</span>    <span class="token keyword">return</span> <span class="token function">render</span><span class="token punctuation">(</span>template<span class="token punctuation">,</span> data<span class="token punctuation">)</span> <span class="token comment">// 递归的渲染并返回渲染后的结构</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> template <span class="token comment">// 如果模板没有模板字符串直接返回</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="14-图片懒加载"><a href="#14-图片懒加载" class="headerlink" title="14.图片懒加载"></a>14.图片懒加载</h4><p>这个概念已经很清楚了,监测是不是进入可视区,如果进入就让 datesrc 赋值给 src 属性</p><p>然后监听滚动事件,进行懒加载的处理</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>我是谁<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">""</span> data<span class="token operator">-</span>src<span class="token operator">=</span><span class="token string">"./lanjiazai.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token comment">// 与普通的图片懒加载不同，如下这个多做了 2 个精心处理：</span>    <span class="token comment">// 图片全部加载完成后移除事件监听；</span>    <span class="token comment">// 加载完的图片，从 imgList 移除；</span>    <span class="token keyword">let</span> imgList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> length <span class="token operator">=</span> imgList<span class="token punctuation">.</span>length    <span class="token keyword">const</span> <span class="token function-variable function">imgLazyLoad</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span>      <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// console.log(1);</span>        <span class="token keyword">let</span> deleteIndexList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        imgList<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>          <span class="token comment">// 遍历这里面的每一个img标签</span>          <span class="token keyword">let</span> rect <span class="token operator">=</span> img<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>          <span class="token keyword">if</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>top <span class="token operator">&lt;</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// 如果距离顶部的高度小于窗口的高度 就显示图片</span>            img<span class="token punctuation">.</span>src <span class="token operator">=</span> img<span class="token punctuation">.</span>dataset<span class="token punctuation">.</span>src            count<span class="token operator">++</span> <span class="token comment">// 计数器++</span>            deleteIndexList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span> <span class="token comment">// 将当前元素的下标放入这个删除了的数组中</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>              document<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> imgLazyLoad<span class="token punctuation">)</span> <span class="token comment">// 移除监听函数</span>            <span class="token punctuation">}</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>        imgList <span class="token operator">=</span> imgList<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">img<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">!</span>deleteIndexList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> imgLazyLoad<span class="token punctuation">)</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="15-函数防抖"><a href="#15-函数防抖" class="headerlink" title="15.函数防抖"></a>15.函数防抖</h4><p>概念很清晰</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> timer  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span>    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="16-复杂版函数防抖"><a href="#16-复杂版函数防抖" class="headerlink" title="16.复杂版函数防抖"></a>16.复杂版函数防抖</h4><p>可以控制立即执行,也可以取消</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> wait<span class="token punctuation">,</span> immediate</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> timer<span class="token punctuation">,</span> result  <span class="token keyword">let</span> <span class="token function-variable function">debounceFn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span>    <span class="token keyword">let</span> args <span class="token operator">=</span> arguments    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> callNow <span class="token operator">=</span> <span class="token operator">!</span>timer <span class="token comment">// 第一次点击此时的timer为空</span>      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token comment">// 后续的点击timer就有值了 怎么点击都不会调用这个函数</span>        timer <span class="token operator">=</span> <span class="token keyword">null</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>callNow<span class="token punctuation">)</span> result <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> wait<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> result  <span class="token punctuation">}</span>  debounceFn<span class="token punctuation">.</span><span class="token function-variable function">cancel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>    timer <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> debounceFn<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="17-函数节流"><a href="#17-函数节流" class="headerlink" title="17.函数节流"></a>17.函数节流</h4><p>概念很清晰</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token keyword">this</span>    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> args<span class="token punctuation">)</span>        timer <span class="token operator">=</span> <span class="token keyword">null</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="19-函数科里化"><a href="#19-函数科里化" class="headerlink" title="19.函数科里化"></a>19.函数科里化</h4><p>实现传入一个函数作为参数,传出一个可以连续调用的函数</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 接受一个函数作为参数</span>  <span class="token comment">// console.log(fn.length); fn.length 就是这个函数的参数的长度</span>  <span class="token keyword">let</span> <span class="token function-variable function">judge</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token comment">// args此时是一个数组 判断这个数组的长度是不是和fn.legnth的长度相同</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fn<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> args<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 如果两者长度相同 那就直接返回这个函数的调用就好</span>      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token comment">// 如果长度不相同 函数调用的时候 就将这个函数的参数拼接到返回的函数参数中</span>    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">judge</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>arg<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> judge<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="20-将-js-对象转换成树-树转成数组"><a href="#20-将-js-对象转换成树-树转成数组" class="headerlink" title="20.将 js 对象转换成树,树转成数组"></a>20.将 js 对象转换成树,树转成数组</h4><p>数组转树</p><p>初始化结果数组,定义一个 map,建立数组,根据 id 对应其 item</p><p>然后再次遍历,根据 pid 找到父节点,将该节点放入父节点的 children 的属性中</p><p>树转数组</p><p>定义一个初始数组 遍历 tree 数组</p><p>遍历每一个生成一个单独的对象,放入数组中</p><p>如果有 children 属性,递归调用这个方法</p><p>将返回的结果放入结果数组中</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span><span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>    <span class="token keyword">const</span> nodes <span class="token operator">=</span> <span class="token punctuation">[</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点C'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点F'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点A'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点H'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点D'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点B'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点E'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点G'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'节点I'</span><span class="token punctuation">,</span> <span class="token literal-property property">parentId</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span>    <span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">function</span> <span class="token function">arr2tree</span> <span class="token punctuation">(</span><span class="token parameter">nodes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>      nodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        item<span class="token punctuation">.</span>children <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>        map<span class="token punctuation">[</span>item<span class="token punctuation">.</span>id<span class="token punctuation">]</span> <span class="token operator">=</span> item      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      nodes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> parent <span class="token operator">=</span> map<span class="token punctuation">[</span>item<span class="token punctuation">.</span>parentId<span class="token punctuation">]</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>parent<span class="token punctuation">)</span> <span class="token punctuation">{</span>          parent<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> result    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">tree2arr</span> <span class="token punctuation">(</span><span class="token parameter">tree</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> tree<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> item <span class="token operator">=</span> tree<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token punctuation">{</span>          <span class="token literal-property property">id</span><span class="token operator">:</span> item<span class="token punctuation">.</span>id<span class="token punctuation">,</span>          <span class="token literal-property property">name</span><span class="token operator">:</span> item<span class="token punctuation">.</span>name<span class="token punctuation">,</span>          <span class="token literal-property property">parentId</span><span class="token operator">:</span> item<span class="token punctuation">.</span>parentId        <span class="token punctuation">}</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token function">tree2arr</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>      <span class="token keyword">return</span> result    <span class="token punctuation">}</span>    <span class="token keyword">let</span> tree <span class="token operator">=</span> <span class="token function">arr2tree</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">let</span> nodesList <span class="token operator">=</span> <span class="token function">tree2arr</span><span class="token punctuation">(</span>tree<span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nodesList<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><hr>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>常见手写题汇总1</title>
      <link href="/2022/09/15/chang-jian-shou-xie-ti-hui-zong-1/"/>
      <url>/2022/09/15/chang-jian-shou-xie-ti-hui-zong-1/</url>
      
        <content type="html"><![CDATA[<p>常见手写题汇总1</p><span id="more"></span><h4 id="1-数据类型判断typeof"><a href="#1-数据类型判断typeof" class="headerlink" title="1.数据类型判断typeof"></a>1.数据类型判断typeof</h4><blockquote><p><code>typeof</code>可以正确识别:undefined,boolean,number,string,symbol,function等类型的数据,但是对于其他的都会认为是object,可以通过`Object.prototype.toString.call将其转换成原型链上的字符串,然后利用字符串截取,得到类型结果</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">myTypeOf</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// return Object.prototype.toString.call(obj) // [object Object]</span>  <span class="token comment">// [object Null]</span>  <span class="token comment">// [object Array]</span>  <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 表示到最后一个 不包括这个最后一个</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myTypeOf</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token string">'123'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myTypeOf</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myTypeOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="2-原型链继承"><a href="#2-原型链继承" class="headerlink" title="2.原型链继承"></a>2.原型链继承</h4><blockquote><p>原型链继承存在的问题：</p><ul><li>原型中包含的引用类型会被所有的实例共享</li><li>子类在实例化的时候,不能给父类构造函数传参</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 父类构造函数</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'black'</span><span class="token punctuation">,</span><span class="token string">'red'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getColor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 父类原型</span>  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 子类构造函数</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 让子类的prototype等于父类的实例</span><span class="token keyword">let</span> dog1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token keyword">let</span> dog2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token punctuation">)</span>dog1<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'white'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog2<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="3-借用构造函数继承"><a href="#3-借用构造函数继承" class="headerlink" title="3.借用构造函数继承"></a>3.借用构造函数继承</h4><blockquote><p>借用构造函数实现继承解决了原型链继承的 2 个问题：引用类型共享问题以及传参问题。但是由于方法必须定义在构造函数中，所以会导致每次创建子类实例都会创建一遍方法。</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Animal</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 父类构造函数</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Dog</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 子类构造函数</span>  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span> <span class="token comment">// 调用父类构造函数 并传参</span><span class="token punctuation">}</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="4-组合继承"><a href="#4-组合继承" class="headerlink" title="4.组合继承"></a>4.组合继承</h4><blockquote><p>组合继承结合了原型链和盗用构造函数继承，将两者的优点集中了起来。基本的思路是使用原型链继承原型上的属性和方法，而通过盗用构造函数继承实例属性。这样既可以把方法定义在原型上以实现重用，又可以让每个实例都有自己的属性。<br>1、优点是可以实现函数复用，保证每个实例之间的属性不会相互影响<br>2、缺点是超类型属性继承两次，一次是子类型原型继承，一次是子类型实例继承，但实例继承的属性屏蔽了原型继承的属性。</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 父类构造函数</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getColor</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 父类原型链属性</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Dog</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token comment">// 借用构造函数</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">}</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 原型链继承</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Dog<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="5-寄生式组合继承"><a href="#5-寄生式组合继承" class="headerlink" title="5.寄生式组合继承"></a>5.寄生式组合继承</h4><p>组合继承已经相对完善了，但还是存在问题，它的问题就是调用了 2 次父类构造函数，第一次是在 new Animal()，第二次是在 Animal.call() 这里。</p><p>所以解决方案就是不直接调用父类构造函数给子类原型赋值，而是通过创建空函数 F 获取父类原型的副本</p><p>寄生式组合继承写法上和组合继承基本类似，区别是如下这里</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">Animal</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 父类构造函数</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name  <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getColor</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 父类原型链属性</span>  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors<span class="token punctuation">}</span><span class="token keyword">function</span> <span class="token function">Dog</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 子类构造函数</span>  <span class="token function">Animal</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span> <span class="token comment">// 借用构造函数</span>  <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">}</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">nihao</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 子类的原型</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token comment">// 相当于是让dog的prototype的__proto__指向了animal的prototype</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">// 调用create方法 让子类的prototype的__proto__指向父类的prototype</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Dog <span class="token comment">// 修改构造函数</span><span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'小黄'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token keyword">let</span> color <span class="token operator">=</span> dog<span class="token punctuation">.</span><span class="token function">getColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// dog.nihao()  这个会报错,因为已经修改了本来的原型链</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="6-class实现继承"><a href="#6-class实现继承" class="headerlink" title="6.class实现继承"></a>6.class实现继承</h4><p>这个就是es6提供的方法了,使用extends和super来完成继承,既可以继承原型也可以继承实例,写法如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Amimal</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">,</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'1'</span><span class="token punctuation">,</span><span class="token string">'2'</span><span class="token punctuation">]</span>  <span class="token punctuation">}</span>  <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name  <span class="token punctuation">}</span>  <span class="token function-variable function">getColors</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colors  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">class</span> <span class="token class-name">Dog</span> <span class="token keyword">extends</span> <span class="token class-name">Amimal</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age  <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>需要注意的是原型链之间的关系,具体关系如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">let</span> animal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animal</span><span class="token punctuation">(</span><span class="token string">'动物'</span><span class="token punctuation">)</span><span class="token keyword">let</span> dog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Dog</span><span class="token punctuation">(</span><span class="token string">'小黄'</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>animal<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是undefined</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dog<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是undefined</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype <span class="token operator">===</span> animal<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Dog<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> Animal<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Dog</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Animal</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span><span class="token comment">// 后面的是函数的原型链</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Animal<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true 说明类其实是函数的实例</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true 说明函数的原型其实是对象的实例</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false 函数的构造函数不是object的实例</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true Object也是一个函数,所以他的__proto是函数的原型</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true 自己也是自己的实例</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="7-数组去重"><a href="#7-数组去重" class="headerlink" title="7.数组去重"></a>7.数组去重</h4><p>对于es5来说,可以利用数组的filter方法,筛选出那些索引值是自身索引的值,返回值是一个新的数组,完成去重</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">unique</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> arr<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index<span class="token punctuation">,</span> array</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> array<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token operator">===</span> index    <span class="token comment">// 如果这个index和这个index相同 那么就是第一个 如果不相同 说明这个在前面已经有了</span>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>使用ES6: 可以使用set数据结构,生成一个利用原数组生成一个set,然后重新转换成数组返回</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">unique1</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token comment">// 现将数组转换为set结构 再将set结构结构为数组</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">unique1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="8-数组扁平化"><a href="#8-数组扁平化" class="headerlink" title="8.数组扁平化"></a>8.数组扁平化</h4><p>数组扁平化就是将 [1, [2, [3]]] 这种多层的数组拍平成一层 [1, 2, 3]</p><p>写法1:ES5实现</p><p>定义一个新的数组,最终返回处理好的数组</p><p>遍历每一项,如果这一项是个数组,递归调用这个方法,得到结果加入到数组中</p><p>如果不是数组 直接加入到数组中</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">flatten1</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 递归 返回值就是这个数组的扁平后的值</span>  <span class="token comment">// 如果这个数组的项是数组 就递归调用扁平化函数处理这一项 返回是一个数组 调用concat方法将其穿插在一起</span>  <span class="token comment">// 如果不是数组 直接push进结果中</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> result<span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'flatten1'</span><span class="token punctuation">,</span> <span class="token function">flatten1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>写法2:ES6实现</p><p>可以使用some方法,some 用来判断数组中有没有一项是满足所写条件的,如果有就返回true,如果没有就返回false</p><p>遍历每一项,如果返回true就使用…扩展运算符进行扩展一次,直到没有一项是数组</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">flatten2</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 如果数组里面的某一项是数组 就把这一项转换成不是数组插入原数组中</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>arr<span class="token punctuation">)</span> <span class="token comment">// 将原数组结构调用concatkey消除掉一个[] 不断的循环 直至没有[]</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> arr<span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten2</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="9"><li><h5 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h5></li></ol><p>浅拷贝:只考虑对象类型</p><pre class="line-numbers language-none"><code class="language-none">function shallowCopy (obj) {&nbsp; if (typeof obj !== 'object') { // 不是对象类型直接返回&nbsp; &nbsp; return obj&nbsp; }&nbsp; let newObj = obj instanceof Array ? [] : {} // 判断是不是数组 是数组就[] 不是数组就{}&nbsp; for (let key in obj) { // 遍历每一个key&nbsp; &nbsp; if (obj.hasOwnProperty(key)) { // 必须是自身的key不能是继承的&nbsp; &nbsp; &nbsp; newObj[key] = obj[key] // 复制到新对象上&nbsp; &nbsp; }&nbsp; }&nbsp; return newObj // 返回新对象}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="10-复杂深拷贝"><a href="#10-复杂深拷贝" class="headerlink" title="10.复杂深拷贝"></a>10.复杂深拷贝</h4><blockquote><p>思路<br>要用一个weakMap来保存这个对象 避免出现循环引用<br>函数传入目标对象和weakmap<br>首先判断这个对象是不是map的key,如果是直接返回这个对象,处理循环引用的问题<br>然后获取当前的构造函数,判断这个构造函数的名字是不是正则和时间,如果是重新创建一个返回<br>判断这个对象是不是对象或者是函数<br>如果不是直接返回target<br>如果是 就得继续判断 先把这个保存在map中<br>判断是不是函数 是函数直接返回函数<br>不是函数 判断是不是数组或者对象<br>遍历里面的key 判断得是自身的不能是继承的<br>进行深度拷贝<br>最终返回拷贝后的值</p><p>1. </p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">isObject</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">"object"</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">"function"</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> target <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">// 判断这个对象是不是对象或者是函数而不是null</span><span class="token keyword">function</span> <span class="token function">deepClone</span> <span class="token punctuation">(</span>target<span class="token punctuation">,</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WeakMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传入一个对象,和一个weakMap</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果能得到这个target 就直接返回这个target就行了</span>    <span class="token keyword">return</span> target<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment">// 获取当前值的构造函数：获取它的类型</span>  <span class="token keyword">let</span> constructor <span class="token operator">=</span> target<span class="token punctuation">.</span>constructor<span class="token punctuation">;</span> <span class="token comment">// 获取当前值的构造函数</span>  <span class="token comment">// 检测当前对象target是否与正则、日期格式对象匹配</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(RegExp|Date)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果对于构造函数的名字能用正则或者date匹配</span>    <span class="token comment">// 创建一个新的特殊对象(正则类/日期类)的实例</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">constructor</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 就创建一个新的对象返回</span>  <span class="token punctuation">}</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isObject</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果是对象不是null</span>    map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 为循环引用的对象做标记</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> target <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果是函数 直接返回</span>      <span class="token keyword">return</span> target    <span class="token punctuation">}</span>    <span class="token keyword">const</span> cloneTarget <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token comment">// 判断是数组还是对象</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> prop <span class="token keyword">in</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历每个属性</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">(</span>prop<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果是有这个属性</span>        cloneTarget<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">,</span> map<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拷贝返回</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> cloneTarget<span class="token punctuation">;</span> <span class="token comment">// 返回拷贝的目标值</span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> target<span class="token punctuation">;</span> <span class="token comment">// 不是对象直接返回</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">let</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'小李'</span><span class="token punctuation">,</span>  <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>  <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'小王'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token literal-property property">money</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token string-property property">'one'</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>    <span class="token string-property property">'two'</span><span class="token operator">:</span> <span class="token number">20</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token literal-property property">birthday</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2020-8-10'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>  <span class="token literal-property property">regexp</span><span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'nihao'</span><span class="token punctuation">,</span> <span class="token string">'g'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">let</span> obj2 <span class="token operator">=</span> <span class="token function">deepClone</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span>obj2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'小张'</span>obj2<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">23</span>obj2<span class="token punctuation">.</span>children<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'小方'</span>obj2<span class="token punctuation">.</span>money<span class="token punctuation">.</span>one <span class="token operator">=</span> <span class="token number">30</span>obj2<span class="token punctuation">.</span>birthday <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'2022-8-9'</span><span class="token punctuation">)</span>obj2<span class="token punctuation">.</span>regexp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">'wobuhao'</span><span class="token punctuation">,</span> <span class="token string">'i'</span><span class="token punctuation">)</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span><span class="token punctuation">;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 手写题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 手写题汇总 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>webpack热更新原理</title>
      <link href="/2022/09/07/webpack-re-mo-kuai-geng-xin-yuan-li/"/>
      <url>/2022/09/07/webpack-re-mo-kuai-geng-xin-yuan-li/</url>
      
        <content type="html"><![CDATA[<p>webpack热更新原理</p><span id="more"></span><h4 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h4><blockquote><p>如果不开启热模块更新,那么刷新页面的话,会重新渲染整个页面<br>如果开启热模块更新,那么刷新页面的话,原来的dom还是存在的,样式直接作用在这个页面中<br>也就是说刷新的话,不会丢失掉之前的已经渲染好的dom元素<br>无需完全刷新整个页面的同时，更新模块。==HMR==的好处，在日常开发工作中体会颇深：<strong>节省宝贵的开发时间、提升开发体验</strong>。</p></blockquote><h4 id="什么是HMR"><a href="#什么是HMR" class="headerlink" title="什么是HMR"></a>什么是HMR</h4><blockquote><p>当我们对代码修改并保存后,webpack将会对代码进项重新打包,并将新的模块发送到浏览器端,浏览器用新的模块替换掉旧的模块,以实现不刷新浏览器的前提更新页面</p></blockquote><h4 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h4><p><img src="/images/image_1.dfd95cb8.png"></p><p>导出一个对象,其中是这个的配置,包括模式,入口,出口,开启devserver,需要用到两个插件 一个是<code>htmlWebpackPlugin</code>还有一个是这个<code>webpack.HotModuleReplacementPlugin()</code>这两个插件</p><p><img src="/images/image_2.4a9e9e49.png"></p><p>在title.js中导出一个字符串</p><p><img src="/images/image_3.a0629296.png"></p><p>在<code>index.js</code>中创建一个<code>input</code>标签,一个<code>div</code>标签,然后在拿到title.js中导出的模块,将其渲染在div中</p><p>判断这个module中是不是有hot属性,可以通过这个accept方法接受这个模块,再次执行这个render函数进行渲染</p><p>这样后续直接更改源代码,那么页面中的代码就直接更新,原来的<code>input</code>中输入的内容还是不会丢失,这样的体验就比较好</p><h4 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h4><h5 id="module和chunk"><a href="#module和chunk" class="headerlink" title="module和chunk"></a>module和chunk</h5><ol><li>在webpack中有各种各样的模块</li><li>一般一个入口会依赖多个模块</li><li>一个入口一般会对应一个chunk,这个chunk里包含这个入口依赖的所有的模块</li></ol><h5 id="HotModuleReplacementPlugin"><a href="#HotModuleReplacementPlugin" class="headerlink" title="HotModuleReplacementPlugin"></a>HotModuleReplacementPlugin</h5><ol><li><p>会生成两个补丁<br>  a. 上次编译生成的hash.hot-update.json,说明从上次编译到现在哪些代码块发生改变<br>  b. chunk名字,上一次编译生成的hash.hot-update.js,存放这个此代码块最新的模块定义,里面会调用webpackhotupdate方法</p></li><li><p>首先会开启一个websocket,双向通信的一个服务</p></li><li><p>localhost请求的文件</p></li><li><p>当修改titlejs里面的内容,页面会多请求两个文件<br>  a. hash.hot-update.json 是一个对象,第一个是hash值是新的hash值,第二个是改变的文件<br>  b. 然后向服务器请求一个mian.hash.hot-update.js的文件,这个是一个脚本会执行,调用<code>webpackHotUpdat</code>方法,第一个是main代码块的名字,客户端会把新的模块定义更新到浏览器里面</p></li><li><p>向代码块中注入HMR runtime代码,热更新的主要逻辑,比如拉取代码,执行代码,执行accept回调,都是它注入到chunk中的</p></li><li><p><code>hotCreateRequire</code>会帮我们给模块module的parents和children赋值</p></li></ol><h4 id="刷新的种类"><a href="#刷新的种类" class="headerlink" title="刷新的种类"></a>刷新的种类</h4><blockquote><p>刷新一般可分为两种</p><ul><li>一种是页面刷新不保留页面的状态,就是简单粗暴,直接<code>window.loaction.reload()</code></li><li>另一种是基于<code>webpack-dev-server</code>的模块热替换,只需要局部刷新页面上发生变化的模块,同时可以保留当前的页面的状态,比如复选框的选中状态,输入框的输入等</li></ul></blockquote><blockquote><p><code>HMR</code>作为一个<code>webpack</code>的内置功能,可以通过<code>HotModuleReplacementPlugin</code>或者是<code>--hot</code>开启,</p></blockquote><h4 id="webpack的编译构件过程"><a href="#webpack的编译构件过程" class="headerlink" title="webpack的编译构件过程"></a>webpack的编译构件过程</h4><blockquote><p>项目启动后,进行打包,会输出一个hash值,比如<code>a93fd735d02d98633356</code><br><img src="/images/image_4.4e4d6884.png"></p><p>然后每次修改代码,都会重新编译,可以在控制台看到新的hash值</p><ul><li>新的Hash值：<code>a61bdd6e82294ed06fa3</code></li><li>新的json文件：&nbsp;<code>a93fd735d02d98633356.hot-update.json</code></li><li>新的js文件：<code>index.a93fd735d02d98633356.hot-update.js</code></li></ul></blockquote><blockquote><p><img src="/images/image_5.4d9eec97.png"></p><p><code>hash</code>其实代表着每一次编译的标识,根据生成的文件名可以知道,上次输出的<code>hash</code>会作为这次的文件标识<br>每次修改代码,会触发重新编译,浏览器会发送两次请求,就是json和js文件<br><img src="/images/image_6.f9428893.png"><br>json中h代表本次生成的新的hash值,用于下次请求的文件名前缀,c标识热更新对应的文件是index模块<br><img src="/images/image_7.fbbee0ae.png"><br>js文件是本次修改的代码,重新编译打包之后的文件chunk</p><h5 id="疑问"><a href="#疑问" class="headerlink" title="疑问"></a>疑问</h5><p>浏览器如何知道本地代码重新编译并迅速请求了新生成的文件,是谁告诉了浏览器,浏览器获得这些文件有事如何热更新成功的</p></blockquote><h4 id="热更新实现原理"><a href="#热更新实现原理" class="headerlink" title="热更新实现原理"></a>热更新实现原理</h4><h5 id="webpack-dev-server启动本地服务"><a href="#webpack-dev-server启动本地服务" class="headerlink" title="webpack-dev-server启动本地服务"></a>webpack-dev-server启动本地服务</h5><p>首先是根据package.json中的bin命令,找到入口文件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// node_modules/webpack-dev-server/bin/webpack-dev-server.js</span><span class="token comment">// 生成webpack编译主引擎 compiler</span><span class="token keyword">let</span> compiler <span class="token operator">=</span> <span class="token function">webpack</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 启动本地服务</span><span class="token keyword">let</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Server</span><span class="token punctuation">(</span>compiler<span class="token punctuation">,</span> options<span class="token punctuation">,</span> log<span class="token punctuation">)</span><span class="token punctuation">;</span>server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>port<span class="token punctuation">,</span> options<span class="token punctuation">.</span>host<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token keyword">throw</span> err<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// node_modules/webpack-dev-server/lib/Server.js</span><span class="token keyword">class</span> <span class="token class-name">Server</span> <span class="token punctuation">{</span>    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setupApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token function">setupApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// 依赖了express</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>        <span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>listeningApp <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>app<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token function">listen</span><span class="token punctuation">(</span><span class="token parameter">port<span class="token punctuation">,</span> hostname<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>listeningApp<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> hostname<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>            <span class="token comment">// 启动express服务后，启动websocket服务</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">createSocketServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>                                   <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这一部分主要做了三件事</p><ul><li>启动<code>webpack</code>生成<code>compiler</code>实例.<code>compiler</code>上有监听本地文件变化的方法</li><li>使用<code>express</code>启动本地<code>server</code>,让浏览器请求本地的静态资源</li><li>本地<code>server</code>启动后,再去启动<code>websocket</code>服务.通过这个<code>websocket</code>建立本地和服务器的双向通信.这样本地文件变化,就可以通知浏览器热更新代码</li></ul><h5 id="修改webpack-config-js的entry配置"><a href="#修改webpack-config-js的entry配置" class="headerlink" title="修改webpack.config.js的entry配置"></a>修改webpack.config.js的entry配置</h5><p>启动本地服务前,调用了<code>updateCompiler(this.compiler)</code>这个方法,这个的作用一个是获取<code>websocket</code>客户端的代码路径,另一个是根据配置获取<code>webpack</code>热更新的代码路径</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 获取websocket客户端代码</span><span class="token keyword">const</span> clientEntry <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>    <span class="token string">'../../client/'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>domain<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sockHost<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sockPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>sockPort<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span><span class="token comment">// 根据配置获取热更新代码</span><span class="token keyword">let</span> hotEntry<span class="token punctuation">;</span><span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>hotOnly<span class="token punctuation">)</span> <span class="token punctuation">{</span>    hotEntry <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'webpack/hot/only-dev-server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>    hotEntry <span class="token operator">=</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'webpack/hot/dev-server'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>然后修改<code>webpack</code>的入口配置</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 修改后的entry入口</span><span class="token punctuation">{</span> <span class="token literal-property property">entry</span><span class="token operator">:</span>    <span class="token punctuation">{</span> <span class="token literal-property property">index</span><span class="token operator">:</span>         <span class="token punctuation">[</span>            <span class="token comment">// 上面获取的clientEntry</span>            <span class="token string">'xxx/node_modules/webpack-dev-server/client/index.js?http://localhost:8080'</span><span class="token punctuation">,</span>            <span class="token comment">// 上面获取的hotEntry</span>            <span class="token string">'xxx/node_modules/webpack/hot/dev-server.js'</span><span class="token punctuation">,</span>            <span class="token comment">// 开发配置的入口</span>            <span class="token string">'./src/index.js'</span>            <span class="token punctuation">]</span><span class="token punctuation">,</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span>      <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>增加两个文件,意味着会一起打包到<code>bundle</code>文件中,也就是线上运行时</p><h6 id="webpack-dev-server-x2F-client-x2F-index-js"><a href="#webpack-dev-server-x2F-client-x2F-index-js" class="headerlink" title="webpack-dev-server/client/index.js"></a>webpack-dev-server/client/index.js</h6><p>这个文件主要是用于<code>websocket</code>,服务端就是本地dev-server,客户端就是浏览器,在第一步的时候启动的是本地服务端的<code>websocket</code></p><h6 id="webpack-x2F-hot-x2F-dev-server-js"><a href="#webpack-x2F-hot-x2F-dev-server-js" class="headerlink" title="webpack/hot/dev-server.js"></a>webpack/hot/dev-server.js</h6><p>主要是用来检查更新逻辑的,后面第五步会讲</p><h5 id="监听webpack编译结束"><a href="#监听webpack编译结束" class="headerlink" title="监听webpack编译结束"></a>监听webpack编译结束</h5><p>修改入口配置之后,调用<code>setupHooks</code>方法,这个方法是用来监听注册事件的,监听每次webpack编译完成</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// node_modules/webpack-dev-server/lib/Server.js</span><span class="token comment">// 绑定监听事件</span><span class="token function">setupHooks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token punctuation">{</span>done<span class="token punctuation">}</span> <span class="token operator">=</span> compiler<span class="token punctuation">.</span>hooks<span class="token punctuation">;</span>    <span class="token comment">// 监听webpack的done钩子，tapable提供的监听方法</span>    done<span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span><span class="token string">'webpack-dev-server'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">stats</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">_sendStats</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sockets<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getStats</span><span class="token punctuation">(</span>stats<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>_stats <span class="token operator">=</span> stats<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>每次监听到webpack包结束,都会调用<code>_sendStats</code>方法通过<code>websocket</code>给客户端发送通知,这样浏览器就可以拿到最新的hash值了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 通过websoket给客户端发消息</span><span class="token function">_sendStats</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sockWrite</span><span class="token punctuation">(</span>sockets<span class="token punctuation">,</span> <span class="token string">'hash'</span><span class="token punctuation">,</span> stats<span class="token punctuation">.</span>hash<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sockWrite</span><span class="token punctuation">(</span>sockets<span class="token punctuation">,</span> <span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="webpack监听文件变化"><a href="#webpack监听文件变化" class="headerlink" title="webpack监听文件变化"></a>webpack监听文件变化</h5><p>这个主要是使用<code>setupDevMiddleware</code>完成的</p><p>这个方法主要是执行了<code>webpack-dev-middleware</code>库.所有的文件相关的操作都抽离到<code>webpack-dev-middleware</code>库中了,主要是负责文件的<code>编译``输出</code>和<code>监听</code>,<code>webpack-dev-server</code>只是负责启动服务和前置准备工作.只是职责划分更清晰了</p><p><code>webpack-dev-middleware</code>源码分析</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// node_modules/webpack-dev-middleware/index.js</span>compiler<span class="token punctuation">.</span><span class="token function">watch</span><span class="token punctuation">(</span>options<span class="token punctuation">.</span>watchOptions<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">/*错误处理*/</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 通过“memory-fs”库将打包后的文件写入内存</span><span class="token function">setFs</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> compiler<span class="token punctuation">)</span><span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="调用了compilet-watch方法"><a href="#调用了compilet-watch方法" class="headerlink" title="调用了compilet.watch方法"></a>调用了<code>compilet.watch</code>方法</h6><blockquote><p>通过这个方法监听本地文件是否发生变化</p></blockquote><h6 id="执行setFs方法"><a href="#执行setFs方法" class="headerlink" title="执行setFs方法"></a>执行<code>setFs</code>方法</h6><blockquote><p>这个方法主要是将编译后的代码打包到内存,这就是为什么在开发的时候,dist目录没有代码,因为都在内存中,这是因为保存在内存,比在储存里面访问要快</p></blockquote><h5 id="浏览器接收到热更新的通知"><a href="#浏览器接收到热更新的通知" class="headerlink" title="浏览器接收到热更新的通知"></a>浏览器接收到热更新的通知</h5><p>现在已经可以监听到文件的变化,当文件变化,就会触发重新编译,同时监听了编译结束的事件,当事件结束,就会调用<code>_sendStates</code>通过<code>websocket</code>给浏览器发送一个通知,检查是否需要热更新</p><p>浏览器通过增加的入口文件来接受<code>websocket</code>传递过来的代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'xxx/node_modules/webpack-dev-server/client/index.js?http://localhost:8080'</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这个文件会包打包到<code>bundle.js</code>中,代码简化如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// webpack-dev-server/client/index.js</span><span class="token keyword">var</span> socket <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./socket'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">var</span> onSocketMessage <span class="token operator">=</span> <span class="token punctuation">{</span>    <span class="token function-variable function">hash</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">hash</span><span class="token punctuation">(</span><span class="token parameter">_hash</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// 更新currentHash值</span>        status<span class="token punctuation">.</span>currentHash <span class="token operator">=</span> _hash<span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token function-variable function">ok</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">'Ok'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 进行更新检查等操作</span>        <span class="token function">reloadApp</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> status<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// 连接服务地址socketUrl，?http://localhost:8080，本地服务地址</span><span class="token function">socket</span><span class="token punctuation">(</span>socketUrl<span class="token punctuation">,</span> onSocketMessage<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">reloadApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>hot<span class="token punctuation">)</span> <span class="token punctuation">{</span>        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'[WDS] App hot update...'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment">// hotEmitter其实就是EventEmitter的实例</span>        <span class="token keyword">var</span> hotEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack/hot/emitter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        hotEmitter<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'webpackHotUpdate'</span><span class="token punctuation">,</span> currentHash<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>socket</code>方法建立了<code>websocket</code>和服务端的连接,并注册了2个监听事件</p><p><code>hash</code>事件,更新最后一次打包的hash值</p><p><code>ok</code>事件,进行热更新检查</p><p>热更新检查是调用<code>reloadApp</code>这个方法,比较奇怪的是,这个方法又利用<code>node.js</code>的<code>EvenEmitter</code>发出<code>webpackHotUpdate</code>消息</p><p>入口文件的另一个文件</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token string">'xxx/node_modules/webpack/hot/dev-server.js'</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>这个同样会被打包到<code>bundle.js</code>中,运行在浏览器,代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// node_modules/webpack/hot/dev-server.js</span><span class="token keyword">var</span> <span class="token function-variable function">check</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    module<span class="token punctuation">.</span>hot<span class="token punctuation">.</span><span class="token function">check</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">updatedModules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// 容错，直接刷新页面</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>updatedModules<span class="token punctuation">)</span> <span class="token punctuation">{</span>                window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">return</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>                        <span class="token comment">// 热更新结束，打印信息</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">upToDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"info"</span><span class="token punctuation">,</span> <span class="token string">"[HMR] App is up to date."</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>        <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            window<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">var</span> hotEmitter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./emitter"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>hotEmitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"webpackHotUpdate"</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">currentHash</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    lastHash <span class="token operator">=</span> currentHash<span class="token punctuation">;</span>    <span class="token function">check</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>监听<code>webpackHotUpdate</code>事件,获取最新的hash值,进行检查更新,调用<code>module.hot.check</code>方法,这个方法是<code>HotModuleReplacementPlugin</code>产生的,后面会讲</p><h5 id="HotModuleReplacementPlugin-1"><a href="#HotModuleReplacementPlugin-1" class="headerlink" title="HotModuleReplacementPlugin"></a>HotModuleReplacementPlugin</h5><p>没有配置热更新的话,<code>bundle.js</code></p><p><img src="/images/image_8.40d2b7ab.png"></p><p>配置了<code>HotModuleReplacementPlugin</code>或者<code>--hot</code>的话</p><p><img src="/images/image_9.c398605f.png"></p><p>就会发现配置的话,就多了一个属性<code>hot,再看</code>hotCreateModule方法,就你那个找到这个<code>module.hot.check</code>是从哪里冒出来的</p><p><img src="/images/image_10.e4fb9629.png"></p><p>对比打包后的文件内容,可以发现<code>HotModuleReplacementPlugin</code>在文件中插入了很多的代码,这个主要是因为在检查更新的时候是在浏览器中的,插入代码方便在浏览器中运行</p><h5 id="moudle-hot-check-开始热更新"><a href="#moudle-hot-check-开始热更新" class="headerlink" title="moudle.hot.check 开始热更新"></a>moudle.hot.check 开始热更新</h5><p>后面的代码都是<code>HotModuleReplacentPlugin</code>塞入到<code>bundle.js</code>中的</p><blockquote><ul><li>利用上次保存的<code>hash</code>值,调<code>hotDownLoadManifest\</code>发送 <code>xxx/hash.hot-update.json</code>的<code>ajax</code>请求</li><li>请求结果获取热更新模块,以及下次热更新的<code>hash</code>标识,并进入热更新准备阶段</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">hotAvailableFilesMap <span class="token operator">=</span> update<span class="token punctuation">.</span>c<span class="token punctuation">;</span> <span class="token comment">// 需要更新的文件</span>hotUpdateNewHash <span class="token operator">=</span> update<span class="token punctuation">.</span>h<span class="token punctuation">;</span> <span class="token comment">// 更新下次热更新hash值</span><span class="token function">hotSetStatus</span><span class="token punctuation">(</span><span class="token string">"prepare"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 进入热更新准备状态</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>调用<code>hotDownloadUpdateChunk</code>发送<code>xxx/hash.hot-update.js</code>请求,通过JSONP`方式</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">hotDownloadUpdateChunk</span><span class="token punctuation">(</span><span class="token parameter">chunkId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> script <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    script<span class="token punctuation">.</span>charset <span class="token operator">=</span> <span class="token string">"utf-8"</span><span class="token punctuation">;</span>    script<span class="token punctuation">.</span>src <span class="token operator">=</span> __webpack_require__<span class="token punctuation">.</span>p <span class="token operator">+</span> <span class="token string">""</span> <span class="token operator">+</span> chunkId <span class="token operator">+</span> <span class="token string">"."</span> <span class="token operator">+</span> hotCurrentHash <span class="token operator">+</span> <span class="token string">".hot-update.js"</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> script<span class="token punctuation">.</span>crossOrigin <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>script<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>为什么要获通过JSONP,因为JSONP获取的代码可以直接执行.为什么要直接执行,首先会议一下<code>hash.hot-update.js</code>的代码格式是怎么样的</p><p><img src="/images/image_11.3598c6af.png"></p><p>可以发现,新编译的代码是在一个<code>webpackHotUpdate</code>函数体内部的,也就是要立即执行这个方法</p><p>再看一下这个<code>webpackHotUpdate</code>方法</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">window<span class="token punctuation">[</span><span class="token string">"webpackHotUpdate"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">chunkId<span class="token punctuation">,</span> moreModules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token function">hotAddUpdateChunk</span><span class="token punctuation">(</span>chunkId<span class="token punctuation">,</span> moreModules<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span> <span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ul><li><code>hotAddUpdateChunk</code>方法会把更新的模块<code>moreModules</code>赋值给全局变量<code>hotupdate</code></li><li><code>hotUpdateDownload</code>方法会调用<code>hotApply</code>进行代码的替换</li></ul><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">hotAddUpdateChunk</span><span class="token punctuation">(</span><span class="token parameter">chunkId<span class="token punctuation">,</span> moreModules</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 更新的模块moreModules赋值给全局全量hotUpdate</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> moduleId <span class="token keyword">in</span> moreModules<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>moreModules<span class="token punctuation">,</span> moduleId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     hotUpdate<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> moreModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// 调用hotApply进行模块的替换</span>    <span class="token function">hotUpdateDownloaded</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="hotApply-热更新模块替换"><a href="#hotApply-热更新模块替换" class="headerlink" title="hotApply 热更新模块替换"></a>hotApply 热更新模块替换</h5><p>热更新的核心逻辑就在与<code>hotApply</code></p><p>主要可以分为以下几个部分</p><h6 id="删除过期的模块-就是需要替换的模块"><a href="#删除过期的模块-就是需要替换的模块" class="headerlink" title="删除过期的模块,就是需要替换的模块"></a>删除过期的模块,就是需要替换的模块</h6><p>通过<code>hotUpdate</code>可以找到旧模块</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> queue <span class="token operator">=</span> outdatedModules<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">while</span> <span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    moduleId <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 从缓存中删除过期的模块</span>    module <span class="token operator">=</span> installedModules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">// 删除过期的依赖</span>    <span class="token keyword">delete</span> outdatedDependencies<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token comment">// 存储了被删掉的模块id，便于更新代码</span>    outdatedSelfAcceptedModules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>        <span class="token literal-property property">module</span><span class="token operator">:</span> moduleId    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="将新模块添加到modules中"><a href="#将新模块添加到modules中" class="headerlink" title="将新模块添加到modules中"></a>将新模块添加到<code>modules</code>中</h6><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">appliedUpdate<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> hotUpdate<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token punctuation">(</span>moduleId <span class="token keyword">in</span> appliedUpdate<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">hasOwnProperty</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>appliedUpdate<span class="token punctuation">,</span> moduleId<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        modules<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span> <span class="token operator">=</span> appliedUpdate<span class="token punctuation">[</span>moduleId<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="通过-webpack-require-执行相关模块的代码"><a href="#通过-webpack-require-执行相关模块的代码" class="headerlink" title="通过__webpack_require__执行相关模块的代码"></a>通过<code>__webpack_require__</code>执行相关模块的代码</h6><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">for</span> <span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> outdatedSelfAcceptedModules<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">var</span> item <span class="token operator">=</span> outdatedSelfAcceptedModules<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    moduleId <span class="token operator">=</span> item<span class="token punctuation">.</span>module<span class="token punctuation">;</span>    <span class="token keyword">try</span> <span class="token punctuation">{</span>        <span class="token comment">// 执行最新的代码</span>        <span class="token function">__webpack_require__</span><span class="token punctuation">(</span>moduleId<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// ...容错处理</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>hotpply</code>很复杂,这只是一小部分流程</p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>热更新的流程图可以简化为一下几个部分</p><p><img src="/images/image_12.e9d272cb.png"></p><h4 id="参考连接"><a href="#参考连接" class="headerlink" title="参考连接"></a>参考连接</h4><p>本文是针对掘金<a href="https://juejin.cn/post/6844904008432222215#heading-8">轻松理解webpack热更新原理 - 掘金 (juejin.cn)</a>,文章的笔记,大家看不懂我写的话,可以去看原篇,讲的特别好</p>]]></content>
      
      
      <categories>
          
          <category> 面试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 面试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>公共组件的封装</title>
      <link href="/2022/08/20/he-xin-gong-gong-zu-jian-bian-xie-gong-gong-han-shu-feng-zhuang-bu-duan-you-hua-ye-wu-dai-ma-shi-xian-di-ou-he-gao-ju-he-de-si-xiang/"/>
      <url>/2022/08/20/he-xin-gong-gong-zu-jian-bian-xie-gong-gong-han-shu-feng-zhuang-bu-duan-you-hua-ye-wu-dai-ma-shi-xian-di-ou-he-gao-ju-he-de-si-xiang/</url>
      
        <content type="html"><![CDATA[<p>公共组件的封装</p><span id="more"></span><h4 id="封装骨架屏组件"><a href="#封装骨架屏组件" class="headerlink" title="封装骨架屏组件"></a>封装骨架屏组件</h4><blockquote><p>思路:需要一个组件做,占位使用,这个占位组件有个专业的属于,叫做骨架屏组件</p><ul><li>暴露一些属性:高/宽/背景,是否有闪动动画</li></ul></blockquote><blockquote><p>这是一个公共组件需要全局注册,将来这样的组件建议在vue插件中定义</p></blockquote><p>通常要有一个单独的目录,来存放我们自己定义的组件,一般是叫做<code>library</code></p><p>在这个目录里面单独生成一个组件文件,在文件里面编写效果</p><ul><li><p>组件内部需要可以放置一个盒子,这个盒子的宽高和动画效果可以由外界传入,由外界来控制这个组件的大小和动画</p></li><li><p>扩展vue原有的功能,通过插件的形式将这个组件挂载到vue上,方便使用</p><ul><li>vue2中,导出一个对象,有install函数,传入vue的构造函数,vue基础上扩展</li><li>vue3中,导出一个对象,有install函数,传入的是app应用实例,app基础之上扩展</li><li>主要步骤:导入这个组件,然后通过app.component来进行注册</li></ul></li><li><p>使用</p><ul><li>到组件内部使用的时候,监听是否有数据,有数据就显示数据,没有数据的话就显示组件,可以使用v-if和v-show来控制是否显示</li></ul></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"xtx-skeleton"</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"{width,height}"</span> <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"{shan:animated}"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">1</span> 盒子<span class="token operator">--</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"block"</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"{backgroundColor:bg}"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token number">2</span> 闪效果 xtx<span class="token operator">-</span>skeleton 伪元素 <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'XtxSkeleton'</span><span class="token punctuation">,</span>  <span class="token comment">// 使用的时候需要动态设置 高度，宽度，背景颜色，是否闪下</span>  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token literal-property property">bg</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'#efefef'</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'100px'</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'100px'</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">animated</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span>style scoped lang<span class="token operator">=</span><span class="token string">"less"</span><span class="token operator">&gt;</span><span class="token punctuation">.</span>xtx<span class="token operator">-</span>skeleton <span class="token punctuation">{</span>  <span class="token literal-property property">display</span><span class="token operator">:</span> inline<span class="token operator">-</span>block<span class="token punctuation">;</span>  <span class="token literal-property property">position</span><span class="token operator">:</span> relative<span class="token punctuation">;</span>  <span class="token literal-property property">overflow</span><span class="token operator">:</span> hidden<span class="token punctuation">;</span>  vertical<span class="token operator">-</span>align<span class="token operator">:</span> middle<span class="token punctuation">;</span>  <span class="token punctuation">.</span>block <span class="token punctuation">{</span>    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>    border<span class="token operator">-</span>radius<span class="token operator">:</span> 2px<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">.</span>shan <span class="token punctuation">{</span><span class="token operator">&amp;</span><span class="token operator">:</span><span class="token operator">:</span>after <span class="token punctuation">{</span> <span class="token comment">// 动画是通过一个伪元素,定义一个伪元素,让他漂浮起来,然后让这个伪元素有一个宽高,倾斜,漂浮在这个盒子上面</span><span class="token comment">// 后面配合这个页面的动画来实现</span>    <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token literal-property property">position</span><span class="token operator">:</span> absolute<span class="token punctuation">;</span>    <span class="token literal-property property">animation</span><span class="token operator">:</span> shan <span class="token number">1</span><span class="token punctuation">.</span>5s ease 0s infinite<span class="token punctuation">;</span>    <span class="token literal-property property">top</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">;</span>    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>    <span class="token literal-property property">background</span><span class="token operator">:</span> linear<span class="token operator">-</span><span class="token function">gradient</span><span class="token punctuation">(</span>      to left<span class="token punctuation">,</span>      <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">0</span><span class="token punctuation">,</span>      <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0.3</span><span class="token punctuation">)</span> <span class="token number">50</span><span class="token operator">%</span><span class="token punctuation">,</span>      <span class="token function">rgba</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">100</span><span class="token operator">%</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token literal-property property">transform</span><span class="token operator">:</span> <span class="token function">skewX</span><span class="token punctuation">(</span><span class="token operator">-</span>45deg<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span>@keyframes shan <span class="token punctuation">{</span> <span class="token comment">// 动画就是原来从左到右移动让他显示出来就行了</span>  <span class="token number">0</span><span class="token operator">%</span> <span class="token punctuation">{</span>    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">100</span><span class="token operator">%</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token number">100</span><span class="token operator">%</span> <span class="token punctuation">{</span>    <span class="token literal-property property">left</span><span class="token operator">:</span> <span class="token number">120</span><span class="token operator">%</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>style<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="面板组件封装"><a href="#面板组件封装" class="headerlink" title="面板组件封装"></a>面板组件封装</h4><blockquote><p>大致思路</p><ul><li>标题和副标题由props==传入==</li><li>右侧内容由插槽传入<ul><li>查看更多,使用次数可以单独封装成一个组件</li></ul></li></ul></blockquote><blockquote><ul><li>主体:全部由插槽传入</li></ul></blockquote><p><img src="/images/image_1.8e15bace.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">查看更多组件封装<span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>RouterLink <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"path"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"xtx-more"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>查看全部<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"iconfont icon-angle-right"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>RouterLink<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'XtxMore'</span><span class="token punctuation">,</span>  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'/'</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">面板组件封装&lt;template&gt;  &lt;div class="home-panel"&gt;    &lt;div class="container"&gt;      &lt;div class="head"&gt;        &lt;h3&gt;{{ title }}&lt;small&gt;{{ subTitle }}&lt;/small&gt;&lt;/h3&gt;        &lt;slot name="right" /&gt;      &lt;/div&gt;      &lt;slot /&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;export default {  name: 'HomePanel',  props: {    title: {      type: String,      default: ''    },    subTitle: {      type: String,      default: ''    }  }}&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="复选框组件的封装"><a href="#复选框组件的封装" class="headerlink" title="复选框组件的封装"></a>复选框组件的封装</h4><blockquote><p>思路</p><ul><li>实现组件本身选中与不选中的效果</li><li>实现组件的v-model 指令</li><li>改造成<code>vueuse/core</code>的函数写法</li></ul></blockquote><p>这个复选框是一个通用的组件,可以在这个<code>library</code>文件夹里面去写这个代码</p><p>组件实现步骤</p><ol><li>准备两个图标,一个是选中的一个是不选中的,通过一个数据<code>checkd</code>来进行控制图标的显示和隐藏</li><li>给这个组件的最外层的盒子绑定一个点击的时间,用过修改这个<code>checked</code>的状态,后面根据checked 状态修改图标的显示</li><li>对于后面的内容,可以通过默认插槽的方式来传入内容,可以通过<code>$slots.default</code>来判断是否有插槽内容</li><li>组件实现<code>v-model</code>双向数据绑定<br> i. v-model有解析成一个语法糖,就是:<code>modelValue</code>和<code>@update:modelValue</code></li></ol><p>  ii.这个<code>modelValue</code>的值需要和checked保持一致,所以可以使用watch监听器来完成两者的同步</p><p>  当数据发生改变的时候,需要通过<code>emit</code>来通知父组件进行相应数据的更新</p><p>vue3.0 组合api的写法,用到了一个库<code>@vueuse/core</code></p><ul><li><p>通过这个库提供的一个api叫做<code>useVModel</code>,这个接受三个参数</p><ul><li>props</li><li>字段名字:<code>modelValue</code>,</li><li>方法:<code>emit</code></li></ul></li><li><p>当这个被点击的时候 就可以让新的值对原来的值取反就行了,这样会自动的提交给父组件</p></li><li><p>解释</p><ul><li>使用props接受modelValue</li><li>使用useVModel来包装props中的modelValue的属性数据</li><li>在使用checkd.value的时候就是使用了父组件的数据</li><li>在使用checked.value= 数据的时候 内部就会触发emit函数而且就是触发update:modelValue通知父组件改变</li></ul></li></ul><p>还可以通知父组件的change事件</p><ul><li>在组件内部通过<code>emit('change')</code>来通知change事件</li></ul><pre class="line-numbers language-none"><code class="language-none">&lt;template&gt;  &lt;div class="xtx-checkbox" @click="changeChecked()"&gt;    &lt;i v-if="checked" class="iconfont icon-checked"&gt;&lt;/i&gt;    &lt;i v-else class="iconfont icon-unchecked"&gt;&lt;/i&gt;    &lt;span v-if="$slots.default"&gt;&lt;slot /&gt;&lt;/span&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import { ref } from 'vue'export default {  name: 'XtxCheckbox',  setup () {    const checked = ref(false)    const changeChecked = () =&gt; {      checked.value = !checked.value    }    return { checked, changeChecked }  }}&lt;/script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>实现双向数据绑定</p><pre class="line-numbers language-none"><code class="language-none">import { ref, watch } from 'vue'// v-model  ====&gt;  :modelValue  +   @update:modelValueexport default {  name: 'XtxCheckbox',  props: {    modelValue: {      type: Boolean,      default: false    }  },  setup (props, { emit }) {    const checked = ref(false)    const changeChecked = () =&gt; {      checked.value = !checked.value      // 使用emit通知父组件数据的改变      emit('update:modelValue', checked.value)    }    // 使用侦听器，得到父组件传递数据，给checked数据    watch(() =&gt; props.modelValue, () =&gt; {      checked.value = props.modelValue    }, { immediate: true })    return { checked, changeChecked }  }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><code>@vueuse/core</code>实现</p><pre class="line-numbers language-none"><code class="language-none">import { useVModel } from '@vueuse/core'// v-model  ====&gt;  :modelValue  +   @update:modelValueexport default {  name: 'XtxCheckbox',  props: {    modelValue: {      type: Boolean,      default: false    }  },  setup (props, { emit }) {    // 使用useVModel实现双向数据绑定v-model指令    // 1. 使用props接收modelValue    // 2. 使用useVModel来包装props中的modelValue属性数据    // 3. 在使用checked.value就是使用父组件数据// 4. 在使用checked.value = '数据' 赋值，触发emit('update:modelvalue', '数据')    const checked = useVModel(props, 'modelValue', emit)    const changeChecked = () =&gt; {      const newVal = !checked.value      // 通知父组件      checked.value = newVal      // 让组件支持change事件      emit('change', newVal)    }    return { checked, changeChecked }  }}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="消息提示组件封装"><a href="#消息提示组件封装" class="headerlink" title="消息提示组件封装"></a>消息提示组件封装</h4><p>也是一个公共组件,需要放在library目录里面,进行消息提示组件的封装,单独创建一个文件</p><p>组件功能分析:</p><ul><li>固定顶部显示,有三种类型:成功,错误,警告</li><li>显示消息提示需要动画从上滑入且淡出</li><li>组件使用方式要封装成工具函数的方式</li></ul><p>具体过程</p><ul><li>在组件内部封装一个样式对象,对应着不同的样式,键值对的形式,键名是样式名,值是样式对象</li><li>外部需要通过props向组件内部传入一个type数据,控制组件的样式,传入的值应该和上面样式对象的值相同</li><li>外部也需要传入一个message来控制组件的显示内容</li><li>控制组件的显示和隐藏<ul><li>可以设置一个变量,来控制组件的显示和隐藏</li><li>组件渲染完毕的时候,让这个组件显示,可以在onMounted这个声明周期钩子函数中,让这个变量为true,让组件显示</li><li>然后给这个加一个动画,结合<code>Transition</code>组件控制显示和隐藏</li></ul></li></ul><p>封装函数调用式</p><ul><li><p>提供一个能够显示xtx-message的函数,这个函数将来可以导入直接使用,也可以挂载到vue的组件实例上</p></li><li><p>最后的使用方式是直接函数使用或者是this.函数来使用</p></li><li><p>首先导出一个方法</p><ul><li>渲染组件</li><li>1 导入消息提示组件</li><li>2 将导入的消息提示组件编译为虚拟节点 通过vue提供的<code>createVNode</code>进行转换 两个参数,一个是组件,一个是内容传参</li><li>3 准备一个装载消息提示组件的容器</li><li>4 将虚拟节点渲染在容器中,<code>render</code>函数渲染虚拟节点,参数1是虚拟节点,参数2是虚拟容器</li></ul></li><li><p>使用的话,可以在组件里面导入这个函数,就可以完成导入了</p><ul><li>可以在install函数中的<code>app.config.globalProperties.$message</code>来完成导入,此时就可以通过<code>this.$message</code>完成使用了,组合api中使用,也可以通过<code>getCurrentInstance()</code>拿到组件的实例完成调用</li></ul></li><li><p>让这个组件在固定时间消失</p><ul><li>设置一个定时器,让他在固定时间后销毁组件,也就是render(null,div)就行了,将null渲染在div中</li></ul></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span><span class="token operator">+</span>  <span class="token operator">&lt;</span>Transition name<span class="token operator">=</span><span class="token string">"down"</span><span class="token operator">&gt;</span><span class="token operator">+</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'xtx-message'</span> <span class="token operator">:</span>style<span class="token operator">=</span><span class="token string">"style"</span> v<span class="token operator">-</span>show<span class="token operator">=</span><span class="token string">"show"</span><span class="token operator">&gt;</span>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 上面绑定的是样式 <span class="token operator">--</span><span class="token operator">&gt;</span>      <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 不同提示图标会变 <span class="token operator">--</span><span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"iconfont"</span> <span class="token operator">:</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"[style[type].icon]"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>span <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"text"</span><span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span>text<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">+</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>Transition<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token operator">+</span><span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted<span class="token punctuation">,</span> ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'XtxMessage'</span><span class="token punctuation">,</span>  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span>    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>      <span class="token comment">// warn 警告  error 错误  success 成功</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'warn'</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 定义一个对象，包含三种情况的样式，对象key就是类型字符串</span>    <span class="token keyword">const</span> style <span class="token operator">=</span> <span class="token punctuation">{</span>      <span class="token literal-property property">warn</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'icon-warning'</span><span class="token punctuation">,</span>        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#E6A23C'</span><span class="token punctuation">,</span>        <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'rgb(253, 246, 236)'</span><span class="token punctuation">,</span>        <span class="token literal-property property">borderColor</span><span class="token operator">:</span> <span class="token string">'rgb(250, 236, 216)'</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token literal-property property">error</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'icon-shanchu'</span><span class="token punctuation">,</span>        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#F56C6C'</span><span class="token punctuation">,</span>        <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'rgb(254, 240, 240)'</span><span class="token punctuation">,</span>        <span class="token literal-property property">borderColor</span><span class="token operator">:</span> <span class="token string">'rgb(253, 226, 226)'</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span>      <span class="token literal-property property">success</span><span class="token operator">:</span> <span class="token punctuation">{</span>        <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">'icon-queren2'</span><span class="token punctuation">,</span>        <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'#67C23A'</span><span class="token punctuation">,</span>        <span class="token literal-property property">backgroundColor</span><span class="token operator">:</span> <span class="token string">'rgb(240, 249, 235)'</span><span class="token punctuation">,</span>        <span class="token literal-property property">borderColor</span><span class="token operator">:</span> <span class="token string">'rgb(225, 243, 216)'</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token operator">+</span>    <span class="token comment">// 定义一个数据控制显示隐藏，默认是隐藏，组件挂载完毕显示</span><span class="token operator">+</span>    <span class="token keyword">const</span> visible <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token operator">+</span>    <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">+</span>      visible<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token operator">+</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">+</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span> style<span class="token punctuation">,</span> visible <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>封装成vue实例函数调用</p><pre class="line-numbers language-none"><code class="language-none">// 实现使用函数调用xtx-message组件的逻辑import { createVNode, render } from 'vue'import XtxMessage from './xtx-message.vue'// 准备dom容器const div = document.createElement('div')div.setAttribute('class', 'xtx-message-container')document.body.appendChild(div)// 定时器标识let timer = nullexport default ({ type, text }) =&gt; {  // 实现：根据xtx-message.vue渲染消息提示  // 1. 导入组件  // 2. 根据组件创建虚拟节点  const vnode = createVNode(XtxMessage, { type, text })  // 3. 准备一个DOM容器  // 4. 把虚拟节点渲染DOM容器中  render(vnode, div)  // 5. 开启定时，移出DOM容器内容  clearTimeout(timer)  timer = setTimeout(() =&gt; {    render(null, div)  }, 3000)}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在引入的时候通过挂载到原型上</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$message <span class="token operator">=</span> Message<span class="token comment">// 原型函数</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="分页组件"><a href="#分页组件" class="headerlink" title="分页组件"></a>分页组件</h4><p>大致步骤</p><ul><li>分页基础布局</li><li>分页内部逻辑，完成切换效果</li><li>接收外部数据，提供分页事件</li></ul><p>具体过程</p><blockquote><p>一些问题:</p><ul><li>上一页什么时候禁用 ,当当前页是第一页的时候禁用</li><li>前面的…什么时候显示,当显示的页面第一个按钮大于1,就显示出这个…</li><li>中间的按钮怎么显示呢,根据起始页码和结束页码得到一个数组,来控制中间页码的显示</li><li>最后一个…怎么显示,需要判断最后一页要小于这个最大页,就让他显示…</li><li>总结,需要<code>按钮个数</code>,<code>当前页码</code>,<code>总条数</code>,<code>单页条数</code>,<code>总页数</code>,<code>起始页码</code>,<code>结束页码</code>,<code>按钮数组</code>才可以完成渲染</li></ul></blockquote><p>创建一个单独的分页文件</p><ul><li><p>总页数:数据条数/单页显示数据,向上取整</p></li><li><p>首先定义一下,计算起始页码和结束页码的偏移数量,就是显示多少页/2,向下取整</p></li><li><p>起始页码: 理想情况下:当前页-便宜数量</p><ul><li>特殊情况:如果起始页码小于1  让start=1,只能等于1</li><li>特殊情况: 如果结束页码 &gt; 总页数 那么只能让结束页码等于总页数</li></ul></li><li><p>结束页码: 理想情况下:起始页码+总条数</p><ul><li>特殊情况: 结束页码 &gt; 总页数 那么这个end就应该等于总页数</li><li>特殊情况: 开始页码 应该判断是不是&lt;1  如果小于1 那么只能等于1</li></ul></li><li><p>根据起始页码和结束页码,得到按钮数组,从其实到结束,返回给页面,渲染数据</p></li><li><p>按钮控制</p><ul><li>上一页:当当前的页面大于1的时候才可以点,小于等于1的时候不能点</li><li>前面的…: 当起始页 &gt; 1 才显示…</li><li>后面的…: 当结束页 &lt; 最大页 才显示</li><li>下一页: 当前页 &lt; 最大页的时候才可以点击,大于或等于最大页的时候 不能点击</li></ul></li><li><p>点击事件,直接修改当前页的页码值就行了,上一页–,下一页++</p></li></ul><p>支持外部的传入的功能</p><ul><li><p>外部传入数据,就需要定义props</p><ul><li><code>total</code></li><li><code>pagesize</code></li><li><code>currentPage</code></li></ul></li><li><p>监听props 数据的变化,更新组件内的数据</p><ul><li>改变我们前面定义的total</li><li>改变前面定义的pagesize</li><li>改变前面定义的当前页</li></ul></li><li><p>在使用的时候传入相关的数据就可以了</p></li></ul><p>点击影响数据切换</p><ul><li>在点击的时候,将分页的页码数据传递给父组件,通过emit方法</li><li>可以设置这个名字是<code>current-change</code>,传递出这个页码</li><li>父组件使用的时候,接受参数,修改父组件中的页码数据,根据新页码发请求</li><li>可以在父组件监听这个页码的改变,一改变就重新发请求</li></ul><h4 id="对话框组件"><a href="#对话框组件" class="headerlink" title="对话框组件"></a>对话框组件</h4>]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>回溯算法解题套路框架</title>
      <link href="/2022/08/20/hui-su-suan-fa-jie-ti-tao-lu-kuang-jia/"/>
      <url>/2022/08/20/hui-su-suan-fa-jie-ti-tao-lu-kuang-jia/</url>
      
        <content type="html"><![CDATA[<p>公共组件的封装</p><span id="more"></span><h4 id="回溯算法解题套路框架"><a href="#回溯算法解题套路框架" class="headerlink" title="回溯算法解题套路框架"></a>回溯算法解题套路框架</h4><blockquote><p>解决一个回溯问题,实际上就是一个决策树遍历的过程,站在回溯树的一个节点上,只需要思考三个问题</p><ul><li>路径:也就是已经做出的选择</li><li>选择列表: 也就是当前可以做的选择</li><li>结束条件:也就是决策树的底层,无法再做出的选择的条件</li></ul></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">回溯算法的框架<span class="token keyword">var</span> <span class="token function-variable function">backTracking</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">路径<span class="token punctuation">,</span>选择列表</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>满足结束条件<span class="token punctuation">)</span><span class="token punctuation">{</span>        加入路径        <span class="token keyword">return</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span>选择 <span class="token keyword">of</span> 选择列表<span class="token punctuation">)</span><span class="token punctuation">{</span>        做选择        <span class="token function">backTracking</span><span class="token punctuation">(</span>路径<span class="token punctuation">,</span>选择列表<span class="token punctuation">)</span>        撤销选择    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span>其实重点就会里面的<span class="token keyword">for</span>循环<span class="token punctuation">,</span>在递归调用之前做选择<span class="token punctuation">,</span>在调用之后撤销选择<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h4 id="全排列问题"><a href="#全排列问题" class="headerlink" title="全排列问题"></a>全排列问题</h4><h5 id="46-全排列"><a href="#46-全排列" class="headerlink" title="46. 全排列"></a><a href="https://leetcode.cn/problems/permutations/">46. 全排列</a></h5><p><img src="/images/image_1.06c1c65c.png"></p><blockquote><p>思路:全排列不允许出现重复的数字,比如1,2,3这三个数字,可以选择先选择了2,那这个2就是路径,1,3就是选择列表,结束条件就是到了叶子节点也就是path的长度和nums的长度相同<br><img src="/images/image_2.eabea79a.jpg"><br>这个backTracking函数就是一个指针,在这棵树上游走,同时要维护每个节点的属性,每当走到树的叶子节点其路径就是一个全排列<br>所以这一题,需要的是 在地柜之前做出选择,在递归之后撤销选择,同时因为不能使用同一个元素,所以需要一个used来记录这个节点是否出现<br>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">permute</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> used <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><p>回溯算法的时间复杂度走在O(N!)左右,因为回溯算法本质是穷举,复杂度很高</p></blockquote><h5 id="51-N-皇后"><a href="#51-N-皇后" class="headerlink" title="51. N 皇后"></a><a href="https://leetcode.cn/problems/n-queens/">51. N 皇后</a></h5><p><img src="/images/image_3.27421b6b.png"></p><blockquote><p>思路:<br>主要的思路就是回溯,通过每一行来进行计算 ,然后再对每一列的元素尝试使用皇后填充,如果是有效的,那就回溯下一个,如果无效就continue<br>判断这个是否有效 主要就是左上角 右上角 同一列这三个方位 如果出现了不同的就返回false<br>可以使用set来进行判断,如果是左上角 那行号-列号应该相同 如果是右上角name行号+列号应该相同 然后在用一个集合判断列号是否相同就行了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">solveNQueens</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> cols <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建一个列号的集合</span>    <span class="token keyword">let</span> zhengDig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 正对角线 col - row</span>    <span class="token keyword">let</span> fanDig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 反对角线 col + row</span>    <span class="token keyword">let</span> chessBoard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 原始的棋盘</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 结构列表</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//  传入行</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>row <span class="token operator">===</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 说明遍历完了</span>            <span class="token comment">// 将棋盘结果加入到结果数组中</span>            <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chessBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 每一行转成字符串加入到数组中</span>            <span class="token punctuation">}</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 加入到结果数组</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> col <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>col <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>col<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 遍历每一列</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cols<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span> <span class="token operator">||</span> zhengDig<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>col <span class="token operator">-</span> row<span class="token punctuation">)</span> <span class="token operator">||</span> fanDig<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>col <span class="token operator">+</span> row<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">//  如果 列列表 对角线有这个值</span>                <span class="token keyword">continue</span> <span class="token comment">// 跳过</span>            <span class="token punctuation">}</span>            chessBoard<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Q'</span>            cols<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span>            zhengDig<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>col <span class="token operator">-</span> row<span class="token punctuation">)</span>            fanDig<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>col <span class="token operator">+</span> row<span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>row<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>            chessBoard<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'.'</span>            cols<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span>            zhengDig<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>col <span class="token operator">-</span> row<span class="token punctuation">)</span>            fanDig<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>col <span class="token operator">+</span> row<span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>length<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>如果只需要一个解法怎么办,这个时候可以修改一下这个的代码,就可以了</p><p>给这个回溯函数设置一个返回值 返回的是bool的值 如果遍历下一个是true 那就返回true 如果最后返回的是ture 就返回true 这样的话就能找到一个正确的解了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">solveNQueens</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> cols <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建一个列号的集合</span>    <span class="token keyword">let</span> zhengDig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 正对角线 col - row</span>    <span class="token keyword">let</span> fanDig <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 反对角线 col + row</span>    <span class="token keyword">let</span> chessBoard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 原始的棋盘</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 结构列表</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">//  传入行</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>row <span class="token operator">===</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 说明遍历完了</span>            <span class="token comment">// 将棋盘结果加入到结果数组中</span>            <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>chessBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 每一行转成字符串加入到数组中</span>            <span class="token punctuation">}</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 加入到结果数组</span>            <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token comment">// 返回true</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> col <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>col <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>col<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 遍历每一列</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cols<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span> <span class="token operator">||</span> zhengDig<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>col <span class="token operator">-</span> row<span class="token punctuation">)</span> <span class="token operator">||</span> fanDig<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>col <span class="token operator">+</span> row<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">//  如果 列列表 对角线有这个值</span>                <span class="token keyword">continue</span> <span class="token comment">// 跳过</span>            <span class="token punctuation">}</span>            chessBoard<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Q'</span>            cols<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span>            zhengDig<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>col <span class="token operator">-</span> row<span class="token punctuation">)</span>            fanDig<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>col <span class="token operator">+</span> row<span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">backTracking</span><span class="token punctuation">(</span>row<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">// 如果这个是返回true 那么这个就直接返回true</span>                <span class="token keyword">return</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>            chessBoard<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'.'</span>            cols<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span>            zhengDig<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>col <span class="token operator">-</span> row<span class="token punctuation">)</span>            fanDig<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>col <span class="token operator">+</span> row<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token comment">// 遍历完了都没找到就返回false</span>     <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>length<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="剪枝"><a href="#剪枝" class="headerlink" title="剪枝"></a>剪枝</h3><p>排除那些不符合条件的分支。提高程序的运行效率。</p><h3 id="回溯："><a href="#回溯：" class="headerlink" title="回溯："></a>回溯：</h3><p>一层层递归，尝试搜素答案，</p><p>找到答案：返回结果，尝试其他的分支</p><p>找不到答案：返回上一层，尝试其他分支</p><h4 id="回溯模版："><a href="#回溯模版：" class="headerlink" title="回溯模版："></a>回溯模版：</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">backtrack</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>满足条件<span class="token punctuation">)</span> <span class="token punctuation">{</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span>    <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token comment">// 单层逻辑</span>        <span class="token function">backtrack</span> <span class="token punctuation">(</span>path<span class="token punctuation">,</span> list<span class="token punctuation">)</span>        <span class="token comment">// 撤销选择 重置状态</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="回溯参数"><a href="#回溯参数" class="headerlink" title="回溯参数"></a>回溯参数</h4><p>终止条件</p><p>单层递归逻辑</p><p>选择其他分支（撤销选择 重置状态）</p><h3 id="22-括号生成"><a href="#22-括号生成" class="headerlink" title="22. 括号生成"></a>22. 括号生成</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">数字 n 代表生成括号的对数，请你设计一个函数，用于能够生成所有可能的并且 有效的 括号组合。 示例 <span class="token number">1</span>：输入：n <span class="token operator">=</span> <span class="token number">3</span>输出：<span class="token punctuation">[</span><span class="token string">"((()))"</span><span class="token punctuation">,</span><span class="token string">"(()())"</span><span class="token punctuation">,</span><span class="token string">"(())()"</span><span class="token punctuation">,</span><span class="token string">"()(())"</span><span class="token punctuation">,</span><span class="token string">"()()()"</span><span class="token punctuation">]</span>示例 <span class="token number">2</span>：输入：n <span class="token operator">=</span> <span class="token number">1</span>输出：<span class="token punctuation">[</span><span class="token string">"()"</span><span class="token punctuation">]</span> 提示：<span class="token number">1</span> <span class="token operator">&lt;=</span> n <span class="token operator">&lt;=</span> <span class="token number">8</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} n * @return {string[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">generateParenthesis</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 采用递归，终止条件是字符串的长度等于2n，递归函数传入构建的字符串，左右括号剩余多少，每个位置有两种选择，选择左或者右括号，这里可以进行剪枝优化，只有右括号的保有数量大于左括号的保有数量，才能选右括号，否则肯定不能构成有效括号</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">2</span> <span class="token operator">*</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// 如果这个字符串的长度是2n 就加入result</span>            <span class="token keyword">return</span>         <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 只要是左括号有剩余,就可以选择做扩哈,继续递归的做选择</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>str <span class="token operator">+</span> <span class="token string">'('</span><span class="token punctuation">,</span>left<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>right<span class="token punctuation">)</span> <span class="token comment">// 左括号的长度-1</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>right <span class="token operator">&gt;</span> left<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 只有当右括号大于左括号的大小,才可以选择</span>            <span class="token function">dfs</span><span class="token punctuation">(</span>str <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">,</span>left<span class="token punctuation">,</span>right <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} n * @return {string[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">generateParenthesis</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> tarck <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span>right</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 传入参数左右括号剩余数量</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> right <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span>  <span class="token comment">// 如果不合法就return</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">&gt;</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token comment">// 左括号剩下的比右括号多也是不合法的</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> right <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 左右都是剩下0个了 那就说到了最终的了</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>tarck<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 加入到结果中</span>            <span class="token keyword">return</span>         <span class="token punctuation">}</span>        tarck<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'('</span><span class="token punctuation">)</span> <span class="token comment">// 先放左括号</span>        <span class="token function">backTracking</span><span class="token punctuation">(</span>left<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span>right<span class="token punctuation">)</span>        tarck<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 弹出左括号</span>        tarck<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">')'</span><span class="token punctuation">)</span>        <span class="token function">backTracking</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span>right<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        tarck<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>n<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="51-N-皇后-1"><a href="#51-N-皇后-1" class="headerlink" title="51. N 皇后"></a><a href="https://leetcode.cn/problems/n-queens/">51. N 皇后</a></h3><blockquote><p>按照国际象棋的规则，皇后可以攻击与之处在同一行或同一列或同一斜线上的棋子。 ==n 皇后问题 研究的是如何将 n 个皇后放置在 n×n 的棋盘上，并且使皇后彼此之间不能相互攻击。给你一个整数 n ，返回所有不同的 n 皇后问题 的解决方案。每一种解法包含一个不同的 n 皇后问题 的棋子放置方案，该方案中 ‘Q’ 和 ‘.’ 分别代表了皇后和空位。==<br>==示例 1：==<br><img src="/images/image_1.48b1c67e.png"></p><p>==输入：n = 4==<br>==输出：[[“.Q..”,”…Q”,”Q…”,”..Q.”],[“..Q.”,”Q…”,”…Q”,”.Q..”]]==<br>==解释：如上图所示，4 皇后问题存在两个不同的解法。==<br>==示例 2：==</p><p>==输入：n = 1==<br>==输出：[[“Q”]]==</p><p>==提示：==</p><p>==1 &lt;= n &lt;= 9==</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} n * @return {string[][]} */</span> <span class="token keyword">var</span> <span class="token function-variable function">solveNQueens</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">const</span> <span class="token function-variable function">isValid</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span>col<span class="token punctuation">,</span>chessBoard<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// 判断每一列有没有重复的</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> row<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>chessBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Q'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// 判断对角线45°们不能是Q</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> row <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>j <span class="token operator">=</span> col <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">,</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>chessBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Q'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> row <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>j <span class="token operator">=</span> col <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">,</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>chessBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Q'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span>    <span class="token keyword">const</span> <span class="token function-variable function">transformChessBoard</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">chessBoard</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">let</span> chessBoardBack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 定义结果数组</span>      chessBoard<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">row</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历棋盘的每一行</span>        <span class="token keyword">let</span> rowStr <span class="token operator">=</span> <span class="token string">''</span> <span class="token comment">// 生成一个空字符串</span>        row<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 遍历每一行的元素</span>          rowStr <span class="token operator">+=</span> value <span class="token comment">// 让每一行的元素加上响应的值 将每一行的元素形成一个字符串</span>        <span class="token punctuation">}</span><span class="token punctuation">)</span>        chessBoardBack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>rowStr<span class="token punctuation">)</span> <span class="token comment">// 放入结果数组中</span>      <span class="token punctuation">}</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> chessBoardBack <span class="token comment">// 返回结果数组</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">const</span> <span class="token function-variable function">backTracking</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span>chessBoard</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment">// 传入参数 第几行 棋盘</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>row <span class="token operator">===</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 如果传入的行数等于传入的值n 也就是到达了最底部</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">transformChessBoard</span><span class="token punctuation">(</span>chessBoard<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 将棋盘插入到结果数组中</span>        <span class="token keyword">return</span>      <span class="token punctuation">}</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> col <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>col <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>col<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 遍历每一行的每一个元素</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isValid</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span>col<span class="token punctuation">,</span>chessBoard<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 传入的是当前的行 当前的列 和棋盘元素 和n</span>          <span class="token comment">// 如果满足列不相等对角线不相等的条件</span>          chessBoard<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Q'</span>          <span class="token function">backTracking</span><span class="token punctuation">(</span>row<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>chessBoard<span class="token punctuation">)</span> <span class="token comment">// 进入下一次递归</span>          chessBoard<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'.'</span> <span class="token comment">// 退出递归进入修改成默认值.</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token keyword">let</span> chessBoard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 生成默认棋盘</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>chessBoard<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="52-N皇后-II"><a href="#52-N皇后-II" class="headerlink" title="52. N皇后 II"></a><a href="https://leetcode.cn/problems/n-queens-ii/">52. N皇后 II</a></h3><blockquote><p>n 皇后问题 研究的是如何将 n 个皇后放置在 n × n 的棋盘上，并且使皇后彼此之间不能相互攻击。<br>给你一个整数 n ，返回 n 皇后问题 不同的解决方案的数量。<br>示例 1：</p><p><img src="/images/image_2.0574c147.png"><br>==输入：n = 4==<br>==输出：2==<br>==解释：如上图所示，4 皇后问题存在两个不同的解法。==<br>==示例 2==<br>==输入：n = 1==<br>==输出：1==<br>==提示：==<br>==1 &lt;= n &lt;= 9==</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** 思路就是修改加入数组为数字+1就行了 * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">totalNQueens</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> <span class="token function-variable function">isValid</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span>col<span class="token punctuation">,</span>chessBoard<span class="token punctuation">,</span>n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// 判断每一列有没有重复的</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> row<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>chessBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Q'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// 判断对角线45°们不能是Q</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> row <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>j <span class="token operator">=</span> col <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">,</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>chessBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Q'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> row <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span>j <span class="token operator">=</span> col <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">,</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>chessBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'Q'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token boolean">false</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">true</span>  <span class="token punctuation">}</span>        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">const</span> <span class="token function-variable function">backTracking</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span>chessBoard</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment">// 传入参数 第几行 棋盘</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>row <span class="token operator">===</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 如果传入的行数等于传入的值n 也就是到达了最底部</span>        result<span class="token operator">++</span> <span class="token comment">// 将棋盘插入到结果数组中</span>        <span class="token keyword">return</span>      <span class="token punctuation">}</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> col <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>col <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>col<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 遍历每一行的每一个元素</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isValid</span><span class="token punctuation">(</span>row<span class="token punctuation">,</span>col<span class="token punctuation">,</span>chessBoard<span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 传入的是当前的行 当前的列 和棋盘元素 和n</span>          <span class="token comment">// 如果满足列不相等对角线不相等的条件</span>          chessBoard<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Q'</span>          <span class="token function">backTracking</span><span class="token punctuation">(</span>row<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>chessBoard<span class="token punctuation">)</span> <span class="token comment">// 进入下一次递归</span>          chessBoard<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'.'</span> <span class="token comment">// 退出递归进入修改成默认值.</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>        <span class="token keyword">let</span> chessBoard <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 生成默认棋盘</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>chessBoard<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">solveNQueens</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> board <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        board<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//生成board</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> cols <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 列集，记录出现过皇后的列</span>    <span class="token keyword">const</span> diag1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 正对角线集</span>    <span class="token keyword">const</span> diag2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 反对角线集</span>    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//结果数组</span>    <span class="token keyword">const</span> <span class="token function-variable function">backtrack</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">row</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>row <span class="token operator">==</span> n<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//终止条件</span>            <span class="token keyword">const</span> stringsBoard <span class="token operator">=</span> board<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//生成字符串</span>                stringsBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> stringsBoard<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>stringsBoard<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> col <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> col <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> col<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token comment">// 如果当前点的所在的列，所在的对角线都没有皇后，即可选择，否则，跳过</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cols<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>diag1<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>row <span class="token operator">+</span> col<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>diag2<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>row <span class="token operator">-</span> col<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'Q'</span><span class="token punctuation">;</span>  <span class="token comment">// 放置皇后</span>                cols<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">;</span>          <span class="token comment">// 记录放了皇后的列</span>                diag2<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>row <span class="token operator">-</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 记录放了皇后的正对角线</span>                diag1<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>row <span class="token operator">+</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 记录放了皇后的负对角线</span>                <span class="token function">backtrack</span><span class="token punctuation">(</span>row <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'.'</span><span class="token punctuation">;</span>  <span class="token comment">// 撤销该点的皇后</span>                cols<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>col<span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// 对应的记录也删一下</span>                diag2<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>row <span class="token operator">-</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>                diag1<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>row <span class="token operator">+</span> col<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">;</span>    <span class="token function">backtrack</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> res<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="36-有效的数独"><a href="#36-有效的数独" class="headerlink" title="36. 有效的数独"></a><a href="https://leetcode.cn/problems/valid-sudoku/">36. 有效的数独</a></h3><blockquote><p>请你判断一个 9 x 9 的数独是否有效。只需要 根据以下规则 ，验证已经填入的数字是否有效即可。<br>数字 1-9 在每一行只能出现一次。<br>数字 1-9 在每一列只能出现一次。<br>数字 1-9 在每一个以粗实线分隔的 3x3 宫内只能出现一次。（请参考示例图）<br>注意：</p><p>一个有效的数独（部分已被填充）不一定是可解的。<br>只需要根据以上规则，验证已经填入的数字是否有效即可。<br>空白格用 ‘.’ 表示。<br><img src="/images/image_3.3afb349b.png"><br>输入：board =<br>[[“5”,”3”,”.”,”.”,”7”,”.”,”.”,”.”,”.”]<br>,[“6”,”.”,”.”,”1”,”9”,”5”,”.”,”.”,”.”]<br>,[“.”,”9”,”8”,”.”,”.”,”.”,”.”,”6”,”.”]<br>,[“8”,”.”,”.”,”.”,”6”,”.”,”.”,”.”,”3”]<br>,[“4”,”.”,”.”,”8”,”.”,”3”,”.”,”.”,”1”]<br>,[“7”,”.”,”.”,”.”,”2”,”.”,”.”,”.”,”6”]<br>,[“.”,”6”,”.”,”.”,”.”,”.”,”2”,”8”,”.”]<br>,[“.”,”.”,”.”,”4”,”1”,”9”,”.”,”.”,”5”]<br>,[“.”,”.”,”.”,”.”,”8”,”.”,”.”,”7”,”9”]]<br>输出：true<br>示例 2：</p><p>输入：board =<br>[[“8”,”3”,”.”,”.”,”7”,”.”,”.”,”.”,”.”]<br>,[“6”,”.”,”.”,”1”,”9”,”5”,”.”,”.”,”.”]<br>,[“.”,”9”,”8”,”.”,”.”,”.”,”.”,”6”,”.”]<br>,[“8”,”.”,”.”,”.”,”6”,”.”,”.”,”.”,”3”]<br>,[“4”,”.”,”.”,”8”,”.”,”3”,”.”,”.”,”1”]<br>,[“7”,”.”,”.”,”.”,”2”,”.”,”.”,”.”,”6”]<br>,[“.”,”6”,”.”,”.”,”.”,”.”,”2”,”8”,”.”]<br>,[“.”,”.”,”.”,”4”,”1”,”9”,”.”,”.”,”5”]<br>,[“.”,”.”,”.”,”.”,”8”,”.”,”.”,”7”,”9”]]<br>输出：false<br>解释：除了第一行的第一个数字从 5 改为 8 以外，空格内其他数字均与 示例1 相同。 但由于位于左上角的 3x3 宫内有两个 8 存在, 因此这个数独是无效的。</p><p>提示：</p><p>board.length == 9<br>board[i].length == 9<br>board[i][j] 是一位数字（1-9）或者 ‘.’</p><p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/valid-sudoku">https://leetcode.cn/problems/valid-sudoku</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {character[][]} board * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">isValidSudoku</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">board</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 主要思路,用一个对象记录列 一个对象记录行 一个对象记录小方格 </span>    <span class="token comment">// 小方格的序号可以按照 parseInt((i/3)) * 3 + parseInt(j/3)来计算</span>    <span class="token keyword">let</span> rows <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">let</span> cols <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">let</span> boxs <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 分别是行列小方格</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> <span class="token number">9</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> <span class="token number">9</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果不是这个.的话说明是个有效的数字</span>                <span class="token keyword">let</span> num <span class="token operator">=</span> board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token comment">// 记录这个有效数字</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>rows<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token string">'-'</span><span class="token operator">+</span>num<span class="token punctuation">]</span> <span class="token operator">||</span> cols<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token string">'-'</span><span class="token operator">+</span>num<span class="token punctuation">]</span> <span class="token operator">||</span> boxs<span class="token punctuation">[</span><span class="token function">parseInt</span><span class="token punctuation">(</span>i<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>j<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'-'</span><span class="token operator">+</span>num<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// 这几个有一个是真的 就返回false</span>                <span class="token punctuation">}</span>                rows<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token string">'-'</span><span class="token operator">+</span>num<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 前面的i记录行 后面的num是数字 如果后面还有就是false</span>                cols<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token string">'-'</span><span class="token operator">+</span>num<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>                boxs<span class="token punctuation">[</span><span class="token function">parseInt</span><span class="token punctuation">(</span>i<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">3</span> <span class="token operator">+</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>j<span class="token operator">/</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token string">'-'</span><span class="token operator">+</span>num<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 分别是行列和小方格出现过</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token comment">// 便利完成就返回true</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="37-解数独"><a href="#37-解数独" class="headerlink" title="37. 解数独"></a><a href="https://leetcode.cn/problems/sudoku-solver/">37. 解数独</a></h3><blockquote><p>编写一个程序，通过填充空格来解决数独问题。</p><p>数独的解法需 遵循如下规则：</p><p>数字&nbsp;1-9&nbsp;在每一行只能出现一次。<br>数字&nbsp;1-9&nbsp;在每一列只能出现一次。<br>数字&nbsp;1-9&nbsp;在每一个以粗实线分隔的&nbsp;3x3&nbsp;宫内只能出现一次。（请参考示例图）<br>数独部分空格内已填入了数字，空白格用&nbsp;‘.’&nbsp;表示。</p><p>示例 1：<br><img src="/images/image_4.e4efb277.png"><br>输入：board = [[“5”,”3”,”.”,”.”,”7”,”.”,”.”,”.”,”.”],[“6”,”.”,”.”,”1”,”9”,”5”,”.”,”.”,”.”],[“.”,”9”,”8”,”.”,”.”,”.”,”.”,”6”,”.”],[“8”,”.”,”.”,”.”,”6”,”.”,”.”,”.”,”3”],[“4”,”.”,”.”,”8”,”.”,”3”,”.”,”.”,”1”],[“7”,”.”,”.”,”.”,”2”,”.”,”.”,”.”,”6”],[“.”,”6”,”.”,”.”,”.”,”.”,”2”,”8”,”.”],[“.”,”.”,”.”,”4”,”1”,”9”,”.”,”.”,”5”],[“.”,”.”,”.”,”.”,”8”,”.”,”.”,”7”,”9”]]<br>输出：[[“5”,”3”,”4”,”6”,”7”,”8”,”9”,”1”,”2”],[“6”,”7”,”2”,”1”,”9”,”5”,”3”,”4”,”8”],[“1”,”9”,”8”,”3”,”4”,”2”,”5”,”6”,”7”],[“8”,”5”,”9”,”7”,”6”,”1”,”4”,”2”,”3”],[“4”,”2”,”6”,”8”,”5”,”3”,”7”,”9”,”1”],[“7”,”1”,”3”,”9”,”2”,”4”,”8”,”5”,”6”],[“9”,”6”,”1”,”5”,”3”,”7”,”2”,”8”,”4”],[“2”,”8”,”7”,”4”,”1”,”9”,”6”,”3”,”5”],[“3”,”4”,”5”,”2”,”8”,”6”,”1”,”7”,”9”]]<br>解释：输入的数独如上图所示，唯一有效的解决方案如下所示：</p><p><img src="/images/image_5.9323a1eb.png"><br>提示：</p><p>board.length == 9<br>board[i].length == 9<br>board[i][j] 是一位数字或者 ‘.’<br>题目数据 保证 输入数独仅有一个解</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">solveSudoku</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">board</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token parameter">row<span class="token punctuation">,</span> col<span class="token punctuation">,</span> val<span class="token punctuation">,</span> board</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token keyword">let</span> len <span class="token operator">=</span> board<span class="token punctuation">.</span>length        <span class="token comment">// 行中的数字不能重复</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>row<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment">// 列中的数字不能重复</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>col<span class="token punctuation">]</span> <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">let</span> startRow <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>row <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span>        <span class="token keyword">let</span> startCol <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>col <span class="token operator">/</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">3</span>        <span class="token comment">//方块中的数字不能重复</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> startRow<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> startRow <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> startCol<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> startCol <span class="token operator">+</span> <span class="token number">3</span><span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> val<span class="token punctuation">)</span> <span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token boolean">false</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">true</span>    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//回溯函数</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> board<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//循环行和列</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">'.'</span><span class="token punctuation">)</span> <span class="token keyword">continue</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> val <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> val <span class="token operator">&lt;=</span> <span class="token number">9</span><span class="token punctuation">;</span> val<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//尝试在当前单元格放置1-9</span>                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">isValid</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> j<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> board<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//判断放置数字的合法性</span>                        board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>val<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token comment">//放置数字</span>                        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//合法返回ture</span>                            <span class="token keyword">return</span> <span class="token boolean">true</span>                        <span class="token punctuation">}</span>                                                board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.</span><span class="token template-punctuation string">`</span></span><span class="token comment">//不合法回溯状态</span>                    <span class="token punctuation">}</span>                <span class="token punctuation">}</span>                <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token comment">//1-9的数字都不合法，返回false</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token comment">//全部可能性都尝试完成 返回true 说明有解</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> board    <span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="79-单词搜索"><a href="#79-单词搜索" class="headerlink" title="79. 单词搜索"></a><a href="https://leetcode.cn/problems/word-search/">79. 单词搜索</a></h3><blockquote><p><img src="/images/image_6.4227d28a.png"></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {character[][]} board * @param {string} word * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">exist</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">board<span class="token punctuation">,</span> word</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> m <span class="token operator">=</span> board<span class="token punctuation">.</span>length    <span class="token keyword">let</span> n <span class="token operator">=</span> board<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length    <span class="token keyword">let</span> visited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">let</span> dirs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span>j<span class="token punctuation">,</span>k</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>board<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">!==</span> word<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token boolean">false</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">===</span> word<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token boolean">true</span>        <span class="token punctuation">}</span>        visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 表示以及访问过了</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> dir <span class="token keyword">of</span> dirs<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> ni <span class="token operator">=</span> i <span class="token operator">+</span> dir<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            <span class="token keyword">let</span> nj <span class="token operator">=</span> j <span class="token operator">+</span> dir<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 新的坐标</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>ni <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> ni <span class="token operator">&gt;=</span> m <span class="token operator">||</span> nj <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> nj <span class="token operator">&gt;=</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">continue</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">[</span>ni<span class="token punctuation">]</span><span class="token punctuation">[</span>nj<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果没被访问过 才进行下一步</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">backTracking</span><span class="token punctuation">(</span>ni<span class="token punctuation">,</span>nj<span class="token punctuation">,</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token comment">// 如果下一个是true 那这个就返回true</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment">// 如果都不是真的 就让这个设置为未访问过</span>        visited<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>        <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// 返回没找到</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>j<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">return</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="46-全排列-1"><a href="#46-全排列-1" class="headerlink" title="46. 全排列"></a><a href="https://leetcode.cn/problems/permutations/">46. 全排列</a></h3><blockquote><p><img src="/images/image_7.5683dc33.png"></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number[][]} */</span> <span class="token keyword">var</span> <span class="token function-variable function">permute</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> used <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token comment">// used 是记录第几位用没用</span>    <span class="token keyword">const</span> <span class="token function-variable function">backTracking</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span>      <span class="token punctuation">}</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span> <span class="token comment">// 如果当前下标的元素已经在同一个树枝被使用过久调过这个循环</span>        path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>        <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 下一次继续遍历</span>        path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>       <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="77-组合"><a href="#77-组合" class="headerlink" title="77. 组合"></a><a href="https://leetcode.cn/problems/combinations/">77. 组合</a></h3><blockquote><p><img src="/images/image_8.9bf9fb1f.png"></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} n * @param {number} k * @return {number[][]} */</span> <span class="token keyword">var</span> <span class="token function-variable function">combine</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 结果数组 储存这个回溯得到的结果</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 储存这个的路径</span>    <span class="token comment">// 定义回溯的函数</span>    <span class="token comment">// 参数 n,k和这个遍历的起始数字 返回值就是没有</span>    <span class="token comment">// 退出 当让path的大小等于k的时候 就退出</span>    <span class="token comment">// 单层逻辑 遍历 放入path数组 回溯函数调用 弹出上次插入的数字</span>    <span class="token keyword">const</span> <span class="token function-variable function">backTracting</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span>k<span class="token punctuation">,</span>startIndex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>        res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token keyword">return</span>              <span class="token punctuation">}</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>         path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>        <span class="token function">backTracting</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>k<span class="token punctuation">,</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>        path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracting</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>k<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="17-电话号码的字母组合"><a href="#17-电话号码的字母组合" class="headerlink" title="17. 电话号码的字母组合"></a><a href="https://leetcode.cn/problems/letter-combinations-of-a-phone-number/">17. 电话号码的字母组合</a></h3><blockquote><p><img src="/images/image_9.5fddf967.png"></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} digits * @return {string[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">letterCombinations</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">digits</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 这个是数字的字符串</span>    <span class="token comment">// 首先定义一个map数组结构</span>    <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">,</span><span class="token string">'abc'</span><span class="token punctuation">,</span><span class="token string">'def'</span><span class="token punctuation">,</span><span class="token string">'ghi'</span><span class="token punctuation">,</span><span class="token string">'jkl'</span><span class="token punctuation">,</span><span class="token string">'mon'</span><span class="token punctuation">,</span><span class="token string">'pqrs'</span><span class="token punctuation">,</span><span class="token string">'tuv'</span><span class="token punctuation">,</span><span class="token string">'wxyz'</span><span class="token punctuation">]</span>    <span class="token comment">// 需要一个字符串作为遍历得到的字符串 还需要一个结果数组</span>    <span class="token comment">// 遍历每一个数字对应的字符串 然后组成新的字符串 当遍历数字字符串到达结尾 就push到结果数组</span>    <span class="token comment">// 参数 需要传入的参数是</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> len <span class="token operator">=</span> digits<span class="token punctuation">.</span>length    <span class="token keyword">const</span> <span class="token function-variable function">backTracking</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// index表示遍历到第几个数字</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> len<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 如果字符串的长度就是数字字符串的长度 就表示成功了一个 加入结果数组</span>            res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">let</span> str <span class="token operator">=</span> map<span class="token punctuation">[</span>digits<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// index代表遍历到第几个数字</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> str<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 遍历到的字母加入路径</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>len <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> res    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} digits * @return {string[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">letterCombinations</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">digits</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">{</span>        <span class="token string">'2'</span><span class="token operator">:</span><span class="token string">'abc'</span><span class="token punctuation">,</span>        <span class="token string">'3'</span><span class="token operator">:</span><span class="token string">'def'</span><span class="token punctuation">,</span>        <span class="token string">'4'</span><span class="token operator">:</span><span class="token string">'ghi'</span><span class="token punctuation">,</span>        <span class="token string">'5'</span><span class="token operator">:</span><span class="token string">'jkl'</span><span class="token punctuation">,</span>        <span class="token string">'6'</span><span class="token operator">:</span><span class="token string">'mon'</span><span class="token punctuation">,</span>        <span class="token string">'7'</span><span class="token operator">:</span><span class="token string">'pqrs'</span><span class="token punctuation">,</span>        <span class="token string">'8'</span><span class="token operator">:</span><span class="token string">'tuv'</span><span class="token punctuation">,</span>        <span class="token string">'9'</span><span class="token operator">:</span><span class="token string">'wxyz'</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> digits<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">let</span> size <span class="token operator">=</span> queue<span class="token punctuation">.</span>length        <span class="token keyword">while</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> str <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 逐个弹出这一层的字母</span>            size<span class="token operator">--</span>            <span class="token keyword">let</span> char <span class="token operator">=</span> map<span class="token punctuation">[</span>digits<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// 得到字符</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> char<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>str<span class="token operator">+</span>char<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> queue<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="78-子集"><a href="#78-子集" class="headerlink" title="78. 子集"></a><a href="https://leetcode.cn/problems/subsets/">78. 子集</a></h3><blockquote><p><img src="/images/image_10.81cc32a5.png"></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number[][]} */</span> <span class="token keyword">var</span> <span class="token function-variable function">subsets</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">const</span> <span class="token function-variable function">backTracking</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">startIndex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment">// 每次以进入函数就把path加入到结果数组中</span>      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>      <span class="token comment">// 退出条件 当startindex 大于等于这个nums的长度的时候就退出</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>startIndex <span class="token operator">&gt;=</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span>      <span class="token punctuation">}</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 将当前的元素加入到path中 下一步就加入到结果数组</span>        <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 下一步从i+1开始计算 计入结果数组中</span>        path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 上面的到底之后就弹出 进入下一个i的循环</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="473-火柴拼正方形"><a href="#473-火柴拼正方形" class="headerlink" title="473. 火柴拼正方形"></a><a href="https://leetcode.cn/problems/matchsticks-to-square/">473. 火柴拼正方形</a></h3><blockquote><p><img src="/images/image_11.2cf8983f.png"></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} matchsticks * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">makesquare</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">matchsticks</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> sum <span class="token operator">=</span> matchsticks<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span>val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>p<span class="token operator">+</span>val<span class="token punctuation">)</span> <span class="token comment">// 求和</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>matchsticks<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// 没有四个也直接返回</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">%</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// 如果除不尽4 就直接返回false</span>    matchsticks<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>b<span class="token operator">-</span>a<span class="token punctuation">)</span> <span class="token comment">// 降序排序</span>    <span class="token keyword">let</span> bucket <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 准备四个空桶</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>sum<span class="token operator">/</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token comment">// 计算传入这个元素的下标,和每个桶的最大容量</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">i<span class="token punctuation">,</span>edge</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// i表示传入的下标  edge表示每个桶最大的容量</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> matchsticks<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个超出了桶的范围 就直接返回true</span>            <span class="token keyword">return</span> <span class="token boolean">true</span>        <span class="token punctuation">}</span>        <span class="token comment">// 遍历每个桶</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> matchsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> edge<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">// 如果这个桶的容量加上当前的值大于这个最大容量 就进行下一个桶的判断</span>                <span class="token keyword">continue</span>            <span class="token punctuation">}</span>            bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> matchsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token comment">// 加上这个桶</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>edge<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">// 不断遍历下一个桶,如果最红返回的true 说明可以成功</span>                <span class="token keyword">return</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>            <span class="token comment">// 如果不成功 就回溯一下,这个位置不能放这个数字</span>            bucket<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">-=</span> matchsticks<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token punctuation">}</span>        <span class="token comment">// 如果遍历完都没有成功 就直接返回false</span>        <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 回溯与剪枝 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>递归和分治</title>
      <link href="/2022/08/18/di-gui-he-fen-zhi/"/>
      <url>/2022/08/18/di-gui-he-fen-zhi/</url>
      
        <content type="html"><![CDATA[<p>递归和分治</p><span id="more"></span><h3 id="递归三要素"><a href="#递归三要素" class="headerlink" title="递归三要素"></a>递归三要素</h3><p>递归函数以及参数</p><p>递归终止条件</p><p>递归单层搜索逻辑</p><p>递归伪代码模版：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">recursion</span><span class="token punctuation">(</span><span class="token parameter">level<span class="token punctuation">,</span> param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span> <span class="token operator">...</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//递归终止条件</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>level <span class="token operator">&gt;</span> <span class="token constant">MAX_LEVEL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// output result</span>    <span class="token keyword">return</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token comment">//处理当前层</span>  <span class="token function">process_data</span><span class="token punctuation">(</span>level<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//进入下一层</span>  <span class="token function">recursion</span><span class="token punctuation">(</span>level <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> p1<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//重置状态</span>  <span class="token function">reverse_state</span><span class="token punctuation">(</span>level<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="什么是分治："><a href="#什么是分治：" class="headerlink" title="什么是分治："></a>什么是分治：</h3><p>分治会将大问题拆解成小问题，拆解到最小问题之后，开始不断合并结果，递归是分治实现的一种形式或者是分治实现的一部分，分治包括三分部分，分解、计算、合并。分治的场景很多，例如快速排序，归并排序。</p><p>分治伪代码模版：</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">divide_conquer</span><span class="token punctuation">(</span><span class="token parameter">problem<span class="token punctuation">,</span> param1<span class="token punctuation">,</span> param2<span class="token punctuation">,</span> <span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>problem <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token comment">// return result</span>  <span class="token punctuation">}</span>  <span class="token comment">//分割问题</span>  subproblem <span class="token operator">=</span> <span class="token function">split_problem</span><span class="token punctuation">(</span>problem<span class="token punctuation">,</span> data<span class="token punctuation">)</span>  <span class="token comment">//计算子问题</span>  subResult1 <span class="token operator">=</span> <span class="token function">divide_conquer</span><span class="token punctuation">(</span>subproblem<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p1<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>  subResult2 <span class="token operator">=</span> <span class="token function">divide_conquer</span><span class="token punctuation">(</span>subproblem<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p1<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>  subResult3 <span class="token operator">=</span> <span class="token function">divide_conquer</span><span class="token punctuation">(</span>subproblem<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> p1<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">)</span>  <span class="token operator">...</span>  result <span class="token operator">=</span> <span class="token function">process_resule</span><span class="token punctuation">(</span>subResult1<span class="token punctuation">,</span> subResult2<span class="token punctuation">,</span> subResult3<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>举例</p><p>计算n! n! = 1 * 2 * 3… * n</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>  <span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">6</span> <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">6</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//...</span><span class="token number">6</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">6</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token number">6</span> <span class="token operator">*</span> <span class="token number">5</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">//...</span><span class="token number">6</span> <span class="token operator">*</span> <span class="token number">120</span><span class="token punctuation">;</span><span class="token number">720</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>斐波那契数列，F(n)=F(n-1)+F(n+2)</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">fib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">||</span> n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> n<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">fib</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/image_1.c75a3c30.png"></p><p>**思路**：当n是偶数的时候，对n进行分治，拆解为x*x的n/2的次方，当n为奇数的时候拆分成x * myPow(x,n-1),注意当n是负数或者是0的特殊情况</p><p>复杂度分析：时间复杂度：O(logn)， n是进行二进制拆分的时间复杂度。空间复杂度：O(logn), n为递归深度</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} x * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">myPow</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span> <span class="token comment">// 如果n是0 就直接返回1</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果n&lt;0 就是倒数</span>        <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token function">myPow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span><span class="token operator">-</span>n<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果n是奇数 那么就只能简单的计算了</span>        <span class="token keyword">return</span> x <span class="token operator">*</span> <span class="token function">myPow</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">myPow</span><span class="token punctuation">(</span>x <span class="token operator">*</span> x<span class="token punctuation">,</span>n<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 如果是偶数就直接可以计算</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/image_1.574aa864.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">majorityElement</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token comment">// 对数组进行排序,中间的就是众数</span>    <span class="token keyword">return</span> nums<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">majorityElement</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> hash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 存储数组</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        hash<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>hash<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 个数+1</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>hash<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token comment">// 返回结果</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">majorityElement</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 抵消的思想 如果不同就让count-- 如果相同就让count++ 如果count是0 就直接返回</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            res <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> res<span class="token punctuation">)</span><span class="token punctuation">{</span>            count<span class="token operator">++</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            count<span class="token operator">--</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/image_1.7c5ea702.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * Definition for a binary tree node. * function TreeNode(val, left, right) { *     this.val = (val===undefined ? 0 : val) *     this.left = (left===undefined ? null : left) *     this.right = (right===undefined ? null : right) * } */</span><span class="token comment">/** * @param {TreeNode} root * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxPathSum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> maxSum <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">Infinity</span>    <span class="token keyword">function</span> <span class="token function">getSideMax</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 分解问题  得到左边子树节点的最大路径和  得到右边子树的最大路径和</span>        <span class="token comment">// 比较得到中间该节点的最大路径和</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>        <span class="token keyword">let</span> left <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function">getSideMax</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 因为可以是负数,所以最大路径的综合可能是负数 是负数的话可以不取</span>        <span class="token keyword">let</span> right <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token function">getSideMax</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 得到左右的最大路径和</span>        maxSum <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left <span class="token operator">+</span> right <span class="token operator">+</span> root<span class="token punctuation">.</span>val<span class="token punctuation">,</span>maxSum<span class="token punctuation">)</span> <span class="token comment">// 因为中间的可以取值,也可以不取</span>       `        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> root<span class="token punctuation">.</span>val <span class="token comment">// 不断更新最大值 要返回的是,左边的和右边的和较大的哪一个和此时的val的和,因为返回的只能是单独的一条路径</span>    <span class="token punctuation">}</span>    <span class="token function">getSideMax</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>    <span class="token keyword">return</span> maxSum<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/image_1.b10be974.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxSubArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> sum <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> max <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            sum <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token comment">// 如果前面的和&lt;0 那么就应该从头开始</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            sum <span class="token operator">+=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token comment">// 前面的和大于0 就应该是加上这个树</span>        <span class="token punctuation">}</span>        max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>max<span class="token punctuation">,</span>sum<span class="token punctuation">)</span> <span class="token comment">// 重新得到最大值</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> max<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p><img src="/images/image_1.e382312d.png"></p><pre class="line-numbers language-none"><code class="language-none">/** * Definition for a binary tree node. * function TreeNode(val, left, right) { *     this.val = (val===undefined ? 0 : val) *     this.left = (left===undefined ? null : left) *     this.right = (right===undefined ? null : right) * } *//** * @param {TreeNode} root * @param {number} low * @param {number} high * @return {number} */var rangeSumBST = function(root, low, high) {    let res = 0 // 中序遍历求和    function bfs(root){        if(root === null) return        bfs(root.left)        if(root.val &gt;= low &amp;&amp; root.val &lt;= high){ // 判断是不是在这个范围内            res += root.val // 如果是就加上这个值        }        bfs(root.right)    }    bfs(root)    return res};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * Definition for a binary tree node. * function TreeNode(val, left, right) { *     this.val = (val===undefined ? 0 : val) *     this.left = (left===undefined ? null : left) *     this.right = (right===undefined ? null : right) * } */</span><span class="token comment">/** * @param {TreeNode} root * @param {number} low * @param {number} high * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">rangeSumBST</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> low<span class="token punctuation">,</span> high</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">function</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 得到根节点在这范围的和</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token number">0</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> low<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token comment">// 返回左子树的和</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&gt;</span> high<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token comment">// 返回右子树的和</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> root<span class="token punctuation">.</span>val <span class="token comment">// 返回左右子树和根节点的和</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">dfs</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><hr>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 递归和分治 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>顺丰前端面经汇总</title>
      <link href="/2022/08/18/shun-feng-qian-duan-mian-jing-hui-zong/"/>
      <url>/2022/08/18/shun-feng-qian-duan-mian-jing-hui-zong/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><p>面经地址:<a href="https://www.nowcoder.com/discuss/1046560?type=post&amp;order=recall&amp;pos=&amp;page=1&amp;ncTraceId=&amp;channel=-1&amp;source_id=search_post_nctrack&amp;gio_id=C6A9784D2B10EEE136A561616C5FE5B4-1663080716592">顺丰科技 前端一面 面经25min_笔经面经_牛客网 (nowcoder.com)</a></p><h4 id="开场"><a href="#开场" class="headerlink" title="开场"></a>开场</h4><h5 id="自我介绍"><a href="#自我介绍" class="headerlink" title="自我介绍"></a>自我介绍</h5><blockquote></blockquote><h5 id="对前端的认识和评价"><a href="#对前端的认识和评价" class="headerlink" title="对前端的认识和评价"></a>对前端的认识和评价</h5><blockquote><ul><li>前端他本身是一个工作,工作的领域是浏览器这部分,现在随着移动端的发展,小程序,和一些app,也会用到前端的技术,前端本身不仅仅只是页面的展示,随着前后端分离, 前端工程师也需要掌握一些后台的代码,知道怎么从后台拿到数据,接口怎么调用,最重要的是将美工和设计他们弄的页面显示到用户面前,实现网页的交互效果</li><li>前端本身是在设计和后台之间的领域,起到的是呈上启下的作用,这也要求,前端工程师的知识面必须要广</li><li>基本的工具就是html,js,css这三件套,额外还需要等一些框架的知识,还有一些后端的语言</li></ul></blockquote><blockquote><p>前端工程师的主要价值是,为了让页面更好的和用户进行交互,展示用户需要的信息,其他的还有就是提高用户体验,解决其他的问题<br>对未来来说,随着浏览器的发展,有很多的软件可以在浏览器里面运行了,我认为不久的将来,前端知识会成为一个很重要的知识,发展前景还是很好的<br>这就是我对前端的一个认识和评价</p></blockquote><h4 id="js相关"><a href="#js相关" class="headerlink" title="js相关"></a>js相关</h4><h5 id="js的数据类型-引用类型有哪些"><a href="#js的数据类型-引用类型有哪些" class="headerlink" title="js的数据类型,引用类型有哪些"></a>js的数据类型,引用类型有哪些</h5><blockquote><p>js中有8种数据类型 其中基本数据类型有7种 引用类型有1种</p><ol><li>Number:数字型 有整数和浮点数 ,整数的数据范围:</li></ol></blockquote><blockquote><p>-2^53&nbsp; ——&nbsp; 2^53&nbsp;&nbsp;&nbsp;(包含边界)；</p></blockquote><blockquote><ol start="2"><li>String:字符串 长度为0或者任意长度的字符串</li><li>null:只有一个值 就是null 代表一个空指针</li><li>undefined:只有一个值undefined 代表未定义的变量</li><li>Boolean:布尔值 有true 和 false两个值</li><li>bigint:js中任意精度的整数 可以安全的存储和操作大整数 即使超出number能够表示的安全整数范围 是chrome67中新增的功能</li><li>symbol:symbol类型的对象永远不相等,几遍创建的时候传入的值是相同的,因此可以解决属性命名冲突的问题,适合用于编码 作为标记</li></ol></blockquote><blockquote><p>引用数据类型:Object</p><ol><li>标准特殊对象:Array Regexp Date Math Error</li><li>特殊对象:Number String Boolean</li><li>可调用对象/执行对象 function</li></ol></blockquote><h5 id="string和object的区别"><a href="#string和object的区别" class="headerlink" title="string和object的区别"></a>string和object的区别</h5><blockquote><p>string是基本数据类型,object是引用数据类型<br>两者的区别就是基本数据类型和引用数据类型的去呗</p><ul><li>基本数据类型是按值访问的,引用数据类型是按引用访问的</li><li>基本数据类型比较的时候是值的比较,有的时候会进行数据类型的转换,引用类型比较的时候是地址的比较</li><li>基本数据类型的存储是放在栈内存中,赋值的时候会创建一个新的值,然后把新的值赋值给变量</li><li>引用数据类型是对象,是属性和方法的集合,引用数据类型可以拥有属性和方法,属性又可以包含基本数据类型和引用数据类型</li><li>引用数据类型的存储需要内存的栈和堆共同完成,栈保持对象的标识符和指向堆内存的指针,也可以说是该对象在堆内存中的地址</li></ul></blockquote><h5 id="怎么创建对象"><a href="#怎么创建对象" class="headerlink" title="怎么创建对象"></a>怎么创建对象</h5><blockquote><p>创建对象有一下几种方式</p><ul><li>字面量的形式直接创建 =={}==</li><li>使用==new Object()==来创建</li><li>工厂函数的形式 就是不是new 而是在里面返回新对象 缺点:属性和方法不能共用</li><li>构造函数的形式创建 用new的方式来创建</li><li>原型的形式创建 构造函数 把属性和方法都放在原型上</li><li>构造函数和原型的形式创建 结合构造函数和原型 这样可以控制变量的私有和共享</li></ul></blockquote><h5 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h5><blockquote><p>闭包是指有权访问另外一个函数作用域中的变量的函数<br>内部函数能够访问到外部函数作用域的变量，当内部函数在外部函数之外调用时，由于js为静态作用域，仍能够访问到外部函数作用域的变量，就形成了闭包<br>参见<a href="onenote:https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/面试笔记/js.one#什么是闭包&amp;section-id={C83195E7-3C44-054A-A526-51F96220F84C}&amp;page-id={1F5CA4C7-51DB-4E45-9B0B-E864D71BF0FD}&amp;end">什么是闭包</a><a href="onenote:https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/面试笔记1/JS.one#闭包&amp;section-id={8A957326-2DFC-42BD-8708-B668E307F52D}&amp;page-id={C289908D-93C1-4948-AC71-96DC91F37FD2}&amp;end">闭包</a></p></blockquote><h5 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h5><blockquote><ol><li>全局作用域和函数作用域<br>  a. 全局作用域<br> i. 最外层函数和最外层函数外面的变量拥有全局作用域<br> ii. 所有未定义直接赋值的变量会自动声明为全局作用域<br> iii. 所有window对象的属性是在全局作用域<br>  b. 函数作用域<br> i. 函数内部的变量,是在函数作用于,函数外面访问不到函数作用域的变量,但是内部能访问到外部的变量<br>  c. 块级作用域<br> i. es6中的let和const可以声明块级作用域,即用{}包着的就是块级作用域<br> ii. let 和const 声明的变量没有变量提升,也不可以重复声明</li></ol></blockquote><blockquote><ol start="2"><li>作用域链<br>  在当前作用域使用了一个变量,如果当前作用域没有这个变量,就回去外部的作用域去查找,外部的作用域没有就会去再外部的作用域查找,知道找到最外层的window的全局作用域,这样一层层查找的关系就构成了作用域链</li></ol></blockquote><blockquote></blockquote><blockquote><p>  作用域链的作用就是保证执行环境对有权访问的所有变量和函数的有序访问,通过作用域链,可以访问到外层环境的变量和函数</p></blockquote><blockquote></blockquote><blockquote><p>  作用域链的本质是一个指向变量对象的指针列表,变量对象是一个包含了执行环境中所有变量和函数的对象.作用域链的前端始终都是当前执行上下文的变量对象.全局执行上下文的变量对象也就是全局对象始终是作用域链的最后一个对象</p></blockquote><h4 id="http-x2F-浏览器相关"><a href="#http-x2F-浏览器相关" class="headerlink" title="http/浏览器相关"></a>http/浏览器相关</h4><h5 id="浏览器输入url后的执行过程"><a href="#浏览器输入url后的执行过程" class="headerlink" title="浏览器输入url后的执行过程"></a>浏览器输入url后的执行过程</h5><blockquote><p>（1）<strong>解析URL：</strong>首先会对 URL 进行解析，分析所需要使用的传输协议和请求的资源的路径。如果输入的 URL 中的协议或者主机名不合法，将会把地址栏中输入的内容传递给搜索引擎。如果没有问题，浏览器会检查 URL 中是否出现了非法字符，如果存在非法字符，则对非法字符进行转义后再进行下一过程。<br>（2）<strong>缓存判断：</strong>浏览器会判断所请求的资源是否在缓存里，如果请求的资源在缓存里并且没有失效，那么就直接使用，否则向服务器发起新的请求。<br>（3）<strong>DNS解析：</strong>下一步首先需要获取的是输入的 URL 中的域名的 IP 地址，首先会判断本地是否有该域名的 IP 地址的缓存，如果有则使用，如果没有则向本地 DNS 服务器发起请求。本地 DNS 服务器也会先检查是否存在缓存，如果没有就会先向根域名服务器发起请求，获得负责的顶级域名服务器的地址后，再向顶级域名服务器请求，然后获得负责的权威域名服务器的地址后，再向权威域名服务器发起请求，最终获得域名的 IP 地址后，本地 DNS 服务器再将这个 IP 地址返回给请求的用户。用户向本地 DNS 服务器发起请求属于递归请求，本地 DNS 服务器向各级域名服务器发起请求属于迭代请求。<br>（4）<strong>获取MAC地址：</strong>当浏览器得到 IP 地址后，数据传输还需要知道目的主机 MAC 地址，因为应用层下发数据给传输层，TCP 协议会指定源端口号和目的端口号，然后下发给网络层。网络层会将本机地址作为源地址，获取的 IP 地址作为目的地址。然后将下发给数据链路层，数据链路层的发送需要加入通信双方的 MAC 地址，本机的 MAC 地址作为源 MAC 地址，目的 MAC 地址需要分情况处理。通过将 IP 地址与本机的子网掩码相与，可以判断是否与请求主机在同一个子网里，如果在同一个子网里，可以使用 APR 协议获取到目的主机的 MAC 地址，如果不在一个子网里，那么请求应该转发给网关，由它代为转发，此时同样可以通过 ARP 协议来获取网关的 MAC 地址，此时目的主机的 MAC 地址应该为网关的地址。<br>（5）<strong>TCP三次握手：</strong>下面是 TCP 建立连接的三次握手的过程，首先客户端向服务器发送一个 SYN 连接请求报文段和一个随机序号，服务端接收到请求后向服务器端发送一个 SYN ACK报文段，确认连接请求，并且也向客户端发送一个随机序号。客户端接收服务器的确认应答后，进入连接建立的状态，同时向服务器也发送一个ACK 确认报文段，服务器端接收到确认后，也进入连接建立状态，此时双方的连接就建立起来了。<br>（6）<strong>HTTPS握手：</strong>如果使用的是 HTTPS 协议，在通信前还存在 TLS 的一个四次握手的过程。首先由客户端向服务器端发送使用的协议的版本号、一个随机数和可以使用的加密方法。服务器端收到后，确认加密的方法，也向客户端发送一个随机数和自己的数字证书。客户端收到后，首先检查数字证书是否有效，如果有效，则再生成一个随机数，并使用证书中的公钥对随机数加密，然后发送给服务器端，并且还会提供一个前面所有内容的 hash 值供服务器端检验。服务器端接收后，使用自己的私钥对数据解密，同时向客户端发送一个前面所有内容的 hash 值供客户端检验。这个时候双方都有了三个随机数，按照之前所约定的加密方法，使用这三个随机数生成一把秘钥，以后双方通信前，就使用这个秘钥对数据进行加密后再传输。<br>（7）<strong>返回数据：</strong>当页面请求发送到服务器端后，服务器端会返回一个 html 文件作为响应，浏览器接收到响应后，开始对 html 文件进行解析，开始页面的渲染过程。<br>（8）<strong>页面渲染：</strong>浏览器首先会根据 html 文件构建 DOM 树，根据解析到的 css 文件构建 CSSOM 树，如果遇到 script 标签，则判端是否含有 defer 或者 async 属性，要不然 script 的加载和执行会造成页面的渲染的阻塞。当 DOM 树和 CSSOM 树建立好后，根据它们来构建渲染树。渲染树构建好后，会根据渲染树来进行布局。布局完成后，最后使用浏览器的 UI 接口对页面进行绘制。这个时候整个页面就显示出来了。<br>（9）<strong>TCP四次挥手：</strong>最后一步是 TCP 断开连接的四次挥手过程。若客户端认为数据发送完成，则它需要向服务端发送连接释放请求。服务端收到连接释放请求后，会告诉应用层要释放 TCP 链接。然后会发送 ACK 包，并进入 CLOSE_WAIT 状态，此时表明客户端到服务端的连接已经释放，不再接收客户端发的数据了。但是因为 TCP 连接是双向的，所以服务端仍旧可以发送数据给客户端。服务端如果此时还有没发完的数据会继续发送，完毕后会向客户端发送连接释放请求，然后服务端便进入 LAST-ACK 状态。客户端收到释放请求后，向服务端发送确认应答，此时客户端进入 TIME-WAIT 状态。该状态会持续 2MSL（最大段生存期，指报文段在网络中生存的时间，超时会被抛弃） 时间，若该时间段内没有服务端的重发请求的话，就进入 CLOSED 状态。当服务端收到确认应答后，也便进入 CLOSED 状态。</p></blockquote><h5 id="浏览器的渲染过程-包括html-x2F-css-x2F-js"><a href="#浏览器的渲染过程-包括html-x2F-css-x2F-js" class="headerlink" title="浏览器的渲染过程,包括html/css/js"></a>浏览器的渲染过程,包括html/css/js</h5><blockquote><p>这是一个必考的面试问题，<br>输入 url 后，首先需要找到这个 url 域名的服务器 ip,为了寻找这个 ip，浏览器首先会寻找缓存，查看缓存中是否有记录，缓存的查找记录为：浏览器缓存-》系统缓存-》路由器缓存，缓存中没有则查找系统的 hosts 文件中是否有记录，如果没有则查询 DNS 服务器，得到服务器的 ip 地址后，浏览器根据这个 ip 以及相应的端口号，构造一个 http 请求，这个请求报文会包括这次请求的信息，主要是请求方法，请求说明和请求附带的数<br>据，并将这个 http 请求封装在一个 tcp 包中，这个 tcp 包会依次经过传输层，网络层，数据链路层，物理层到达服务器，服务器解析这个请求来作出响应，返回相应的 html给浏览器，因为 html 是一个树形结构，浏览器根据这个 html 来构建 DOM 树，在 dom树的构建过程中如果遇到 JS 脚本和外部 JS 连接，则会停止构建 DOM 树来执行和下载相应的代码，这会造成阻塞，这就是为什么推荐 JS 代码应该放在 html 代码的后面，之后根据外部央视，内部央视，内联样式构建一个 CSS 对象模型树 CSSOM 树，构建完成后和 DOM 树合并为渲染树，这里主要做的是排除非视觉节点，比如 script，meta 标签和排除 display 为 none 的节点，之后进行布局，布局主要是确定各个元素的位置和尺寸,之后是渲染页面，因为 html 文件中会含有图片，视频，音频等资源，在解析 DOM 的过程中，遇到这些都会进行并行下载，浏览器对每个域的并行下载数量有一定的限制，一<br>般是 4-6 个，当然在这些所有的请求中我们还需要关注的就是缓存，缓存一般通过Cache-Control、Last-Modify、Expires 等首部字段控制。 Cache-Control 和 Expires 的区别在于 Cache-Control 使用相对时间，Expires 使用的是基于服务器 端的绝对时间，因为存在时差问题，一般采用 Cache-Control，在请求这些有设置了缓存的数据时，会先 查看是否过期，如果没有过期则直接使用本地缓存，过期则请求并在服务器校验文件是否修改，如果上一次 响应设置了 ETag 值会在这次请求的时候作为 If-None-Match 的值交给服务器校验，如果一致，继续校验 Last-Modified，没有设置 ETag 则直接验证,Last-Modified，再决定是否返回 304。</p></blockquote><h5 id="event-loop-微任务是什么"><a href="#event-loop-微任务是什么" class="headerlink" title="event loop 微任务是什么"></a>event loop 微任务是什么</h5><blockquote><p>在javascript中 js是一个单线程的语言 js是按照语句出现的顺序执行的,为解决js异步执行的问题,在浏览器的js解析器里面 会将js中的任务分为同步任务和异步任务两种,任务进入任务栈,首先会判断他是同步还是异步 如果是同步,会将其放入主线程中进行执行,如果是异步会放入异步执行的空间,异步任务执行完毕之后会将其放入任务队列,当主线程的任务执行完毕之后呢会看看有没有微任务, 如果有会把微任务都执行了,然后才执行队列中的任务</p></blockquote><p><img src="/images/image_1.e7e5b3a5.png"></p><h6 id="为什么会有事件循环机制"><a href="#为什么会有事件循环机制" class="headerlink" title="为什么会有事件循环机制"></a>为什么会有事件循环机制</h6><p>  js是一个单线程的,就是说一个单独的时间只会做一件事,设计成这样的原因是因为,我们的js主要是在浏览器中执行的,是操作dom的,如果是多线程的,那么如果同时有增加dom 语句和删除dom 语句,那么这个语义就不是特别的明显的,所以是单线程的</p><h6 id="常见的宏任务和微任务"><a href="#常见的宏任务和微任务" class="headerlink" title="常见的宏任务和微任务"></a>常见的宏任务和微任务</h6><blockquote><p>宏任务:==settimeout==,==settimeinterval==,==settimeimediate==,IO操作<br>微任务:==Promise.then/catch/finally==这些方法,还有==MutationObserver==,这个是用来监听dom变化的</p></blockquote><h6 id="为什么要有宏任务和微任务"><a href="#为什么要有宏任务和微任务" class="headerlink" title="为什么要有宏任务和微任务"></a>为什么要有宏任务和微任务</h6><blockquote><p>因为js他本身是单线程的,在执行的过程中,如果没有这个宏任务和微任务的话,如果遇到了一个优先级更高的任务,那么就会阻塞这个任务的执行,所以说要有微任务,来提高这个任务执行的优先级</p></blockquote><h5 id="怎么区分宏任务和微任务"><a href="#怎么区分宏任务和微任务" class="headerlink" title="怎么区分宏任务和微任务"></a>怎么区分宏任务和微任务</h5><blockquote><p>1. 在执行栈中执行一个宏任务。<br>2. 执行过程中遇到微任务，将微任务添加到微任务队列中。<br>3. 当前宏任务执行完毕，立即执行微任务队列中的任务。<br>4. 当前微任务队列中的任务执行完毕，检查渲染，GUI线程接管渲染。<br>5. 渲染完毕后，js线程接管，开启下一次事件循环，执行下一次宏任务（事件队列中取）。<br>微任务：==process.nextTick==、==MutationObserver==、==Promise.then catch finally==<br>宏任务：==I/O==、==setTimeout==、==setInterval==、==setImmediate==、==requestAnimationFrame==</p></blockquote><h4 id="项目问题"><a href="#项目问题" class="headerlink" title="项目问题"></a>项目问题</h4><h5 id="介绍一个项目-在项目中做了什么"><a href="#介绍一个项目-在项目中做了什么" class="headerlink" title="介绍一个项目,在项目中做了什么"></a>介绍一个项目,在项目中做了什么</h5><blockquote><p>我就介绍一下我做的这个vue2的后台管理系统吧，这个项目是针对一个公司后台的人力资源管理项目，项目主要实现的功能有，员工的个人信息管理，员工考勤及员工福利待遇等，主要的页面有首页，角色管理，权限管理，员工管理和员工详情等页面。<br>用的的技术栈有==vue2==，==vuex==，==vuerouter==，==vue-cli==,==elementui==等，对页面进行快速的搭建。<br>我在这里主要完成的是==用户的登录登出==,==权限管理==,==网络请求封装拦截处理==,==全屏和多语言功能支持==这些</p><p>第二个项目是一个类似于京东这样的在线的电商平台的PC端网站，其中包括首页模块，商品各级分类、商品详情，购物车，登录模块，结算与支付等模块<br>我在这里主要完成的是==sku，spu==的商品详情页的展示，第三方登录,以及基于vuex实现的在线购物车与本地购物车的功能。这里面主要用的技术栈是vue3，vuex，vuerouter，vuecli，axios等</p></blockquote><h6 id="vue-组件通信方式"><a href="#vue-组件通信方式" class="headerlink" title="vue 组件通信方式"></a>vue 组件通信方式</h6><blockquote><p>通信方式有</p><ul><li>父子组件通信: ==props==; ==$parent / $children==; ==provide / inject== ; ref ; ==$attrs / $listeners==</li><li>兄弟组件通信: ==eventBus ==; ==vuex==</li><li>跨级通信: ==eventBus==；==Vuex==；==provide / inject== 、==$attrs / $listeners==</li></ul><ol><li>父传子:prop</li></ol></blockquote><blockquote><p>只能是父组件向子组件传递数据,想成了一个单向下行绑定,子组件的数据会随着父组件发生变化<br>可以绑定一个活多个数据,接受的数据类型也不做限制<br>建议使用驼峰命名<br>2. 子传父:$emit(‘事件名’,参数) @事件名= 函数(参数)</p></blockquote><blockquote><p>绑定一个自定义事件,当这个事件被执行的时候就会讲参数传递给父组件,父组件通过v-on监听这个事件得到参数<br>3. eventBus let eventBus = new Vue() 事件总线</p></blockquote><blockquote><p>适用于父子组件和非父子组件,主要的使用步骤就是先创立一个事件处理中心,使用这个时间处理中心来管理事件的监听和触发<br>event.$on(‘事件名’,函数) event.$emit(事件名,参数) event.$off<br>4. 依赖注入</p></blockquote><blockquote><p>主要的api就是inject和provide<br>方法是用在父子孙组件通信,可以避免一层一层的传递数据<br>使用provide方法来发送数据<br>inject方法来接受数据和方法<br><img src="/images/image_2.44042e07.png"><br>5. ref和$refs</p></blockquote><blockquote><p>ref绑定子组件,通过$refs就可以调用子组件内部的数据和方法<br>6. $prent/$children</p></blockquote><blockquote><p>$parent是访问父组件的实例<br>7. $children是访问子组件的实例,但是这个不能保证顺序,并且数据也不是响应式的<br>8. $attrs/$listeners</p></blockquote><blockquote><p>主要是用来进行隔代传递,可以在中间的组件设置使用$attrs 和$listeners实现跨代的通信</p></blockquote><h4 id="23秋招-顺丰前端一面-面经"><a href="#23秋招-顺丰前端一面-面经" class="headerlink" title="23秋招-顺丰前端一面-面经"></a>23秋招-顺丰前端一面-面经</h4><p>地址:<a href="https://www.nowcoder.com/discuss/1042580?type=post&amp;order=create&amp;pos=&amp;page=1&amp;ncTraceId=&amp;channel=-1&amp;source_id=search_post_nctrack&amp;gio_id=C6A9784D2B10EEE136A561616C5FE5B4-1663121749732">23秋招-顺丰前端一面-面经_笔经面经_牛客网 (nowcoder.com)</a></p><h5 id="项目相关"><a href="#项目相关" class="headerlink" title="项目相关"></a>项目相关</h5><h6 id="项目的后台有没有考虑服务的稳定性"><a href="#项目的后台有没有考虑服务的稳定性" class="headerlink" title="项目的后台有没有考虑服务的稳定性"></a>项目的后台有没有考虑服务的稳定性</h6><blockquote><p>后台不是我做的,所以我没想到这么多,但是提高稳定性可以的方法有</p><ul><li>如果刚开始的时候,这个用户比较少,可以使用单机服务器,但是当用户不断增加,单机服务器可能无法满足这么多用户的使用,所以可以通过部署集群服务器来完善这个体验,通常是用CDN来做这个负载均衡,减轻各个服务器的压力</li><li>如果后面这个业务发展的更快,那么就可以对业务进行细分解耦,将不同的业务分成不同的数据库,服务器,提高服务效率</li><li>还有就是可以对这个用户的请求进行监控,限流,降级这些操作,保证服务器不要过载</li></ul></blockquote><h5 id="静态资源有没有考虑拆分"><a href="#静态资源有没有考虑拆分" class="headerlink" title="静态资源有没有考虑拆分"></a>静态资源有没有考虑拆分</h5><blockquote><p>可以把一些静态资源推送到这个oss对象存储的云服务上面,开启CDN服务,节省这个资源加载的时间<br>也可以通过缓存的策略,将静态资源进行缓存,那么当页面重复加载的时候,就不需要多次发送相同请求了</p></blockquote><h5 id="vue相关"><a href="#vue相关" class="headerlink" title="vue相关"></a>vue相关</h5><h5 id="vue和vue3的区别"><a href="#vue和vue3的区别" class="headerlink" title="vue和vue3的区别"></a>vue和vue3的区别</h5><blockquote><p>|1. `组合api`<br><br>相对于vue2的option api<br>1.组合api能给更好的将逻辑关联的代码单独抽离出来<br>2.使用按需导出，在之后的使用中更好的复用<br>2. 虚拟DOM重写：包括使用patchflag在createvnode时对动态节点标记，和事件监听缓存cacheHandlers，将事件处理函数缓存，并生成内联函数（在箭头函数内部只调用另一个函数），在内联函数中调用<br>3. 数据监听方式变成了Proxy，消除了Object.defineProperty现有的限制（例如无法检测新的属性添加），并提供更好的性能。<br>4. 更快的开发体验<br><br>相比于vue2使用的webpack打包工具 vue3可以使用vite开作为打包工具<br><br><br>5. 更先进的组件<br><br>vue2中每一个组件都必须有一个根元素 而vue3中去掉了这一个限制 不需要每一个组件有一个根元素 方便了代码的书写<br>6. 更好的TS支持 这一部分虽然我们没有学习ts的功能但是我对其也有一定的了解 就是ts是一个面向对象 强类型的语法 配合ts能给让变量有更好的类型声明<br><br>,如果使用webpack来进行打包,项目越大,开始运行的时间就越长,热重载也也会有几秒的额延迟 如果使用vite来作为vue2的开发构建工具的话 就可以减少这种等待的情况<br>原因是因为vite省略了开发环境的打包过程 利用浏览器去解析import 在服务端按需变异返回<br>7. 按需编译 体积比vue2更小</p><table><thead><tr><th><br>如果引入了一个功能但是没有使用的话 在编译的时候就会把tree shake掉<br>8. 自定义渲染API</th><th></th></tr></thead></table></blockquote><h5 id="说一下对diff算法的理解"><a href="#说一下对diff算法的理解" class="headerlink" title="说一下对diff算法的理解"></a>说一下对diff算法的理解</h5><blockquote><p>我的理解<br>diff算法是一种同层级之间节点比较的高效算法,只会进行同层的比较,不会跨级进行,比较的时候是从两边向中间进行比较</p><ul><li>比较的方式是:<ul><li>深度优先,同层比较</li><li>比较只会在同层进行,不会跨层级比较</li><li>循环从两边向中间收拢</li></ul></li></ul></blockquote><blockquote><ul><li>比较的过程<ul><li>首先要收缩旧的节点的数组,将空的开始和结束节点都调过</li><li>对比旧的开始节点和新的结束节点,是否相同通过sel和key,如果不同就新的更新旧的,如果相同就patchvnode进行比较这两个节点的细节更新</li><li>对比旧的结束和新的结束节点,原理相同</li><li>对比旧的开始和新的结束节点,原理相同,比较之后将旧的开始节点放在节点列表的最后</li><li>对比新的开始和旧的结束节点,原理相同,比较之后将旧的结束节点放在真实节点列表最开始</li><li>最后会剩下,老节点剩下就删除,新节点剩下就添加</li></ul></li></ul></blockquote><blockquote><ul><li>就地复用<ul><li>尽可能复用之前的不去移动节点</li></ul></li></ul></blockquote><blockquote><p><img src="/images/image_3.eb381864.png"></p></blockquote><blockquote><ul><li>首先会执行patch函数<ul><li>接受两个参数 新旧节点,如果相同就patchVnode,不同就更新新的节点就行了,相同的判断是sel和这个key会否相同</li></ul></li></ul></blockquote><blockquote><ul><li>patchVnode函数<ul><li>首先判断是不是有文本属性,对比文本属性进行更新<ul><li>老的没有文本 新的有文本 更新为新的</li><li>老的有文本 新的有文本 更新新的</li><li>老的有文本 新的没有文本 删除老的</li></ul></li><li>没有文本属性 有children属性 就调用upadteChildren进行更新</li></ul></li></ul></blockquote><blockquote><ul><li>updateChildren<ul><li>同层比较深度优先</li><li>之前的比较方式是,每一棵树的每一个节点进行比较,这样的复杂度是n3</li><li>后来就是值比较单层节点之间的关系,复杂度变成了n</li></ul></li></ul></blockquote><h5 id="keep-alive的两个生命周期是什么"><a href="#keep-alive的两个生命周期是什么" class="headerlink" title="keep-alive的两个生命周期是什么"></a>keep-alive的两个生命周期是什么</h5><blockquote><p>分别是==actived==和==deactived==</p><ul><li>==actived==:组件被激活的时候触发这个钩子函数</li><li>==deactived==:组件被移除的时候触发的钩子函数</li></ul></blockquote><blockquote><p>keep-alive的使用场景和原理</p><ul><li>这个是vue 一个内置组件,可以实现组件的缓存,当组件切换的时候不会对当前的组件进行卸载,一般是和动态路由和动态组件一起完成使用,用于缓存组件</li><li>有三个参数:<ul><li>==include==:表示的是这个范围内的会被缓存</li><li>==exclude==:表示不在这个范围内的会被缓存,这个的优先级要比==include==要高</li><li>==max==:最大的缓存数量</li></ul></li></ul></blockquote><blockquote><ul><li>基本用法</li></ul></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive include<span class="token operator">=</span><span class="token string">"a,b"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">"view"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!-- 正则表达式 (使用 </span><span class="token template-punctuation string">`</span></span>v<span class="token operator">-</span>bind<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">) --&gt;</span><span class="token template-punctuation string">`</span></span><span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive <span class="token operator">:</span>include<span class="token operator">=</span><span class="token string">"/a|b/"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">"view"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;!-- 数组 (使用 </span><span class="token template-punctuation string">`</span></span>v<span class="token operator">-</span>bind<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">) --&gt;</span><span class="token template-punctuation string">`</span></span><span class="token operator">&lt;</span>keep<span class="token operator">-</span>alive <span class="token operator">:</span>include<span class="token operator">=</span><span class="token string">"['a', 'b']"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>component <span class="token operator">:</span>is<span class="token operator">=</span><span class="token string">"view"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>component<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>keep<span class="token operator">-</span>alive<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><p>声明周期函数的触发时机:</p><ul><li>首次进入组件的时候:==beforeRouterEnter==-–==beforeCreate==-–==create==-–==beforeMounted==-–==mounted==-–==actived==-–==…==-–==beforeRouterLeave==-–==deactived==</li><li>再次进入组件: ==beforeRouteEnter ==&gt;==activated ==&gt; ==… …== &gt; ==beforeRouteLeave ==&gt; ==deactivated==</li></ul></blockquote><blockquote><p>==keep-alive==是一个通用的组件,内部定义了一个map来缓存创建过的组件的实例,他会查找内嵌的==component==组件对应的组件的==vnode==,如果该组件在map共存在,那就直接返回他.由于这个component通常的is属性是一个响应式的,会发生变化,所以这个`keep-alive`组件的render函数会重新执行</p></blockquote><h5 id="nextTick是宏任务还是微任务"><a href="#nextTick是宏任务还是微任务" class="headerlink" title="nextTick是宏任务还是微任务"></a>nextTick是宏任务还是微任务</h5><blockquote><p>==nextTick==是是微任务.</p><ul><li>==nextTick==是等待下一次dom更新的方法</li><li>他的出现是为了解决这个dom异步更新获取数据的问题,比如说我们在代码中更新了dom中的一个数据,然后立即获取这个dom中的数据,可以发现这个立即获取的数据是没有发生变化的,而当我们使用了nexttick这个api之后,再去获取这个dom中的数据,就可以发现这个数据已经是更新完成之后的了</li><li>原因是在vue中有个异步更新策略,意思就是当数据发生变化,vue不会立即的更新dom,而是会开启一个队列,把组件更新函数保存在队列里面,在同一事件循环中发生的所有数据的变化会异步的批量更新.这一策略导致我们对数据的修改不会立刻体现在dom上此时如果想要获取dom更新后的dom的状态就需要使用nextTick</li><li>使用方法:<ul><li>在nexttick里面新加一个回调函数,可以在这个回调函数里面获取这个dom更新后的结果</li><li>使用async 和await,在await之后再去获取这个dom更新的结果</li></ul></li></ul></blockquote><blockquote><ul><li>实现的原理:<ul><li>在修改dom 时候,页面不会立即更新,在源码上而是开启了一个队列,这个队里面有更新页面的相关函数,然后在调用的时候是通过一个promise对象的then方法来完成的异步的更新,这个then方法是一个微任务,他会等待所有的同步任务执行完成之后才去执行这个页面的更新操作,所以立即获取是获取不到的</li><li>而==nextick==他的原理是拿到刚才的那个promise对象,在这合格promise对象再次调用一下这个then方法,把回调函数的值放入这个then中,那么这个里面的回调就会等待上面的页面更新函数执行完成之后才去调用,所以这个时候是可以获取到页面中的值的</li></ul></li></ul></blockquote><h4 id="js相关-1"><a href="#js相关-1" class="headerlink" title="js相关"></a>js相关</h4><h5 id="splice和slice哪个是深拷贝哪个是浅拷贝"><a href="#splice和slice哪个是深拷贝哪个是浅拷贝" class="headerlink" title="splice和slice哪个是深拷贝哪个是浅拷贝"></a>splice和slice哪个是深拷贝哪个是浅拷贝</h5><blockquote><p>splice和slice的区别和特点</p><ul><li>splice<ul><li>是用来删除或者添加数组中的元素,</li><li>接收三个参数,第一个是开始删除的位置,第二个是删除的个数,第三个是加入不是删除的话,添加的元素</li><li>返回值是一个数组,是删除元素组成的数组</li><li>注意:==这种方法会改变原始数组==</li><li>如果使用splice(0,len)这个方法得到的新数组,是一个深拷贝的数组</li></ul></li></ul></blockquote><blockquote><ul><li>slice<ul><li>是用来从数组中选取元素的</li><li>接收两个参数:起始位置,和结束位置,注意==这个不会截取到结束位置,而是会截取到这个结束位置的前一个==</li><li>返回值是一个数组</li><li>==不会改变原始数组==</li><li>用slice截取的全部的数组,也是深拷贝,改变的haul不会影响之前的值</li></ul></li></ul></blockquote><h5 id="set和array的区别"><a href="#set和array的区别" class="headerlink" title="set和array的区别"></a>set和array的区别</h5><blockquote><p>set是ES6新增的数据结构,和array 区别如下</p><ul><li>唯一性:set里面的值是唯一的,array 可以重复的</li><li>长度的获取:set.size array.length</li><li>获取元素:array可以通过索引来获取元素,而set则需要通过遍历来获取元素,for of遍历</li><li>添加元素: array.push(item)返回的是数组的长度 set.add(item)返回的是元素的本身</li><li>删除元素:array.splice(start,num) set.delete(item)</li><li>清空元素: array.length = 0 set.clear()</li><li>判断是否存在:array.indexOf(item) !== -1 set.has(item)</li></ul></blockquote><h5 id="canvas了解吗"><a href="#canvas了解吗" class="headerlink" title="canvas了解吗"></a>canvas了解吗</h5><blockquote><p>canvas是什么呢</p><ul><li>canvas用于图形的绘制,通过脚本也就是js 完成 canvas只是图形的容器,必须使用脚本来绘制图形,可以通过多种方法使用canvas来绘制盒子,圆形等</li><li>通常需要一个id属性,然后需要设置一下宽高</li><li>在js脚本里面获取到标签之后进行绘制</li><li>然后是用==getContext(“2d”)==来创建一个对象</li><li>坐标是以左上角作为起点,0,0</li><li>画线的话可以使用<ul><li>moveTo(x,y) 定义线条开始坐标</li><li>lineTo(x,y) 定义线条结束坐标</li><li>然后使用 stroke() 方法来绘制线条:</li></ul></li></ul></blockquote><blockquote><ul><li>绘制圆形的话,可以使用arc方法<ul><li>==context.arc(x,y,r,sAngle,eAngle,counterclockwise);==</li><li>x 是圆的中心的x坐标</li><li>y 是圆中心的y坐标</li><li>r 是圆的半径</li><li>sAngle 是起始角,用弧度来计算</li><li>eAngle 是结束角,用弧度来计算</li><li>counterclockwise 是顺时针还是逆时针,false是逆时针,true是顺时针</li></ul></li></ul></blockquote><h5 id="对原型链的理解"><a href="#对原型链的理解" class="headerlink" title="对原型链的理解"></a>对原型链的理解</h5><blockquote><p>什么是原型</p><ul><li>所有的引用类型都有一个==<strong>proto</strong>==的对象,指向的是塔吊构造函数的原型</li><li>所有的函数也都有一个==prototype==的属性,指向的是他的原型对象</li><li>函数的实例的==<strong>proto</strong>==和构造函数的==prototype==是相同的</li></ul></blockquote><blockquote><p>什么是原型链</p><ul><li>当访问一个对象的某个属性时，会先在这个对象本身属性上查找，如果没有找到，则会去它的__proto__隐式原型上查找，即它的构造函数的prototype，如果还没有找到就会再在构造函数的prototype的__proto__中查找，这样一层一层向上查找就会形成一个链式结构，我们称为原型链。</li></ul></blockquote><h4 id="顺丰前端一面面经-笔经面经-牛客网-nowcoder-com"><a href="#顺丰前端一面面经-笔经面经-牛客网-nowcoder-com" class="headerlink" title="顺丰前端一面面经_笔经面经_牛客网 (nowcoder.com)"></a><a href="https://www.nowcoder.com/discuss/1042428?type=post&amp;order=create&amp;pos=&amp;page=2&amp;ncTraceId=&amp;channel=-1&amp;source_id=search_post_nctrack&amp;gio_id=C6A9784D2B10EEE136A561616C5FE5B4-1663121749732">顺丰前端一面面经_笔经面经_牛客网 (nowcoder.com)</a></h4><h5 id="自我介绍-1"><a href="#自我介绍-1" class="headerlink" title="自我介绍"></a>自我介绍</h5><blockquote></blockquote><h5 id="对Node-js了解吗-接触过Node-js吗"><a href="#对Node-js了解吗-接触过Node-js吗" class="headerlink" title="对Node.js了解吗,接触过Node.js吗"></a>对Node.js了解吗,接触过Node.js吗</h5><blockquote><p>node.js是接触过的,主要是简单的了解了一下,用来写前端页面的时候处理发请求响应请求的</p><ul><li>什么是nodejs:Node. js是一个基于 Chrome v8引擎的服务器端 JavaScript运行环境,他是高度可扩展的,有一个很大的开源社区npm,里面有很多好用的插件</li></ul></blockquote><h5 id="介绍一下项目"><a href="#介绍一下项目" class="headerlink" title="介绍一下项目"></a>介绍一下项目</h5><blockquote><p>我就介绍一下我做的这个vue2的后台管理系统吧，这个项目是针对一个公司后台的人力资源管理项目，项目主要实现的功能有，员工的个人信息管理，员工考勤及员工福利待遇等，主要的页面有首页，角色管理，权限管理，员工管理和员工详情等页面。<br>用的的技术栈有==vue2==，==vuex==，==vuerouter==，==vue-cli==,==elementui==等，对页面进行快速的搭建。<br>我在这里主要完成的是==用户的登录登出==,==权限管理==,==网络请求封装拦截处理==,==全屏和多语言功能支持==这些<br>第二个项目是一个类似于京东这样的在线的电商平台的PC端网站，其中包括首页模块，商品各级分类、商品详情，购物车，登录模块，结算与支付等模块<br>我在这里主要完成的是==sku，spu==的商品详情页的展示，第三方登录,以及页面展示虚拟长列表的优化等功能。这里面主要用的技术栈是vue3，vuex，vuerouter，vuecli，axios等</p></blockquote><h5 id="为什么选择用vue而不是react"><a href="#为什么选择用vue而不是react" class="headerlink" title="为什么选择用vue而不是react"></a>为什么选择用vue而不是react</h5><blockquote><ul><li>vue他是中国人编写的,有很多的中文文档,阅读起来比较的方便</li><li>vue有很多的组件库,使用起来也很方便</li><li>vue他本身是MVVM的数据模型的,我们在编写的时候只需要管制这个数据层就行了,上手简单</li><li>vue有这个虚拟dom他的性能也还过的过去</li><li>最重要的就是我还没学到react</li></ul></blockquote><h5 id="对react的了解有吗"><a href="#对react的了解有吗" class="headerlink" title="对react的了解有吗"></a>对react的了解有吗</h5><p>react他本来是facebook里面的一个js的库,后来开元路,他的特点是声明式,基于组件还有就是学习一次随处使用,可以开发的应用有很多</p><p>react是一个单向的数据流,也就是说设计的时候数据是从父组件传递到子组件的需要依赖onChange/setState的模式来实现数据的双向绑定,state就是在组件内部管理自己数据的一种方式,可以用setState改变数据.onChange实现双向绑定</p><p>React使用的是JSX语法来实现插值,条件渲染和循环</p><p>在React中组件的更新渲染是从数据发生变化的根组件开始向子组件逐层渲染的,而组件的声明周期中有shouldComponentUpdate这一个钩子函数可以给开发者优化组件在不需要更新的时候不要更新</p><h5 id="vue2和vue3的区别"><a href="#vue2和vue3的区别" class="headerlink" title="vue2和vue3的区别"></a>vue2和vue3的区别</h5><blockquote><p>区别如下</p><ol><li>组合api</li></ol></blockquote><blockquote><p>相对于vue2的option api<br>1.组合api能给更好的将逻辑关联的代码单独抽离出来<br>2.使用按需导出，在之后的使用中更好的复用<br>2. 虚拟DOM重写：包括使用patchflag在createvnode时对动态节点标记，和事件监听缓存cacheHandlers，将事件处理函数缓存，并生成内联函数（在箭头函数内部只调用另一个函数），在内联函数中调用<br>3. 数据监听方式变成了Proxy，消除了Object.defineProperty现有的限制（例如无法检测新的属性添加），并提供更好的性能。<br>4. 更快的开发体验</p></blockquote><blockquote><p>相比于vue2使用的webpack打包工具 vue3可以使用vite开作为打包工具</p><ol start="5"><li>更先进的组件</li></ol></blockquote><blockquote><p>vue2中每一个组件都必须有一个根元素 而vue3中去掉了这一个限制 不需要每一个组件有一个根元素 方便了代码的书写<br>6. 更好的TS支持 这一部分虽然我们没有学习ts的功能但是我对其也有一定的了解 就是ts是一个面向对象 强类型的语法 配合ts能给让变量有更好的类型声明</p></blockquote><blockquote><p>,如果使用webpack来进行打包,项目越大,开始运行的时间就越长,热重载也也会有几秒的额延迟 如果使用vite来作为vue2的开发构建工具的话 就可以减少这种等待的情况<br>原因是因为vite省略了开发环境的打包过程 利用浏览器去解析import 在服务端按需变异返回<br>7. 按需编译 体积比vue2更小</p></blockquote><blockquote><p>如果引入了一个功能但是没有使用的话 在编译的时候就会把tree shake掉<br>8. 自定义渲染API</p></blockquote><h5 id="项目的权限控制怎么做的"><a href="#项目的权限控制怎么做的" class="headerlink" title="项目的权限控制怎么做的"></a>项目的权限控制怎么做的</h5><blockquote><p>做法如下</p><ul><li>在这里呢我是考虑了权限控制的思路,现在的权限控制思路有单一的权限控制也就是具体的将权限划分到每个人,每个人都有自己的权限,但是这种权限控制的方案就不太适应现在的企业的高效管理的发展需求,因为每个人设置权限的话工作量巨大也不好管理</li><li>所以我在这个项目里面提供的是RBAC的权限控制方案,这个方案的优点是在方案中新增了中间层这个角色,通过这个角色来分配响应的权限,这样就解决了工作量大不好管理的问题,这样的话每个人可能有很多的角色,这些角色也可能有很多的权限,角色和权限搭配就能够更好的处理权限</li><li>现在的权限一般可以分为三种,分别是页面访问权限.按钮操作权限和api访问权限,这个api访问权限常见于在后端进行拦截,所以我在这里主要做的是页面访问权限和按钮操作权限</li><li>页面访问权限的设计:先给用户分配了角色,每个角色拥有一个或多个权限,这些权限都有自己响应的标识,当用户登录获取资料的时候,会==自动查出用户所拥有的权限的标识==,然后根据这个标识,来查找用户拥有的路由模块,如果没有这个标识就无法访问这个路由模块.在这一部分使用的是,==vue-router新增的addRoutes的方法==,这个方法的含义是动态的添加路由规则</li><li>基本上当用户获取用户资料的时候,后端会给浏览器传送一个该用户所拥有的权限表示的字段,我可以==在设置路由模块的时候==将==路由的相关属性设置==和==权限标识==一样,例如name属性,然后从动态路由中==筛选出name属性在在传递过来的标识中的路由==,将其==放入一个路由规则数组==中,然后将==筛选出来的路由和静态路由==进行合并,这就实现了vuex中的==筛选权限路由==,这个部分是用来生成侧边栏的,将这个生成的路由对象和静态路由对象合并==引入到侧边栏组件==中,按照这个生成的路由来显示侧边栏的菜单</li><li>然后还需要将筛选出来的路由添加到路由表中,在这一步是在路由守卫的地方来使用,如果用户有==token==,访问的不是登录页,而且是之前没有获取用户资料,那么在==第一次获取用户资料==的时候就==需要将这个vuex中筛选出来的路由==利用==router.addRouter==的方法添加到==路由表==中,那么在后续的跳转路由的时候,就可以跳转到路由了</li><li>这里在写法的时候也有一个坑,就是在添加动态路由之后不能仅仅是写next(),而是要写next(to.path)算是进行二次跳转</li><li>然后就是在==退出的时候要重置一下这个路由==,否则的话在退出登录的时候路由的信息==并没有删除==,就会出现后面再访问的时候==看不到菜单,但是输入地址就可以看到相关的页面==,所以需要在退出登录的时候调用一下重置路由的方法,相当于重新初始化了路由</li><li>==然后要把404放在添加路由的最后面==</li><li>按钮控制权限思路也是差不多的,就是==后台会返回一个按钮操作权限的字段==,然后可以将监测这个权限的方法==,单独的抽离出来==,使用==混入的方式,混入到各个组件当中==,当遇到这个==需要判断权限的按钮==的时候呢,就==调用这个方法==,==传入这个权限按钮需要的标识==,看看这个标识是不是在权限访问的数组中,如果是在,那么这个权限的标识就可以访问,如果不在,那么这个按钮就可以控制他不显示或者是禁用</li></ul></blockquote><h5 id="token登录认证的流程"><a href="#token登录认证的流程" class="headerlink" title="token登录认证的流程"></a>token登录认证的流程</h5><p>见<a href="onenote:https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/面试笔记1/简历问题.one#登录登出&amp;section-id={FB61D1AB-6B4A-6C41-9C51-6E24C269F92E}&amp;page-id={7779EE2F-0755-4F5D-9816-EFE674040B78}&amp;end">登录登出</a></p><h5 id="为什么你-token-要保存到-localStorage-里面，放-cookie-里面不行吗"><a href="#为什么你-token-要保存到-localStorage-里面，放-cookie-里面不行吗" class="headerlink" title="为什么你 token 要保存到 localStorage 里面，放 cookie 里面不行吗"></a>为什么你 token 要保存到 localStorage 里面，放 cookie 里面不行吗</h5><blockquote><p>其实是可以的,带上可能带来一些问题<br>浏览器端常用的存储技术是 cookie 、localStorage 和 sessionStorage。</p><ul><li><strong>cookie：</strong>其实最开始是服务器端用于记录用户状态的一种方式，由服务器设置，在客户端存储，然后每次发起同源请求时，发送给服务器端。cookie 最多能存储 4 k 数据，它的生存时间由 expires 属性指定，并且 cookie 只能被同源的页面访问共享。</li><li><strong>sessionStorage：</strong>html5 提供的一种浏览器本地存储的方法，它借鉴了服务器端 session 的概念，代表的是一次会话中所保存的数据。它一般能够存储 5M 或者更大的数据，它在当前窗口关闭后就失效了，并且 sessionStorage 只能被同一个窗口的同源页面所访问共享。</li><li><strong>localStorage：</strong>html5 提供的一种浏览器本地存储的方法，它一般也能够存储 5M 或者更大的数据。它和 sessionStorage 不同的是，除非手动删除它，否则它不会失效，并且 localStorage 也只能被同源页面所访问共享。</li></ul></blockquote><blockquote><p>上面三种方式都是存储少量数据的时候的存储方式，当需要在本地存储大量数据的时候，我们可以使用浏览器的 indexDB 这是浏览器提供的一种本地的数据库存储机制。它不是关系型数据库，它内部采用对象仓库的形式存储数据，它更接近 NoSQL 数据库。<br><strong>Web Storage 和 cookie 的区别总结如下：</strong></p><ul><li>Web Storage是为了更大容量存储设计的。Cookie 的大小是受限的，并且每次你请求一个新的页面的时候 Cookie 都会被发送过去，这样无形中浪费了带宽；</li><li>cookie 需要指定作用域，不可以跨域调用；</li><li>Web Storage 拥有 setItem,getItem,removeItem,clear 等方法，不像 cookie 需要前端开发者自己封装 setCookie，getCookie；</li><li>Cookie 也是不可以或缺的：Cookie 的作用是与服务器进行交互，作为 HTTP 规范的一部分而存在 ，而 Web Storage 仅仅是为了在本地“存储”数据而生</li><li>如果&nbsp;cookie&nbsp;被人拦截了，就可以取得所有的&nbsp;session&nbsp;信息</li></ul></blockquote><h5 id="学习js和vue是怎么学习的"><a href="#学习js和vue是怎么学习的" class="headerlink" title="学习js和vue是怎么学习的"></a>学习js和vue是怎么学习的</h5><blockquote><p>主要的学习思路是,我讲一下吧<br>就是现在网上看看有没有相关的资源,因为现在网络发展还挺快的,对于一些学习的话还是很方便的,网上有很多关系vue和js的教学资源,这是一个简单的入门<br>后面就会尝试着去做一下项目,通过项目的编写来加深对这些语言的印象<br>在做项目的过程中,有可能会遇到一些其他的问题,这个时候就可以通过查阅官方文档或者是去一些网站找相关的解决思路了,主要的就是vue的官方网站还有那个mdn ,其他的还有一些论坛,有的别人也总结的挺好的,因为有的官方文档写的不是很容易栋,经过别人的总结就清楚了一点</p></blockquote><h5 id="前端的发展史是什么样的"><a href="#前端的发展史是什么样的" class="headerlink" title="前端的发展史是什么样的"></a>前端的发展史是什么样的</h5><p>前端的可以概括为在浏览器端运行的代码,现在也可以用来开发移动端,桌面端,小程序等等</p><p>在刚开始的时候,前后端是不分家的可以分成几个阶段八</p><ul><li>初期静态网站,刚开始都是单独的静态压面</li><li>后来又有了动态网站的技术,在后端编写前端显示的语言,后端完成数据展示和用户交互的代码,一个url对应一个页面,这样每次加载新页码就需要重新请求数据</li><li>后来又有了ajax,通过这个ajax可以在不刷新浏览器的情况下和后端进行交互,于是就诞生了这个spa单页面应用</li><li>有了这个前后端分离的模式,慢慢的出现了很多前端的框架,大大的提高了开发的效率</li></ul><h5 id="前端的未来发展趋势是怎么样的"><a href="#前端的未来发展趋势是怎么样的" class="headerlink" title="前端的未来发展趋势是怎么样的"></a>前端的未来发展趋势是怎么样的</h5><ul><li>我觉得随着移动端的不断的发展,前端可以越来越关注这个移动端的体验,移动端的适配的能力,比如说小程序和uni-app这些方面</li><li>现在也有一些框架,比如说react这个东西,他就是可以跨端运行,我们学习一次的话,写出来的代码可以在很多的平台运行,所以说这个也是前端的发展方向吧</li><li>还有就是可能这个前端工程师会向全栈这个方法发展,不断的扩充自己的知识面,这样</li></ul><h4 id="地址-顺丰前端一面-笔经面经-牛客网-nowcoder-com"><a href="#地址-顺丰前端一面-笔经面经-牛客网-nowcoder-com" class="headerlink" title="地址:顺丰前端一面_笔经面经_牛客网 (nowcoder.com)"></a>地址:<a href="https://www.nowcoder.com/discuss/1042375?type=post&amp;order=create&amp;pos=&amp;page=1&amp;ncTraceId=&amp;channel=-1&amp;source_id=search_post_nctrack&amp;gio_id=C6A9784D2B10EEE136A561616C5FE5B4-1663143004539">顺丰前端一面_笔经面经_牛客网 (nowcoder.com)</a></h4><h5 id="什么叫组件化模块化工程化的项目"><a href="#什么叫组件化模块化工程化的项目" class="headerlink" title="什么叫组件化模块化工程化的项目"></a>什么叫组件化模块化工程化的项目</h5><ul><li>模块化:对一些由单独逻辑的业务进行抽象,对其根据项目的情况进行封装组合到一起,比如说登录模块,评论模块这些,组合灵活,方便调用</li><li>组件化: 对某个具体的功能进行封装,比如说分页组件,面板组件,弹窗组件这些,是单独的功能</li><li>工程化,这个是用软件工程的技术和方法进行前端项目的开发维护和管理<ul><li>代码规范: 相同的规范开发</li><li>分支管理: 不同的业务逻辑有不同的分支,最后再合道一个分支上面</li><li>模块管理: 单独的模块是独立且规范的,方便复用</li><li>自动化测试:</li><li>构建:</li><li>部署: 一些脚手架的功能,一些规范化的部署的方法</li></ul></li></ul><h5 id="对axios做过哪些封装"><a href="#对axios做过哪些封装" class="headerlink" title="对axios做过哪些封装"></a>对axios做过哪些封装</h5><blockquote><ul><li>引入axios</li><li>设置baseUrl和超时时间</li><li>用这个create方法生成一个axios对象</li><li>可以给这个对象添加这个请求拦截和响应拦截</li><li>在请求拦截里面处理这个token的统一注入,和主动介入的失效处理</li><li>响应拦截里面处理这个token 服务端的介入之后的结果,还有就是这个数据的处理,因为服务端返回的数据可能不是单纯的数据,而是还会有一些状态码,提示语这些字段,可以将它分离出来</li><li>最后把这个实例导出然后用在这个api接口编写的文件里面</li></ul></blockquote><blockquote><p>axios的请求拦截器的原理如下<br><img src="/images/image_4.fc56c8b2.png"><br>axios作为网络请求的第三方工具, 可以进行请求和响应的拦截,首先会通过create创建一个axios的实例,这里面可以配置基础地址和超时时间,然后axios提供了请求拦截器和响应拦截器的功能,请求拦截器主要处理的是token的统一注入问题,响应拦截器主要处理的是返回的数据异常,和对返回的数据结构进行处理的问题<br>对于请求拦截器,主要的执行任务是判断这个vuex的仓库中是不是有token这个选项 如果有token这个选项判断这个token是不是超时了 如果超时了就让页面定位到登录页 并且删除这个token 返回一个错误 如果这个token没有超时 就在这个请求头里面假如一个字段 Authorization 里面包含这个token的信息 如果没有token的信息的话就什么都不做<br><img src="/images/image_5.bf0c76a5.png"><br>响应拦截器:主要是处理后端响应过来的信息,后端响应过来的信息可能会有一层包装,并不是仅仅就是我们需要的数据,可能还存在一些,响应消息等等,通过这个响应拦截器对这个响应的数据进行分解处理,将有用的信息提取出来,返回给页面请求,响应拦截器也可以判断响应出错的问题,当我们上传token的时候,服务端会判断这个token是否过期,通过在响应拦截器判断token过期,如果过期了,就把这个token给清除掉,然后页面跳转到登录页<br><img src="/images/image_6.12e10fcc.png"></p></blockquote><h5 id="有哪些地方用过axios"><a href="#有哪些地方用过axios" class="headerlink" title="有哪些地方用过axios"></a>有哪些地方用过axios</h5><blockquote><p>接口的编写这个部分用过axios啊,还有什么地方用到过吗<br>还有就是请求拦截,响应拦截这部分也用到过axios<br>设置这个baseURL也用到过<br>生产环境的跨域配置,改写请求路径这部分,我不知道是不是算是用到了</p></blockquote><h5 id="对Promise的理解"><a href="#对Promise的理解" class="headerlink" title="对Promise的理解"></a>对Promise的理解</h5><blockquote><p>promise本身是一种异步编程的解决方案,主要是为了处理这个回调函数多层回调产生的回调地狱的问题,本质上来说他是一个容器,储存着这个里面的任务的执行状态<br>一般来说promise有三个状态分别是pending fuifilled 和rejetced这几个状态,一旦状态改变就无法回到之前的状态,改变状态的本身就是通过这个resolve和reject来实现的<br>这个里面也会提供一些这个状态的方法,比如then catch all race finally这些<br>都有各自的含义</p></blockquote><h5 id="项目中有用到mock吗"><a href="#项目中有用到mock吗" class="headerlink" title="项目中有用到mock吗"></a>项目中有用到mock吗</h5><blockquote><p>有用到过,这个是因为我们在写这个前端代码的时候,有可能后端的相关的接口还没有开发出来,这个时候就可以通过mock数据来模拟从后端获取到的数据,先进行前端的页面渲染,保证业务的完整性<br>使用步骤</p><ul><li>安装mockjs 设置的延迟时间,通过mockjs提供的规则关键词来模拟相关的数据</li><li>前面都是正常的接口请求,只不过在转发请求的时候,要利用mock的mock方法来拦截相关的请求,通过传入的数据给他返回相关的参数</li></ul></blockquote><blockquote><p>代码如下<br><img src="/images/image_7.5083f673.png"></p></blockquote><h5 id="防抖和节流-在项目中什么地方用到过-怎么实现节流"><a href="#防抖和节流-在项目中什么地方用到过-怎么实现节流" class="headerlink" title="防抖和节流,在项目中什么地方用到过,怎么实现节流"></a>防抖和节流,在项目中什么地方用到过,怎么实现节流</h5><blockquote><p>防抖和节流的含义如下</p><ul><li>函数防抖是指在事件被触发 n 秒后再执行回调，如果在这 n 秒内事件又被触发，则重新计时。这可以使用在一些点击请求的事件上，避免因为用户的多次点击向后端发送多次请求。</li><li>函数节流是指规定一个单位时间，在这个单位时间内，只能有一次触发事件的回调函数执行，如果在同一个单位时间内某事件被触发多次，只有一次能生效。节流可以使用在 scroll 函数的事件监听上，通过事件节流来降低事件调用的频率。</li></ul></blockquote><blockquote><p><strong>防抖函数的应用场景：</strong></p><ul><li>按钮提交场景：防⽌多次提交按钮，只执⾏最后提交的⼀次</li><li>服务端验证场景：表单验证需要服务端配合，只执⾏⼀段连续的输⼊事件的最后⼀次，还有搜索联想词功能类似⽣存环境请⽤lodash.debounce</li></ul></blockquote><blockquote><p><strong>节流函数的*</strong>*适⽤场景：**</p><ul><li>拖拽场景：固定时间内只执⾏⼀次，防⽌超⾼频次触发位置变动</li><li>缩放场景：监控浏览器resize</li><li>动画场景：避免短时间内多次触发动画引起性能问题</li></ul></blockquote><h5 id="call-apply-bind-的区别"><a href="#call-apply-bind-的区别" class="headerlink" title="call apply bind 的区别"></a>call apply bind 的区别</h5><p><img src="/images/image_8.81b39fcf.png"></p>]]></content>
      
      
      <categories>
          
          <category> 面经 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 顺丰 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>编辑距离问题总结</title>
      <link href="/2022/08/15/bian-ji-ju-chi-wen-ti-zong-jie/"/>
      <url>/2022/08/15/bian-ji-ju-chi-wen-ti-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>编辑距离问题总结</p><span id="more"></span><h1 id="编辑距离的主要写法"><a href="#编辑距离的主要写法" class="headerlink" title="编辑距离的主要写法"></a>编辑距离的主要写法</h1><p>从前向后，判断两个位置是否相同，如果相同，就是i-1，j-1<br>如果不同就是 前面的几位互相匹配然后 判断操作数<br>要双重循环 一个一个去遍历</p><h2 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h2><p><img src="/../images/72%E7%BC%96%E8%BE%91%E8%B7%9D%E7%A6%BB.png" alt="编辑距离"></p><h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} word1 * @param {string} word2 * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">minDistance</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">word1<span class="token punctuation">,</span> word2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// dp[i][j] 表示以i-1位结尾的字符串和以j-1为结尾的字符串要保持一致需要的操作数</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>word1<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>word2<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// 初始化 dp[i][0] 和dp[j][0] 表示一个字符串和一个空串要多少操作才能相等 例如 2-1 表示下标为1的字符串要操作两步 就是dp[i][0] = i</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> word1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> word2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> i    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> word1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> word2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>word1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> word2<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 如果i-1和j-1位置的两个数相同 name此时的操作和前一步的操作key相同 就是不需要再增删该了</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>          <span class="token comment">// 如果不相同就需要增删改了</span>          <span class="token comment">// 其中正价和删除的操作数都是相等的 可以简化为都是删除</span>          <span class="token comment">// 删除 </span>          <span class="token comment">// 这两个数不相同 可以删除掉i-1 也可以删除掉j-1 删除掉i-1 就是dp[i-1][j]+1 删除掉j-1就是dp[i][j-1]+1</span>          <span class="token comment">// 修改</span>          <span class="token comment">// 如果两个数字不相同 修改其中的一个数字 就是相当于以i-2,j-2位结尾的数字的操作值增加一步操作就可以了 dp[i-1][j-1]+1</span>          <span class="token comment">// 这几种情况中取最小值</span>          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>word1<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>word2<span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token comment">// 最后返回以各自最后一个元素结尾的操作数</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h1 id="扩展延伸"><a href="#扩展延伸" class="headerlink" title="扩展延伸"></a>扩展延伸</h1><p><img src="/images/72kuozhanyanshen.png" alt="扩展延伸"></p>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>背包问题总结</title>
      <link href="/2022/08/15/bei-bao-wen-ti-zong-jie/"/>
      <url>/2022/08/15/bei-bao-wen-ti-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>背包问题总结</p><span id="more"></span><h1 id="01-背包"><a href="#01-背包" class="headerlink" title="01 背包"></a>01 背包</h1><h2 id="01-背包的概念"><a href="#01-背包的概念" class="headerlink" title="01 背包的概念"></a>01 背包的概念</h2><p>0-1 背包问题指的是有 n 个物品和容量为 j 的背包，weight 数组中记录了 n 个物品的重量，位置 i 的物品重量是 weight[i]，value 数组中记录了 n 个物品的价值，位置 i 的物品价值是 vales[i]，每个物品只能放一次到背包中，问将那些物品装入背包，使背包的价值最大。</p><h2 id="简化公式"><a href="#简化公式" class="headerlink" title="简化公式"></a>简化公式</h2><p><img src="/images/1662722385610.png" alt="1662722385610"></p><h3 id="具体情况"><a href="#具体情况" class="headerlink" title="具体情况"></a>具体情况</h3><h4 id="所有元素一个只能用一次"><a href="#所有元素一个只能用一次" class="headerlink" title="所有元素一个只能用一次"></a>所有元素一个只能用一次</h4><ol><li><p>外层遍历物品 内层遍历背包 外层正向遍历 内层逆向遍历</p></li><li><p>倒序遍历的原因是为了保证物品只方进入一次 如果正序遍历,那么物品会放入多次</p><p><img src="/images/1662722427511.png" alt="1662722427511"></p></li></ol><p><img src="/images/1662722434675.png" alt="1662722434675"></p><p>3.统计价值的话:是公式是</p><p><img src="/images/1662722481438.png" alt="1662722481438"></p><p>4.只能是外边遍历物品 里面遍历背包 倒叙遍历</p><p>如果外层是遍历背包 里面遍历物品 那么每个背包容量只会放入一个物品</p><h3 id="求组合个数"><a href="#求组合个数" class="headerlink" title="求组合个数"></a>求组合个数</h3><h4 id="递推公式"><a href="#递推公式" class="headerlink" title="递推公式"></a>递推公式</h4><p><img src="/images/1662722509257.png" alt="1662722509257"></p><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>dp[0]要初始化为 1 装满容量为 0 的背包 要 1 中方法</p><h4 id="遍历顺序"><a href="#遍历顺序" class="headerlink" title="遍历顺序"></a>遍历顺序</h4><p>外层遍历物品,内存遍历背包 内层倒序遍历</p><p>例题：<a href="onenote:#494.%20目标和&amp;section-id={AE715DAD-B069-4885-A89B-1727F809BE27}&amp;page-id={2D399E2F-126C-4F04-997B-F42B516FAD67}&amp;end&amp;base-path=https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/代码随想录练习题/动态规划.one">494. 目标和</a></p><h4 id="求能够组成组合的元素个数-例题-474-一和零"><a href="#求能够组成组合的元素个数-例题-474-一和零" class="headerlink" title="求能够组成组合的元素个数,例题:474. 一和零"></a>求能够组成组合的元素个数,例题:<a href="onenote:#474.%20一和零&amp;section-id={AE715DAD-B069-4885-A89B-1727F809BE27}&amp;page-id={A1A9DC68-8129-4355-8877-6672A382A693}&amp;end&amp;base-path=https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/代码随想录练习题/动态规划.one">474. 一和零</a></h4><ol><li>递推公式</li></ol><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAkIAAAAkCAIAAADq98I5AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAvhSURBVHhe7Zx/SFvXHsDPe6yjtIk4Y1v7VqLWkvLasmZiRawtk75WV7pAcIgNIvUN/WP4Y8LAVcqQUbSFFesP9ofSWUScyETIE6cbpaWtUlywOtYNg61p6NtrrbFi0lG6f945957k/ky8+XFjrv1+uJB77s29yT3ne873x/ne87eMrAMIAAAAALTJ3+knAAAAAGgQUGMAAACAhgE1BgAAAGgYUGMAAACAhgE1BgAAAGgYUGMAAACAhgE1BgAAAGgYUGMAAACAhonR68+ll3+qNXvGispa6YFQ5Fdcq87Zzu57HZ21fZPsPqVh8E5xBvI5OktqhughhlOXrp/JoPuLo+fa+uk+S+izhKb+CUs68s50n6wfpocQKv+q44yR7rsm6r74ju5rE1NjZ43pYdcnV530gABSsQbh44cgZM2UdP1QnaNDLkmLH/3sYq05id1/OSv+J+vXNiNIeuS2H6tqoYfWuWf02NqH67JX+L8YigilF5BHDYF5o1lHPuMKbr7Cldh3WCkb5Y2t3e+uKztXVxZGLf/4Bf4+3iYW6QEJWNDJF+R0WDD6v2QvGXXRAxqm/Kua95Hj2xgKjXuUqZwwtPvk1QvMJV33vfSIGDXuGW8ikF6tg9XzxL07w12ltMweGTxPCxGjhsBoAmxV37sz8VN7CS2zR/obaCFipvo+Yaqrc3aNHlGfig+Mc/WmOes2WvbTP+5A5pprn5loWTUSMKjYVnasKO9Y7I3ZlnJ82yKFvojmwFbtGePiaJwG1uGaD0llKnK+w2Ko8SRpfe1a1mpJbyLg9aH9R7lhNyHQtMD4fMiUa6MFbbIr+W69qRqtPaJlIVinTixuN1c05tMDKgFzY5uC/Ip/m5NcE2G4oQAQNs4FT3ZxEy0A0bMw7zFbovZoN45tI2VJvw86C269pgekfNc26k56/2zFUVpWhbfoZyTQCZIAHvaDRKv3zXcOoEr/2cfjeeVtzF5o2HkFlhgFu2nonEM6nRMnDu2cO4FGbiDriWSEVkfafYfr9+xFr6YH3VXP2G9s6anMzKXTBMg7t1hw6y+yRy5MRmtLV3pX+5hTzVaT1Yge3XBaf2XK2BXLNW33Or6Vi7qwM4IB/JEb0nb7nd29yFaXzTaSwgrnN3rMZoBEfxL5Zjs+bBygBXUQC8YK/Uwo6Q0F/+coAtnmP6CgPsmFaKzInjYs1/SCTi3pLNO/PK5+Dw+7oh50vufe6RROGJifZmbKWTEbnzcV43t6Z/zyprRKg7IBAkOe0T9Nx/+5dQWGf6HkwaceuOsONmAnnpZZuApky6TJ2FltMo9rWrA791lwNeK/0YsqYzk1aDvy/Wmd45ubl6bogXX409ruprvB6R93FFbnfHS2b1I8QLEJDfKpDGERsTeGa7Y6xzOeRzz6orzOWWFkW5dTS0ZJeiq9mB8CDg4bkCnqmPHRA9FDYw6yfzL+JFuPvL7S/uQR2vqvytTlwcXpta25+TSg3Gzdjcach9uZ7caq/nDmyCHmxK9LuIiSdlZ/sIUUD+0U6TCETAVZSejFU0k4EQ8iExbDbAetgXHR/J8+uxp3CeZst8NntPxwWUF8g4YT88bWF1/lsPFedrM/pgdVBI8szDDB/qJE3hJGekNBf47ZcPMRJcGpHPKAeGylX7B7zHXCxs04PSFoejolI+zUY278NdGzt9hnDceVyAmHPrs49TapFr3JVmm4SyQnvYA3xxYJcRYYrDwYPc3+YrcDmevu9PC8UiIw+BnZSkPpxYEpQ+ZCZKd/tdthKBbPfrWOOwxh1obObMHViCVTt6+yMuUm6dfGQkUiukFM3XN60Y5dKs6QRajGbO0FGdgECG5ScQmBQ403HyO91kPAfM5dtHzfL956P+f7fMF49DPrUW3Vry77nTBK80jALcOqy/cIoR2pjN4ixaUrc6/0h3f37No2ciIZO2o8HYbJeEePXL//SEsBzmMT2OfoDW6lckblcM1tN9Lty49ucNEIJV3HjdguDuGUa0t6be22HDTby036kgf0zgwEHGWse/CQJ2hc7Bb4m/4PD0KGNPyA4k7dWoU1hPjZh6bnUZhy4pu1s1WtQ/P2oCNGAtOAXR9efQ7X9GKD2Ei8Uj+c29r6GzYWDWmsUiEXusYCfhLTy9IPCKOyw1POcGccfQ5ajTrkHFfZ6Y8Jzv++QNuz8iRxRTZrLwZTIRGqsQyDDj3+LUQNep5ymRQujw/pUkQBEA1z/YL943LxVvm1Alfv1fJzuud9wQQM+TCTpSThh2x79tKjlL5b7hH31tyyPXvXlrrZYGOA/LQddE+ALS0F+RamQgT9PE85DfdwxYt0qVm0tKkxpuqQ60Go8TS+0ms7IjCJLu6mx5VRerkyGwmNFfKA2NW+R3ILmY3EnQSN6/VwzjTxbBiVJu3ULQ+wcSN6djLs5ljCSajjxGzlj1iEoKNCZIN+rcA+KU0zIN/8JCcSRJf7AroqOORC4vhyDUGiiyn/EBoBA5MLKLwZR64a+YIaOVydnMayp8/5NIzKSQzileLhW9kEGe0qgnVY2U69+wkNKpLAo4gt7yYzn0lvizQcmnrqV45R4lt+SPcAAepK78DPApPowv/ocSWUdFWaEc/xCoAdSjbmFthCeJ9hMVB/1yV2KbSDyAb9nKf91QE7asKGkEwnE49f4NvFG65OxrDseR3fqFI5MrMeMSMKNcYEIihZKSFCasTK4xv+WieKoGJQdrytR6+mp/6kRQnN1szcpNWR9sXptWSr+P0M1wsvyvjnKVriwzelGdswKKQFE8BYjhd8U5rIZ3ASWXqb+slUluQdEveyD+kN/rQCxRC/U6ifmg4a5VR42y8bO+zGmaGnHqQTxP1Kc/cToVjPEyIXKnDaGK83gyR6bFZM776DXqppCkaoxphogz9VlJ+KI8HWPmxJDwRzNwWRBxWD8/y1F21NpcHBbSOioCJN61hqRn9VjS15jXvusukeFOfdh2vIeLCcFikDkwvewNwvP29NCj572uid0UScXUJ+xbXrHYPXG0SPHxw8CpO8A3a8Fue8CUlo6T3fY0mXnZ9m52AUZqZwsALjT/dg749ct2XmVkmix0He6j/8iHRoSdMkrMDY/IkYxAPWByb8QtFmn/Hps6vXf0mcJHoceI8WRPpPJiVVY+TnmfTo+TPpsgynLpGeezH6t8oi9cZaqzpmfDTse3ylQ5IFF4gIM8v8KEvLxh2AXoKtY6OF2Q+3K2qVZ6vdc6/2nqATY+gG9rroGfKG/Ilk5H5C0zqYb+oPZ/I12eS08yXKLBS9LT/UeHLMTedIalNuMvlsAtKL2TZi0/aUvRiOOxVzCTFcdDm1zH70Sw9EA42pSh4/OC3lTHoe8yCFnm5p1qUWpLdhkDQB/SG6BRqitQo/lGB6TEkaKknrHXcFpILJzZMPRQ5NzxuM3Ng61NgbGA2IpIlHA63TUl7UMYOotLPJnMry+wfqS7hxkt3kO8vwlDMlgzOn2sq45itY7pT0XLUg8W3F2faEZitvLt+4h9k39uxiT1LKi3O2ex3/kXkdiISREEoy5UabxBijNRX5MOZYqPUVyapfJmf3hcthVBePsw2DRUh2TUUUelFE8sf2zcu/6qTg8sSGWZvOo/gNDOb1INwbg+eakuXs0GjZl5IESEXIr+6o5J7EPUKyfyzoipHsunyxWRJTbekF5FFDYN5oSKfIcm7smooEMlwb7gfrL+RsZvQLpcYrxWODaOrnVoFrspj1oTP3tMzk1b773swzYcTWEgasOQImaunlwvR10gglnPrInITkzT1gMxKtwADxAtt8REv1BbH5TI35mQgt3ox6GdiN8sYiWIM59Br2wc7yIstyr/oTc88/rxcbc34jCb3CPR9l3lj4NRPZguVkbQK6ooTMMish7klv6I7Ya5SglvQC8qghMG80iSSfuPmCrXBPWzZG/1AFNQYAAAAA8WKTBxUBAACAzQ2oMQAAAEDDgBoDAAAANAyoMQAAAEDDgBoDAAAANAyoMQAAAEDDgBoDAAAANAyoMQAAAEDDgBoDAAAANAyoMQAAAEDDgBoDAAAANAtC/wewucjWu0TmKQAAAABJRU5ErkJggg==" alt="img"></p><p>ii. 初始化</p><p>要求的是元素的个数 直接初始化为 0 就行了</p><p>iii. 遍历顺序</p><p>外层物品 内层背包 倒序 每个只用了一次</p><h1 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p><img src="/images/1662722624580.png" alt="1662722624580"></p><p>01 背包是从大到小遍历 因为只能用一次 外层遍历物品 内层遍历背包 不能颠倒</p><p>完全背包是从小打到遍历 因为可以用多次 外层遍历物品 内层遍历背包 可以颠倒 无所谓</p><p><img src="/images/1662722649983.png" alt="1662722649983"></p><p><img src="/images/1662722662747.png" alt="1662722662747"></p><ol><li><p>求组合数 多少种方式 相当于组合个数 求组合个数</p></li><li><ol><li>公式</li></ol></li></ol><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQEAAAAoCAIAAABxWtjgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAYoSURBVHhe7ZxLaBtHGIDHpUdrcdxAMMi1e4iCVRDEzilVMLEurUpOpUT4EB8sYsghJZXjUwMG9+RYNfgQcLCg9sGolJwMSi9yCNnmFDsgiATqIVItEAVjm43v7uzsvy89VrvS6mHP/zHg3Znd9Tz2n/kfs+q7do2o3F/d+Ylsff3oTzjvKhvB+KwXjnNizF+CY+Tp1qvICBwT8m9ycuYxHDeGDvGT8X44Iad/P7sT+QNOGnJhR8QoAwjCI5/BXwThFZQBhHdQBhDeQRlAeAdlAOEdlAGEd1AGEN5xFB+I+RdXAmQ3tRiSIKcBd3/78OC6ACdE2n9WOwAnTB+HJwbIJ/OTF3Zff3cVjgkpvhy+twzHvYUvHZ6bInvzqe045DTCXrew3vYQycmT3QBiYaVUn5iGLJdoGN2zaLL1va3E/jqxDtAxHp68TZPDCPTyFLtrePLlP5BzoWi2W8479PVVhtVBeJvy+J5y1+1kEXKMPH90Ryld2j+FLPv0hC4kbV9KxvqStpcXPohnF/tot3R2EaBERToWMdcXATt0p8loDyC88zn8rQuoaDqf4C9T4stiLCFoF1Qo9JaADWCkmEiuReHYHWQl8ov3S9///Bwy3ILZAJpGT9Fa7X14Fhyk/fAxoO0wc9Cuqt5uQi831e0ks34pm4cTmVA2Eh6D44pSyxvtDLdpTJ28DOYNee0wRaywXAdop8RXRvPzsqIip/mMKgAqY0H9gkTJMxVeTBvfDAtA/4GUOEebEOlIR+bGC+tq5dd3K0ea9kN8lqTU0pHZyMMNKGoAKAOQUjnItg2rm2ygqw95MTitjwiVz0h4KKPWXCwOBObOgiEoJflQiuWn9k4gp5Kq4Ta0iz48PEG0hyffDAWnY1DWGFDAmmhy61jIQMw/PSV82hUtlTODCR8VaQM8414fO+td7q/uHLx+VSNtLcAVVvjSwYkBae9X0+RahT6T5UMifaVGbmqTXDvZCNBpuJgw6NNRUZuMfenACK2YPruX1uRJzXvL7rRFMQ53gRqnertiwiCd+/dLWrek/R23ZJrEQgbGBj1Eyqcsl7OTwjtDOw/KEhkYHIazXkXzIVQmW77X4SGhotU1yBUMS7n0X5mQIaEDU0OIvpEnmb9q613CjXHBXDG67JTyJ8RDW2QTi4bHpSO2ANpWBHqH+jLg+6q5xghX7K+AbWFhU5vaZY9y//Un6umH1R/hmqYRrgzBkTNcmxoMrWNpJ3kXShrUTbhstr503JHP0hpTomQ98CxC0/kRBlf9QvIcSae9Lq+AyzPa1C77kk/fL6mniie+NV3IOezVPDk6gNMWMbSOJdvBIOmwhpbPBKMsWep19tFsPFUYsh3RAFulvgzkP1ItSLis+RDoUjtb4bKogA12xWrbg7SkCzHFxjSpe781OYiqkd8zo6LcNqR3+1QXHb1Rex1mNR8b1SxgGabEF9+67pCgwsAM645ogC1jsQ5EM7Ix94NfaYbsUyOlWjE6IJQNy8biefLwNEM6YbQjZU8oyVk0WZg+DlJL9E1Hwn/5UKZIhIkV3dVDNoKaTqLUPHwMAypXfiXgqWs/OGQjaJr1Y15fhyS/dax0ISrNivtMVu9ulVMxfwFKNNRSmpjT7by4Alognl1kbkHW6sDhfHLtLZTojAWVPomfMZ9657zdVClPpnLesDoo8ZsF3UlPaw7+UKVUjmPEdDeR7FeFOlMFSbvMpj4TFdfLAfinNK0EjhIOAv90hlVuZLELtf66uLaV5r+pZwERUhmCMcM2h5F6W+UMsBBJvVgS2zzXu3vmzMgrw0iDn12w2y0sntXhgFE7YfvenP0QRjXWD2Gb54ijPXNXXbWJm4b5oKTDLsRHehl3jWmkJv2b33RLBgx6qhKMI7nMxdejGkFtKi22yoJxpPjCOhiHtMjpzO8dkAFh/IHifDS656PiNlGVZvZNQrXyQFUgxWtp+IrgAlGrW9J+kfwCmrGy5cHlDVQ9wJcRGNbNp5BjC6oCKd1l+IpAR/N3G74isA3+xhbCO71hDyBI90AZQHgHZQDhHZQBhHdQBhDeQRlAeAdlAOEdlAGEd1AGEN5BGUB4B2UA4R2UAYR3UAYQviHkfxaLT6y2XZSoAAAAAElFTkSuQmCC" alt="img"></p><p>2.可以用多次 所以是完全背包 可以从前到后遍历</p><p>3.求的是组合格式 也就是没有顺序要求 外层遍历物品 内层遍历背包 这样的话 1,5 和 5,1 是相同的</p><p><img src="/images/1662722711846.png" alt="1662722711846"></p>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态规划总结-子序列问题</title>
      <link href="/2022/08/09/dong-tai-gui-hua-zong-jie-zi-xu-lie-wen-ti/"/>
      <url>/2022/08/09/dong-tai-gui-hua-zong-jie-zi-xu-lie-wen-ti/</url>
      
        <content type="html"><![CDATA[<p>子序列问题总结</p><span id="more"></span><h4 id="300-最长递增子序列"><a href="#300-最长递增子序列" class="headerlink" title="300. 最长递增子序列"></a><a href="https://leetcode.cn/problems/longest-increasing-subsequence/">300. 最长递增子序列</a></h4><p><img src="/images/image_1.84870578.png"></p><blockquote><p>思路:<br>首先要确定dp的含义:代表以i为结尾的最长递增子序列的长度<br>那么这个的长度,可以由前面的递增子序列的长度推出来,所以说可以是两重循环可以判断</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">300.</span> 最长递增子序列<span class="token literal-property property">思路</span><span class="token operator">:</span><span class="token literal-property property">首先要确定dp的含义</span><span class="token operator">:</span>代表以i为结尾的最长递增子序列的长度那么这个的长度<span class="token punctuation">,</span>可以由前面的递增子序列的长度推出来<span class="token punctuation">,</span>所以说可以是两重循环可以判断 <span class="token comment">/** * @param {number[]} nums * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">lengthOfLIS</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// nums是一个数组</span>  <span class="token comment">// dp[i]表示以nums[i]结尾的最长递增子序列的长度</span>  <span class="token comment">// di[i]就是 j 从0~i-1 如果这个nums[i]&gt;nums[j]  dp[j]+1就是dp[i] 从0~j-1遍历取最大的一个</span>  <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 初始值都是1 每个都可以是以自己为结尾</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment">// 初始化 dp[0] 就是代表以nums[0]结尾的最长递增子序列的长度 就是1</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 这里是只有当这个数字大于前面数字才可能成立</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">&gt;</span>result<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个dp[i]大于结果 那么结果就是这个dp[i]</span>      result <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="674-最长连续递增序列"><a href="#674-最长连续递增序列" class="headerlink" title="674. 最长连续递增序列"></a><a href="https://leetcode.cn/problems/longest-continuous-increasing-subsequence/">674. 最长连续递增序列</a></h4><p><img src="/images/image_2.460eb19e.png"></p><blockquote><p>思路1:动态规划<br>dp[i]代表以i为结尾的最长连续递增子序列的长度</p><ul><li>全部的dp数组都初始化为1</li><li>判断当前的这一个的后一个是不是大于当前的,如果是的话dp[i+1] = dp[i]+1</li><li>如果不是的加就什么都不做,因为已经初始化为1了</li><li>然后不断更新最大值</li></ul></blockquote><blockquote><p>/**<br>&nbsp;*&nbsp;@param&nbsp;{number[]}&nbsp;nums<br>&nbsp;*&nbsp;@return&nbsp;{number}<br>&nbsp;*/<br>&nbsp;var&nbsp;findLengthOfLCIS&nbsp;=&nbsp;function(nums)&nbsp;{<br>&nbsp;&nbsp;//&nbsp;最长连续子序列&nbsp;从l到r就是他的长度<br>&nbsp;&nbsp;//&nbsp;dp[i]表示以i为结尾的最长连续子序列的长度<br>&nbsp;&nbsp;//&nbsp;dp[i]&nbsp;当nums[i+1]&gt;nums[i]&nbsp;dp[i+1]&nbsp;=&nbsp;dp[i]+1&nbsp;当后面一个大于当前值的时候&nbsp;dp[i+1]就是当前值的dp[i]+1&nbsp;长度+1<br>&nbsp;&nbsp;//&nbsp;初始化就是都是1&nbsp;因为每个元素的最长递增子序列的长度最小都是1<br>&nbsp;&nbsp;if(nums.length&nbsp;===&nbsp;0)&nbsp;return&nbsp;0<br>&nbsp;&nbsp;let&nbsp;dp&nbsp;=&nbsp;new&nbsp;Array(nums.length).fill(1)<br>&nbsp;&nbsp;let&nbsp;result&nbsp;=&nbsp;1<br>&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;0;i&nbsp;&lt;&nbsp;nums.length-1;i++){&nbsp;//&nbsp;i从第一个遍历到倒数第二个<br>&nbsp;&nbsp;&nbsp;&nbsp;if(nums[i+1]&nbsp;&gt;&nbsp;nums[i]){&nbsp;//&nbsp;那么i+1就是从第2个遍历到倒数第一个<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i+1]&nbsp;=&nbsp;dp[i]+1&nbsp;//&nbsp;如果后面第一个值大于当前值&nbsp;那么以后面的值为结尾的最长递增子序列的长度&nbsp;就是&nbsp;以当前值为结尾的最长递增子序列的长度+1<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;if(dp[i+1]&nbsp;&gt;&nbsp;result)&nbsp;result&nbsp;=&nbsp;dp[i+1]&nbsp;//&nbsp;如果这个的长度大于result&nbsp;就对result重新赋值<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;return&nbsp;result<br>};</p></blockquote><blockquote><p>思路2: 贪心算法<br>从前向后遍历,有一个count变量记录这个最大的连续递增子序列的长度</p><ul><li>判断当前的是不是大于前面的,如果是的话count++,如果不是的话,就重置count=1,然后进行循环判断</li><li>循环的过程中不断的去更新这个最大值</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">findLengthOfLCIS</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 贪心算法来写</span>   <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 定义结果都是1</span>   <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 定义数量初始值是1</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从前向后遍历 如果后面的大于当前的 就让count+1</span>           count<span class="token operator">++</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 如果后面的小于等于前面的就重新取值 取值1</span>           count <span class="token operator">=</span> <span class="token number">1</span>       <span class="token punctuation">}</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>count <span class="token operator">&gt;</span> result<span class="token punctuation">)</span> result <span class="token operator">=</span> count <span class="token comment">// 判断这个值和最大值的比较更新最大值</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> result <span class="token comment">// 返回结果</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="718-最长重复子数组"><a href="#718-最长重复子数组" class="headerlink" title="718. 最长重复子数组"></a><a href="https://leetcode.cn/problems/maximum-length-of-repeated-subarray/">718. 最长重复子数组</a></h4><p><img src="/images/image_3.8a013737.png"></p><blockquote><p>这就进入了对比字符串的阶段了,对比子数组相当于对比两个字符串<br>需要一个二维数组dp,dp[i][j]表示i-1,j-1的位置的最长相等字符串是多少<br>需要两层for循环来遍历</p><ul><li>外层for循环,遍历第一个字符</li><li>内层for循环,遍历第二个字符<ul><li>如果这两个字符相同,那么这个的长度就是前面一个的长度+1</li><li>如果不相同,那么这个长度就应该是0,因为初始化的时候是0 所以就不用操作</li><li>在循环的过程中更新最大长度</li></ul></li></ul></blockquote><blockquote><ul><li>最终返回这个最大长度</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums1 * @param {number[]} nums2 * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">findLength</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums1<span class="token punctuation">,</span> nums2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// dp[i][j] ：以下标i - 1为结尾的A，和以下标j - 1为结尾的B，最长重复子数组长度为dp[i][j]。 （特别注意： “以下标i - 1为结尾的A” 标明一定是 以A[i-1]为结尾的字符串 ）</span>   <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>nums1<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>nums2<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 这样i和j代表的范围就是0~nums.length-1 0~nums2.length-1</span>   <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">0</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> nums1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从1开始遍历 // 这一这是以i-1位结尾的是dp[i]所以这里取得是&lt;=</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> nums2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从1开始遍历</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> nums2<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果第一个数组的前一个数字 和 第二个数组的前一个数字相同 那么这个以i-1,j-1为结尾的最长的重复的子串就是 以i-2和j-2为结尾的长度+1</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>            <span class="token punctuation">}</span>           <span class="token comment">// 如果这个更新后的值大于result 那就更新result</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;</span> result<span class="token punctuation">)</span> result <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums1 * @param {number[]} nums2 * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">findLength</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums1<span class="token punctuation">,</span> nums2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>nums2<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// dp[i] 表示以nums2[i-1]为结尾的和nums1的最长子数组的长度</span>       <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">0</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> nums1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// nums1从第一个一直到最后一个</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> nums2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// nums2 从最后一个到第一个 是为了保留这个顺序 让最后的一个个区匹配前面的 </span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>nums2<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> nums1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                               dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>                       <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                               dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 如果不相等的话 要给这个赋值为0 重新初始化 下一次才不会弄错 因为遍历nums1的时候是以i为结尾的</span>                       <span class="token punctuation">}</span>                       result <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>result<span class="token punctuation">)</span>               <span class="token punctuation">}</span>               console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1143-最长公共子序列"><a href="#1143-最长公共子序列" class="headerlink" title="1143. 最长公共子序列"></a><a href="https://leetcode.cn/problems/longest-common-subsequence/">1143. 最长公共子序列</a></h4><p><img src="/images/image_4.81cf0fa0.png"></p><blockquote><p>思路<br>这个和上一题的不同点在于,这个最长公共子序列是指,可以删除中间的元素,上一题的最长公共的数组是必须完全相同,所以上一个不相同的话就直接赋值0<br>这个可以删除,所以需要变化<br>主要的思路还是一样的,两层for循环,然后不断的对比位置的字符是否相同</p><ul><li>相同的话: 这个的最长的子数组就是 前一个的+1</li><li>不同的话: 这个最长的子数组就是i-1,j与I,j-1他们最长的公共子数组的最大值</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} text1 * @param {string} text2 * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">longestCommonSubsequence</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">text1<span class="token punctuation">,</span> text2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 首先将这两个字符串分割成数组</span><span class="token comment">//   let str1 = text1.split('')</span><span class="token comment">//   let str2 = text2.split('')</span><span class="token comment">//   let str1Len = str1.length</span><span class="token comment">//   let str2Len = str2.length</span><span class="token comment">//   console.log(str1Len,str2Len);</span>   <span class="token comment">// 设dp[i][j] 表示以i-1,j-1为结尾的最长公共子序列的长度</span>   <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>text1<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>text2<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 初始化都是0</span>   <span class="token comment">// let result = 0</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> text1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">// 从第一个遍历到最后一个</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> text2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token comment">// 从第二个遍历到最后一个</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>text1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> text2<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个前一个和这个的后一个的字符时相等的 name以i-1,j-1位结尾的字符串的最长子序列的长度 就是以 i-2,j-2位结尾的最长子序列的长度+1</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>           <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>               <span class="token comment">// 如果这两个不相同的话 那就是以这两个的较大的那一个</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 以i-2,j-2为结尾的最大长度 和以i-2,j-1为结尾的最大长度 和以 i-1,j-2位结尾的最大长度 后面两种包含了第一种 因为是双层遍历所以 会产生这种值 </span>           <span class="token punctuation">}</span>           <span class="token comment">// if(dp[i][j] &gt; result) result = dp[i][j]</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> dp<span class="token punctuation">[</span>text1<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>text2<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1035-不相交的线"><a href="#1035-不相交的线" class="headerlink" title="1035. 不相交的线"></a><a href="https://leetcode.cn/problems/uncrossed-lines/">1035. 不相交的线</a></h4><p><img src="/images/image_5.953872ed.png"></p><blockquote><p>思路和前面一题相同,这里不再赘述</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums1 * @param {number[]} nums2 * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">maxUncrossedLines</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums1<span class="token punctuation">,</span> nums2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 道理和1143题目相同</span>   <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>nums1<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>nums2<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> nums1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> nums2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>nums1<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> nums2<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>           <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>           <span class="token punctuation">}</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>nums1<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>nums2<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="53-最大子数组和"><a href="#53-最大子数组和" class="headerlink" title="53. 最大子数组和"></a><a href="https://leetcode.cn/problems/maximum-subarray/">53. 最大子数组和</a></h4><p><img src="/images/image_6.084dd18e.png"></p><blockquote><p>思路:动态规划<br>dp[i]表示以i为结尾的子数组的最大和<br>从前向后遍历</p><ul><li>前面的一个的最大和+当前的元素,和当前的元素取最大值</li><li>然后不断的更新这个最大和</li></ul></blockquote><blockquote><p>最后返回这个最大和</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">maxSubArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token comment">// 如果没有元素就返回0</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// dp就表示前i个数字的和</span>       <span class="token keyword">let</span> result <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 让结果先是第一个数字</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token comment">// 从第二个数字开始判断</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 这个dp就是前一个dp的值加上当前的值 和当前的值单独比较的最大的 如果加载一起还没一个大 那就去这一个</span>               result <span class="token operator">=</span> result <span class="token operator">&gt;</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">?</span> result <span class="token operator">:</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="392-判断子序列"><a href="#392-判断子序列" class="headerlink" title="392. 判断子序列"></a><a href="https://leetcode.cn/problems/is-subsequence/">392. 判断子序列</a></h4><p><img src="/images/image_7.4ab5cfcd.png"></p><blockquote><p>思路:判断这两个的公共子序列的长度是不是等于s的长度就行了<br>主要的思路就是判断公共子序列的长度</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} s * @param {string} t * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">isSubsequence</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> t<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> t<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果两个相应位置的数字相等 那就需要将前一位的公共子序列长度+1</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span>                       <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 如果一个相同一个不相同 那就s不变的位置 和 t的前一位的数字匹配 的最长子序列的长度</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>s<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>t<span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token operator">===</span> s<span class="token punctuation">.</span>length<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="115-不同的子序列"><a href="#115-不同的子序列" class="headerlink" title="115. 不同的子序列"></a><a href="https://leetcode.cn/problems/distinct-subsequences/">115. 不同的子序列</a></h4><p><img src="/images/image_8.c1fec22a.png"></p><blockquote><p>==dp[i][j]==：以i-1为结尾的s子序列中出现以j-1为结尾的t的个数为==dp[i][j]==。</p></blockquote><blockquote><p>两个字符串比较 就是生成一个二维的数组<br>这个是寻找s中t出现的次数,所以,当这个t是个空串的时候,这个s中t出现的次数都是1次<br>然后两重for循环</p><ul><li>如果两个字符是相同的,那么这个就应该是两个都向前一步的个数+s单独向前一步的个数,因为,不用这个也是可能匹配的</li><li>如果两个字符不是相等的,那么这个就应该是s单独向前一步匹配t</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} s * @param {string} t * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">numDistinct</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> t</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// dp[i][j] 表示以i-1为结尾的字符串其中包含以j-1位结尾的字符串的出现的个数</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">// 初始化 dp[0][0] 就是两个都是空字符串 name相等的就是1  dp[i][0] 就是代表i是字符串 删掉几个里面空字符串子集的个数 就是1 dp[0][j] 表示一个空字符串其中删掉元素能有有元素的子集 就是0</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token comment">// 从头到尾遍历s的长度 就是i 让dp[i][0] = 1</span>           dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> t<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> t<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                   <span class="token comment">// 如果i-1位置的字母 和 j-1位置的字母相同 那么以i-1位结尾的字符串中以j-1位结尾的字符串出现的次数就是 以i-2位结尾的字符串中以j-2位结尾的字符串出现的次数 和 以i-2位结尾的字符串中以j-1位结尾的字符串出现的次数</span>                   dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                   dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token comment">// 如果两个数字字母不相等的话 那么以i-1位结尾的字符串中以j-1位结尾的字符串出现的次数就是 以i-2位结尾的字符串中以j-1位结尾的字符串出现的次数</span>               <span class="token punctuation">}</span>           <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>s<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">[</span>t<span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token comment">// 最后返回以s最后一个字符为结尾的字符串中以t的最后一个字符串出现的次数</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>页面的防抖节流，优化轮播图、搜索框 减少用户频繁操作导致的重复请求</title>
      <link href="/2022/08/09/ye-mian-de-fang-dou-jie-liu-you-hua-lun-bo-tu-sou-suo-kuang-jian-shao-yong-hu-pin-fan-cao-zuo-dao-zhi-de-chong-fu-qing-qiu/"/>
      <url>/2022/08/09/ye-mian-de-fang-dou-jie-liu-you-hua-lun-bo-tu-sou-suo-kuang-jian-shao-yong-hu-pin-fan-cao-zuo-dao-zhi-de-chong-fu-qing-qiu/</url>
      
        <content type="html"><![CDATA[<p>在真实的页面的操作过程中,一般需要点击发送请求,滚动页面发送请求,或者是输入发送请求,在这些操作的过程中,一般是会连续的触发事件,如果不对这些时间加以限制,那么就会触发很多次的请求,浪费浏览器的性能,甚至导致服务端的过载.现在针对这样的问题,一般采用的有两种方法,一个是防抖,一个是节流</p><span id="more"></span><h3 id="节流和防抖的原因"><a href="#节流和防抖的原因" class="headerlink" title="节流和防抖的原因"></a>节流和防抖的原因</h3><p>在真实的页面的操作过程中,一般需要点击发送请求,滚动页面发送请求,或者是输入发送请求,在这些操作的过程中,一般是会连续的触发事件,如果不对这些时间加以限制,那么就会触发很多次的请求,浪费浏览器的性能,甚至导致服务端的过载.现在针对这样的问题,一般采用的有两种方法,一个是防抖,一个是节流</p><h4 id="防抖和节流的含义和区别"><a href="#防抖和节流的含义和区别" class="headerlink" title="防抖和节流的含义和区别"></a>防抖和节流的含义和区别</h4><p>函数防抖：原理就是维护一个计时器，规定时间后触发函数，但是在规定时间内再次触发的话，就会取消之前的定时器重新设置，这样只有最后一次操作才会被触发。</p><p>在一定时间内只触发一次函数，原理是通过判断是否到达一定时间来触发函数</p><p>简单来说,类比于游戏:</p><p>防抖就是:想要回城,会开启一个倒计时,如果在倒计时的时候被打断了,那么就重新开启倒计时</p><p>节流就是:发射技能,发射技能之后又一个冷却期,要在冷却器之后才能再次发送技能</p><h5 id="节流函数的书写"><a href="#节流函数的书写" class="headerlink" title="节流函数的书写"></a>节流函数的书写</h5><p><img src="/images/image_1.8e23c838.png"></p><p>准备一个计时器,记录上次的时间,返回一个函数,首先记录这个函数的this和参数,然后计算当前时间,判断当前时间是不是唱过了规定的间隔,如果超过了就触发这个事件同时将上次的时间修改为当前的时间,一边下次继续判断,如果没有超过,就什么都不做</p><h5 id="防抖函数的书写"><a href="#防抖函数的书写" class="headerlink" title="防抖函数的书写"></a>防抖函数的书写</h5><p><img src="/images/image_2.77a97b5e.png"></p><p>同样是准备一个计时器,返回一个函数,记录这个this和args,首先判断计时器是否存在,如果存在就清除计时器,然后重新开启计时器,如果不存在就直接开启计时器,这样做就能保证这个计时器会在如果已经存在的情况下,如果重新触发,就重新开启</p><h5 id="有底线的防抖函数"><a href="#有底线的防抖函数" class="headerlink" title="有底线的防抖函数"></a>有底线的防抖函数</h5><p>主要是借助节流的思想,判断这个时间是不是超过了规定的时间,如果超过了就直接执行,并修改上次的时间,如果没超过,就走正常的这个防抖的套路</p><p><img src="/images/image_3.d71302d7.png"></p><h5 id="vue中提供的lodash库"><a href="#vue中提供的lodash库" class="headerlink" title="vue中提供的lodash库"></a>vue中提供的lodash库</h5><p>lodash库中有已经定义好了的防抖和节流函数,可以通过.的方法获取,有两个参数,一个是回调函数一个是延迟时间</p><h4 id="项目中的防抖和节流"><a href="#项目中的防抖和节流" class="headerlink" title="项目中的防抖和节流"></a>项目中的防抖和节流</h4><h5 id="优化轮播图"><a href="#优化轮播图" class="headerlink" title="优化轮播图"></a>优化轮播图</h5><p>主要是用节流,当用户不间断点击前进后退的按钮,不会让这个轮播图无限的进行滚动,而且使用节流函数,只会在特定的时间内执行一次,增加了页面的美观度</p><h5 id="优化搜索框"><a href="#优化搜索框" class="headerlink" title="优化搜索框"></a>优化搜索框</h5><p>主要是用到了防抖的思想,一般情况下,在点击的时候会手机输入框中的内容,然后调用请求的接口,向后端请求数据,如果没有这个防抖函数的话,每一次数据一个单词,就都会触发一次请求,这样会增大服务器的压力,发送过多的无用请求,所以,可以通过防抖的形式,当用户输入完成之后,才去触发一次请求,减小用户频繁操作导致的重复请求</p>]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用vue-router进行路由跳转</title>
      <link href="/2022/08/08/shi-yong-vue-router-jin-xing-lu-you-tiao-zhuan/"/>
      <url>/2022/08/08/shi-yong-vue-router-jin-xing-lu-you-tiao-zhuan/</url>
      
        <content type="html"><![CDATA[<p>我的这个页面主要是分成了三级路由,这个路由的划分并不是依据地址栏的层级来进行划分的,而是要依据页面显示区域来进行划分</p><span id="more"></span><h1 id="路由设计"><a href="#路由设计" class="headerlink" title="路由设计"></a>路由设计</h1><h2 id="划分原则"><a href="#划分原则" class="headerlink" title="划分原则"></a>划分原则</h2><p>我的这个页面主要是分成了三级路由,这个路由的划分并不是依据地址栏的层级来进行划分的,而是要依据页面显示区域来进行划分</p><p>例如:</p><p>首页和登录页,两个是完全不同的页面,所以说他们应该都是在一个单独的路由里面,可以称之为登录路由</p><p>同时,对于首页和具体的商品详情页,上面的页头和页尾也都是相同的,所以对于里面的内容来说,里面的内容可以被称为是二级路由</p><p>同时对于个人中心来看,在点击不同的个人中心的时候,里面的内容也会发生变化,这部分就可以视作是三级路由,主要划分可以按照下面的形式来进行划分</p><p><img src="/images/image_1.6d7fa153.png"></p><table><thead><tr><th><strong>路径</strong></th><th><strong>组件（功能）</strong></th><th><strong>嵌套级别</strong></th></tr></thead><tbody><tr><td>/</td><td>首页布局容器</td><td>1级</td></tr><tr><td>/</td><td>首页</td><td>2级</td></tr><tr><td>/category/:id</td><td>一级分类</td><td>2级</td></tr><tr><td>/category/sub/:id</td><td>二级分类</td><td>2级</td></tr><tr><td>/product/:id</td><td>商品详情</td><td>2级</td></tr><tr><td>/login</td><td>登录</td><td>1级</td></tr><tr><td>/login/callback</td><td>第三方登录回调</td><td>1级</td></tr><tr><td>/cart</td><td>购物车</td><td>2级</td></tr><tr><td>/member/checkout</td><td>填写订单</td><td>2级</td></tr><tr><td>/member/pay</td><td>进行支付</td><td>2级</td></tr><tr><td>/member/pay/result</td><td>支付结果</td><td>2级</td></tr><tr><td>/member</td><td>个人中心布局容器</td><td>2级</td></tr><tr><td>/member</td><td>个人中心</td><td>3级</td></tr><tr><td>/member/order</td><td>订单管理</td><td>3级</td></tr><tr><td>/member/order/:id</td><td>订单详情</td><td>3级</td></tr></tbody></table><h2 id="路由跳转"><a href="#路由跳转" class="headerlink" title="路由跳转"></a>路由跳转</h2><p>路由在跳转的过程中经常可以传递参数,目前传递参数的方式有很多,比如说动态路由/query传参/params传参等等,跳转的方式也有很多,下面会说</p><h3 id="路由传参"><a href="#路由传参" class="headerlink" title="路由传参"></a>路由传参</h3><h4 id="params方式"><a href="#params方式" class="headerlink" title="params方式"></a>params方式</h4><p>路由的格式就是:/router/:id</p><p>传递的方式:在path后面跟上对应的值</p><p>传递后形成的路径:/router/123</p><h5 id="路由的定义"><a href="#路由的定义" class="headerlink" title="路由的定义"></a>路由的定义</h5><pre class="line-numbers language-none"><code class="language-none">//在APP.vue中&lt;router-link :to="'/user/'+userId" replace&gt;用户&lt;/router-link&gt;    //在index.js{   path: '/user/:userid',   component: User,},<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="路由跳转-1"><a href="#路由跳转-1" class="headerlink" title="路由跳转"></a>路由跳转</h5><p>跳转的方式有,在router-link里面的to属性设置 对象的格式,方便传参</p><p>通过$router.push(对象)的方式进行传参</p><p>第三种就是直接%router.push(url+参数)的形式</p><pre class="line-numbers language-none"><code class="language-none">// 方法1：&lt;router-link :to="{ name: 'users', params: { uname: wade }}"&gt;按钮&lt;/router-link// 方法2：this.$router.push({name:'users',params:{uname:wade}})// 方法3：this.$router.push('/user/' + wade)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="参数获取"><a href="#参数获取" class="headerlink" title="参数获取"></a>参数获取</h5><p>通过 <code>$route.params.userid</code> 获取传递的值</p><h3 id="query方式"><a href="#query方式" class="headerlink" title="query方式"></a>query方式</h3><ul><li>配置路由格式：<code>/router</code>，也就是普通配置</li><li>传递的方式：对象中使用query的key作为传递方式</li><li>传递后形成的路径：<code>/route?id=123</code></li><li>相当于是url传参,路径拼接</li></ul><h5 id="路由定义"><a href="#路由定义" class="headerlink" title="路由定义"></a>路由定义</h5><pre class="line-numbers language-none"><code class="language-none">//方式1：直接在router-link 标签上以对象的形式&lt;router-link :to="{path:'/profile',query:{name:'why',age:28,height:188}}"&gt;档案&lt;/router-link&gt;// 方式2：写成按钮以点击事件形式&lt;button @click='profileClick'&gt;我的&lt;/button&gt;    profileClick(){  this.$router.push({    path: "/profile",    query: {        name: "kobi",        age: "28",        height: 198    }  });}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="跳转方法"><a href="#跳转方法" class="headerlink" title="跳转方法"></a>跳转方法</h5><pre class="line-numbers language-none"><code class="language-none">// 方法1：&lt;router-link :to="{ name: 'users', query: { uname: james }}"&gt;按钮&lt;/router-link&gt;// 方法2：this.$router.push({ name: 'users', query:{ uname:james }})// 方法3：&lt;router-link :to="{ path: '/user', query: { uname:james }}"&gt;按钮&lt;/router-link&gt;// 方法4：this.$router.push({ path: '/user', query:{ uname:james }})// 方法5：this.$router.push('/user?uname=' + jsmes)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h5><p>需要注意的是,params query 不同 就是params只能是name配合路径,而query既可以是name也可以是path</p><p>params是动态路由,一般情况下不会出现在这个页面url中,但是在动态路由的时候会出现在页面中</p><p>queryi肯定在页面中相当于url传参</p><h5 id="获取参数"><a href="#获取参数" class="headerlink" title="获取参数"></a>获取参数</h5><pre class="line-numbers language-none"><code class="language-none">通过$route.query 获取传递的值 <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="路由跳转的导航守卫"><a href="#路由跳转的导航守卫" class="headerlink" title="路由跳转的导航守卫"></a>路由跳转的导航守卫</h3><h4 id="vue-router导航守卫"><a href="#vue-router导航守卫" class="headerlink" title="vue-router导航守卫"></a>vue-router导航守卫</h4><p>有的时候，需要通过路由来进行一些操作，比如最常见的登录权限验证，当用户满足条件时，才让其进入导航，否则就取消跳转，并跳到登录页面让其登录。</p><p>为此有很多种方法可以植入路由的导航过程：全局的，单个路由独享的，或者组件级的</p><h5 id="全局路由钩子"><a href="#全局路由钩子" class="headerlink" title="全局路由钩子"></a>全局路由钩子</h5><p>主要是有三个</p><ol><li>router.beforeEach 全局前置守卫 进入路由之前</li><li>router.beforeResolve 全局解析守卫（2.5.0+）在 beforeRouteEnter 调用之后调用</li><li>router.afterEach 全局后置钩子 进入路由之后</li></ol><p>具体使用</p><h6 id="beforeEach-进入路由之前"><a href="#beforeEach-进入路由之前" class="headerlink" title="beforeEach 进入路由之前"></a>beforeEach 进入路由之前</h6><p>判断是否登录,没登录就跳转登录页</p><p>接受三个参数,<code>to</code>,<code>from</code>,<code>next</code>,to代表这个要去的地址,from表示来自的地址,next表示放行函数</p><p>就是每次进入路由的时候判断这个有没有用户信息,如果没有用户信息,或者说用户信息过期了就跳转到登录页,让用户登录去获取用户信息</p><pre class="line-numbers language-none"><code class="language-none">router.beforeEach((to, from, next) =&gt; {      let ifInfo = Vue.prototype.$common.getSession('userData');  // 判断是否登录的存储信息    if (!ifInfo) {         // sessionStorage里没有储存user信息            if (to.path == '/') {             //如果是登录页面路径，就直接next()                  next();            } else {             //不然就跳转到登录                  Message.warning("请重新登录！");                 window.location.href = Vue.prototype.$loginUrl;            }      } else {            return next();      }})<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="afterEach-进入路由之后"><a href="#afterEach-进入路由之后" class="headerlink" title="afterEach 进入路由之后"></a>afterEach 进入路由之后</h6><p>常被用来滚动到顶部</p><pre class="line-numbers language-none"><code class="language-none">router.afterEach((to, from) =&gt; {      // 跳转之后滚动条回到顶部      window.scrollTo(0,0);});<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h5 id="单个的路由守卫"><a href="#单个的路由守卫" class="headerlink" title="单个的路由守卫"></a>单个的路由守卫</h5><p>vue也提供了单个路由的守卫,比如beforeEnter,同样是三个参数,卸载这个路由信息里面</p><pre class="line-numbers language-none"><code class="language-none">export default [        {                path: '/',                name: 'login',                component: login,                beforeEnter: (to, from, next) =&gt; {                      console.log('即将进入登录页面')                      next()                }        }]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="组件内守卫"><a href="#组件内守卫" class="headerlink" title="组件内守卫"></a>组件内守卫</h5><p>beforeRouteUpdate、beforeRouteEnter、beforeRouteLeave</p><ul><li>beforeRouteEnter∶ 进入组件前触发</li><li>beforeRouteUpdate∶ 当前地址改变并且改组件被复用时触发，举例来说，带有动态参数的路径foo/∶id，在 /foo/1 和 /foo/2 之间跳转的时候，由于会渲染同样的foa组件，这个钩子在这种情况下就会被调用</li><li>beforeRouteLeave∶ 离开组件被调用</li></ul><p>注意点，beforeRouteEnter组件内还访问不到this，因为该守卫执行前组件实例还没有被创建，需要传一个回调给 next来访问，例如：</p><pre class="line-numbers language-none"><code class="language-none">beforeRouteEnter(to, from, next) {          next(target =&gt; {                if (from.path == '/classProcess') {                      target.isFromProcess = true                }          })    }<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态规划总结-买卖股票的最佳时机问题</title>
      <link href="/2022/08/07/dong-tai-gui-hua-zong-jie-mai-mai-gu-piao-de-zui-jia-shi-ji/"/>
      <url>/2022/08/07/dong-tai-gui-hua-zong-jie-mai-mai-gu-piao-de-zui-jia-shi-ji/</url>
      
        <content type="html"><![CDATA[<p>买卖股票的最佳时机问题</p><span id="more"></span><h3 id="买卖股票的最佳时机"><a href="#买卖股票的最佳时机" class="headerlink" title="买卖股票的最佳时机"></a>买卖股票的最佳时机</h3><h4 id="121-买卖股票的最佳时机"><a href="#121-买卖股票的最佳时机" class="headerlink" title="121. 买卖股票的最佳时机"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock/">121. 买卖股票的最佳时机</a></h4><p><img src="/images/image_1.1b87f37c.png"></p><blockquote><p>思路:这个题目有两个思路<br>首先第一个思路是贪心的写法</p><ul><li>因为一个股票只能买卖一次,所以我们可以从前向后不断遍历这个股票的价格,得出最小的股票价格,然后利用后面遍历到的价值和这个最小的股票价格进行计算,得出利润,计算最大利润</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 贪心的写法</span><span class="token comment">/** * @param {number[]} prices * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// let dp = new Array(prices.length).fill(0) // dp[i]表示在第i天卖出的利润</span>       <span class="token comment">// 用贪心算法写</span>       <span class="token keyword">let</span> minPrice <span class="token operator">=</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       <span class="token keyword">let</span> profit <span class="token operator">=</span> <span class="token number">0</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               profit <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> minPrice<span class="token punctuation">,</span>profit<span class="token punctuation">)</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> minPrice<span class="token punctuation">)</span><span class="token punctuation">{</span>                       minPrice <span class="token operator">=</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> profit<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>动态规划的写法<br>一个股票只能买卖一次,那他就有两个状态,一个是第一次买入,一个是第一次卖出</p><ul><li>第一次买入: 前一天第一次买入状态保留,和当天第一次买入</li><li>第一次卖出: 前一天第一次卖出状态保留,和当前第一次卖出</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} prices * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// dp[i][0] 表示第i天不持有股票的最大利润 dp[i][1]表示第i天持有股票的最大利润</span>       <span class="token comment">// dp[i][0] = Math.max(dp[i-1][0],dp[i-1][1]+prices[i]) 是前一天不持有股票 和前一天持有股票在这一天卖出的最大值</span>       <span class="token comment">// dp[i][1] = Math.max( - prices[i],dp[i][1]) 前一天不持有股票在这一天买入</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>prices<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 不持有股票</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 持有股票</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 第一次卖出</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 第一次卖出</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>prices<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>prices<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="122-买卖股票的最佳时机-II"><a href="#122-买卖股票的最佳时机-II" class="headerlink" title="122. 买卖股票的最佳时机 II"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-ii/">122. 买卖股票的最佳时机 II</a></h4><p><img src="/images/image_2.cb1a7e78.png"></p><blockquote><p>同样是两种思路</p><ol><li>动态规划</li></ol><ul><li>今天买入: 前一天买入的状态保留,今天直接买入</li><li>今天卖出: 前一天卖出的状态保留,今天直接卖出</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token function">Array</span><span class="token punctuation">(</span>prices<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// dp[i][0] 表示第i天持有股票所得现金。</span>       <span class="token comment">// dp[i][1] 表示第i天不持有股票所得最多现金</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>               <span class="token comment">// 如果第i天持有股票即dp[i][0]， 那么可以由两个状态推出来</span>               <span class="token comment">// 第i-1天就持有股票，那么就保持现状，所得现金就是昨天持有股票的所得现金 即：dp[i - 1][0]</span>               <span class="token comment">// 第i天买入股票，所得现金就是昨天不持有股票的所得现金减去 今天的股票价格 即：dp[i - 1][1] - prices[i]</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// 在来看看如果第i天不持有股票即dp[i][1]的情况， 依然可以由两个状态推出来</span>               <span class="token comment">// 第i-1天就不持有股票，那么就保持现状，所得现金就是昨天不持有股票的所得现金 即：dp[i - 1][1]</span>               <span class="token comment">// 第i天卖出股票，所得现金就是按照今天股票佳价格卖出后所得现金即：prices[i] + dp[i - 1][0]</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>prices<span class="token punctuation">.</span>length <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><ol start="2"><li>贪心算法</li></ol><ul><li>因为啥可以无限次卖出卖出,那么我们只收集正的受益就行了</li><li>所以可以从前到后遍历,每一天收集当前的值减去前一天的值是不是大于0 ,如果是的话就直接收集起来,最终计算最大的受益</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} prices * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// 这个时候我们只需要收集每一天的正利润就行了</span>       <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">0</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>prices<span class="token punctuation">.</span>length <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>           result <span class="token operator">+=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 只收集净利润</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="123-买卖股票的最佳时机-III"><a href="#123-买卖股票的最佳时机-III" class="headerlink" title="123. 买卖股票的最佳时机 III"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iii/">123. 买卖股票的最佳时机 III</a></h4><p><img src="/images/image_3.9ade210d.png"></p><blockquote><p>思路:<br>一共可以买卖两次,那么就会有五种状态</p><ul><li>什么都没有操作: 0 = 0</li><li>第一次买入: 前一天的状态保留,和前一天是无操作-加价格</li><li>第一次卖出: 前一天的状态保留,和前一天是第一次买入,今天卖出</li><li>第二次买入: 前一天的状态保留,和前一天是第一次卖出,今天买入</li><li>第二次卖出: 前一天的状态保留,和前一天是第二次买入,今天卖出</li></ul></blockquote><blockquote><p>比较得到这几个的最大值</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} prices * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 这个股票在某一天有五中状态</span>   <span class="token comment">// 0 没有操作 1 第一次买入 2 第一次卖出 3 第二次买入 4 第二次卖出</span>   <span class="token keyword">let</span> len <span class="token operator">=</span> prices<span class="token punctuation">.</span>length   <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 初始化 dp[0][0] 就是没有操作就是0</span>   <span class="token comment">// dp[0][1] 就是第一次买入 就是 0 - prices[0]</span>   <span class="token comment">// dp[0][2] 就是第一次卖出  相当于买入又卖出 相当于0</span>   <span class="token comment">// dp[0][3] 第二次买入 相当于 买入卖出又买入 0 - prices[0]</span>   <span class="token comment">// dp[0][4] 第二次卖出 相当于 买入有卖出又买入有卖出 0</span>   dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>   dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 这一层没操作的状态就是上一次没操作的状态</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 这一次的第一次买入相当于上一次的第一次买入没有操作 和上一次没有操作这次买入</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 这一次的相当于第一次的买入然后再卖出 或者是第一次的卖出没有操作</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> dp<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="188-买卖股票的最佳时机-IV"><a href="#188-买卖股票的最佳时机-IV" class="headerlink" title="188. 买卖股票的最佳时机 IV"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-iv/">188. 买卖股票的最佳时机 IV</a></h4><p><img src="/images/image_4.603e3b92.png"></p><blockquote><p>总体思路和上一题相同<br>因为是买卖k次,所以一共有2*k+1中状态,其中除了0以外,偶数都是代表卖出,奇数都是代表买入</p><ul><li>买入的状态: 前一天买入的状态保留,前一天是卖出的状态,今天买入</li><li>卖出的状态: 前一天卖出的状态保留,前一天是买入的状态,今天卖出</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} prices * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span>prices</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 这个股票在某一天有五中状态</span>   <span class="token comment">// 0 没有操作 1 第一次买入 2 第一次卖出 3 第二次买入 4 第二次卖出</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>prices<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>   <span class="token keyword">let</span> len <span class="token operator">=</span> prices<span class="token punctuation">.</span>length   <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 初始化 dp[0][0] 就是没有操作就是0</span>   <span class="token comment">// dp[0][1] 就是第一次买入 就是 0 - prices[0]</span>   <span class="token comment">// dp[0][2] 就是第一次卖出  相当于买入又卖出 相当于0</span>   <span class="token comment">// dp[0][3] 第二次买入 相当于 买入卖出又买入 0 - prices[0]</span>   <span class="token comment">// dp[0][4] 第二次卖出 相当于 买入有卖出又买入有卖出 0</span>   <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">*</span> k<span class="token punctuation">;</span> j <span class="token operator">+=</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token punctuation">}</span>   <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token keyword">null</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 这一层没操作的状态就是上一次没操作的状态</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token operator">*</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>j <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>               flag <span class="token operator">=</span> <span class="token number">1</span>           <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>               flag <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>           <span class="token punctuation">}</span>           dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> flag <span class="token operator">*</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token punctuation">}</span>       <span class="token comment">// dp[i][1] = Math.max(dp[i-1][0] - prices[i],dp[i-1][1]) // 这一次的第一次买入相当于上一次的第一次买入没有操作 和上一次没有操作这次买入</span>       <span class="token comment">// dp[i][2] = Math.max(dp[i-1][1] + prices[i],dp[i-1][2]) // 这一次的相当于第一次的买入然后再卖出 或者是第一次的卖出没有操作</span>       <span class="token comment">// dp[i][3] = Math.max(dp[i-1][2] - prices[i],dp[i-1][3])</span>       <span class="token comment">// dp[i][4] = Math.max(dp[i-1][3] + prices[i],dp[i-1][4])</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> dp<span class="token punctuation">[</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>k<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 方法二：动态规划+空间优化</span><span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">k<span class="token punctuation">,</span> prices</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> n <span class="token operator">=</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token operator">*</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">// dp 买入状态初始化</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">2</span><span class="token operator">*</span>k<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>               <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token operator">*</span>k<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span> j<span class="token operator">++</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                       <span class="token comment">// j 为奇数：买入状态</span>                       <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">j <span class="token operator">%</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                               dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>                               <span class="token comment">// j为偶数：卖出状态</span>                               dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> dp<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token operator">*</span>k<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="309-最佳买卖股票时机含冷冻期"><a href="#309-最佳买卖股票时机含冷冻期" class="headerlink" title="309. 最佳买卖股票时机含冷冻期"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-cooldown/">309. 最佳买卖股票时机含冷冻期</a></h4><p><img src="/images/image_5.cd5bf190.png"></p><blockquote><p>思路:<br>假如说有冷冻期,那么就存在了四种状态了</p><ul><li>买入股票状态: 前一天是买入股票状态的状态保留,前一天是卖出股票状态(度过了冷冻期)-今天股票价格</li><li>卖出股票状态(度过了冷冻期): 前一天是卖出股票状态(度过了冷冻期的状态保留),前一天是冷冻期</li><li>今天卖出股票状态: 前一天是买入股票状态+今天卖出股票的价格</li><li>冷冻期: 前一天是今天卖出股票状态</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} prices * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//   if(prices.length &lt; 2) {</span><span class="token comment">//     return 0</span><span class="token comment">//   } else if(prices.length &lt; 3) {</span><span class="token comment">//     return Math.max(0, prices[1] - prices[0]);</span><span class="token comment">//   }</span>   <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>prices<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment">// 有四个状态 0 买入股票状态 1.卖出股票状态(两天前已经卖出了股票保持卖出过状态) 2.今天卖出股票 3.冷冻期</span>   <span class="token comment">// 初始化 </span>   dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 要达到买入股票状态 前一天需是买入股票状态 或者前一天就已经是买入股票状态 前一天是冷冻期今天买入</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 卖出股票状态(两天前已经是卖出股票状态) 两天前就卖出了股票今天保持 前天是卖出股票状态</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token comment">// 今天卖出股票</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">//冷冻期 只有前一天是卖出股票状态才是冷冻期</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>prices<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>prices<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>prices<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>有四种状态</p><ul><li>第一次买入股票: 直接减去股票价格</li><li>过了冷冻期之后买入股票: 前一天是过了冷冻期之后买入股票的状态保留,前天是冷冻期-今天买入股票</li><li>卖出股票: 前天是卖出股票的状态保留,前天是买入股票+今天卖出,前天是第一次买入股票+今天卖出</li><li>冷冻期: 前天是卖出股票</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} prices * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> m <span class="token operator">=</span> prices<span class="token punctuation">.</span>length       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 第一次买入股票</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 过了冷冻期之后买入股票</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 卖出股票</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 冷冻期</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">+</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="714-买卖股票的最佳时机含手续费"><a href="#714-买卖股票的最佳时机含手续费" class="headerlink" title="714. 买卖股票的最佳时机含手续费"></a><a href="https://leetcode.cn/problems/best-time-to-buy-and-sell-stock-with-transaction-fee/">714. 买卖股票的最佳时机含手续费</a></h4><p><img src="/images/image_6.760516ea.png"></p><blockquote><p>思路<br>假如是买入的时候付手续费</p><ul><li>第一天持有的价格就是 -prices[0]-fee</li><li>第一天不持有的价格就是 0</li></ul></blockquote><blockquote><p>下面从1开始判断</p><ul><li>持有的价格: 前一天不持有的价格-fee-price[i],前一天持有的价格</li><li>不持有的价格: 前一天不持有的价格,前一天持有的价格+prices[i]</li></ul></blockquote><blockquote><p>最终返回不持有股票的最大价格</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} prices * @param {number} fee * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxProfit</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">prices<span class="token punctuation">,</span> fee</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> n <span class="token operator">=</span> prices<span class="token punctuation">.</span>length<span class="token punctuation">,</span>               have <span class="token operator">=</span> <span class="token operator">-</span>prices<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-</span>fee <span class="token comment">// 第0天持有股票的最大收益</span>               notHave <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 第0天不持有股票的最大收益</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token comment">// 第i天持有股票的最大收益由两部分组成</span>               <span class="token comment">// 1.第i-1天就已经持有股票,第i天什么也没做</span>               <span class="token comment">// 2.第i-1天不持有股票第i天卖出</span>               have <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>have<span class="token punctuation">,</span>notHave<span class="token operator">-</span>prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">-</span>fee<span class="token punctuation">)</span>               <span class="token comment">// 第i天不持有股票的最大收益由两部分组成</span>               <span class="token comment">// 1.第i-1天就已经持有股票,第i天卖出</span>               <span class="token comment">// 2.第i-1天不持有股票,第i天什么也不做</span>               notHave <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>notHave<span class="token punctuation">,</span>have <span class="token operator">+</span> prices<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token punctuation">}</span>       <span class="token comment">// 返回最后不持有股票的收益</span>       <span class="token keyword">return</span> notHave<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自定义轮播图组件</title>
      <link href="/2022/08/07/zi-ding-yi-lun-bo-tu-zu-jian/"/>
      <url>/2022/08/07/zi-ding-yi-lun-bo-tu-zu-jian/</url>
      
        <content type="html"><![CDATA[<p>一般来说,为了让这个轮播图组件可复用,可以采用的方式是将其单独的封装成一个组件的样式,因此在这个项目里面,我把它单独的封装成了一个组件</p><span id="more"></span><h2 id="自定义轮播图组件"><a href="#自定义轮播图组件" class="headerlink" title="自定义轮播图组件"></a>自定义轮播图组件</h2><h3 id="基础布局"><a href="#基础布局" class="headerlink" title="基础布局"></a>基础布局</h3><p>一般来说,为了让这个轮播图组件可复用,可以采用的方式是将其单独的封装成一个组件的样式,因此在这个项目里面,我把它单独的封装成了一个组件</p><p>基础结构可以分为三个部分</p><p>1.图片展示区域</p><p>2.左右点击按钮</p><p>3.下方的小圆点</p><p>封装好轮播图的主要结构之后,要把他使用vuecomponent来进行注册,完成全局注册轮播图</p><p>在需要的地方进行引入就可以了</p><p>主要代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">'xtx-carousel'</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>ul <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"carousel-body"</span><span class="token operator">&gt;</span><span class="token comment">// 图片展示区域</span>      <span class="token operator">&lt;</span>li <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"carousel-item fade"</span><span class="token operator">&gt;</span>        <span class="token operator">&lt;</span>RouterLink to<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">&gt;</span>          <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token string">"http://yjy-xiaotuxian-dev.oss-cn-beijing.aliyuncs.com/picture/2021-04-15/1ba86bcc-ae71-42a3-bc3e-37b662f7f07e.jpg"</span> alt<span class="token operator">=</span><span class="token string">""</span><span class="token operator">&gt;</span>        <span class="token operator">&lt;</span><span class="token operator">/</span>RouterLink<span class="token operator">&gt;</span>      <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>    <span class="token comment">// 左右点击按钮</span>    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"javascript:;"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"carousel-btn prev"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"iconfont icon-angle-left"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">"javascript:;"</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"carousel-btn next"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>i <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"iconfont icon-angle-right"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>i<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>    <span class="token comment">// 下方小圆点</span>    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"carousel-indicator"</span><span class="token operator">&gt;</span>      <span class="token operator">&lt;</span>span v<span class="token operator">-</span><span class="token keyword">for</span><span class="token operator">=</span><span class="token string">"i in 5"</span> <span class="token operator">:</span>key<span class="token operator">=</span><span class="token string">"i"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>全局注册轮播图</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">import</span> XtxSkeleton <span class="token keyword">from</span> <span class="token string">'./xtx-skeleton.vue'</span><span class="token operator">+</span><span class="token keyword">import</span> XtxCarousel <span class="token keyword">from</span> <span class="token string">'./xtx-carousel.vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token function">install</span> <span class="token punctuation">(</span><span class="token parameter">app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>XtxSkeleton<span class="token punctuation">.</span>name<span class="token punctuation">,</span> XtxSkeleton<span class="token punctuation">)</span><span class="token operator">+</span>    app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span>XtxCarousel<span class="token punctuation">.</span>name<span class="token punctuation">,</span> XtxCarousel<span class="token punctuation">)</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>轮播图的使用</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>  <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"home-banner"</span><span class="token operator">&gt;</span>    <span class="token operator">&lt;</span>XtxCarousel <span class="token operator">/</span><span class="token operator">&gt;</span>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span><span class="token operator">**</span>主要的步骤是<span class="token operator">:</span>引入<span class="token operator">/</span>注册<span class="token operator">/</span>使用<span class="token operator">**</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="轮播图的结构"><a href="#轮播图的结构" class="headerlink" title="轮播图的结构"></a>轮播图的结构</h3><p>首先要定义使用的api函数,根据这个api函数来获取数据,并将这个数据传入到轮播图组件里面</p><p>遍历传进来的数据,生成轮播图的图片部分和下面的小圆点部分</p><p>然后在组件内部设置一个index来标记显示第几张图片</p><p>针对图片部分,定义一个显示的类,针对小圆点部分,定义一个显示活动的类,根据当前显示的索引,来让相应的图片和小圆点显示</p><h2 id="轮播图的逻辑封装"><a href="#轮播图的逻辑封装" class="headerlink" title="轮播图的逻辑封装"></a>轮播图的逻辑封装</h2><p>这个轮播图组件里面呢,一个实现的逻辑有这几个,一个是自动播放的功能,就是说可以根据用户传入的数据,来控制这个轮播图的自动播放;还有就是在有自动播放的情况下,鼠标进入和离开,轮播图会停止播放</p><p>还有就是指示器的切换,上一章和下一张</p><p>组件销毁的时候,要把定时器给销毁掉</p><h4 id="是否自动轮播"><a href="#是否自动轮播" class="headerlink" title="是否自动轮播"></a>是否自动轮播</h4><p>首先在这个prop里面接受这个传入的autoPlay和duration这两个参数,分别是这个是否自动播放和这个延迟时间</p><p>因为自动播放需要一个定时器,所以还需要定义一个定时器.后续还需要完成这个鼠标进入离开的功能,可以把自动播放封装成一个方法,在这个方法里面完成这个自动播放的逻辑</p><p>在这个里面可以设置一个定时器,每个duration时间就让这个index++,这样就完成了图片的切换,因为图片显示和小圆点,都是使用index完成的,所以这个index变化,也会引起这个轮播图和小圆点的变化</p><p>同时为了让这个轮播图无限滚动,需要判断这个index到达这个图片的长度的时候,让这个index变成0,也就是从第一章图片继续变化,完成无限滚动的设置</p><p>对于自动播放来说,要完成自动播放要有两个条件,一个是sliders要有数据,同时autoplay要是true,这两个条件要全部满足才能够开启自动轮播</p><p>所以可以采用的方法是,对这个轮播图的长度进行监听,当长度发生变化,同时又是从无到有的时候,才让这个轮播图自动轮播,也就是调用这个自动轮播的函数,另外可以给他添加这个immediate:true的属性,完成这个的自动轮播</p><h4 id="鼠标进入离开-暂停播放"><a href="#鼠标进入离开-暂停播放" class="headerlink" title="鼠标进入离开,暂停播放"></a>鼠标进入离开,暂停播放</h4><p>可以定义两个函数,一个是开启定时器,一个是关闭定时器</p><p>开启定时器,就是判断sliders的长度和autolay 属性,如果都是真的时候,就调用自动播放的函数,开启定时器</p><p>关闭定时器就是,清除timer就行了</p><p>然后在组件上绑定mouseover和mouseout就可以完成了</p><h4 id="左右按钮点击"><a href="#左右按钮点击" class="headerlink" title="左右按钮点击"></a>左右按钮点击</h4><p>就是点击的时候,让index对应的++和–,也可以定义一个方法,传入1和-1,完成前进和后退</p><p>首先生成新的前进和后退的索引,判断是否越界,如果越界就让他变成另一边的一个,然后在赋值给index,完成页面的变化</p><h4 id="组件卸载-清除定时器"><a href="#组件卸载-清除定时器" class="headerlink" title="组件卸载,清除定时器"></a>组件卸载,清除定时器</h4><p>就是在onunmounted这个生命周期函数里面,将这个timer定时器给清除掉</p><h3 id="主要代码如下"><a href="#主要代码如下" class="headerlink" title="主要代码如下"></a>主要代码如下</h3><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token operator">+</span><span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> watch <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>  <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'XtxCarousel'</span><span class="token punctuation">,</span>  <span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span>    <span class="token literal-property property">sliders</span><span class="token operator">:</span> <span class="token punctuation">{</span>      <span class="token literal-property property">type</span><span class="token operator">:</span> Array<span class="token punctuation">,</span>      <span class="token function-variable function">default</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token operator">+</span>    duration<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">+</span>      type<span class="token operator">:</span> Number<span class="token punctuation">,</span><span class="token operator">+</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token operator">+</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token operator">+</span>    autoPlay<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token operator">+</span>      type<span class="token operator">:</span> Boolean<span class="token punctuation">,</span><span class="token operator">+</span>      <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token operator">+</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token function">setup</span> <span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 默认显示的图片的索引</span>    <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token operator">+</span>    <span class="token comment">// 自动播放</span><span class="token operator">+</span>    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token operator">+</span>    <span class="token keyword">const</span> <span class="token function-variable function">autoPlayFn</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">+</span>      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token operator">+</span>      timer <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">+</span>        index<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token operator">+</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>index<span class="token punctuation">.</span>value <span class="token operator">&gt;=</span> props<span class="token punctuation">.</span>sliders<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">+</span>          index<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">+</span>        <span class="token punctuation">}</span><span class="token operator">+</span>      <span class="token punctuation">}</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>duration<span class="token punctuation">)</span><span class="token operator">+</span>    <span class="token punctuation">}</span><span class="token operator">+</span>    <span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>sliders<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token operator">+</span>      <span class="token comment">// 有数据&amp;开启自动播放，才调用自动播放函数</span><span class="token operator">+</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span>autoPlay<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token operator">+</span>        index<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span><span class="token operator">+</span>        <span class="token function">autoPlayFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>      <span class="token punctuation">}</span><span class="token operator">+</span>    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">+</span>   <span class="token comment">// 鼠标进入停止，移出开启自动，前提条件：autoPlay为true</span>    <span class="token keyword">const</span> <span class="token function-variable function">stop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> <span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>sliders<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> props<span class="token punctuation">.</span>autoPlay<span class="token punctuation">)</span> <span class="token punctuation">{</span>        <span class="token function">autoPlayFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token comment">// 上一张下一张</span>    <span class="token keyword">const</span> <span class="token function-variable function">toggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">step</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> newIndex <span class="token operator">=</span> index<span class="token punctuation">.</span>value <span class="token operator">+</span> step      <span class="token keyword">if</span> <span class="token punctuation">(</span>newIndex <span class="token operator">&gt;=</span> props<span class="token punctuation">.</span>sliders<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>        index<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">return</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>newIndex <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        index<span class="token punctuation">.</span>value <span class="token operator">=</span> props<span class="token punctuation">.</span>sliders<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">return</span>      <span class="token punctuation">}</span>      index<span class="token punctuation">.</span>value <span class="token operator">=</span> newIndex    <span class="token punctuation">}</span>   <span class="token comment">// 组件消耗，清理定时器</span>    <span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>      <span class="token function">clearInterval</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> <span class="token punctuation">{</span> index <span class="token punctuation">}</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态规划总结-基础题型</title>
      <link href="/2022/08/05/dong-tai-gui-hua-zong-jie-ji-chu-ti-xing/"/>
      <url>/2022/08/05/dong-tai-gui-hua-zong-jie-ji-chu-ti-xing/</url>
      
        <content type="html"><![CDATA[<p>动态规划总结-基础题型</p><span id="more"></span><h3 id="基础问题"><a href="#基础问题" class="headerlink" title="基础问题"></a>基础问题</h3><h4 id="746-使用最小花费爬楼梯"><a href="#746-使用最小花费爬楼梯" class="headerlink" title="746. 使用最小花费爬楼梯"></a>746. 使用最小花费爬楼梯</h4><p><img src="/images/image_1.bcc90eae.png"></p><pre class="line-numbers language-none"><code class="language-none">/** *&nbsp;@param&nbsp;{number[]}&nbsp;cost *&nbsp;@return&nbsp;{number} */var&nbsp;minCostClimbingStairs&nbsp;=&nbsp;function(cost)&nbsp;{&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;dp[i]&nbsp;表示到i个位置的最小花费体力&nbsp;注意走第一步的时候就花费了&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;let&nbsp;n&nbsp;=&nbsp;cost.length&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;let&nbsp;dp&nbsp;=&nbsp;new&nbsp;Array(n).fill(0)&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;dp[0]&nbsp;=&nbsp;cost[0]&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;dp[1]&nbsp;=&nbsp;cost[1]&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;2;i&nbsp;&lt;&nbsp;n;i++){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i]&nbsp;=&nbsp;Math.min(dp[i-1],dp[i-2])&nbsp;+cost[i]&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return&nbsp;Math.min(dp[n-1],dp[n-2])&nbsp;//&nbsp;倒数第一位和倒数第二位都可以走到最顶端};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">/** *&nbsp;@param&nbsp;{number[]}&nbsp;cost *&nbsp;@return&nbsp;{number} */var&nbsp;minCostClimbingStairs&nbsp;=&nbsp;function(cost)&nbsp;{&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;dp[i]表示爬到第i个阶梯的最小花费&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;递推公式:&nbsp;dp[i]&nbsp;爬到第i个阶梯的最小花费&nbsp;可能是由前一个阶梯爬1个&nbsp;或者前两个阶梯爬两个&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;dp[i]&nbsp;=&nbsp;min(dp[i-1]+cost[i-1],dp[i-2]+cost[i-2])&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;初始化&nbsp;可以从下标为0&nbsp;也可以从下标为1的地方开始走&nbsp;dp[1]&nbsp;=&nbsp;从下标为0的地方走就就是&nbsp;cost[0]&nbsp;从下标为1的开始走就是0&nbsp;取值就是0&nbsp;&nbsp;dp[2]&nbsp;可以从下标为0的地方走也可以从下标为1的地方走&nbsp;name就是&nbsp;cost[0]+cost[1]或者cost[1]&nbsp;那就是cost[1]和cost[0]的最小值&nbsp;从下标为1的地方走&nbsp;就是cost[1]&nbsp;&nbsp;就是cost[0]和cost[1]的最小值&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;遍历顺序&nbsp;从前向后遍历&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;let&nbsp;n&nbsp;=&nbsp;cost.length&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;let&nbsp;dp&nbsp;=&nbsp;new&nbsp;Array(n+1).fill(0)&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;dp[1]&nbsp;=&nbsp;0&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;dp[2]&nbsp;=&nbsp;Math.min(cost[1],cost[0])&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;3;i&nbsp;&lt;=&nbsp;n;i++){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i]&nbsp;=&nbsp;Math.min(dp[i-1]&nbsp;+&nbsp;cost[i-1],dp[i-2]+cost[i-2])&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;console.log(dp)&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return&nbsp;dp[n]};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="62-不同路径"><a href="#62-不同路径" class="headerlink" title="62. 不同路径"></a><a href="https://leetcode.cn/problems/unique-paths/">62. 不同</a>路径</h4><p><img src="/images/image_2.847c4c58.png"></p><pre class="line-numbers language-none"><code class="language-none">/** *&nbsp;@param&nbsp;{number}&nbsp;m *&nbsp;@param&nbsp;{number}&nbsp;n *&nbsp;@return&nbsp;{number} */var&nbsp;uniquePaths&nbsp;=&nbsp;function(m,&nbsp;n)&nbsp;{&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;dp数组含义&nbsp;dp[i][j]表示走到ij位置的最多的路径条数&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;地推公式&nbsp;dp[0][j]&nbsp;=&nbsp;dp[0][j-1]&nbsp;dp[i][0]&nbsp;=&nbsp;dp[i-1][0]&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;dp[i][j]&nbsp;=&nbsp;dp[i-1][j]&nbsp;+&nbsp;dp[i][j-1]&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;初始化&nbsp;dp[0]&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;遍历顺序&nbsp;从左到右&nbsp;从上到下&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;let&nbsp;dp&nbsp;=&nbsp;new&nbsp;Array(m).fill(0).map(()=&gt;new&nbsp;Array(n).fill(1))&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;0;i&nbsp;&lt;&nbsp;m;i++){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;j&nbsp;=&nbsp;0;j&nbsp;&lt;&nbsp;n;j++){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(i&nbsp;===&nbsp;0&nbsp;&amp;&amp;&nbsp;j&nbsp;===&nbsp;0){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ij都是0&nbsp;那就初始化为1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if(i&nbsp;===&nbsp;0){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ij有一个不是0&nbsp;那就这个就是这个的前一个或者是左边或者是右边&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;dp[i][j-1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if(j&nbsp;===&nbsp;0){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;dp[i-1][j]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;如果都是不是0&nbsp;那就是左边+上面&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;dp[i-1][j]&nbsp;+dp[i][j-1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return&nbsp;dp[m-1][n-1]};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">/** *&nbsp;@param&nbsp;{number}&nbsp;m *&nbsp;@param&nbsp;{number}&nbsp;n *&nbsp;@return&nbsp;{number} */var&nbsp;uniquePaths&nbsp;=&nbsp;function(m,&nbsp;n)&nbsp;{&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//&nbsp;一维数组解决&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;let&nbsp;dp&nbsp;=&nbsp;new&nbsp;Array(n)&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;0;i&nbsp;&lt;&nbsp;n;i++)&nbsp;dp[i]&nbsp;=&nbsp;1&nbsp;//&nbsp;初始化第一行的数组的最短路径都是1&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;1;i&nbsp;&lt;&nbsp;m;i++){&nbsp;//&nbsp;从第2行判断&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;j&nbsp;=&nbsp;1;j&nbsp;&lt;&nbsp;n;j++){&nbsp;//&nbsp;从第二列判断&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[j]&nbsp;=&nbsp;dp[j-1]&nbsp;+&nbsp;dp[j]&nbsp;//&nbsp;当前的值就是之前的路线&nbsp;加上&nbsp;前面一位的路线&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return&nbsp;dp[n-1]&nbsp;//&nbsp;最后返回最后一个的路线};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="63-不同路径-II"><a href="#63-不同路径-II" class="headerlink" title="63. 不同路径 II"></a>63. 不同路径 II</h4><p><img src="/images/image_3.bd9586f7.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[][]} obstacleGrid * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">uniquePathsWithObstacles</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obstacleGrid</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// dp[i][j]表示到这个位置的路径数</span>       <span class="token comment">// 递推公式如果这个不是障碍 那么就是左边的加上右边的 如果这个是障碍 那么这个就是0</span>       <span class="token comment">// 这样的话下一个的取值就是左边的加上面的 其中有一个是障碍的话就是单独的一个了</span>       <span class="token keyword">let</span> m <span class="token operator">=</span> obstacleGrid<span class="token punctuation">.</span>length       <span class="token keyword">let</span> n <span class="token operator">=</span> obstacleGrid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 第二这个ob数组是二维数组 要分清行列</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> obstacleGrid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 将dp数组的上边界和左边界都赋值为1 除了obs数字该数字是1的情况第一不能让dp[0][0]是1 因为要避免[1](onenote:#1&amp;section-id={AE715DAD-B069-4885-A89B-1727F809BE27}&amp;page-id={B7A4B202-E19F-48C8-B6A3-ABA0CFF9A838}&amp;end&amp;base-path=https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/代码随想录练习题/动态规划.one)这种情况</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m <span class="token operator">&amp;&amp;</span> obstacleGrid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>obstacleGrid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">continue</span> <span class="token comment">// 如果这个数字是个障碍 那么就调过这个数字 让其还是0</span>                       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 不是障碍 就是左边的加上上边的</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="343-整数拆分"><a href="#343-整数拆分" class="headerlink" title="343. 整数拆分"></a>343. 整数拆分</h4><p><img src="/images/image_4.09fdd306.png"></p><blockquote><p>两重循环 外层循环用来确定这个dp[i]的i下标,内层循环用来从1到n一直判断<br>公式就是 dp[i] = math.max(dp[i],j<em>dp[i-j],i</em>(i-j))<br>==注意:不要忘了j*(i-j)==</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">integerBreak</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// dp[i]表示i的最大拆分乘积</span>       <span class="token comment">// dp[i] 是什么相当于 从1开始拆到i-1假设拆掉的值是j 比较j*(i-j) 和j*dp[i-j]的最大值 第一个相当于单独拆 第二个相当于将i-j继续拆分</span>       <span class="token comment">// 初始化初始化dp[2] = 1</span>       <span class="token comment">// 遍历顺序 从左享有</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>       dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token comment">// 可以遍历到n 这个是可以取值n dp[n]</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token comment">// 从j=1遍历到j = n-1</span>                       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token punctuation">]</span><span class="token operator">*</span>j<span class="token punctuation">,</span><span class="token punctuation">(</span>i<span class="token operator">-</span>j<span class="token punctuation">)</span><span class="token operator">*</span>j<span class="token punctuation">)</span> <span class="token comment">// 这里为什么还包含dp[i] 就是在运动计算的过程中dp[i]是不断变化的 在内层循环中不断变化</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">/** * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">integerBreak</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// dp[i]表示这个数字在i的乘积最大化</span>       <span class="token comment">// 递推公式 dp[i] = dp[i-1] * 1 +dp[i-2]*2 dp[i-3]*3 中的最大值</span>       <span class="token comment">// 初始化dp[2] = 1 dp[3] = 2 dp[4] = 4</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>       dp<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>       dp<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>       dp<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>       dp<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">9</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">)</span>       <span class="token punctuation">}</span>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="96-不同的二叉搜索树"><a href="#96-不同的二叉搜索树" class="headerlink" title="96.不同的二叉搜索树"></a>96.不同的二叉搜索树</h4><p><img src="/images/image_5.58f46ac1.png"></p><blockquote><p>分成左右两个子树来看,左子树的个数可以是0~i-1个 因为 根元素肯定要有,那么当这个左子树的个数从0变化到i-1的时候 右子树元素的个数是从i-1变化到0,所以当我们求dp[i]也就是i个元素的二叉树的个数的时候,就可以让左子树乘以右子树不断的相加得到结果</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">numTrees</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// dp[i]表示1-i个数字组成的搜索二叉树的个数</span>       <span class="token comment">// 递推公式 让j 从0到i dp[i] = dp[j]*dp[i-j] 表示的意思就是左子树是0-j组成的二叉搜索树的个数</span>       <span class="token comment">// 乘右子树是以i-j组成的二叉搜索是的个数 凑是从0开始 因为有可能左右子树是null</span>       <span class="token comment">// 初始化dp【0】 = 1 这个是为了相乘有值</span>       <span class="token comment">// 递归顺序 从左到右</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 不能初始化为1 这样就会后面相加有个初始值 </span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 初始化dp[0]是1</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从第2位开始遍历一致到第n为 这一行是头结点 从1到n</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 下面从j = 1开始遍历 这一行是从左边是0遍历到左边是全部 取不到i就不会-1了</span>                       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">*</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 左子树是0-i-1的二叉搜索树个数乘以右子树是0-i-1的二叉搜索树个数 所以说可以等于i 这里的j-1是为了让其能从0开始到j-1 后面也是可以从i-1到0</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="322-零钱兑换"><a href="#322-零钱兑换" class="headerlink" title="322. 零钱兑换"></a><a href="https://leetcode.cn/problems/coin-change/">322. 零钱兑换</a></h4><p><img src="/images/image_6.034cf546.png"></p><blockquote><p>完全背包问题,因为是这个硬币可以用无数次<br>也是两重for循环,外层遍历背包,内层遍历物品<br>dp[i]的含义是凑够i的钱的最小的硬币用量<br>那么这个dp[i]就可以由硬币的面值来推出<br>==dp[i] = Math.min(dp[i],dp[i-coin]+1)==<br>那么外层遍历物品内层遍历背包行不行呢<br>事实证明也是可以的</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} coins * @param {number} amount * @return {number} */</span><span class="token comment">// 外层遍历背包 内层遍历物品</span><span class="token keyword">var</span> <span class="token function-variable function">coinChange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">coins<span class="token punctuation">,</span> amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> coin <span class="token keyword">of</span> coins<span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>coin <span class="token operator">&lt;=</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>coin<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">Infinity</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 外层遍历物品 内层遍历背包</span><span class="token comment">/** * @param {number[]} coins * @param {number} amount * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">coinChange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">coins<span class="token punctuation">,</span> amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> coin <span class="token keyword">of</span> coins<span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> coin<span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>coin<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">Infinity</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="10-正则表达式匹配"><a href="#10-正则表达式匹配" class="headerlink" title="10. 正则表达式匹配"></a><a href="https://leetcode.cn/problems/regular-expression-matching/">10. 正则表达式匹配</a></h4><p><img src="/images/image_7.18179396.png"></p><blockquote><p>主要思路 就是从前向后判断是否匹配</p><ul><li>首先是按照两个字符串相比较的规律,生成一个二维的数组</li><li>dp[i][j]代表的是i-1,j-1的位置的字符是否匹配</li></ul></blockquote><blockquote><p>首先是初始化</p><ul><li>00 就是true 空字符串是互相匹配的</li><li>0j代表有长度的匹配空串<ul><li>如果有长度的是 *的话有可能匹配</li><li>其他情况就没办法匹配了</li></ul></li></ul></blockquote><blockquote><ul><li>然后就是两个字符串从前向后不断的进行比较<ul><li>如果两个位置的字符串是相匹配的,那么就说明这里的匹配信息是前面的匹配信息</li><li>如果两个字符串后面的模式串是*说明有可能匹配</li></ul></li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} s * @param {string} p * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">isMatch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>s <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>       <span class="token keyword">const</span> sLen <span class="token operator">=</span> s<span class="token punctuation">.</span>length       <span class="token keyword">const</span> pLen <span class="token operator">=</span> p<span class="token punctuation">.</span>length       <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>sLen<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> dp<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>pLen<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>       <span class="token punctuation">}</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> pLen <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 一个时候'' 一个是字符串</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">// 如果是*的话要向前看两位</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> sLen <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> pLen <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这一位匹配上了</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 向前看一位</span>                       <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个是* </span>                               <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 1 并且前一位匹配了 那就可能是重复了 有可能重复一次 两次和n次  重复0次 就是dp[i][j-2] 重复n次 就是dp[i-1][j]</span>                                       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>                               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个没有匹配完成 当前的状态就是 前两个的状态</span>                                       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>                               <span class="token punctuation">}</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>sLen<span class="token punctuation">]</span><span class="token punctuation">[</span>pLen<span class="token punctuation">]</span> <span class="token comment">// 返回最后的状态</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">/** * @param {string} s * @param {string} p * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">isMatch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> m <span class="token operator">=</span> s<span class="token punctuation">.</span>length       <span class="token keyword">let</span> n <span class="token operator">=</span> p<span class="token punctuation">.</span>length       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 先假定都不能匹配 dp[i][j] 表示i-1,j-1的是否匹配</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 空字符串是匹配的</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// 有字符串和没有的匹配是false </span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span>  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token comment">// 没有字符串和有字符串的匹配 能匹配上吗</span>               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span>  <span class="token boolean">false</span>               <span class="token punctuation">}</span>               <span class="token comment">// dp[0][j] =  false// 没有字符串和有字符串的匹配 能匹配上吗</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'.'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>                               <span class="token comment">// 如果能匹配完成</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>                       <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                               <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                                       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>                               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                                       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>                               <span class="token punctuation">}</span>                       <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token comment">// console.table(dp)</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="312-戳气球"><a href="#312-戳气球" class="headerlink" title="312. 戳气球"></a><a href="https://leetcode.cn/problems/burst-balloons/">312. 戳气球</a></h4><p><img src="/images/image_8.2d99ee3b.png"></p><blockquote><p>首先在这个气球的两边加上两个1 这样就能够计算戳破两边的情况了<br>然后生成一个m+2*m+2的dp数组 ==dp[i][j]==表示在i,j这个开区间内最大的硬币数量<br>那么这个最大的硬币数量就是==I,j==最后戳破 保留I,j中间的位置 之间的乘积的最大值<br>==dp[i][k]&nbsp;+&nbsp;dp[k][j]&nbsp;+&nbsp;score[j]&nbsp;*&nbsp;score[k]&nbsp;*&nbsp;score[i]==<br>遍历顺序</p><ul><li>从下向上</li><li>从左到右</li><li>k也是从左到右 从i+1到j</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxCoins</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> score <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">...</span>nums<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 得到的奖品</span>    <span class="token keyword">let</span> m <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token comment">// 获得这个数组的长度</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// dp[i][j] 表示在i和j这个开区间内最大的硬币数量</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> m<span class="token punctuation">;</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> m <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>             <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> k <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>k <span class="token operator">&lt;</span> j<span class="token punctuation">;</span>k<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">+</span> dp<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> score<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> score<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">*</span> score<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token comment">// I,j是最后弄破的,所以这个的大小是k*i:j 左右的是左右区间的值                )</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="198-打家劫舍"><a href="#198-打家劫舍" class="headerlink" title="198. 打家劫舍"></a><a href="https://leetcode.cn/problems/house-robber/">198. 打家劫舍</a></h4><p><img src="/images/image_9.744792bb.png"></p><blockquote><p>典型的动态规划,一个房间可以有两种选择,偷还是不偷,可以定义一个二维的数组,0代表不偷1代表偷 这样以此类推来得到相应的公示</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">rob</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> m <span class="token operator">=</span> nums<span class="token punctuation">.</span>length       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 前一天偷了 和前一天没偷今天保持</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 前一天没偷 今天偷了</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// 一维数组也能够搞定</span><span class="token comment">// dp[i]表示今天偷或者不偷的最大值 今天偷或者不偷的最大值,是前一天头或者不偷的最大值和前两头头或者不偷的最大值与今天的值的和两者的最大值</span><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">rob</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> m <span class="token operator">=</span> nums<span class="token punctuation">.</span>length       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">/** * @param {number[][]} grid * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">minPathSum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">grid</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> m <span class="token operator">=</span> grid<span class="token punctuation">.</span>length       <span class="token keyword">let</span> n <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length       <span class="token comment">// let dp = new Array(m).fill(0).map(()=&gt;new Array(n).fill(Infinity))</span>       <span class="token comment">// dp[0][0] = grid[0][0]</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> grid<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> grid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>grid<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> grid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> grid<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>```js</p>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态规划总结-回文子串问题与额外问题</title>
      <link href="/2022/08/02/dong-tai-gui-hua-zong-jie-hui-wen-zi-chuan-yu-e-wai-wen-ti/"/>
      <url>/2022/08/02/dong-tai-gui-hua-zong-jie-hui-wen-zi-chuan-yu-e-wai-wen-ti/</url>
      
        <content type="html"><![CDATA[<p>回文子串问题总结与额外问题</p><span id="more"></span><h4 id="647-回文子串"><a href="#647-回文子串" class="headerlink" title="647. 回文子串"></a><a href="https://leetcode.cn/problems/palindromic-substrings/">647. 回文子串</a></h4><p><img src="/images/image_1.852d9c24.png"></p><blockquote><p>思路:布尔类型的dp[i][j]：表示区间范围[i,j] （注意是左闭右闭）的子串是否是回文子串，如果是dp[i][j]为true，否则为false。<br>双重for循环来判断,外层从下到上,内层从左到右<br>如果两个位置相同,首先判断两个位置的差值是不是小于等于1 如果是的话那么在I,j这个区间的值就是true<br>如果两个位置不用,那么这个就取决于i+1,j-1这个位置</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">647.</span> 回文子串<span class="token literal-property property">思路</span><span class="token operator">:</span>布尔类型的dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>：表示区间范围<span class="token punctuation">[</span>i<span class="token punctuation">,</span>j<span class="token punctuation">]</span> （注意是左闭右闭）的子串是否是回文子串，如果是dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>为<span class="token boolean">true</span>，否则为<span class="token boolean">false</span>。双重<span class="token keyword">for</span>循环来判断<span class="token punctuation">,</span>外层从下到上<span class="token punctuation">,</span>内层从左到右如果两个位置相同<span class="token punctuation">,</span>首先判断两个位置的差值是不是小于等于<span class="token number">1</span> 如果是的话那么在<span class="token constant">I</span><span class="token punctuation">,</span>j这个区间的值就是<span class="token boolean">true</span>如果两个位置不用<span class="token punctuation">,</span>那么这个就取决于i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>j<span class="token operator">-</span><span class="token number">1</span>这个位置<span class="token comment">/** * @param {string} s * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">countSubstrings</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// dp[i][j] 表示在区间i~j范围内 左闭右闭区间内 是不是会问字符串</span>  <span class="token comment">// 递推公式 如果 s[i] !== s[j] 那么这个肯定就不是回文字符串 </span>  <span class="token comment">// 如果s[i] === s[j] 如果两个是一个字符串 那么肯定是回文字符串</span>  <span class="token comment">// 如果 两个相差1 那么也是回文字符串</span>  <span class="token comment">// 如果 两个相差大于1 那么需要看i+1,j-1范围内是不是回文字符串了 如果是 那这个就是</span>  <span class="token comment">// 初始化 所有节点在一开始的时候就都初始化为false</span>  <span class="token comment">// 遍历顺序 我们要panduani+1,j-1 这个位置是在要计算的左下角 那么需要从地下到上面 从左到右</span>  <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">0</span>  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> s<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从下到上 i代表第一个</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span>j <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从左到右 j代表第二个 第二个要在第一个和结束之间</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 如果两个数字相同 判断两个的位置差是不是小于等于1</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>j<span class="token operator">-</span>i <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果两者相差1位以内</span>          result<span class="token operator">++</span> <span class="token comment">// 结果+1</span>          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 此时的dpdp[j][i]是真</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>          <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 如果这个j+1和i-1的是真 就是真</span>            result<span class="token operator">++</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>          <span class="token punctuation">}</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="516-最长回文子序列"><a href="#516-最长回文子序列" class="headerlink" title="516. 最长回文子序列"></a><a href="https://leetcode.cn/problems/longest-palindromic-subsequence/">516. 最长回文子序列</a></h4><p><img src="/images/image_2.20af87b4.png"></p><blockquote><p>dp[i][j]：字符串s在[i, j]范围内最长的回文子序列的长度为dp[i][j]。<br>因为这个最长的回文的子序列是可以删除的,所以可以用动规来做<br>遍历顺序从下到上,从左到右<br>如果i,j位置的数字相同,那么这个位置的长度就是i+1,j-1位置的最长回文子序列的长度+2<br>如果不同 那么这个位置的长度就是i+1,j和I,j-1这俩回文子序列长度的最大值<br>==注意==:长度可以是0+2 但是true和false 不能是直接等于 还是要进行一下判断 如果直接等于i+1,j-1 那么就会变成false了 但是如果是+2 那还是2 和直接设置2 是一样的。</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} s * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">longestPalindromeSubseq</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// dp[i][j] 表示以在区间i,j范围内最长子序列的长度</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">// 初始化 当i和j相同的时候 dp[i][j]是1  因为有一个元素 那么他的最长回文子序列长度就是1</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> s<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token comment">// 从后向前遍历 当i&gt;=0 的时候一直遍历</span>           <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token comment">// 从i+1遍历 一直到长度结尾</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                   <span class="token comment">// 如果i位置的和j位置的相同 那么以i,j为结尾的最长子序列的长度就是以i+1,j-1位结尾的最长子序列的长度+1</span>                   dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">2</span>               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                   <span class="token comment">// 如果两者不相同 那么就是以i+1,j 为结尾的最长子序列的长度 和以i,j-1位结尾的最长子序列的长度的最大值</span>                   dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>               <span class="token punctuation">}</span>           <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token comment">// 最后返回从起始到最后他的最长子序列的长度</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>s<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="354-俄罗斯套娃信封问题"><a href="#354-俄罗斯套娃信封问题" class="headerlink" title="354. 俄罗斯套娃信封问题"></a><a href="https://leetcode.cn/problems/russian-doll-envelopes/">354. 俄罗斯套娃信封问题</a></h4><p><img src="/images/image_3.24062fc1.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[][]} envelopes * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxEnvelopes</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">envelopes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       envelopes<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">return</span> a<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> b<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                       <span class="token keyword">return</span> b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span><span class="token punctuation">)</span>       <span class="token keyword">let</span> m <span class="token operator">=</span> envelopes<span class="token punctuation">.</span>length       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>       <span class="token keyword">let</span> max <span class="token operator">=</span> <span class="token number">1</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>envelopes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&gt;</span> envelopes<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>                               max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>max<span class="token punctuation">)</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> max<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="712-两个字符串的最小ASCII删除和"><a href="#712-两个字符串的最小ASCII删除和" class="headerlink" title="712. 两个字符串的最小ASCII删除和"></a><a href="https://leetcode.cn/problems/minimum-ascii-delete-sum-for-two-strings/">712. 两个字符串的最小ASCII删除和</a></h4><p><img src="/images/image_4.7f86d7ba.png"></p><blockquote><p>思路:计算两个字符的最小的删除ascii码,可以使用charCodeAt()这个api计算这个ascii码值</p><ul><li>两个字符串可以知道是应该生成一个dp的二维数组,而且是长度+1的</li><li>dp[i][j]就是代表以i-1和j-1位结尾的字符,要组合需要删除的ascii码值</li><li>首先初始化dp[i][0]和dp[0][j]的位置的值</li><li>然后计算后面的值<ul><li>如果相等的情况,不用删除</li><li>如果不等的情况,需要删除,计算删除的最小结果</li></ul></li></ul></blockquote><blockquote><p>/**<br>&nbsp;*&nbsp;@param&nbsp;{string}&nbsp;s1<br>&nbsp;*&nbsp;@param&nbsp;{string}&nbsp;s2<br>&nbsp;*&nbsp;@return&nbsp;{number}<br>&nbsp;*/<br>var&nbsp;minimumDeleteSum&nbsp;=&nbsp;function(s1,&nbsp;s2)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;m&nbsp;=&nbsp;s1.length<br>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;n&nbsp;=&nbsp;s2.length<br>&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;dp&nbsp;=&nbsp;new&nbsp;Array(m+1).fill(0).map(()=&gt;new&nbsp;Array(n+1).fill(Infinity))&nbsp;//&nbsp;初始化dp[i][j]表示以i-1,j-1为结尾的字符串要组合的最小的删除ascii码值<br>&nbsp;&nbsp;&nbsp;&nbsp;dp[0][0]&nbsp;=&nbsp;0&nbsp;//&nbsp;都是空串的话删除的是0<br>&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;1;i&nbsp;&lt;=&nbsp;m;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][0]&nbsp;=&nbsp;dp[i-1][0]&nbsp;+&nbsp;s1[i-1].charCodeAt()&nbsp;//&nbsp;一个是空串一个是有字符的那么ascii码值就是前一个的ascii码加上这个字符的ascii码<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;j&nbsp;=&nbsp;1;j&nbsp;&lt;=&nbsp;n;j++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[0][j]&nbsp;=&nbsp;dp[0][j-1]&nbsp;+&nbsp;s2[j-1].charCodeAt()<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;1;i&nbsp;&lt;=&nbsp;m;i++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;j&nbsp;=&nbsp;1;j&nbsp;&lt;=&nbsp;n;j++){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(s1[i-1]&nbsp;===&nbsp;s2[j-1]){<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;dp[i-1][j-1]<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;Math.min(dp[i-1][j]&nbsp;+&nbsp;s1[i-1].charCodeAt(),dp[i][j-1]&nbsp;+&nbsp;s2[j-1].charCodeAt())&nbsp;//&nbsp;去两个之间最小的那个<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;dp[m][n]<br>};</p></blockquote><h4 id="10-正则表达式匹配"><a href="#10-正则表达式匹配" class="headerlink" title="10.正则表达式匹配"></a>10.正则表达式匹配</h4><p><img src="/images/image_5.6b7324ef.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} s * @param {string} p * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">isMatch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>s <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>       <span class="token keyword">const</span> sLen <span class="token operator">=</span> s<span class="token punctuation">.</span>length       <span class="token keyword">const</span> pLen <span class="token operator">=</span> p<span class="token punctuation">.</span>length       <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>sLen<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> dp<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>pLen<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>       <span class="token punctuation">}</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> pLen <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 一个时候'' 一个是字符串</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">// 如果是*的话要向前看两位 因为有可能是匹配0次</span>       <span class="token punctuation">}</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> sLen <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> pLen <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这一位匹配上了</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 向前看一位</span>                       <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个是* </span>                               <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 1 并且前一位匹配了 那就可能是重复了 有可能重复一次 两次和n次  重复0次 就是dp[i][j-2] 重复n次 就是dp[i-1][j]</span>                                       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>                               <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个没有匹配完成 当前的状态就是 前两个的状态</span>                                       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>                               <span class="token punctuation">}</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>sLen<span class="token punctuation">]</span><span class="token punctuation">[</span>pLen<span class="token punctuation">]</span> <span class="token comment">// 返回最后的状态</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态规划总结-打家劫舍问题</title>
      <link href="/2022/07/29/dong-tai-gui-hua-zong-jie-da-jia-jie-she/"/>
      <url>/2022/07/29/dong-tai-gui-hua-zong-jie-da-jia-jie-she/</url>
      
        <content type="html"><![CDATA[<p>打家劫舍问题总结</p><span id="more"></span><h3 id="打家劫舍"><a href="#打家劫舍" class="headerlink" title="打家劫舍"></a>打家劫舍</h3><h4 id="198-打家劫舍"><a href="#198-打家劫舍" class="headerlink" title="198. 打家劫舍"></a><a href="https://leetcode.cn/problems/house-robber/">198. 打家劫舍</a></h4><p><img src="/images/image_1.66549dbb.png"></p><blockquote><p>==dp[i]==表示偷了第i家能得到的最多的钱</p><ul><li>那么这个==dp[i]==就是不偷前一家的钱,和偷了前两家的钱的最大值 加上当前这一家的钱</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">rob</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// dp[i] 表示偷第i家之后能获得的钱</span>       <span class="token comment">// dp[i] 可以由第i-1家得到 如果第i-1家偷了 那就是dp[i-1] 如果第i-1家没偷那就是dp[i-2]+nums[i]</span>       <span class="token comment">// 初始化 dp[0]和dp[1] dp[0]就是nums[0] dp1 就是0和1的最大值</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="213-打家劫舍-II"><a href="#213-打家劫舍-II" class="headerlink" title="213. 打家劫舍 II"></a><a href="https://leetcode.cn/problems/house-robber-ii/">213. 打家劫舍 II</a></h4><p><img src="/images/image_2.0441bbef.png"></p><blockquote><p>对于这种成环的问题,可以用一个单独的函数来对其进行计算</p><ul><li>无非就是存在两种情况,偷了第一家的,不能偷最后一家的</li><li>偷了最后一家的,不能偷第一家的</li><li>所以可以设定一个单独的函数,这个函数接收传进来的参数,要偷的起始和终止的位置</li><li>最终比较偷了之后的最大值</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">rob</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 考虑两种情况 一种是截取前n-1个元素 一种是截取后n-1个元素</span>   <span class="token keyword">let</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length   <span class="token keyword">if</span><span class="token punctuation">(</span>len <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token comment">// 如果这个数组是空的就返回0</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>len <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 如果这个数组就一个元素 就返回这个元素的值</span>   <span class="token keyword">let</span> before <span class="token operator">=</span> <span class="token function">robRange</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 截取前len-1个元素</span>   <span class="token keyword">let</span> after <span class="token operator">=</span> <span class="token function">robRange</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span>len<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 截取后len-1个元素</span>   <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>before<span class="token punctuation">,</span>after<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">const</span> <span class="token function-variable function">robRange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span>start<span class="token punctuation">,</span>end</span><span class="token punctuation">)</span><span class="token punctuation">{</span>   <span class="token keyword">if</span><span class="token punctuation">(</span>start <span class="token operator">===</span> end<span class="token punctuation">)</span> <span class="token keyword">return</span> nums<span class="token punctuation">[</span>start<span class="token punctuation">]</span> <span class="token comment">// 如果只有一个元素 就返回这个元素</span>   <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 生成一个nums.length长度的数组 并初始化其为0</span>   dp<span class="token punctuation">[</span>start<span class="token punctuation">]</span> <span class="token operator">=</span> nums<span class="token punctuation">[</span>start<span class="token punctuation">]</span> <span class="token comment">// 这个dp数组的start位置就是nums[start]的值</span>   dp<span class="token punctuation">[</span>start<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>start<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>nums<span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 第二个位置是第一个和下一个的值的较大值</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> start<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> end<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从start+2开始遍历 到end结束左闭右闭区间</span>       dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 计算方法和之前一样</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> dp<span class="token punctuation">[</span>end<span class="token punctuation">]</span> <span class="token comment">// 返回结束的位置的值</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="337-打家劫舍-III"><a href="#337-打家劫舍-III" class="headerlink" title="337. 打家劫舍 III"></a><a href="https://leetcode.cn/problems/house-robber-iii/">337. 打家劫舍 III</a></h4><p><img src="/images/image_3.768f81f5.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * Definition for a binary tree node. * function TreeNode(val, left, right) { *     this.val = (val===undefined ? 0 : val) *     this.left = (left===undefined ? null : left) *     this.right = (right===undefined ? null : right) * } */</span><span class="token comment">/** * @param {TreeNode} root * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">rob</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 后续遍历函数</span>   <span class="token keyword">const</span> <span class="token function-variable function">postOrder</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>       <span class="token comment">// 如果这个node 是null 的 就返回[0,0]就是不能偷</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>node <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>       <span class="token comment">// 判断左子树</span>       <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">postOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span>       <span class="token comment">// 判断右子树</span>       <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">postOrder</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span>       <span class="token comment">// 偷当前的节点 那么左右的子树就不能偷</span>       <span class="token keyword">const</span> Tou <span class="token operator">=</span> node<span class="token punctuation">.</span>val <span class="token operator">+</span> left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>       <span class="token comment">// 不偷当前的节点 那么子节点偷不偷的最大值</span>       <span class="token keyword">const</span> BuTou <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>left<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>right<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>right<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>       <span class="token keyword">return</span> <span class="token punctuation">[</span>BuTou<span class="token punctuation">,</span>Tou<span class="token punctuation">]</span> <span class="token comment">// 返回一个数组 不偷 和偷</span>   <span class="token punctuation">}</span>   <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">postOrder</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>   <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token operator">...</span>res<span class="token punctuation">)</span> <span class="token comment">// 解构数组得到这个最大值</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态规划总结-背包问题</title>
      <link href="/2022/07/28/dong-tai-gui-hua-zong-jie-bei-bao-wen-ti/"/>
      <url>/2022/07/28/dong-tai-gui-hua-zong-jie-bei-bao-wen-ti/</url>
      
        <content type="html"><![CDATA[<p>背包问题总结</p><span id="more"></span><h3 id="01背包"><a href="#01背包" class="headerlink" title="01背包"></a>01背包</h3><p><a href="https://leetcode.cn/problems/partition-equal-subset-sum/">==416. 分割等和子集==</a></p><p><img src="/images/image_1.96e9f0da.png"></p><blockquote><p>01背包问题</p><ul><li>外层物品</li><li>内层背包 倒叙遍历</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token number">416.</span> 分割等和子集<span class="token number">01</span>背包问题        <span class="token operator">-</span> 外层物品        <span class="token operator">-</span> 内层背包 倒叙遍历 <span class="token comment">/** * @param {number[]} nums * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">canPartition</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 先求得这个数组的和</span>    <span class="token keyword">let</span> sum <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span>val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>p <span class="token operator">+</span> val<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token comment">// 如果sum是奇数就返回false</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token comment">// 背包问题 求这个有没有子集 就是判断这个子集的元素和是不是等于sum/2</span>    <span class="token comment">// 背包的容量就是sum/2 元素的重量和价值都是nums[i]</span>    <span class="token comment">// 背包的递推公式是 dp[j] = Math.max(dp[j],dp[j-nums[i]]+nums[i])</span>    <span class="token comment">// 初始化 是正整数 就都初始化为0 如果有负数就初始化为负无穷</span>    <span class="token comment">// dp[i]表示容量为i的背包的能容纳的和</span>    <span class="token keyword">let</span> len <span class="token operator">=</span> nums<span class="token punctuation">.</span>length    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>sum<span class="token operator">/</span><span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 初始化背包 背包的容量是sum/2 为了方便取到sum/2 需要+1 因为数组是从0开始的</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 遍历物品 这里就是这个数组</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> sum<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span>j <span class="token operator">&gt;=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 从后向前遍历 最后面的索引也就是背包的容量是sum/2 判断当这个背包的容量大于这个数字的值的时候,让背包容量-- 判断这个dp数组的值</span>            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token comment">// // 判断如果这个dp[j] === sum/2 那就直接返回</span>            <span class="token comment">// if(dp[j] === sum/2){</span>            <span class="token comment">//     return true</span>            <span class="token comment">// }</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>sum<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">===</span> sum<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="1049-最后一块石头的重量-II"><a href="#1049-最后一块石头的重量-II" class="headerlink" title="1049. 最后一块石头的重量 II"></a><a href="https://leetcode.cn/problems/last-stone-weight-ii/">1049. 最后一块石头的重量 II</a></h4><p><img src="/images/image_2.24a62426.png"></p><blockquote><p>01背包问题</p><ul><li>外层物品</li><li>内从背包 倒叙遍历</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} stones * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">lastStoneWeightII</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">stones</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// 这个题目的主要思路就是将这个石头分成重量相近额两堆 那么都是在哎sum/2附近的最好</span>       <span class="token comment">// 所以可以使用背包问题 背包的容量就是和的一半 </span>       <span class="token comment">// 物品的重量和价值救赎stone[i]</span>       <span class="token comment">// dp[j]表示j容量的背包能装的价值是多少</span>       <span class="token keyword">let</span> sum <span class="token operator">=</span> stones<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span>val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>p<span class="token operator">+</span>val<span class="token punctuation">)</span> <span class="token comment">// 求的这个的sum</span>       <span class="token comment">// 对sum/2去小的值 用这个值生成背包容量</span>       <span class="token keyword">let</span> size <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>sum<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>size<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>       <span class="token comment">// 遍历物品也就是石头</span>       <span class="token keyword">let</span> len <span class="token operator">=</span> stones<span class="token punctuation">.</span>length       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token comment">// 遍历背包容量 从最大容量触发 一直到这个容量小于当前物品的重量</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> size<span class="token punctuation">;</span>j <span class="token operator">&gt;=</span> stones<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>stones<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span>stones<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token comment">// 遍历完成找出最大的dp[size] 表示sum/2的背包能装多少的石头</span>       <span class="token comment">// 剩下的石头就是 sum - dp[size] // 这个值肯定大于dp[size] 因为前面的去的是较小的值</span>       <span class="token comment">// 碰撞后的石头就是 sum -dp[size] - dp[size]</span>       <span class="token keyword">return</span> sum <span class="token operator">-</span> dp<span class="token punctuation">[</span>size<span class="token punctuation">]</span> <span class="token operator">-</span> dp<span class="token punctuation">[</span>size<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="494-目标和"><a href="#494-目标和" class="headerlink" title="494. 目标和"></a><a href="https://leetcode.cn/problems/target-sum/">494. 目标和</a></h4><p><img src="/images/image_3.0cb08b5e.png"></p><blockquote><p>01背包问题</p><ul><li>外层遍历物品</li><li>内层遍历背包 倒序遍历</li><li>因为是要求组合的个数 所以公式是 ==dp[j]&nbsp;+=&nbsp;dp[j-nums[i]]==</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @param {number} target * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">findTargetSumWays</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// 背包问题 </span>       <span class="token comment">// dp[j]表示和为j的表达式的数目</span>       <span class="token comment">// dp[j]可以由dp[j-nums[i]]推到过来 当有1这个元素的时候 dp[j] = dp[j-1] 当这个元素有很多的时候就是一个累加的操作</span>       <span class="token keyword">let</span> sum <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">sum<span class="token punctuation">,</span>val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>sum <span class="token operator">+</span> val<span class="token punctuation">)</span>       <span class="token keyword">if</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">&gt;</span> sum<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span> <span class="token comment">// 如果这个目标绝对值大于sum 那么就直接返回0 没有办法让和是sum</span>       <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token punctuation">(</span>target <span class="token operator">+</span> sum<span class="token punctuation">)</span><span class="token operator">%</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">return</span> <span class="token number">0</span> <span class="token comment">// 如果sum 和target的和是一个奇数的话 那么除以二就是小数 那么就不可能整数加载一起是个小数</span>       <span class="token punctuation">}</span>       <span class="token keyword">let</span> halfSum <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>target <span class="token operator">+</span>sum<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 求得这个一半的值 这个就是目的就是求数组的的数字的和等于这个halfsum</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>halfSum<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 初始化dp数组 dp[j]表示 和为j的有多少种数组的选择方法 初始值是0 是为了以后更好的累加</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 和为0的数组有1中选择方法 就是什么都不选</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token comment">// 遍历数组</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> halfSum<span class="token punctuation">;</span> j <span class="token operator">&gt;=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token comment">// 从后向前遍历 判断这个halfsumdp[j]等于前面的所有的和</span>                       dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j<span class="token operator">-</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// 这个的值就是存在nums[i]的话 就是dp[j-nums[i]]</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token comment">// 最后返回最后的值</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>halfSum<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="474-一和零"><a href="#474-一和零" class="headerlink" title="474. 一和零"></a><a href="https://leetcode.cn/problems/ones-and-zeroes/">474. 一和零</a></h4><p><img src="/images/image_4.0667d434.png"></p><blockquote><p>要求的是最大的子集的个数 也是01背包问题</p><ul><li>外层遍历物品,内层遍历背包</li><li>因为这个是两个维度的计算,所以背包是二维背包</li><li>因为只能用一次,所以是从后向前遍历</li></ul></blockquote><blockquote><p>主要思路:</p><ul><li>首先计算每个元素的个数</li><li>然后从后向前遍历背包</li><li>因为求的是一个背包里面元素的个数,所以每次的元素个数应该+1</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string[]} strs * @param {number} m * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">findMaxForm</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">strs<span class="token punctuation">,</span> m<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token comment">// console.log(dp)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> q <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>q <span class="token operator">&lt;</span> strs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>q<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">let</span> zeronum <span class="token operator">=</span> <span class="token number">0</span>               <span class="token keyword">let</span> onenum <span class="token operator">=</span> <span class="token number">0</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> s <span class="token keyword">of</span> strs<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>s <span class="token operator">===</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                               zeronum<span class="token operator">++</span>                       <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                               onenum<span class="token operator">++</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> m<span class="token punctuation">;</span>i <span class="token operator">&gt;=</span> zeronum<span class="token punctuation">;</span>i<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> n<span class="token punctuation">;</span>j <span class="token operator">&gt;=</span> onenum<span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>zeronum<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span>onenum<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>                            <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token comment">// console.log(dp)</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">/** * @param {string[]} strs * @param {number} m * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">findMaxForm</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">strs<span class="token punctuation">,</span> m<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// 是个二维背包的问题</span>       <span class="token comment">// dp[i][j]代表子集中1有i个0有j个的子集个数</span>       <span class="token comment">// dp[i][j] = Math.max(dp[i][j],dp[i-这个的0的个数][j-这个的1的个数]+1)</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> strs<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token keyword">let</span> oneNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> zeroNum <span class="token operator">=</span> <span class="token number">0</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> c <span class="token keyword">of</span> strs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>c <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                               zeroNum<span class="token operator">++</span>                       <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                               oneNum<span class="token operator">++</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> q <span class="token operator">=</span> m<span class="token punctuation">;</span>q <span class="token operator">&gt;=</span> oneNum<span class="token punctuation">;</span>q<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token comment">// 从后向前遍历 从第m向大于这个数字的遍历可以取到</span>                       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> l <span class="token operator">=</span> n<span class="token punctuation">;</span>l <span class="token operator">&gt;=</span> zeroNum<span class="token punctuation">;</span>l<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                               dp<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">[</span>l<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>q<span class="token punctuation">]</span><span class="token punctuation">[</span>l<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>q<span class="token operator">-</span>oneNum<span class="token punctuation">]</span><span class="token punctuation">[</span>l<span class="token operator">-</span>zeroNum<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="完全背包"><a href="#完全背包" class="headerlink" title="完全背包"></a>完全背包</h3><h4 id="518-零钱兑换-II"><a href="#518-零钱兑换-II" class="headerlink" title="518. 零钱兑换 II"></a><a href="https://leetcode.cn/problems/coin-change-2/">518. 零钱兑换 II</a></h4><p><img src="/images/image_5.36368205.png"></p><blockquote><p>因为可以用无数次,所以是完全背包</p><ul><li>这个要求的是组合的个数,所以说1,5和5,1是相同的,为了避免重复的加入就需要调整一下遍历顺序</li><li>先遍历物品,后遍历背包,而且都是正序的问题,这样的话就不会多次加入物品了</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} amount * @param {number[]} coins * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">change</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">amount<span class="token punctuation">,</span> coins</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// dp[j]表示和为j的组合数</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 因为和为0的组合数就是1 下面遍历的第一次的初始值就是 0+1 就有一种组合了</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token comment">// 先遍历物品 那么就不会多次遍历物品了</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j<span class="token operator">-</span>coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// 表示和为j的组合数就是 有这个coins[i]的时候 和为j-coins[i]组合数</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="377-组合总和-Ⅳ"><a href="#377-组合总和-Ⅳ" class="headerlink" title="377. 组合总和 Ⅳ"></a><a href="https://leetcode.cn/problems/combination-sum-iv/">377. 组合总和 Ⅳ</a></h4><p><img src="/images/image_6.30787f1a.png"></p><blockquote><p>题目说的是求组合的个数,但是实际的意思却是求排列的个数</p><ul><li>在求排列的个数的时候,1,2,1和1,1,2是不同的</li><li>如果求的是排列的个数 那么遍历的顺序也要做相应的调整<ul><li>外层应该遍历背包</li><li>内层去遍历物品</li><li>这样可以使得一个物品被多次加入到数组中</li></ul></li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @param {number} target * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">combinationSum4</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>       <span class="token comment">// 这个是个排列的问题 那就外层是遍历背包 内城是遍历物品</span>       <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>target<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>       dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 初始化为1</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> target<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token comment">// 遍历背包 从容量为0开始</span>               <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                       <span class="token comment">// 遍历物品从下标为0开始</span>                       <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                               <span class="token comment">// 如果这个背包的容量大于这个物品的重量name就可以放入背包</span>                               dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span>nums<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span>                       <span class="token punctuation">}</span>               <span class="token punctuation">}</span>       <span class="token punctuation">}</span>       <span class="token keyword">return</span> dp<span class="token punctuation">[</span>target<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="322-零钱兑换"><a href="#322-零钱兑换" class="headerlink" title="322. 零钱兑换"></a><a href="https://leetcode.cn/problems/coin-change/">322. 零钱兑换</a></h4><p><img src="/images/image_7.f3c16807.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} coins * @param {number} amount * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">coinChange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">coins<span class="token punctuation">,</span> amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>amount<span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">// 如果没有cmount或者amount是0的话 那就可以直接返回0  </span>       <span class="token keyword">return</span> <span class="token number">0</span>   <span class="token punctuation">}</span>   <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span> <span class="token comment">// 生成dp数组初始化为都是infinity dp[i]表示凑成i金额所需的最小硬币的个数</span>   dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 凑成0金额最小的硬币是0个</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> coins<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">// 遍历硬币</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token comment">// 遍历总价值容量</span>           dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>coins<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 金额j所需要的最小的硬币的个数 是 价格为j-coins[i]所需要的硬币数+1 和 金额为j所需要的硬币数其中的最小值</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">Infinity</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token comment">//如果最后是infinity说明没有这个组合 那就直接返回-1  否则返回值这个值</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// 这个的思路是先遍历生成完全平方数数组</span><span class="token comment">// 然后用完全平方数来进行背包的填充</span> <span class="token comment">/** * @param {number} n * @return {number} */</span> <span class="token keyword">var</span> <span class="token function-variable function">numSquares</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// dp[j] 表示和为j的完全平方数的最小数量</span>    <span class="token comment">// 如果这个数字就是完全平方数 那就直接返回这个数组就可以了</span>    <span class="token comment">// 不行的话要构造这个完全平方苏的数组</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token keyword">if</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">sqrt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">**</span><span class="token number">2</span> <span class="token operator">===</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>        arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// 这样就返回了这个n以内的完全平方数</span>    <span class="token comment">// dp[j] 表示和为j的完全平方数的最小数量</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 和为0 的完全平方数的个数是0</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment">// 遍历容器</span>      <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 遍历完全平方数</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">-</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>          <span class="token comment">// 如果这个和大于这个完全平方数</span>          dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 那么这个和为i的完全平方数的个数就是何为i-arr[j]的完全平方数的个数+1 和 自身的最小值</span>        <span class="token punctuation">}</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// console.table(dp)</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">// console.log(numSquares(13));</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="139-单词拆分"><a href="#139-单词拆分" class="headerlink" title="139. 单词拆分"></a><a href="https://leetcode.cn/problems/word-break/">139. 单词拆分</a></h4><p><img src="/images/image_8.63172559.png"></p><blockquote><p>这个也可以看做是一个完全背包的问题</p><ul><li>这个字符串就是这个背包</li><li>后面的数组就是这个物品集合</li><li>可以用后面的物品去填充前面的背包</li><li>因为物品可以用无数次,所以还是完全背包问题</li><li>同时因为这个物品可以放在前面也可以放在后面1,2,1和1,1,2不是同一个物品集合,所以求的是排列的问题</li><li>排列的问题就是外层遍历背包内层遍历物品</li><li>递推公式是 dp[i]要是想等于true 必须i-word[j].length的位置也是true并且,从i-length到i的位置的字符得是在这个word数组中的才可以</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">wordBreak</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> wordDict</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>   <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>length<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token comment">// dp[i]表示下标为i前面的字符串是不是可以由数组里面的字符串拼接形成</span>   dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 这个是为了后面的计算设置的</span>   <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> s<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       <span class="token comment">// 遍历背包</span>       <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> wordDict<span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>           <span class="token comment">// 遍历字符串数组 也就是遍历这个重量</span>           <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> wordDict<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>               <span class="token comment">// 如果当前的下标大于这个元素的长度的话 比如下标为1 起始时这个背包的容量为1 也就是这个数组元素的长度可以为1</span>               <span class="token comment">// 截取的时候是从当前的i值截取当前的j的长度这个位置开始截取 也就是截取掉这个长度后面的值判断是不是在数组里面 截取的值不包括这个i</span>               <span class="token comment">// console.log(s.slice(i-wordDict[j].length,i));</span>               <span class="token comment">// 如果i-这个数组元素的长度的位置是true 并且这个截取的字段是数组的字段 就让这个是true 因为是遍历所有这个字段都可以遍历到</span>               <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>wordDict<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>i<span class="token operator">-</span>wordDict<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">,</span>i<span class="token punctuation">)</span> <span class="token operator">===</span> wordDict<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                   dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>               <span class="token punctuation">}</span>           <span class="token punctuation">}</span>       <span class="token punctuation">}</span>   <span class="token punctuation">}</span>   <span class="token keyword">return</span> dp<span class="token punctuation">[</span>s<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>单调栈</title>
      <link href="/2022/07/27/dan-diao-zhan/"/>
      <url>/2022/07/27/dan-diao-zhan/</url>
      
        <content type="html"><![CDATA[<p>单调栈</p><span id="more"></span><h4 id="239-滑动窗口最大值"><a href="#239-滑动窗口最大值" class="headerlink" title="239. 滑动窗口最大值"></a><a href="https://leetcode.cn/problems/sliding-window-maximum/">239. 滑动窗口最大值</a></h4><p><img src="/images/image_1.83146ff7.png"></p><blockquote><p>思路：最大值问题我们可以采用大顶堆，具体就是维护一个大顶堆，初始的时候将0～k-1的元素加入堆中，存入的是值和索引的键值队，然后滑动窗口从从索引为k的元素开始遍历，将新进入滑动窗口的元素加堆中，当堆顶元素不在滑动窗口中的时候，不断删除堆顶堆元素，直到最大值在滑动窗口里。</p><ul><li>复杂度分析：时间复杂度O(nlogn)，n是nums的长度，将一个元素加入优先队列的时间复杂度是logn，最坏的情况下所有元素都要入队，所以复杂度是nlogn。空间复杂度是O(n)，最坏的情况下，所有元素都在队列中，所以是O(n)</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">大顶堆<span class="token comment">/** * @param {number[]} nums * @param {number} k * @return {number[]} */</span> <span class="token keyword">class</span> <span class="token class-name">Heap</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token function-variable function">comparator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 首先是这个类的构造函数 接受两个参数,一个是构造器,默认是小顶堆,也就是递增的 可以对其进行改造,如果是对象可以斜撑a.val和b.val,第二个参数是数据 默认是一个空数组 ,也可以传入默认的数据</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> comparator<span class="token punctuation">;</span><span class="token comment">//比较器</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heapify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//堆化函数</span>  <span class="token punctuation">}</span>  <span class="token function">heapify</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 如果个数小于2 没必要去堆化了 直接return</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 从第一个非叶子节点开始 一直到队首的节点</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bubbleDown</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//bubbleDown操作  不断的向下移动 为什么叶子节点不用向下移动呢 因为叶子节点已经没有了下面的节点 不需要向下移动</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">peek</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 找到堆顶元素</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//查看堆顶</span>  <span class="token punctuation">}</span>  <span class="token function">offer</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 向堆中加入元素</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//加入数组</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bubbleUp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调整加入的元素在小顶堆中的位置 这个函数会将传入的节点不断的向上移动 传入的是末尾的size-1</span>  <span class="token punctuation">}</span>  <span class="token function">poll</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 取出堆顶的元素</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果堆的大小是0 就没有元素 返回null 就行了</span>      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 拿到堆顶的元素</span>    <span class="token keyword">const</span> last <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拿到堆尾的元素</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果节点的大小不是0 就进行节点的移动 使其符合定义</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> last<span class="token punctuation">;</span><span class="token comment">//交换第一个元素和最后一个元素 将堆尾的元素插入变成第一个元素</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bubbleDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//bubbleDown操作 然后进行下移重新排序</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> result<span class="token punctuation">;</span> <span class="token comment">// 最后弹出堆顶的元素</span>  <span class="token punctuation">}</span>  <span class="token function">bubbleUp</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传入当前的假如进来的节点的位置</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当位置大于0的时候不断的向上移动</span>      <span class="token keyword">const</span> parentIndex <span class="token operator">=</span> <span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//父节点的位置</span>      <span class="token comment">//如果当前元素比父节点的元素小，就交换当前节点和父节点的位置</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>parentIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果比较之后是小于0 就满足的构造器函数 需要进行交换 当前节点比父节点小就要交换</span>        <span class="token comment">// 如果是 b - a 的话 那就是大顶堆 就是当前节点比父节点大 那也要交换 所以只需要改构造器就行了</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> parentIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//交换自己和父节点的位置</span>        index <span class="token operator">=</span> parentIndex<span class="token punctuation">;</span><span class="token comment">//不断向上取父节点进行比较</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//如果当前元素比父节点的元素大，不需要处理</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">bubbleDown</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> lastIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//最后一个节点的位置</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> leftIndex <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//左节点的位置</span>      <span class="token keyword">const</span> rightIndex <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">//右节点的位置</span>      <span class="token keyword">let</span> findIndex <span class="token operator">=</span> index<span class="token punctuation">;</span><span class="token comment">//bubbleDown节点的位置 默认值是当前的索引</span>      <span class="token comment">//找出左右节点中value小的节点</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>        leftIndex <span class="token operator">&lt;=</span> lastIndex <span class="token operator">&amp;&amp;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>leftIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>findIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token comment">// 如果左节点的索引小于最后一个节点的索引,并且 传入比较器之后呢,左边的位置的数字小于当前的位置的数字 就让当前的节点位置变成左节点的位置</span>      <span class="token punctuation">)</span> <span class="token punctuation">{</span>        findIndex <span class="token operator">=</span> leftIndex<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>        rightIndex <span class="token operator">&lt;=</span> lastIndex <span class="token operator">&amp;&amp;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>rightIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>findIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token comment">// 右节点也是相同的道题</span>      <span class="token punctuation">)</span> <span class="token punctuation">{</span>        findIndex <span class="token operator">=</span> rightIndex<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> findIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 执行完上面的判断之后 如果index不是findIndex了说明左右节点有小于当前节点的值</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> findIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//交换当前元素和左右节点中value小的</span>        index <span class="token operator">=</span> findIndex<span class="token punctuation">;</span> <span class="token comment">// 修改当前的index为记录的index 进行下一次循环</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// 如果这个index还是和findIndex相等了,那就没必要继续判断了 因为下面没有比他小的了 直接退出循环即可</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">swap</span> <span class="token punctuation">(</span><span class="token parameter">index1<span class="token punctuation">,</span> index2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//交换堆中两个元素的位置</span>    <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index2<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">size</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token keyword">var</span> <span class="token function-variable function">maxSlidingWindow</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 生成一个结果数组</span>    <span class="token keyword">let</span> heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Heap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>b<span class="token punctuation">.</span>val <span class="token operator">-</span> a<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token comment">// 大顶堆</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> k <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// k如果是3 那就是0~1 相当于加了2个进入堆里面</span>        heap<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">val</span><span class="token operator">:</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">index</span><span class="token operator">:</span>i<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 加入一个对象 val是这个值 index是索引</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从k-1开始向后 逐步加入队列</span>        heap<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">val</span><span class="token operator">:</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token literal-property property">index</span><span class="token operator">:</span>i<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 加入最新的</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">-</span> heap<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>index <span class="token operator">&gt;=</span> k<span class="token punctuation">)</span> heap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 只要是相差大于等于k那就弹出堆顶的</span>        ans<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>heap<span class="token punctuation">.</span><span class="token function">peek</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token comment">// 加入堆顶的</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ans <span class="token comment">// 返回结果</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>思路2:单调队列<br>维护单调递减队列,当进入滑动窗口的元素大于等于队尾的元素的时候,就让前面小于这个进入滑动窗口的元素不断的弹出,最后将这个元素加入到这个队列中,保证这个队列要单调递减,然后判断这个队头的元素是不是在窗口外面,如果在窗口外面的话,就把队头的元素也弹出,然后将更改后的队头的元素加入到结果数组中,注意:<code>等于的情况是不用弹出的</code></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @param {number} k * @return {number[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">maxSlidingWindow</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 维护一个单调队列  这个队列里面存放的是这个元素的下标 方便后面判断下标是否出界</span>    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 结果数组</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 遍历每个元素</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>queue<span class="token punctuation">[</span>queue<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 当队列中有值,并且这个队尾的元素小于这个要加入的元素的时候 就让队尾的元素弹出</span>            queue<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 不断的弹出</span>        <span class="token punctuation">}</span>        queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 将这个的下标加入</span>        <span class="token comment">// 然后判断队首的元素是不是超出了滑动窗口的范围</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&lt;=</span> i<span class="token operator">-</span>k<span class="token punctuation">)</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 超出了就弹出</span>        <span class="token comment">// 当这个i &gt;= k-1的时候就可以把队首的元素加入到这个数组中了</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;=</span> k<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> ans<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ans<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="84-柱状图中最大的矩形"><a href="#84-柱状图中最大的矩形" class="headerlink" title="84. 柱状图中最大的矩形"></a><a href="https://leetcode.cn/problems/largest-rectangle-in-histogram/">84. 柱状图中最大的矩形</a></h4><p><img src="/images/image_2.74384193.png"></p><blockquote><p>思路<br>构造一个单调递增栈,这个栈是用来放下标,首先要在这个数组的前面和后面单独新增一个0来占位,从前向后遍历这个数组,当这个新的入栈的这个数字是小于栈顶的元素的话,就可以弹出这个栈顶的元素,然后利用一个公式来计算值这个最大面积,直到这个栈顶的元素不小于这个新加入的元素.<br>将新加入的元素入栈,不断的循环就能得出结果</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} heights * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">largestRectangleArea</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">heights</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    heights <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">...</span>heights<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 在这个数组前后补0</span>    <span class="token keyword">let</span> maxArea <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> heights<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> heights<span class="token punctuation">[</span>stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 当新入栈的元素小于栈顶的元素的时候 就把这个栈顶的元素弹出</span>            <span class="token comment">// 因为这个栈的性质,这个左边的就是第一个小于这个数字的位置</span>            <span class="token keyword">let</span> topIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            maxArea <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>maxArea<span class="token punctuation">,</span>heights<span class="token punctuation">[</span>topIndex<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 这个最大的面积就是当前最大的面积 和 当前的下标 - 此时栈顶的下标 - 1 也就是当前的下标到这个元素最左边的下标的位置</span>        <span class="token punctuation">}</span>        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 然后将当前的下标加入进入</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> maxArea<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="85-最大矩形"><a href="#85-最大矩形" class="headerlink" title="85. 最大矩形"></a><a href="https://leetcode.cn/problems/maximal-rectangle/">85. 最大矩形</a></h4><p><img src="/images/image_3.59b84a1d.png"></p><blockquote><p>其实是上一题的变种,遍历从第一行到最后一行为x轴的柱状图,然后去循环每一行,计算这一行为底的柱状图的最大面积,然后更新最大的矩形面积</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {character[][]} matrix * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">maximalRectangle</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">matrix</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 要返回的数据</span>    <span class="token keyword">let</span> heights <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 生成一个一维数组,来计算值这个柱状图的高度</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> matrix<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> matrix<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>matrix<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果matrix这个位置是1 那就让柱状图的高度+1</span>                heights<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">++</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 如果是0的话 就让柱状图的高度变成0</span>                heights<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">largeArea</span><span class="token punctuation">(</span>heights<span class="token punctuation">)</span>        res <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span>result<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">largeArea</span><span class="token punctuation">(</span><span class="token parameter">heights</span><span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span>    heights <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token operator">...</span>heights<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> heights<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> heights<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> heights<span class="token punctuation">[</span>stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> TopIndex <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            res <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span>heights<span class="token punctuation">[</span>TopIndex<span class="token punctuation">]</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">-</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="496-下一个更大元素-I"><a href="#496-下一个更大元素-I" class="headerlink" title="496. 下一个更大元素 I"></a><a href="https://leetcode.cn/problems/next-greater-element-i/">496. 下一个更大元素 I</a></h4><p><img src="/images/image_4.eae88e29.png"></p><blockquote><p>思路:可以准备一个栈和一个map,这个字栈是一个单调递减栈,用来生成map,map记录的是下标为i的时候,下一个更大的值是多少</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums1 * @param {number[]} nums2 * @return {number[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">nextGreaterElement</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums1<span class="token punctuation">,</span> nums2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 结果数组</span>    <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 栈元素</span>    <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums2<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> nums2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 如果这个stack有长度,并且这个栈顶的元素的大小小于当前的大小 那么这个当前的元素就是这个栈顶元素的下一个大的值 可以将这个弹出 记录到map中</span>            <span class="token keyword">let</span> key <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            map<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> nums2<span class="token punctuation">[</span>i<span class="token punctuation">]</span>        <span class="token punctuation">}</span>        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums2<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 然后把这个元素放入这个栈里面</span>    <span class="token punctuation">}</span>    <span class="token comment">// 然后把栈里面的元素都取出来 就是说后面没有比他更大的值了 就是-1</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> stack<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        map<span class="token punctuation">[</span>stack<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>    <span class="token punctuation">}</span>    <span class="token comment">// 遍历这个nums1中的数据,生成这个ans</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums1<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        ans<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>map<span class="token punctuation">[</span>nums1<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ans<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="42-接雨水"><a href="#42-接雨水" class="headerlink" title="42. 接雨水"></a><a href="https://leetcode.cn/problems/trapping-rain-water/">42. 接雨水</a></h4><p><img src="/images/image_5.302bc5a6.png"></p><blockquote><p>思路1:<br>额外定义两个数组:一个记录这个点左边包括这个点的最大值,一个记录这个点右边包括这个点的最大值<br>然后从前向后遍历,计算这个点左边的最大值和右边的最大值中的最小那一个 和当前节点的高度相减 这个就是这个位置所能接到的雨水的大小<br>不断的累加</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} height * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">trap</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>height<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token number">0</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> leftMax <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>height<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    leftMax<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> height<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> height<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>         leftMax<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>leftMax<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 取出这个位置的最大值</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> rightMax <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>height<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    rightMax<span class="token punctuation">[</span>height<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> height<span class="token punctuation">[</span>height<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> height<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">;</span>j <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span>j<span class="token operator">--</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        rightMax<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>rightMax<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>height<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 返回的结果</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> height<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        ans <span class="token operator">+=</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>leftMax<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>rightMax<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ans<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>思路2<br>遍历height数组,将其中的元素加入到单调递减栈中,判断当前的柱子的高度是不是大于栈顶柱子的高度,如果大于的话 就把栈顶的弹出,弹出后的栈顶的元素就是这个弹出原来的元素的左边的比他大的元素位置,每次出栈都要累加一下这个面积</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} height * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">trap</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">height</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> ans <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 记录结果</span>    <span class="token keyword">let</span> stack <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 单调递减栈</span>    <span class="token keyword">let</span> n <span class="token operator">=</span> height<span class="token punctuation">.</span>length    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>stack<span class="token punctuation">.</span>length <span class="token operator">&amp;&amp;</span> height<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> height<span class="token punctuation">[</span>stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 如果这个栈有元素 并且当前位置的高度 大于栈顶位置的高度 就把这个栈顶给弹出</span>            <span class="token keyword">let</span> top <span class="token operator">=</span> stack<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>stack<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">// 如果这个栈是空了 就break退出循环</span>                <span class="token keyword">break</span>            <span class="token punctuation">}</span>            <span class="token keyword">let</span> left <span class="token operator">=</span> stack<span class="token punctuation">[</span>stack<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 左边比弹出大的元素</span>            <span class="token keyword">let</span> currentWidth <span class="token operator">=</span> i <span class="token operator">-</span> left <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// 此时的宽度</span>            <span class="token keyword">let</span> currentHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>height<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">,</span>height<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> height<span class="token punctuation">[</span>top<span class="token punctuation">]</span> <span class="token comment">// 能接雨水的高度 是左右两边的最小值 - 当前的高度</span>            ans <span class="token operator">+=</span> currentHeight <span class="token operator">*</span> currentWidth        <span class="token punctuation">}</span>        <span class="token comment">// 然后将此时的加入到数组中</span>        stack<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> ans<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 单调栈 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>列表页面下拉优化-虚拟长列表技术</title>
      <link href="/2022/07/25/lie-biao-ye-mian-xia-la-you-hua-xu-ni-chang-lie-biao-ji-zhu/"/>
      <url>/2022/07/25/lie-biao-ye-mian-xia-la-you-hua-xu-ni-chang-lie-biao-ji-zhu/</url>
      
        <content type="html"><![CDATA[<p>列表页面下拉优化-虚拟长列表技术</p><span id="more"></span><h3 id="面试题"><a href="#面试题" class="headerlink" title="面试题"></a>面试题</h3><p>使用vue渲染大量数据的时候应该怎么优化,说下你的思路</p><p>思路:</p><ul><li>描述大量数据带来的问题</li><li>分不同情况做不同的处理</li><li>总结一下</li></ul><h4 id="描述带来的问题"><a href="#描述带来的问题" class="headerlink" title="描述带来的问题"></a>描述带来的问题</h4><p>在大型的项目里面经常要渲染大量的数据,很容易出现卡顿的情况,比如一些大表格,或者是很复杂的dom 树</p><h4 id="分不同情况做不同的处理"><a href="#分不同情况做不同的处理" class="headerlink" title="分不同情况做不同的处理"></a>分不同情况做不同的处理</h4><p>通常情况下会分门别类的进行处理</p><ul><li>如果可能的话,会和后端商量,能不能不要一下子发这么多数据,可以采用分页的方式进行发送</li><li>就可以使用虚拟滚动,像是<code>vue-virtual-scroller</code>这样的滚动方案,只渲染视口范围内的数据,这样的话虽然渲染的数据量很大,但是看到的只是可见范围内的渲染,整体来说内存消耗就不会太大</li><li>避免更新:可以使用<code>v-once</code>的方式,只让页面渲染一次</li><li>可以使用优化更新的方式:<code>v-memo  keep-alive</code>缓存子树,有条件进行更新,提高复用,避免不必要的更新</li><li>按需加载数据:通过<code>懒加载</code>的方式,在用户需要的时候更新加载数据</li></ul><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>还是要看具体需求,首先要在设计上避免大数据的渲染,是在需要大数据渲染的haul,可以通过虚拟长列表的形式来完成优化渲染数量,最后优化更新,如果不需要更新可以使用v-once的方式避免更新,如果需要缓存可以使用keep-alive来缓存内容,提高性能.其他也可以使用懒加载等方式来优化页面的加载</p><h3 id="虚拟长列表的原因"><a href="#虚拟长列表的原因" class="headerlink" title="虚拟长列表的原因"></a>虚拟长列表的原因</h3><blockquote><p>一般情况下对于移动端的页面，一个页面中要加载很多的数据，如果不加以处理，会使得整个页面的性能消耗过大，一般情况下会使用分页的形式，监测这个页面是不是到达了最底端，如果是到了最底端就用axios去获取下一页的数据，拼接到页面下边，达到列表继续渲染的效果<br>但是会存在一定的问题:一个长列表的页面,如果要展示成千上万条数据,那么页面中就会有数万条甚至是数十万个html节点,会消耗巨大的浏览器性能,进而给用户造成很不好的体验<br>主要有以下几点</p><ul><li>页面等待时间长</li><li>CPU计算能力不够</li><li>GPU渲染能力不够</li><li>RAM内存容量不够</li></ul></blockquote><h3 id="如何优化"><a href="#如何优化" class="headerlink" title="如何优化"></a>如何优化</h3><ul><li>不把长列表数据一次性全部直接显示在页面上；</li><li>截取长列表一部分数据用来填充屏幕容器区域；</li><li>长列表数据不可视部分使用使用空白占位填充；</li><li>监听滚动事件根据滚动位置动态改变可视列表；</li><li>监听滚动事件根据滚动位置动态改变空白填充。</li><li>我们也把上面的优化行为简称为「虚拟滚动」</li></ul><h3 id="虚拟滚动"><a href="#虚拟滚动" class="headerlink" title="虚拟滚动"></a>虚拟滚动</h3><p>就是根据<code>容器可视区域</code>和<code>列表容积数量</code>,监听用户<code>滑动或者滚动</code>的事件,动态<code>截取长列表数据中的部分数据到页面上</code>,动态<code>使用空白占位填充容器的上下滚动区域内容</code>,模拟实现原生滚动效果</p><p><img src="/image_1.637cfff1.png"></p><h3 id="实现步骤"><a href="#实现步骤" class="headerlink" title="实现步骤"></a>实现步骤</h3><h4 id="计算容器最大容积数量"><a href="#计算容器最大容积数量" class="headerlink" title="计算容器最大容积数量"></a>计算容器最大容积数量</h4><ol><li>拿到滚动容器的高度,可以在mounted里面获取 `.offsetHeight`</li><li>记录单条数据的高度,可以单独定义</li><li>计算两者的高度相除之后的结果,然后再+2,得到这个页面要显示的数据条数</li><li>但是在使用的过程中,页面有可能会发生大小的变化,比如说ipad端,有可能分屏,所以需要监听这个window的resize事件,重新计算这个最大容积数量,可以单独定义一个方法</li></ol><h4 id="监听滚动事件动态截取数据"><a href="#监听滚动事件动态截取数据" class="headerlink" title="监听滚动事件动态截取数据"></a>监听滚动事件动态截取数据</h4><p>监听用户滚动/滑动事件,根据滚动位置,动态计算当前可视区域起始数据的索引位置startIndex</p><ol><li><p>监听滚动事件 需要用到`@scroll.passive`这个监听事件</p></li><li><p>在这个事件的方法之中,需要计算当前是滚动的第几条数据<br> a. 可以通过`scrollTop`获取窗口到文档顶部的距离<br> b. 通过页面到文档顶部的距离/单条新闻的距离 取整数部分 得到这是第几条数据<br> c. 计算得到结束的索引 可以通过开始索引+容器容积得到<br> d. 需要判断这个结束的索引是不是存在,如果不存在的话,就把这个所有的数据的最后一个索引赋值给结束索引</p></li><li><p>通过这个开始的索引和结束的索引,得到这个需要显示的列表元素,直接slice就行了</p></li><li><p>修改渲染的部分的数据,为上面计算得到的数组</p></li></ol><h4 id="使用计算属性动态设置上下空白占位符"><a href="#使用计算属性动态设置上下空白占位符" class="headerlink" title="使用计算属性动态设置上下空白占位符"></a>使用计算属性动态设置上下空白占位符</h4><blockquote><p>上面的会出现一个问题,就是当我们设置了动态截取后的数据,当滚动的时候,就无法滚动了,这是因为容器在滚动的过程中,因为动态移除,谈价数据节点丢失,进而强制清楚了顶部列表中的dom节点,导致滚动定位向上移动一个列表元素高度,出现了死循环</p></blockquote><p>需要使用空白进行占位</p><ul><li>定义上空白填充的高度 就是开始的节点*每个的高度</li><li>定义下空白填充的高度 就是整个数据的高度-结束的下标*每个的高度</li><li>可以在这个滚动容器内部的渲染数据的外面再加一个div,在这个div里面通过padding来设置这个上下的空白区域</li></ul><h4 id="下拉触底自动请求加载数据"><a href="#下拉触底自动请求加载数据" class="headerlink" title="下拉触底自动请求加载数据"></a>下拉触底自动请求加载数据</h4><blockquote><p>判断页面滚动到了最底部:可以通过这个开始的索引和页面的容积之和 看是不是大于已有数据的长度-1 如果是的话就说明到达了最底部</p></blockquote><ul><li>监听滚动到了页面的最底部,就可以发起请求获取新数据了,就可以将这个新的数据追加到数据数组中</li><li>还需要注意的是:<code>要在发起请求的时候判断当前的状态,应该是未请求的状态才能发起心情求,这样避免多次滚动发送多次请求</code></li></ul><h4 id="滚动事件节流定时器优化"><a href="#滚动事件节流定时器优化" class="headerlink" title="滚动事件节流定时器优化"></a>滚动事件节流定时器优化</h4><blockquote><p>因为这个滚动事件的触发频率是很高的,所以可以使用节流的方式来对这个滚动事件进行节流</p><ul><li>可以设置一个定时器,来限制监听滚动事件的行为</li><li>这个时间可以设置为30ms,引入如果设置太大的话,会使得这个页面可能出现白屏的效果,如果设置过大,滚动到底部可能这个定时器还没执行完,不能发送数据</li></ul></blockquote><h4 id="滚动事件节流请求动画帧优化"><a href="#滚动事件节流请求动画帧优化" class="headerlink" title="滚动事件节流请求动画帧优化"></a>滚动事件节流请求动画帧优化</h4><p>requestAnimationFrame介绍</p><p>setTimeOut是说不管页面是不是渲染出来,都会执行下一次的操作,<code>requestAnimationFrame</code>会是上一个页面渲染完成了才进行下一次的渲染</p><ul><li>需要计算这个渲染的时间间隔  就是1s除以显示器的帧率一般是60</li><li>通过这个api完成这个动画帧的更新</li></ul><h4 id="优化上下滚动出现的白屏"><a href="#优化上下滚动出现的白屏" class="headerlink" title="优化上下滚动出现的白屏"></a>优化上下滚动出现的白屏</h4><blockquote><p>问题:如果这个页面很快的滚动 就会出现白屏的效果,当电脑性能不高的时候,就会影响用户体验<br>可以在上下设置滚动的缓冲区域解决白屏效果,也就是在上面保留一部分的数据,在下面提前加载一部分的数据</p></blockquote><ul><li>修改的方法:主要是修改这个startIndex,如果这个startIndex 小于页面的容积,那么说明上面还有一屏,就可以让startIndex 是0</li><li>如果是大于了页面的容积,那么就说明上面的超出了页面的一屏,所以可以让satrtIndex是当前的开始节点-页面的容积</li><li>这样就实现了上面多一屏的效果</li><li>这个结束位置的索引 也需要扩大一下范围 ,就是让结束位置的索引变成这个开始位置+两个位置的索引</li></ul><h4 id="路由切换定位路由滚动位置"><a href="#路由切换定位路由滚动位置" class="headerlink" title="路由切换定位路由滚动位置"></a>路由切换定位路由滚动位置</h4><blockquote><p>如果需要返回到相同的页面,可以给这个页面路由加一个<code>keep-alive</code>属性,这样能够做到缓存的效果<br>读过需要回到原来的位置:</p><ul><li>keepalive产生了actived的钩子函数</li><li>可以在这个时候,定义一个变量记录当前的滚动的距离</li><li>可以在这个声明周期中,通过元素的scrollTop属性,修改这个滚动的距离为记录的距离</li></ul></blockquote><h4 id="构件插件直接调用"><a href="#构件插件直接调用" class="headerlink" title="构件插件直接调用"></a>构件插件直接调用</h4><ul><li>代码抽离 .vue cssjs</li><li>注册index.js,注册插件 在install这里通过vue注册组件,vue.component</li><li>然后将其进行导出</li><li>在main.js中进行注册 通过vue.use来使用</li><li>关键信息抽离<ul><li>请求提示信息</li><li>单条数据的高度</li><li>请求的url</li><li>请求的数据的条数</li><li>下拉后请求的条数</li></ul></li></ul><h4 id="使用作用域插槽来传递内容的结构"><a href="#使用作用域插槽来传递内容的结构" class="headerlink" title="使用作用域插槽来传递内容的结构"></a>使用作用域插槽来传递内容的结构</h4><blockquote><p>就是说这个内容要由父组件进行控制,而不是组件内部完全自己定义<br>可以使用作用域插槽来从父组件传递到子组件,样式应该放在父组件里面<br>因为数据是在子组件里面获取的,所以通过子组件传递到父组件,父组件进行渲染</p></blockquote><h4 id="技术场景扩展简介"><a href="#技术场景扩展简介" class="headerlink" title="技术场景扩展简介"></a>技术场景扩展简介</h4><ol><li>使用上下空白占位的方式实现虚拟滚动,通过div设置高度,来实现占位</li><li>使用横屏滑动实现虚拟滚动</li><li>浮动模型实现虚拟滚动</li><li>微信小程序长列表虚拟滚动</li></ol>]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BFS算法解题套路框架</title>
      <link href="/2022/07/25/bfs-suan-fa-jie-ti-tao-lu-kuang-jia/"/>
      <url>/2022/07/25/bfs-suan-fa-jie-ti-tao-lu-kuang-jia/</url>
      
        <content type="html"><![CDATA[<p>BFS 的核心思想应该不难理解的，就是把一些问题抽象成图，从一个点开始，向四周开始扩散。一般来说，我们写 BFS 算法都是用「队列」这种数据结构，每次将一个节点周围的所有节点加入队列。</p><span id="more"></span><h4 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h4><p>BFS 的核心思想应该不难理解的，就是把一些问题抽象成图，从一个点开始，向四周开始扩散。一般来说，我们写 BFS 算法都是用「队列」这种数据结构，每次将一个节点周围的所有节点加入队列。</p><p>BFS 相对 DFS 的最主要的区别是：BFS 找到的路径一定是最短的，但代价就是空间复杂度可能比 DFS 大很多</p><p>BFS框架代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token constant">BFS</span><span class="token punctuation">(</span><span class="token parameter">start<span class="token punctuation">,</span>target</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 计算从起点staet到终点target的最近距离</span>    <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 核心数据结构</span>    <span class="token keyword">let</span> visited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 避免走回头路</span>    queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span> <span class="token comment">// 将起点加入到队列</span>    visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>start<span class="token punctuation">)</span> <span class="token comment">// 这个已经被访问过</span>    <span class="token keyword">let</span> step <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 记录扩散的步数</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 当这个的队列不为空的时候 </span>        <span class="token keyword">let</span> sz <span class="token operator">=</span> queue<span class="token punctuation">.</span>length <span class="token comment">// 获得这个队列此时的长度</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> cur <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 弹出当前的头结点</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">// 如果这个是目标值</span>                <span class="token keyword">return</span> step <span class="token comment">// 返回步数</span>            <span class="token punctuation">}</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> x <span class="token keyword">of</span> cur<span class="token punctuation">.</span><span class="token function">adj</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">// 将这个的相邻的节点加入队列</span>                queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>                visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token comment">// 记录已经访问过</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        step<span class="token operator">++</span> <span class="token comment">// 更新步数</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>队列queue就是BFS的核心结构,cur.adj（）泛指cur的相邻节点,比如说二维数组中,cur上下左右的四面的节点就是相邻节点,visited数组的主要作用是防止走回头路,大部分时候都是必须的,像是一般的二叉树结构,没有子节点指向父节点的指针,不会走回头路,就不需要visited</p><h4 id="二叉树的最小高度"><a href="#二叉树的最小高度" class="headerlink" title="二叉树的最小高度"></a>二叉树的最小高度</h4><p><a href="https://leetcode.cn/problems/minimum-depth-of-binary-tree/">111. 二叉树的最小深度</a></p><p><img src="/images/image_1.26d3b48f.png"></p><p>思路:</p><p>1 递归的思路,递归的参数是一个节点 先求得左子树的最小深度 再求出右子树的最小深度 然后计算这个节点的最小深度 最后返回这个最小深度+1</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">minDepth</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> root<span class="token punctuation">.</span>right <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 左节点是null 右节点是null 就返回0 深度是0</span>        <span class="token keyword">return</span> <span class="token number">1</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">Infinity</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token number">Infinity</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">{</span>        left <span class="token operator">=</span> <span class="token function">minDepth</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">{</span>        right <span class="token operator">=</span> <span class="token function">minDepth</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>思路2: 用BFS写法</p><p>根据以上的bfs框架可知,首先要确定起点和终点是什么,怎么判断到达了终点</p><p>显然起点就是root的根节点,终点就是最靠近根节点的叶子结点 叶子节点就是左右两个子节点都是null</p><p>针对以上的框架稍加改造可得</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">minDepth</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">0</span>    <span class="token keyword">let</span> depth <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">let</span> size <span class="token operator">=</span> queue<span class="token punctuation">.</span>length        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> node <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 弹出这个节点</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> node<span class="token punctuation">.</span>right <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">return</span> depth            <span class="token punctuation">}</span>            node<span class="token punctuation">.</span>left <span class="token operator">&amp;&amp;</span> queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span>            node<span class="token punctuation">.</span>right <span class="token operator">&amp;&amp;</span> queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        depth<span class="token operator">++</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>这里注意这个 while 循环和 for 循环的配合，while 循环控制一层一层往下走，for 循环利用 sz 变量控制从左到右遍历每一层二叉树节点</p><h4 id="一些问题"><a href="#一些问题" class="headerlink" title="一些问题"></a>一些问题</h4><p>为什么BFS可以找到最短距离,DFS不行吗</p><blockquote><p>BFS的逻辑是 dpeth每向前走一步 所有这一层的节点都向前走了异步,这保证到达终点的时候,走的步数是最小的<br>DFS也是可以找最短路径的,但是时间复杂度要高得多,DFS实际是靠递归的栈来记录走过的路径,要找最短的路径,肯定要把所有的都判断一遍,左移这个dfs的方法是时间复杂度很高的</p></blockquote><p>既然BFS那么好,那为什么要DFS呢</p><blockquote><p>因为bfs饿空间复杂度搞,dfs 空间复杂度较低<br>就拿刚才所说的二叉树来说,对于dfs空间复杂度就是一个装满这个节点的栈,也就是o(logn)<br>但是对于bfs废,队列每次都存着二叉树的一层的节点,这样的话最坏的情况空间复杂度是n/2 ,o(n)</p></blockquote><h4 id="解开密码锁的最小次数"><a href="#解开密码锁的最小次数" class="headerlink" title="解开密码锁的最小次数"></a>解开密码锁的最小次数</h4><p><a href="https://leetcode.cn/problems/open-the-lock/">==752. 打开转盘锁==</a></p><p><img src="/images/image_2.cd225c8a.png"></p><blockquote><p>思路<br>第一步,不管所有的限制条件,不管deadends和target的限制,就思考一个问题:如果让设计一个算法,穷举所有的可能的密码组合,会怎么做<br>比如说0000,可以穷举出9000,1000,0100,0900… 一共八种组合,再以这个8个为基础,找出其他的所有可能<br>这样的话,这个关系就可以抽象成一幅图,每个节点有8个相邻的节点,又让求最短距离,就可以用bfs<br>简易框架如下:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">openLock</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">deadends<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">plusUp</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span>j</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 向上转的函数 传入的参数是字符串和位置</span>        <span class="token keyword">let</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'0'</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// 返回新的字符串</span>    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">plusDown</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span>j</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 向下转的函数 传入的是字符串和位置</span>        <span class="token keyword">let</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'9'</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">bfs</span><span class="token punctuation">(</span><span class="token parameter">target</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 传入一个目标值 也就是这个的框架</span>        <span class="token keyword">let</span> q <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 创建一个队列</span>        q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'0000'</span><span class="token punctuation">)</span> <span class="token comment">// 先把初始的位置放入队列中</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> size <span class="token operator">=</span> q<span class="token punctuation">.</span>length <span class="token comment">// 获得这个的大小</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span>size<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">// 逐步弹出每一个</span>                <span class="token keyword">let</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                <span class="token comment">// 判断是否到达重点</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token punctuation">}</span>                <span class="token comment">// 把这个的相邻节点加入到队列中</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                   `                    <span class="token keyword">let</span> up <span class="token operator">=</span> <span class="token function">plusUp</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span>j<span class="token punctuation">)</span>                    <span class="token keyword">let</span> down <span class="token operator">=</span> <span class="token function">plusUp</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span>j<span class="token punctuation">)</span> <span class="token comment">// 获得向上向下的下一个字符</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>up<span class="token punctuation">)</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>down<span class="token punctuation">)</span> <span class="token comment">// 放入队列</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>            <span class="token comment">// 这里计算步数</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><p>|当然这段代码还是有很多的问题如<br>会走回头路,比如从0000走到0001 后面还会从0001走到0000 这样会无限循环<br>没有终止条件,按照题目的要求,需要找到target就应该结束并返回波动的次数<br>没有对deadends的处理,这些死亡密码是不能出现的,如果出现了就调过<br>下面针对这几个问题进行修改<br></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string[]} deadends * @param {string} target * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">openLock</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">deadends<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">plusUp</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span>j</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 向上转的函数 传入的参数是字符串和位置</span>        <span class="token keyword">let</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'9'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'0'</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span> <span class="token comment">// 返回新的字符串</span>    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">plusDown</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span>j</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 向下转的函数 传入的是字符串和位置</span>        <span class="token keyword">let</span> str <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'9'</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            str<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">Number</span><span class="token punctuation">(</span>str<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token comment">// 防止走回头路 需要一个visited</span>    <span class="token keyword">let</span> visited <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">// 传入一个目标值 也就是这个的框架</span>    <span class="token keyword">let</span> q <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 创建一个队列</span>    <span class="token keyword">let</span> step <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 记录要波动的次数</span>    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'0000'</span><span class="token punctuation">)</span> <span class="token comment">// 先把初始的位置放入队列中</span>    visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'0000'</span><span class="token punctuation">)</span> <span class="token comment">// 这个已经走过了</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>q<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">let</span> size <span class="token operator">=</span> q<span class="token punctuation">.</span>length <span class="token comment">// 获得这个的大小</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 逐步弹出每一个</span>            <span class="token keyword">let</span> cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            <span class="token comment">// 判断是不是在死亡数组中</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>deadends<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">continue</span>            <span class="token punctuation">}</span>            <span class="token comment">// 判断是否到达终点</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">==</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">return</span> step            <span class="token punctuation">}</span>            <span class="token comment">// 把这个的相邻节点加入到队列中</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> <span class="token number">4</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">let</span> up <span class="token operator">=</span> <span class="token function">plusUp</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span>j<span class="token punctuation">)</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>up<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>up<span class="token punctuation">)</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>up<span class="token punctuation">)</span>                <span class="token punctuation">}</span>                <span class="token keyword">let</span> down <span class="token operator">=</span> <span class="token function">plusDown</span><span class="token punctuation">(</span>cur<span class="token punctuation">,</span>j<span class="token punctuation">)</span> <span class="token comment">// 获得向上向下的下一个字符</span>                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>visited<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>down<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    visited<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>down<span class="token punctuation">)</span>                    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>down<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment">// 这里计算步数</span>        step<span class="token operator">++</span> <span class="token comment">// 波动的次数+1</span>    <span class="token punctuation">}</span>    <span class="token comment">// 如果都穷举完了 就返回-1 说明找不到</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="双向BFS优化"><a href="#双向BFS优化" class="headerlink" title="双向BFS优化"></a>双向BFS优化</h4><p>BFS算法还有一种稍微高级一点的优化思路,双向BFS,可以进一步提高算法效率</p><p>传统的BFS算法是从起点开始向四周扩散,遇到终点时停止,而双向的BFS则是从起点和终点同时开始扩散,当两边有交集的时候停止</p><p><img src="/images/image_3.a29e782f.jpg"></p><p><img src="/images/image_4.65a8e39f.jpg"></p><p>图示中的树形结构，如果终点在最底部，按照传统 BFS 算法的策略，会把整棵树的节点都搜索一遍，最后找到 target；而双向 BFS 其实只遍历了半棵树就出现了交集，也就是找到了最短距离。从这个例子可以直观地感受到，双向 BFS 是要比传统 BFS 高效的。</p><p>不过，双向 BFS 也有局限，因为你必须知道终点在哪里。比如我们刚才讨论的二叉树最小高度的问题，你一开始根本就不知道终点在哪里，也就无法使用双向 BFS；但是第二个密码锁的问题，是可以使用双向 BFS 算法来提高效率的，代码稍加修改即可：</p><p>这里不再赘述,可以参考</p><p><a href="https://labuladong.gitee.io/algo/1/10/">BFS 算法解题套路框架 :: labuladong的算法小抄 (gitee.io)</a></p>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BFS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>字节每日一题-169多数元素</title>
      <link href="/2022/07/25/zi-jie-mei-ri-yi-ti-169.duo-shu-yuan-su/"/>
      <url>/2022/07/25/zi-jie-mei-ri-yi-ti-169.duo-shu-yuan-su/</url>
      
        <content type="html"><![CDATA[<p>字节每日一题-169.多数元素</p><span id="more"></span><p><img src="/images/image-20221223103421300.png"></p><blockquote><p>思路<br>定义一个集合统计每个数字出现的次数,找出他的最大的</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">majorityElement</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      map<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>    <span class="token punctuation">}</span>    map<span class="token punctuation">[</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">++</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> maxCount <span class="token operator">=</span> <span class="token number">0</span>  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token keyword">in</span> map<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>map<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> maxCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>      res <span class="token operator">=</span> i      maxCount <span class="token operator">=</span> map<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> res<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>思路<br>排序,找到中间的哪一个</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">majorityElement</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">)</span>  <span class="token keyword">return</span> nums<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>思路<br>整个数组只遍历一次,先让结果是第一个,然后不断的向后遍历,如果不同鞠让其-1,如果相同让 count+1,当 count 是 0 的时候,将这个数字换成最新的</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">majorityElement</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 抵消的思想 如果不同就让count-- 如果相同就让count++ 如果count是0 就直接返回</span>  <span class="token keyword">let</span> res <span class="token operator">=</span> nums<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      res <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> res<span class="token punctuation">)</span> <span class="token punctuation">{</span>      count<span class="token operator">++</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      count<span class="token operator">--</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> res<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr>]]></content>
      
      
      <categories>
          
          <category> 字节每日一题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 字节每日一题 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>动态规划练习题</title>
      <link href="/2022/07/22/dong-tai-gui-hua-lian-xi-ti/"/>
      <url>/2022/07/22/dong-tai-gui-hua-lian-xi-ti/</url>
      
        <content type="html"><![CDATA[<p>动态规划练习题</p><span id="more"></span><h4 id="746最小花费楼梯"><a href="#746最小花费楼梯" class="headerlink" title="746最小花费楼梯"></a>746最小花费楼梯</h4><p><img src="F:/%E6%A1%8C%E9%9D%A2/%E5%8D%9A%E5%AE%A2/image_1.c8421d1f.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} cost * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">minCostClimbingStairs</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// dp[i] 表示到i个位置的最小花费体力 注意走第一步的时候就花费了</span>    <span class="token keyword">let</span> n <span class="token operator">=</span> cost<span class="token punctuation">.</span>length    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> cost<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> cost<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">+</span>cost<span class="token punctuation">[</span>i<span class="token punctuation">]</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 倒数第一位和倒数第二位都可以走到最顶端</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} cost * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">minCostClimbingStairs</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">cost</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// dp[i]表示爬到第i个阶梯的最小花费</span>    <span class="token comment">// 递推公式: dp[i] 爬到第i个阶梯的最小花费 可能是由前一个阶梯爬1个 或者前两个阶梯爬两个</span>    <span class="token comment">// dp[i] = min(dp[i-1]+cost[i-1],dp[i-2]+cost[i-2])</span>    <span class="token comment">// 初始化 可以从下标为0 也可以从下标为1的地方开始走 dp[1] = 从下标为0的地方走就就是 cost[0] 从下标为1的开始走就是0 取值就是0  dp[2] 可以从下标为0的地方走也可以从下标为1的地方走 name就是 cost[0]+cost[1]或者cost[1] 那就是cost[1]和cost[0]的最小值 从下标为1的地方走 就是cost[1]  就是cost[0]和cost[1]的最小值</span>    <span class="token comment">// 遍历顺序 从前向后遍历</span>    <span class="token keyword">let</span> n <span class="token operator">=</span> cost<span class="token punctuation">.</span>length    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>    dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>cost<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>cost<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> cost<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">+</span>cost<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="62不同路径"><a href="#62不同路径" class="headerlink" title="62不同路径"></a>62不同路径</h4><p><img src="F:/%E6%A1%8C%E9%9D%A2/%E5%8D%9A%E5%AE%A2/image_1.1e83075b.png"></p><pre class="line-numbers language-none"><code class="language-none">/**&nbsp;*&nbsp;@param&nbsp;{number}&nbsp;m&nbsp;*&nbsp;@param&nbsp;{number}&nbsp;n&nbsp;*&nbsp;@return&nbsp;{number}&nbsp;*/var&nbsp;uniquePaths&nbsp;=&nbsp;function(m,&nbsp;n)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;dp数组含义&nbsp;dp[i][j]表示走到ij位置的最多的路径条数&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;地推公式&nbsp;dp[0][j]&nbsp;=&nbsp;dp[0][j-1]&nbsp;dp[i][0]&nbsp;=&nbsp;dp[i-1][0]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;dp[i][j]&nbsp;=&nbsp;dp[i-1][j]&nbsp;+&nbsp;dp[i][j-1]&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;初始化&nbsp;dp[0]&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;遍历顺序&nbsp;从左到右&nbsp;从上到下&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;dp&nbsp;=&nbsp;new&nbsp;Array(m).fill(0).map(()=&gt;new&nbsp;Array(n).fill(1))&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;0;i&nbsp;&lt;&nbsp;m;i++){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;j&nbsp;=&nbsp;0;j&nbsp;&lt;&nbsp;n;j++){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(i&nbsp;===&nbsp;0&nbsp;&amp;&amp;&nbsp;j&nbsp;===&nbsp;0){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ij都是0&nbsp;那就初始化为1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if(i&nbsp;===&nbsp;0){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;ij有一个不是0&nbsp;那就这个就是这个的前一个或者是左边或者是右边&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;dp[i][j-1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else&nbsp;if(j&nbsp;===&nbsp;0){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;dp[i-1][j]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;如果都是不是0&nbsp;那就是左边+上面&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[i][j]&nbsp;=&nbsp;dp[i-1][j]&nbsp;+dp[i][j-1]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;dp[m-1][n-1]};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">/**&nbsp;*&nbsp;@param&nbsp;{number}&nbsp;m&nbsp;*&nbsp;@param&nbsp;{number}&nbsp;n&nbsp;*&nbsp;@return&nbsp;{number}&nbsp;*/var&nbsp;uniquePaths&nbsp;=&nbsp;function(m,&nbsp;n)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;一维数组解决&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;let&nbsp;dp&nbsp;=&nbsp;new&nbsp;Array(n)&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;0;i&nbsp;&lt;&nbsp;n;i++)&nbsp;dp[i]&nbsp;=&nbsp;1&nbsp;//&nbsp;初始化第一行的数组的最短路径都是1&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;i&nbsp;=&nbsp;1;i&nbsp;&lt;&nbsp;m;i++){&nbsp;//&nbsp;从第2行判断&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(let&nbsp;j&nbsp;=&nbsp;1;j&nbsp;&lt;&nbsp;n;j++){&nbsp;//&nbsp;从第二列判断&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dp[j]&nbsp;=&nbsp;dp[j-1]&nbsp;+&nbsp;dp[j]&nbsp;//&nbsp;当前的值就是之前的路线&nbsp;加上&nbsp;前面一位的路线&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;dp[n-1]&nbsp;//&nbsp;最后返回最后一个的路线};<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="不同路径"><a href="#不同路径" class="headerlink" title="不同路径"></a>不同路径</h4><p><img src="F:/%E6%A1%8C%E9%9D%A2/%E5%8D%9A%E5%AE%A2/image_1.2f1bcc36.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[][]} obstacleGrid * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">uniquePathsWithObstacles</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">obstacleGrid</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// dp[i][j]表示到这个位置的路径数</span>    <span class="token comment">// 递推公式如果这个不是障碍 那么就是左边的加上右边的 如果这个是障碍 那么这个就是0</span>    <span class="token comment">// 这样的话下一个的取值就是左边的加上面的 其中有一个是障碍的话就是单独的一个了</span>    <span class="token keyword">let</span> m <span class="token operator">=</span> obstacleGrid<span class="token punctuation">.</span>length    <span class="token keyword">let</span> n <span class="token operator">=</span> obstacleGrid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>length    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 第二这个ob数组是二维数组 要分清行列</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> obstacleGrid<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       `        dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 将dp数组的上边界和左边界都赋值为1 除了obs数字该数字是1的情况第一不能让dp[0][0]是1 因为要避免[1](onenote:#1&amp;section-id={AE715DAD-B069-4885-A89B-1727F809BE27}&amp;page-id={B7A4B202-E19F-48C8-B6A3-ABA0CFF9A838}&amp;end&amp;base-path=https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/代码随想录练习题/动态规划.one)这种情况</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m <span class="token operator">&amp;&amp;</span> obstacleGrid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>obstacleGrid<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">continue</span> <span class="token comment">// 如果这个数字是个障碍 那么就调过这个数字 让其还是0</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 不是障碍 就是左边的加上上边的</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="整数拆分"><a href="#整数拆分" class="headerlink" title="整数拆分"></a>整数拆分</h4><p><img src="F:/%E6%A1%8C%E9%9D%A2/%E5%8D%9A%E5%AE%A2/image_1.692d0159.png"></p><blockquote><p>两重循环 外层循环用来确定这个dp[i]的i下标,内层循环用来从1到n一直判断<br>公式就是 dp[i] = math.max(dp[i],j<em>dp[i-j],i</em>(i-j))<br><code>注意:不要忘了j*(i-j)</code></p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">integerBreak</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// dp[i]表示i的最大拆分乘积</span>    <span class="token comment">// dp[i] 是什么相当于 从1开始拆到i-1假设拆掉的值是j 比较j*(i-j) 和j*dp[i-j]的最大值 第一个相当于单独拆 第二个相当于将i-j继续拆分</span>    <span class="token comment">// 初始化初始化dp[2] = 1</span>    <span class="token comment">// 遍历顺序 从左享有</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    dp<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>    dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 可以遍历到n 这个是可以取值n dp[n]</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 从j=1遍历到j = n-1</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token punctuation">]</span><span class="token operator">*</span>j<span class="token punctuation">,</span><span class="token punctuation">(</span>i<span class="token operator">-</span>j<span class="token punctuation">)</span><span class="token operator">*</span>j<span class="token punctuation">)</span> <span class="token comment">// 这里为什么还包含dp[i] 就是在运动计算的过程中dp[i]是不断变化的 在内层循环中不断变化</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">/** * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">integerBreak</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// dp[i]表示这个数字在i的乘积最大化</span>    <span class="token comment">// 递推公式 dp[i] = dp[i-1] * 1 +dp[i-2]*2 dp[i-3]*3 中的最大值</span>    <span class="token comment">// 初始化dp[2] = 1 dp[3] = 2 dp[4] = 4</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    dp<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>    dp<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>    dp<span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>    dp<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>    dp<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">9</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">&lt;=</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">1</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">2</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="96-不同的二叉树"><a href="#96-不同的二叉树" class="headerlink" title="96.不同的二叉树"></a>96.不同的二叉树</h4><p><img src="F:/%E6%A1%8C%E9%9D%A2/%E5%8D%9A%E5%AE%A2/image_1.808fdd04.png"></p><blockquote><p>分成左右两个子树来看,左子树的个数可以是0~i-1个 因为 根元素肯定要有,那么当这个左子树的个数从0变化到i-1的时候 右子树元素的个数是从i-1变化到0,所以当我们求dp[i]也就是i个元素的二叉树的个数的时候,就可以让左子树乘以右子树不断的相加得到结果</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number} n * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">numTrees</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// dp[i]表示1-i个数字组成的搜索二叉树的个数</span>    <span class="token comment">// 递推公式 让j 从0到i dp[i] = dp[j]*dp[i-j] 表示的意思就是左子树是0-j组成的二叉搜索树的个数</span>    <span class="token comment">// 乘右子树是以i-j组成的二叉搜索是的个数 凑是从0开始 因为有可能左右子树是null</span>    <span class="token comment">// 初始化dp【0】 = 1 这个是为了相乘有值</span>    <span class="token comment">// 递归顺序 从左到右</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 不能初始化为1 这样就会后面相加有个初始值 </span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 初始化dp[0]是1</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从第2位开始遍历一致到第n为 这一行是头结点 从1到n</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 下面从j = 1开始遍历 这一行是从左边是0遍历到左边是全部 取不到i就不会-1了</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token operator">*</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 左子树是0-i-1的二叉搜索树个数乘以右子树是0-i-1的二叉搜索树个数 所以说可以等于i 这里的j-1是为了让其能从0开始到j-1 后面也是可以从i-1到0</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>dp<span class="token punctuation">)</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="322-零钱兑换"><a href="#322-零钱兑换" class="headerlink" title="322. 零钱兑换"></a><a href="https://leetcode.cn/problems/coin-change/">322. 零钱兑换</a></h4><p><img src="F:/%E6%A1%8C%E9%9D%A2/%E5%8D%9A%E5%AE%A2/image_1.5a7fc7fb.png"></p><blockquote><p>完全背包问题,因为是这个硬币可以用无数次<br>也是两重for循环,外层遍历背包,内层遍历物品<br>dp[i]的含义是凑够i的钱的最小的硬币用量<br>那么这个dp[i]就可以由硬币的面值来推出<br><code>dp[i] = Math.min(dp[i],dp[i-coin]+1)</code><br>那么外层遍历物品内层遍历背包行不行呢<br>事实证明也是可以的</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} coins * @param {number} amount * @return {number} */</span><span class="token comment">// 外层遍历背包 内层遍历物品</span><span class="token keyword">var</span> <span class="token function-variable function">coinChange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">coins<span class="token punctuation">,</span> amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> coin <span class="token keyword">of</span> coins<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>coin <span class="token operator">&lt;=</span> i<span class="token punctuation">)</span><span class="token punctuation">{</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>i<span class="token operator">-</span>coin<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">Infinity</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span>dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 外层遍历物品 内层遍历背包</span> <span class="token comment">/** * @param {number[]} coins * @param {number} amount * @return {number} */</span><span class="token keyword">var</span> <span class="token function-variable function">coinChange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">coins<span class="token punctuation">,</span> amount</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>amount<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">Infinity</span><span class="token punctuation">)</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> coin <span class="token keyword">of</span> coins<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> coin<span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> amount<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span>dp<span class="token punctuation">[</span>j<span class="token operator">-</span>coin<span class="token punctuation">]</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">Infinity</span> <span class="token operator">?</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">:</span> dp<span class="token punctuation">[</span>amount<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="10-正则表达式匹配"><a href="#10-正则表达式匹配" class="headerlink" title="10. 正则表达式匹配"></a><a href="https://leetcode.cn/problems/regular-expression-matching/">10. 正则表达式匹配</a></h4><p><img src="F:/%E6%A1%8C%E9%9D%A2/%E5%8D%9A%E5%AE%A2/image_1.9cbfde5d.png"></p><blockquote><p>主要思路 就是从前向后判断是否匹配</p><ul><li>首先是按照两个字符串相比较的规律,生成一个二维的数组</li><li>dp[i][j]代表的是i-1,j-1的位置的字符是否匹配</li></ul></blockquote><blockquote><p>首先是初始化</p><ul><li>00 就是true 空字符串是互相匹配的</li><li>0j代表有长度的匹配空串<ul><li>如果有长度的是 *的话有可能匹配</li><li>其他情况就没办法匹配了</li></ul></li></ul></blockquote><blockquote><ul><li>然后就是两个字符串从前向后不断的进行比较<ul><li>如果两个位置的字符串是相匹配的,那么就说明这里的匹配信息是前面的匹配信息</li><li>如果两个字符串后面的模式串是*说明有可能匹配</li></ul></li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {string} s * @param {string} p * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">isMatch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>s <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> p <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>    <span class="token keyword">const</span> sLen <span class="token operator">=</span> s<span class="token punctuation">.</span>length    <span class="token keyword">const</span> pLen <span class="token operator">=</span> p<span class="token punctuation">.</span>length    <span class="token keyword">const</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>sLen<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> dp<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>pLen<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> pLen <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 一个时候'' 一个是字符串</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token comment">// 如果是*的话要向前看两位</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> sLen <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> pLen <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这一位匹配上了</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 向前看一位</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个是* </span>                <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 1 并且前一位匹配了 那就可能是重复了 有可能重复一次 两次和n次  重复0次 就是dp[i][j-2] 重复n次 就是dp[i-1][j]</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个没有匹配完成 当前的状态就是 前两个的状态</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>sLen<span class="token punctuation">]</span><span class="token punctuation">[</span>pLen<span class="token punctuation">]</span> <span class="token comment">// 返回最后的状态</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">/** * @param {string} s * @param {string} p * @return {boolean} */</span><span class="token keyword">var</span> <span class="token function-variable function">isMatch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">s<span class="token punctuation">,</span> p</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> m <span class="token operator">=</span> s<span class="token punctuation">.</span>length    <span class="token keyword">let</span> n <span class="token operator">=</span> p<span class="token punctuation">.</span>length    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>m<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 先假定都不能匹配 dp[i][j] 表示i-1,j-1的是否匹配</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 空字符串是匹配的</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span> <span class="token comment">// 有字符串和没有的匹配是false </span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span>  dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token comment">// 没有字符串和有字符串的匹配 能匹配上吗</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span>  <span class="token boolean">false</span>        <span class="token punctuation">}</span>        <span class="token comment">// dp[0][j] =  false// 没有字符串和有字符串的匹配 能匹配上吗</span>    <span class="token punctuation">}</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>j <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'.'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token comment">// 如果能匹配完成</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'*'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">if</span><span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> p<span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">||</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span>                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                    dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// console.table(dp)</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>堆算法</title>
      <link href="/2022/07/20/dui-suan-fa/"/>
      <url>/2022/07/20/dui-suan-fa/</url>
      
        <content type="html"><![CDATA[<p>堆算法</p><span id="more"></span><h4 id="延伸"><a href="#延伸" class="headerlink" title="延伸"></a>延伸</h4><h6 id="满二叉树"><a href="#满二叉树" class="headerlink" title="满二叉树"></a>满二叉树</h6><p>除了叶子节点之外,所有的节点都有两个子节点,这类二叉树称作满二叉树</p><h6 id="完全二叉树"><a href="#完全二叉树" class="headerlink" title="完全二叉树"></a>完全二叉树</h6><p>设二叉树的高度为h,除了第h层之外,其他歌城都是元素达到最大数,第h层是从右向左连续若干个节点,这就是完全二叉树</p><p><img src="/images/image_1.3b190dd4.png"></p><blockquote><p>堆是一个完全二叉树,可以采用数组实现,不会浪费太多的空间,堆里面每个节点的值总是不大于或者不小于父节点的值,因此分为大顶堆和小顶堆,大顶堆的堆顶是元素最大的那一个,小顶堆的堆顶是最小的那一个.在向堆中加入元素的时候,能够动态调整堆内的顺序,始终保持堆的性质</p></blockquote><h4 id="堆的特点"><a href="#堆的特点" class="headerlink" title="堆的特点"></a>堆的特点</h4><ul><li>内部的数据是有序的</li><li>可以弹出堆顶的元素,大顶堆就是弹出最大值,小顶堆就是弹出最小值</li><li>每次加入新元素或者弹出堆顶元素后,需要调整使堆重新有序,仅需要logn的时间</li></ul><h4 id="堆的实现"><a href="#堆的实现" class="headerlink" title="堆的实现:"></a>堆的实现:</h4><p>节点父节点索引<code>parentIndex = [(index-1)/2]</code>,左节点的做引<code>leftIndex = index * 2 + 1</code>,右节点的索引<code>rightIndex = index * 2 + 2</code></p><ul><li>用数组实现,堆顶从上到下,从左到右一次对应数组中的元素</li><li>节点父节点索引<code>parentIndex = [(index-1)/2]</code>,左节点的做引<code>leftIndex = index * 2 + 1</code>,右节点的索引<code>rightIndex = index * 2 + 2</code></li><li>第一个非叶子节点是<code>\[size/2\]</code>就是最后一个节点的位置除以2取整,或者是节点个数除以2取整,不过这个是指从1开始计算换算成节点编号是除以2取整之后再-1</li></ul><p><img src="/images/image_2.5c64ca7b.png"></p><h4 id="向堆中添加元素"><a href="#向堆中添加元素" class="headerlink" title="向堆中添加元素"></a>向堆中添加元素</h4><ul><li>把新数据添加到树的最后一个元素,也就是数组的末尾</li><li>把末尾的节点向上调整,即bubbleUp函数</li><li>时间复杂度是<code>log(n)</code></li><li>具体过程,先将这个元素插入到最后一个位置计算这个位置的父节点 也就是<code>\[(index - 1) / 2\]</code>,比较这个节点和父节点的大小,如果小于父节点 就交换,不断的循环判断</li></ul><p><a href="https://xiaochen1024.com/20211118152155.gif">20211118152155.gif (720×540) (xiaochen1024.com)</a></p><h4 id="弹出堆中的元素"><a href="#弹出堆中的元素" class="headerlink" title="弹出堆中的元素"></a>弹出堆中的元素</h4><ul><li>交换根节点与最后一个节点的值,弹出交换之后的最后一个节点</li><li>把根节点向下调整</li><li>时间复杂度<code>log(n)</code></li><li>具体过程:把根节点和最后一个节点的值进行交换,然后判断交换之后的根节点的值是不是大于左右节点的值同时比较左右节点的值,将根节点和左右节点中较小的那一个进行交换,不断循环</li></ul><p><a href="https://xiaochen1024.com/20211118152156.gif">20211118152156.gif (720×540) (xiaochen1024.com)</a></p><h4 id="复杂度分析"><a href="#复杂度分析" class="headerlink" title="复杂度分析"></a>复杂度分析</h4><p>==从一个数组中取出最小值的复杂度：==</p><p><img src="/images/image_3.675ba646.png"></p><h4 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Heap</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token function-variable function">comparator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 首先是这个类的构造函数 接受两个参数,一个是构造器,默认是小顶堆,也就是递增的 可以对其进行改造,如果是对象可以斜撑a.val和b.val,第二个参数是数据 默认是一个空数组 ,也可以传入默认的数据</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> comparator<span class="token punctuation">;</span><span class="token comment">//比较器</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heapify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//堆化函数</span>  <span class="token punctuation">}</span>  <span class="token function">heapify</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 如果个数小于2 没必要去堆化了 直接return</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 从第一个非叶子节点开始 一直到队首的节点</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bubbleDown</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//bubbleDown操作  不断的向下移动 为什么叶子节点不用向下移动呢 因为叶子节点已经没有了下面的节点 不需要向下移动</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">peek</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 找到堆顶元素</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//查看堆顶</span>  <span class="token punctuation">}</span>  <span class="token function">offer</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 向堆中加入元素</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//加入数组</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bubbleUp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调整加入的元素在小顶堆中的位置 这个函数会将传入的节点不断的向上移动 传入的是末尾的size-1</span>  <span class="token punctuation">}</span>  <span class="token function">poll</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 取出堆顶的元素</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果堆的大小是0 就没有元素 返回null 就行了</span>      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 拿到堆顶的元素</span>    <span class="token keyword">const</span> last <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拿到堆尾的元素</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果节点的大小不是0 就进行节点的移动 使其符合定义</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> last<span class="token punctuation">;</span><span class="token comment">//交换第一个元素和最后一个元素 将堆尾的元素插入变成第一个元素</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bubbleDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//bubbleDown操作 然后进行下移重新排序</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> result<span class="token punctuation">;</span> <span class="token comment">// 最后弹出堆顶的元素</span>  <span class="token punctuation">}</span>  <span class="token function">bubbleUp</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传入当前的假如进来的节点的位置</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当位置大于0的时候不断的向上移动</span>      <span class="token keyword">const</span> parentIndex <span class="token operator">=</span> <span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//父节点的位置</span>      <span class="token comment">//如果当前元素比父节点的元素小，就交换当前节点和父节点的位置</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>parentIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果比较之后是小于0 就满足的构造器函数 需要进行交换 当前节点比父节点小就要交换</span>        <span class="token comment">// 如果是 b - a 的话 那就是大顶堆 就是当前节点比父节点大 那也要交换 所以只需要改构造器就行了</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> parentIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//交换自己和父节点的位置</span>        index <span class="token operator">=</span> parentIndex<span class="token punctuation">;</span><span class="token comment">//不断向上取父节点进行比较</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//如果当前元素比父节点的元素大，不需要处理</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">bubbleDown</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> lastIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//最后一个节点的位置</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> leftIndex <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//左节点的位置</span>      <span class="token keyword">const</span> rightIndex <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">//右节点的位置</span>      <span class="token keyword">let</span> findIndex <span class="token operator">=</span> index<span class="token punctuation">;</span><span class="token comment">//bubbleDown节点的位置 默认值是当前的索引</span>      <span class="token comment">//找出左右节点中value小的节点</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>        leftIndex <span class="token operator">&lt;=</span> lastIndex <span class="token operator">&amp;&amp;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>leftIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>findIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token comment">// 如果左节点的索引小于最后一个节点的索引,并且 传入比较器之后呢,左边的位置的数字小于当前的位置的数字 就让当前的节点位置变成左节点的位置</span>      <span class="token punctuation">)</span> <span class="token punctuation">{</span>        findIndex <span class="token operator">=</span> leftIndex<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>        rightIndex <span class="token operator">&lt;=</span> lastIndex <span class="token operator">&amp;&amp;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>rightIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>findIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token comment">// 右节点也是相同的道题</span>      <span class="token punctuation">)</span> <span class="token punctuation">{</span>        findIndex <span class="token operator">=</span> rightIndex<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> findIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 执行完上面的判断之后 如果index不是findIndex了说明左右节点有小于当前节点的值</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> findIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//交换当前元素和左右节点中value小的</span>        index <span class="token operator">=</span> findIndex<span class="token punctuation">;</span> <span class="token comment">// 修改当前的index为记录的index 进行下一次循环</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// 如果这个index还是和findIndex相等了,那就没必要继续判断了 因为下面没有比他小的了 直接退出循环即可</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">swap</span> <span class="token punctuation">(</span><span class="token parameter">index1<span class="token punctuation">,</span> index2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//交换堆中两个元素的位置</span>    <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index2<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">size</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="对应题目"><a href="#对应题目" class="headerlink" title="对应题目"></a>对应题目</h4><h5 id="347-前-K-个高频元素"><a href="#347-前-K-个高频元素" class="headerlink" title="347. 前 K 个高频元素"></a><a href="https://leetcode.cn/problems/top-k-frequent-elements/">347. 前 K 个高频元素</a></h5><p><img src="/image_4.3af2c3b2.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @param {number} k * @return {number[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">topKFrequent</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> num <span class="token keyword">of</span> nums<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>map<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> number <span class="token operator">=</span> map<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>            map<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>num<span class="token punctuation">,</span>number <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span> <span class="token comment">// 生成map的值的大小 key树出现的元素 value是磁县的次数</span>    <span class="token keyword">let</span> arr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>map<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment">// console.log(arr)</span>    <span class="token keyword">let</span> heap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Heap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>b<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> a<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>arr<span class="token punctuation">)</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> k<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>heap<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">Heap</span> <span class="token punctuation">{</span>  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token function-variable function">comparator</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">-</span> b<span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 首先是这个类的构造函数 接受两个参数,一个是构造器,默认是小顶堆,也就是递增的 可以对其进行改造,如果是对象可以斜撑a.val和b.val,第二个参数是数据 默认是一个空数组 ,也可以传入默认的数据</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> data<span class="token punctuation">;</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>comparator <span class="token operator">=</span> comparator<span class="token punctuation">;</span><span class="token comment">//比较器</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">heapify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//堆化函数</span>  <span class="token punctuation">}</span>  <span class="token function">heapify</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span> <span class="token comment">// 如果个数小于2 没必要去堆化了 直接return</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 从第一个非叶子节点开始 一直到队首的节点</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bubbleDown</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//bubbleDown操作  不断的向下移动 为什么叶子节点不用向下移动呢 因为叶子节点已经没有了下面的节点 不需要向下移动</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">peek</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 找到堆顶元素</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//查看堆顶</span>  <span class="token punctuation">}</span>  <span class="token function">offer</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 向堆中加入元素</span>    <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//加入数组</span>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bubbleUp</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//调整加入的元素在小顶堆中的位置 这个函数会将传入的节点不断的向上移动 传入的是末尾的size-1</span>  <span class="token punctuation">}</span>  <span class="token function">poll</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 取出堆顶的元素</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果堆的大小是0 就没有元素 返回null 就行了</span>      <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 拿到堆顶的元素</span>    <span class="token keyword">const</span> last <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 拿到堆尾的元素</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果节点的大小不是0 就进行节点的移动 使其符合定义</span>      <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> last<span class="token punctuation">;</span><span class="token comment">//交换第一个元素和最后一个元素 将堆尾的元素插入变成第一个元素</span>      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">bubbleDown</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//bubbleDown操作 然后进行下移重新排序</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> result<span class="token punctuation">;</span> <span class="token comment">// 最后弹出堆顶的元素</span>  <span class="token punctuation">}</span>  <span class="token function">bubbleUp</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传入当前的假如进来的节点的位置</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当位置大于0的时候不断的向上移动</span>      <span class="token keyword">const</span> parentIndex <span class="token operator">=</span> <span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//父节点的位置</span>      <span class="token comment">//如果当前元素比父节点的元素小，就交换当前节点和父节点的位置</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>parentIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果比较之后是小于0 就满足的构造器函数 需要进行交换 当前节点比父节点小就要交换</span>        <span class="token comment">// 如果是 b - a 的话 那就是大顶堆 就是当前节点比父节点大 那也要交换 所以只需要改构造器就行了</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> parentIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//交换自己和父节点的位置</span>        index <span class="token operator">=</span> parentIndex<span class="token punctuation">;</span><span class="token comment">//不断向上取父节点进行比较</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">break</span><span class="token punctuation">;</span><span class="token comment">//如果当前元素比父节点的元素大，不需要处理</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">bubbleDown</span> <span class="token punctuation">(</span><span class="token parameter">index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">const</span> lastIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//最后一个节点的位置</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">const</span> leftIndex <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//左节点的位置</span>      <span class="token keyword">const</span> rightIndex <span class="token operator">=</span> index <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">;</span><span class="token comment">//右节点的位置</span>      <span class="token keyword">let</span> findIndex <span class="token operator">=</span> index<span class="token punctuation">;</span><span class="token comment">//bubbleDown节点的位置 默认值是当前的索引</span>      <span class="token comment">//找出左右节点中value小的节点</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>        leftIndex <span class="token operator">&lt;=</span> lastIndex <span class="token operator">&amp;&amp;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>leftIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>findIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token comment">// 如果左节点的索引小于最后一个节点的索引,并且 传入比较器之后呢,左边的位置的数字小于当前的位置的数字 就让当前的节点位置变成左节点的位置</span>      <span class="token punctuation">)</span> <span class="token punctuation">{</span>        findIndex <span class="token operator">=</span> leftIndex<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>        rightIndex <span class="token operator">&lt;=</span> lastIndex <span class="token operator">&amp;&amp;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">comparator</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>rightIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>findIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token comment">// 右节点也是相同的道题</span>      <span class="token punctuation">)</span> <span class="token punctuation">{</span>        findIndex <span class="token operator">=</span> rightIndex<span class="token punctuation">;</span>      <span class="token punctuation">}</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!==</span> findIndex<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 执行完上面的判断之后 如果index不是findIndex了说明左右节点有小于当前节点的值</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">swap</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> findIndex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//交换当前元素和左右节点中value小的</span>        index <span class="token operator">=</span> findIndex<span class="token punctuation">;</span> <span class="token comment">// 修改当前的index为记录的index 进行下一次循环</span>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>        <span class="token keyword">break</span><span class="token punctuation">;</span> <span class="token comment">// 如果这个index还是和findIndex相等了,那就没必要继续判断了 因为下面没有比他小的了 直接退出循环即可</span>      <span class="token punctuation">}</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token function">swap</span> <span class="token punctuation">(</span><span class="token parameter">index1<span class="token punctuation">,</span> index2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//交换堆中两个元素的位置</span>    <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index2<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index2<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>index1<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token function">size</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span>  <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 堆算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二分搜索解题框架</title>
      <link href="/2022/07/15/er-fen-sou-suo-fa-jie-ti-kuang-jia/"/>
      <url>/2022/07/15/er-fen-sou-suo-fa-jie-ti-kuang-jia/</url>
      
        <content type="html"><![CDATA[<p>二分搜索解题框架</p><span id="more"></span><h4 id="二分查找框架"><a href="#二分查找框架" class="headerlink" title="二分查找框架"></a>二分查找框架</h4><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">binarySearch</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span>target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token operator">...</span>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">let</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            left <span class="token operator">=</span> <span class="token operator">...</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            right <span class="token operator">=</span> <span class="token operator">...</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token operator">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>分析二分查找的一个技巧是,不要使用else 而是要用所有可能出现的情况都用else if写清楚,这样可以更加清楚的展示所有的细节</p><p>left + math.floor((right- left)/2) 是为了防止right + left /2导致溢出</p><h4 id="寻找一个数字-基本的二分搜索"><a href="#寻找一个数字-基本的二分搜索" class="headerlink" title="寻找一个数字(基本的二分搜索)"></a>寻找一个数字(基本的二分搜索)</h4><h5 id="704-二分查找"><a href="#704-二分查找" class="headerlink" title="704. 二分查找"></a><a href="https://leetcode.cn/problems/binary-search/">704. 二分查找</a></h5><p><img src="/images/image_1.360922f2.png"></p><p>这个是最基本的二分搜索,直接套用框架</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;=</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">let</span> mid <span class="token operator">=</span> left <span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> mid        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            right <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>下面来探讨一下细节</p><ol><li>为什么while循环条件中是&lt;= 而不是&lt;?</li></ol></blockquote><blockquote><p>因为初始化的时候right是nums.length-1 就是最后一个元素的索引,而不是nums.length</p></blockquote><blockquote><p>这两个的区别是:前者相当于两段都是闭区间,后者相当于左闭右开区间,因为索引大小为nums.length是越界的,我这个算法中使用的是前者左右都是闭区间,这个区间就是每次进行搜索的区间</p></blockquote><blockquote><p>什么时候停止搜索呢,就是找到目标值的是可以终止</p></blockquote><blockquote><p>如果没找到 while终止 返回-1,那么什么时候while终止呢,当这个区间是空的时候.</p></blockquote><blockquote><p>left&lt;= right 的终止条件是left = right+1 这个时候这个区间就是空的,所以就可以终止</p></blockquote><blockquote><p>如果是left &lt; right 那么终止条件是right = left 那么这个区间不是空的</p></blockquote><blockquote><p>如果非要用这个left &lt; right 那么可以在返回值的时候判断这个left的值是不是等于target ,如果等于 就返回left,如果不等于就返回-1表示没找到</p></blockquote><blockquote><ol start="2"><li>为什么left = mid+1,right = mid - 1,我看有的代码是right = mid ,left= mid,没有这些加加减减,到底是怎么回事呢</li></ol></blockquote><blockquote><p>刚才明确了「搜索区间」这个概念，而且本算法的搜索区间是两端都闭的，即 [left, right]。那么当我们发现索引 mid 不是要找的 target 时，下一步应该去搜索哪里呢？</p></blockquote><blockquote><p>当然是去搜索区间 [left, mid-1] 或者区间 [mid+1, right] 对不对？因为 mid 已经搜索过，应该从搜索区间中去除。</p></blockquote><blockquote><ol start="3"><li>此算法有什么缺陷</li></ol></blockquote><blockquote><p>比如说给你有序数组 nums = [1,2,2,2,3]，target 为 2，此算法返回的索引是 2，没错。但是如果我想得到 target 的左侧边界，即索引 1，或者我想得到 target 的右侧边界，即索引 3，这样的话此算法是无法处理的</p></blockquote><blockquote><p>找到一个 target，然后向左或向右线性搜索不行吗？可以，但是不好，因为这样难以保证二分查找对数级的复杂度了。</p></blockquote><h4 id="寻找左边界的二分搜索"><a href="#寻找左边界的二分搜索" class="headerlink" title="寻找左边界的二分搜索"></a>寻找左边界的二分搜索</h4><p>以下是最常见的代码形式</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token comment">// 注意</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 注意</span>        <span class="token keyword">let</span> mid <span class="token operator">=</span> left <span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            right <span class="token operator">=</span> mid        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            right <span class="token operator">=</span> mid <span class="token comment">// 注意</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> left<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><blockquote><p>几个问题</p><ol><li>为什么 while 中是 &lt; 而不是 &lt;=?</li></ol></blockquote><blockquote><p>用相同的方法分析 因为right= nums.length 而不是nums.lenth-1,因此每次循环的都是左闭右开的区间</p></blockquote><blockquote><p>left &lt; right的终止条件是left= right 此时[left,left)为空,可以正确终止</p></blockquote><blockquote><p>PS：这里先要说一个搜索左右边界和上面这个算法的一个区别，也是很多读者问的：刚才的 right 不是 nums.length - 1 吗，为啥这里非要写成 nums.length 使得「搜索区间」变成左闭右开呢？</p></blockquote><blockquote><p>因为对于搜索左右侧边界的二分查找，这种写法比较普遍，我就拿这种写法举例了，保证你以后遇到这类代码可以理解。你非要用两端都闭的写法反而更简单，我会在后面写相关的代码，把三种二分搜索都用一种两端都闭的写法统一起来，你耐心往后看就行了。</p></blockquote><blockquote><ol start="2"><li>为什么没有返回 -1 的操作？如果 nums 中不存在 target 这个值，怎么办？</li></ol></blockquote><blockquote><p>其实很简单，在返回的时候额外判断一下 nums[left] 是否等于 target 就行了，如果不等于，就说明 target 不存在</p></blockquote><blockquote><p>不过我们得考察一下 left 的取值范围，免得索引越界。假如输入的 target 非常大，那么就会一直触发 nums[mid] &lt; target 的 if 条件，left 会一直向右侧移动，直到等于 right，while 循环结束。</p></blockquote><blockquote><p>由于这里 right 初始化为 nums.length，所以 left 变量的取值区间是闭区间 [0, nums.length]，那么我们在检查 nums[left] 之前需要额外判断一下，防止索引越界</p></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token comment">// 注意</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 注意</span>        <span class="token keyword">let</span> mid <span class="token operator">=</span> left <span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            right <span class="token operator">=</span> mid        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span>target<span class="token punctuation">)</span><span class="token punctuation">{</span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            right <span class="token operator">=</span> mid <span class="token comment">// 注意</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token comment">// 最后递归出去需要判断这个left是否越界</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>    <span class="token comment">// 判断递归出去是否找到 如果没找到 就返回-1</span>    <span class="token keyword">return</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">===</span> target <span class="token operator">?</span> left <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><ol start="3"><li>为什么 left = mid + 1，right = mid ？和之前的算法不一样？</li></ol></blockquote><blockquote><p>这个很好解释,因为我们搜索的区间是[left,right),左闭右开,所以当nums[mid]被监测之后,下一步应该去mid的左侧或者右侧区间搜索,就是[left,mid)或者[mid+1,right) 所以对于左边的区间是mid+1,对于右边的区间是mid</p></blockquote><blockquote><ol start="4"><li>为什么该算法能搜索左侧边界</li></ol></blockquote><blockquote><p>关键在于对于nums[mid] === target这种情况的处理:</p></blockquote><blockquote><p>如果两个相等那么说明这个是找到了的,因为是寻找左边界,所以这个可能不是左边界 就让右边等于mid不断去左区间寻找 知道找到左边界</p></blockquote><blockquote><ol start="5"><li>为什么返回是left而不是right</li></ol></blockquote><blockquote><p>都是一样的 因为退出的条件是left === right</p></blockquote><blockquote><ol start="6"><li>能不能想办法吧right变成nums.length-1,也就是继续使用两边都闭区间</li></ol></blockquote><blockquote><p>当然可以因为你非要让搜索区间两端都闭，所以 right 应该初始化为 nums.length - 1，while 的终止条件应该是 left == right + 1，也就是其中应该用 &lt;=：</p></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    let left = 0   </span><span class="token template-punctuation string">`</span></span>    <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// 注意</span>   <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    while(left &lt;= right){ // 注意       </span><span class="token template-punctuation string">`</span></span>        <span class="token keyword">let</span> mid <span class="token operator">=</span> left <span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>       <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">        if(nums[mid] === target){           </span><span class="token template-punctuation string">`</span></span>            right <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>       <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">        }else if(nums[mid] &lt;target){           </span><span class="token template-punctuation string">`</span></span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>       <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">        }else if(nums[mid] &gt; target){           </span><span class="token template-punctuation string">`</span></span>            right <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token comment">// 注意</span>       <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">        }   </span><span class="token template-punctuation string">`</span></span>    <span class="token punctuation">}</span>   <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    // 最后递归出去需要判断这个left是否越界   </span><span class="token template-punctuation string">`</span></span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>   <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    // 判断递归出去是否找到 如果没找到 就返回-1   </span><span class="token template-punctuation string">`</span></span>    <span class="token keyword">return</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">===</span> target <span class="token operator">?</span> left <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h4 id="寻找右侧边界的二分查找"><a href="#寻找右侧边界的二分查找" class="headerlink" title="寻找右侧边界的二分查找"></a>寻找右侧边界的二分查找</h4><p>代码框架如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">search</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token comment">// 注意</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 注意</span>        <span class="token keyword">let</span> mid <span class="token operator">=</span> left <span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>       <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">        if(nums[mid] === target){ // 如果中间的等于目标值 那么就应该去右边去寻找 left = mid + 1// 向右移动一位           </span><span class="token template-punctuation string">`</span></span>            left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>       <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">        }else if(nums[mid] &lt;target){ // 中间的小于目标值 修改左边界            left = mid + 1       </span><span class="token template-punctuation string">`</span></span>        <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 中间的大于目标值 就修改右边界</span>           <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">            right = mid // 修改右边界        }    }    // 最后递归出去需要判断这个left是否越界   </span><span class="token template-punctuation string">`</span></span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>    <span class="token comment">// 判断递归出去是否找到 如果没找到 就返回-1</span>   `    <span class="token keyword">return</span> nums<span class="token punctuation">[</span>left<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> target <span class="token operator">?</span> left <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol><li>当 nums[mid] == target 时，不要立即返回，而是增大「搜索区间」的左边界 left，使得区间不断向右靠拢，达到锁定右侧边界的目的。</li><li>为什么最后返回 left - 1 而不像左侧边界的函数，返回 left？而且我觉得这里既然是搜索右侧边界，应该返回 right 才对。</li></ol><p>while的终止条件是left== right 所以left和right 一样的 都是可以的</p><p>至于为什么要减一，这是搜索右侧边界的一个特殊点，关键在锁定右边界时的这个条件判断：</p><p><img src="/images/image_2.259d4d0e.png"></p><ol start="3"><li>为什么没有返回 -1 的操作？如果 nums 中不存在 target 这个值，怎么办？</li></ol><p>只要在最后判断一下 nums[left-1] 是不是 target 就行了。</p><ol start="4"><li>4、是否也可以把这个算法的「搜索区间」也统一成两端都闭的形式呢？这样这三个写法就完全统一了，以后就可以闭着眼睛写出来了。</li></ol><pre class="line-numbers language-none"><code class="language-none">int right_bound(int[] nums, int target) {    int left = 0, right = nums.length - 1;    while (left &lt;= right) {        int mid = left + (right - left) / 2;        if (nums[mid] &lt; target) {            left = mid + 1;        } else if (nums[mid] &gt; target) {            right = mid - 1;        } else if (nums[mid] == target) {            // 这里改成收缩左侧边界即可            left = mid + 1;        }    }    // 最后改成返回 left - 1    if (left - 1 &lt; 0) return -1;    return nums[left - 1] == target ? (left - 1) : -1;}<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="逻辑统一"><a href="#逻辑统一" class="headerlink" title="逻辑统一"></a>逻辑统一</h4><h5 id="34-在排序数组中查找元素的第一个和最后一个位置"><a href="#34-在排序数组中查找元素的第一个和最后一个位置" class="headerlink" title="34. 在排序数组中查找元素的第一个和最后一个位置"></a><a href="https://leetcode.cn/problems/find-first-and-last-position-of-element-in-sorted-array/">34. 在排序数组中查找元素的第一个和最后一个位置</a></h5><p><img src="/images/image_3.47f91604.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @param {number} target * @return {number[]} */</span><span class="token keyword">var</span> <span class="token function-variable function">searchRange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">findLeft</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span>target</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;=</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> mid <span class="token operator">=</span> left <span class="token operator">+</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 获得中间的</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                right <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span> <span class="token comment">// 寻找左边界 当这个值和原来的相等的时候 就让右边界向前移动一位</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                right <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token comment">// 如果这个left越界 就返回-1</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">==</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token keyword">return</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token operator">==</span> target <span class="token operator">?</span> left <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>    <span class="token punctuation">}</span>    <span class="token keyword">function</span> <span class="token function">findRight</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span>target</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token number">0</span>        <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span>        <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">&lt;=</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> mid <span class="token operator">=</span> left <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token punctuation">(</span>right <span class="token operator">-</span> left<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 获得中间的</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">==</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                right <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span>            <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>                left <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 越界</span>            <span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> nums<span class="token punctuation">[</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">===</span> target <span class="token operator">?</span> <span class="token punctuation">(</span>left <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token operator">-</span><span class="token number">1</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">findLeft</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>target<span class="token punctuation">)</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">findRight</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>target<span class="token punctuation">)</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">||</span> right <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token punctuation">[</span>left<span class="token punctuation">,</span>right<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 二分搜索 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>vue-tools的使用</title>
      <link href="/2022/07/14/vue-devtools-jin-xing-diao-shi-ding-wei-bug-he-xiu-fu/"/>
      <url>/2022/07/14/vue-devtools-jin-xing-diao-shi-ding-wei-bug-he-xiu-fu/</url>
      
        <content type="html"><![CDATA[<p>vue-tools的使用</p><span id="more"></span><h4 id="下载安装"><a href="#下载安装" class="headerlink" title="下载安装"></a>下载安装</h4><p>方法有很多,可以采用一下几种方法</p><ol><li>科学上网,去chrome的应用商店去下载</li><li>使用edge浏览器,不翻墙也能访问扩展商店</li><li>网上找插件安装包资源</li><li>github下载,可以使用npm,yarn,下载之后安装一下就行了</li></ol><h4 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h4><blockquote><p>下载好了安装之后就会在浏览器的调试工具栏中出现一个vue饿选项,这个里面主要是有两个部分,一个是当前页面的组件的嵌套关系,点击不同的组件部分会显示在这个组件里面各个数据的大小,可以直接在这个页面中去修改这个vue的数据,由于vue的数据是双向绑定的,所以当修改了这个里面的数据之后,页面也会发生相应的变化,这个就可以来调试页面之间的关系了<br>主要就是有的时候一些数据方面的问题,例如数据出错,或者没有按照预想的来</p></blockquote><hr>]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>二叉树总结</title>
      <link href="/2022/07/10/er-cha-shu-zong-jie/"/>
      <url>/2022/07/10/er-cha-shu-zong-jie/</url>
      
        <content type="html"><![CDATA[<p>二叉树全总结</p><span id="more"></span><h3 id="东哥带你刷二叉树纲领篇"><a href="#东哥带你刷二叉树纲领篇" class="headerlink" title="东哥带你刷二叉树纲领篇"></a>东哥带你刷二叉树纲领篇</h3><h4 id="二叉树的前中后序遍历"><a href="#二叉树的前中后序遍历" class="headerlink" title="二叉树的前中后序遍历"></a>二叉树的前中后序遍历</h4><ul><li>前序遍历：就是刚进入一个节点的时候</li><li>后续遍历：就是即将离开一个节点的时候</li><li>中序遍历：就是左子树都遍历完，开始遍历右子树的时候做</li></ul><p><img src="/images/image_1.f9532e9f.jpg"></p><h4 id="两种解题思路"><a href="#两种解题思路" class="headerlink" title="两种解题思路"></a>两种解题思路</h4><h6 id="遍历一遍二叉树得到答案-分解二叉树"><a href="#遍历一遍二叉树得到答案-分解二叉树" class="headerlink" title="遍历一遍二叉树得到答案 分解二叉树"></a>遍历一遍二叉树得到答案 分解二叉树</h6><p><a href="https://leetcode.cn/problems/maximum-depth-of-binary-tree/">==104. 二叉树的最大深度==</a></p><p><img src="/images/image_2.6d679357.png"></p><ul><li><h6 id="遍历一遍二叉树"><a href="#遍历一遍二叉树" class="headerlink" title="遍历一遍二叉树"></a>遍历一遍二叉树</h6></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">maxDepth</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 遍历一遍二叉树 用一个外部遍历记录二叉树的深度 前序位置更新二叉树的最大深度 然后遍历左右子树</span>    <span class="token keyword">let</span> depth <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">let</span> maxDepth <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        depth<span class="token operator">++</span>        maxDepth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>depth<span class="token punctuation">,</span>maxDepth<span class="token punctuation">)</span> <span class="token comment">// 更新最大深度</span>        <span class="token function">backTracking</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>        <span class="token function">backTracking</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>        depth<span class="token operator">--</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>    <span class="token keyword">return</span> maxDepth<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>分解子问题</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">maxDepth</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 分解子问题 先求左子树的最大深度 然后求右子树的最大深度 左后返回最大深度</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token number">0</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">maxDepth</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">maxDepth</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h6 id="后续位置遍历的特殊之处"><a href="#后续位置遍历的特殊之处" class="headerlink" title="后续位置遍历的特殊之处"></a>后续位置遍历的特殊之处</h6><blockquote><p>前序位置只能从函数参数中获取父节点传递过来的数据,后续位置代码不仅可以从参数获取,而且还可以从子树的函数返回值获取数据<br>如获取左右子树各有多少的节点</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>root<span class="token punctuation">)</span><span class="token punctuation">{</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></blockquote><blockquote><pre><code>return 0</code></pre></blockquote><blockquote><p>  }</p></blockquote><blockquote><p>  let left = count(root.left)</p></blockquote><blockquote><p>  let right = count(root.right)</p></blockquote><blockquote><p>  console.log(left + right)</p></blockquote><blockquote><p>  return left + right + 1 // 返回左右子树加本节点的个数</p></blockquote><blockquote><p>}</p><pre class="line-numbers language-none"><code class="language-none"><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></blockquote><h4 id="543-二叉树的直径"><a href="#543-二叉树的直径" class="headerlink" title="543. 二叉树的直径"></a><a href="https://leetcode.cn/problems/diameter-of-binary-tree/">543. 二叉树的直径</a></h4><p><img src="/images/image_3.f0c777c9.png"></p><blockquote><p>因为要获取这个的最大的直径 以来左右子节点的深度 所以可以通过修改获取最大深度的代码来进行计算</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">diameterOfBinaryTree</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> maxDiameter <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">function</span> <span class="token function">getMaxDepth</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token number">0</span>        <span class="token punctuation">}</span>        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">getMaxDepth</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token comment">// 获得左节点的深度</span>        <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">getMaxDepth</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token comment">// 右节点的深度</span>        maxDiameter <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left <span class="token operator">+</span> right<span class="token punctuation">,</span>maxDiameter<span class="token punctuation">)</span> <span class="token comment">// 更新最大的直径</span>        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span>right<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 返回左右节点的深度</span>    <span class="token punctuation">}</span>    <span class="token function">getMaxDepth</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>    <span class="token keyword">return</span> maxDiameter<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="层序遍历"><a href="#层序遍历" class="headerlink" title="层序遍历"></a>层序遍历</h4><blockquote><p>主要思路</p><ul><li>利用一个队列,不断的入队出队来进行层序遍历</li></ul></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">// 输入一棵二叉树的根节点，层序遍历这棵二叉树</span><span class="token keyword">void</span> <span class="token function">levelTraverse</span><span class="token punctuation">(</span><span class="token parameter">TreeNode root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>    Queue<span class="token operator">&lt;</span>TreeNode<span class="token operator">&gt;</span> q <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LinkedList</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// 从上到下遍历二叉树的每一层</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        int sz <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// 从左到右遍历每一层的每个节点</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>int i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> sz<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>            TreeNode cur <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">poll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// 将下一层节点放入队列</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                q<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>                q<span class="token punctuation">.</span><span class="token function">offer</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p><img src="/images/image_4.1a4cb7d7.jpg"></p><h3 id="东哥带你刷二叉树思路篇"><a href="#东哥带你刷二叉树思路篇" class="headerlink" title="东哥带你刷二叉树思路篇"></a>东哥带你刷二叉树思路篇</h3><blockquote><p>复习</p><ul><li>是否可以通过遍历二叉树得到答案</li><li>是否可以定义一个递归函数,通过子问题的答案推导出原问题的答案</li><li>如果单独抽出一个节点,他需要做什么事情,需要在什么时候(前中后)做</li></ul></blockquote><p>例题</p><h4 id="226-翻转二叉树"><a href="#226-翻转二叉树" class="headerlink" title="226. 翻转二叉树"></a><a href="https://leetcode.cn/problems/invert-binary-tree/">226. 翻转二叉树</a></h4><p><img src="/images/image_5.3a48e91c.png"></p><blockquote><p>解法</p><ul><li>遍历的方式</li></ul></blockquote><blockquote><p>单独遍历每个节点,让节点的左右子树都交换一下位置,前中后序都可以</p></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">invertTree</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> root <span class="token comment">// 如果为null 直接返回</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> temp <span class="token operator">=</span> root<span class="token punctuation">.</span>left <span class="token comment">// 保存左节点</span>    root<span class="token punctuation">.</span>left <span class="token operator">=</span> root<span class="token punctuation">.</span>right <span class="token comment">// 交换右节点</span>    root<span class="token punctuation">.</span>right <span class="token operator">=</span> temp <span class="token comment">// 交换左节点</span>    <span class="token function">invertTree</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token comment">// 左右子树遍历</span>    <span class="token function">invertTree</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>    <span class="token keyword">return</span> root <span class="token comment">// 返回根节点</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><ul><li>分解问题的思路</li></ul></blockquote><blockquote><p>先给这个函数个定义 传入根节点 返回交换后的根节点 对于单个节点 就是单个节点的左节点 = 这个函数对右节点 类似的左节点也是</p></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">invertTree</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 函数定义 给出这个子树的根节点 返回值是交换后的根节点</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> root    <span class="token punctuation">}</span>    <span class="token comment">// 需要提前保存一下</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">invertTree</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">invertTree</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>    root<span class="token punctuation">.</span>left <span class="token operator">=</span> right    root<span class="token punctuation">.</span>right <span class="token operator">=</span> left<span class="token comment">// 交换左右节点</span>    <span class="token keyword">return</span> root<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h4 id="116-填充每个节点的下一个右侧节点指针"><a href="#116-填充每个节点的下一个右侧节点指针" class="headerlink" title="116. 填充每个节点的下一个右侧节点指针"></a><a href="https://leetcode.cn/problems/populating-next-right-pointers-in-each-node/">116. 填充每个节点的下一个右侧节点指针</a></h4><p><img src="/images/image_6.70570ba4.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript">最好写的就是层序遍历的思路 <span class="token keyword">var</span> <span class="token function-variable function">connect</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 如果为null 直接返回</span>    <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 定义一个队列</span>    queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token comment">// 放入到队列中</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>queue<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 当队列的长度有值</span>        <span class="token keyword">let</span> size <span class="token operator">=</span> queue<span class="token punctuation">.</span>length <span class="token comment">// 一层的长度</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> node <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 逐个的弹出</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">!==</span> size <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 让前弹出的等于下一个</span>                node<span class="token punctuation">.</span>next <span class="token operator">=</span> queue<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 如果是最后一个 让弹出的等于null</span>                node<span class="token punctuation">.</span>next <span class="token operator">=</span> <span class="token keyword">null</span>            <span class="token punctuation">}</span>            node<span class="token punctuation">.</span>left <span class="token operator">&amp;&amp;</span> queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token comment">// 将不是空的节点防区队列</span>            node<span class="token punctuation">.</span>right <span class="token operator">&amp;&amp;</span> queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> root <span class="token comment">// 返回根节点</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="114-二叉树展开为链表"><a href="#114-二叉树展开为链表" class="headerlink" title="114. 二叉树展开为链表"></a><a href="https://leetcode.cn/problems/flatten-binary-tree-to-linked-list/">114. 二叉树展开为链表</a></h4><p><img src="/images/image_7.8cfacede.png"></p><ul><li>分解问题的思路</li></ul><p>函数的定义 ,输入一个根节点 没有返回这 这个根节点就被拉成一个链表</p><p>主要流程</p><ul><li>先把左节点拉成一个链表</li><li>再把右节点拉成一个链表</li><li>左子树变成根节点的右子树 然后右子树拼到左子树上</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">flatten</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> root    <span class="token function">flatten</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>  <span class="token comment">// 左边的扁平化</span>    <span class="token function">flatten</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token comment">// 右边的扁平化</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> root<span class="token punctuation">.</span>left <span class="token comment">// 获得左子树</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> root<span class="token punctuation">.</span>right <span class="token comment">// 获得右子树</span>    root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 左子树值为空</span>    root<span class="token punctuation">.</span>right <span class="token operator">=</span> left <span class="token comment">// 右子树改为左子树</span>    <span class="token keyword">let</span> p <span class="token operator">=</span> root <span class="token comment">// 找到此时右子树的最后一个</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>right<span class="token punctuation">)</span><span class="token punctuation">{</span>        p <span class="token operator">=</span> p<span class="token punctuation">.</span>right    <span class="token punctuation">}</span>    p<span class="token punctuation">.</span>right <span class="token operator">=</span> right <span class="token comment">// 让右子树的最后一个等于这个原来的右子树</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="东哥带你刷二叉树构造篇"><a href="#东哥带你刷二叉树构造篇" class="headerlink" title="东哥带你刷二叉树构造篇"></a>东哥带你刷二叉树构造篇</h3><p>二叉树的构造问题一般都是使用分解问题的思路:构造二叉树 = 根节点 + 构造左子树 + 构造右子树</p><h4 id="654-最大二叉树"><a href="#654-最大二叉树" class="headerlink" title="654. 最大二叉树"></a><a href="https://leetcode.cn/problems/maximum-binary-tree/">654. 最大二叉树</a></h4><p><img src="/images/image_8.c4699787.png"></p><blockquote><p>找到这个二叉树的最大值 生成一个根节点 然后递归调用这个函数 得到左子树和右子树</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">constructMaximumBinaryTree</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 构造一个二叉树根节点 其中左右节点也构造完成</span>    <span class="token keyword">function</span> <span class="token function">traversal</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span>left<span class="token punctuation">,</span>right</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 传入一个数组和范围  返回构造的二叉树</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">&gt;</span> right<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 如果左边大于右边就返回null</span>        <span class="token keyword">let</span> maxIndex <span class="token operator">=</span> left <span class="token comment">// 初始化最大的位置</span>        <span class="token keyword">let</span> maxValue <span class="token operator">=</span> nums<span class="token punctuation">[</span>left<span class="token punctuation">]</span> <span class="token comment">// 初始化最大值</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> left<span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> right<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> maxValue<span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// 遍历得到最大位置和最大值</span>                maxValue <span class="token operator">=</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span>                maxIndex <span class="token operator">=</span> i            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>maxValue<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 用最大值得到这个节点</span>        root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">traversal</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>left<span class="token punctuation">,</span>maxIndex<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 调用函数得到这个的左节点</span>        root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">traversal</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span>maxIndex<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>right<span class="token punctuation">)</span> <span class="token comment">// 调用函数得到右节点</span>        <span class="token keyword">return</span> root <span class="token comment">// 返回根节点</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">traversal</span><span class="token punctuation">(</span>nums<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>nums<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="105-从前序与中序遍历序列构造二叉树"><a href="#105-从前序与中序遍历序列构造二叉树" class="headerlink" title="105. 从前序与中序遍历序列构造二叉树"></a><a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-inorder-traversal/">105. 从前序与中序遍历序列构造二叉树</a></h4><p><img src="/images/image_9.4e63de70.png"></p><blockquote><p>思路:</p><ul><li>先找到根节点的值,把根节点做出来,然后递归的构造左右子树</li><li>==前序遍历的第一个节点就是根节点== ==找到前序遍历的根节点在中序遍历中的位置== ==然后得到这个根节点的左右子树在先序遍历和中序遍历的位置== ==最后递归调用计算结果==</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">buildTree</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">preorder<span class="token punctuation">,</span> inorder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>preorder<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 如果现需遍历的数组长度是0 就直接返回</span>    <span class="token keyword">let</span> val <span class="token operator">=</span> preorder<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 得到根节点的值</span>    <span class="token keyword">let</span> index <span class="token operator">=</span> inorder<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token comment">// 得到根节点的坐标</span>    <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 生成根节点</span>    root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>preorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span>inorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 递归构造 先序遍历就是0到index 中旬遍历也是0,index</span>    root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>preorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span>inorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 现需遍历就是index到最后,中序遍历是index+1栋最后</span>    <span class="token keyword">return</span> root <span class="token comment">// 返回根节点</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="106-从中序与后序遍历序列构造二叉树"><a href="#106-从中序与后序遍历序列构造二叉树" class="headerlink" title="106. 从中序与后序遍历序列构造二叉树"></a><a href="https://leetcode.cn/problems/construct-binary-tree-from-inorder-and-postorder-traversal/">106. 从中序与后序遍历序列构造二叉树</a></h4><p><img src="/images/image_10.0682b0bc.png"></p><blockquote><p>思路<br>由中序遍历和后续遍历的特点可知,后续遍历的根节点在最后一个前序遍历的根节点在第一个<br>==所以大致过程和前一题相似==</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">buildTree</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">inorder<span class="token punctuation">,</span> postorder</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>inorder<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 判断没有元素的情况</span>    <span class="token keyword">let</span> val <span class="token operator">=</span> postorder<span class="token punctuation">[</span>postorder<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 找到根节点</span>    <span class="token keyword">let</span> index <span class="token operator">=</span> inorder<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token comment">// 找到对应的下标</span>    <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 生成根节点</span>    root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>inorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token punctuation">,</span>postorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>index<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 生成左子树 其实是0到index  中序遍历是0,index</span>    root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">buildTree</span><span class="token punctuation">(</span>inorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>postorder<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span>postorder<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 中序是index+1到最后  后续是index到最后一个但是不包括最后一个</span>    <span class="token keyword">return</span> root <span class="token comment">// 返回根节点</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="889-根据前序和后序遍历构造二叉树"><a href="#889-根据前序和后序遍历构造二叉树" class="headerlink" title="889. 根据前序和后序遍历构造二叉树"></a><a href="https://leetcode.cn/problems/construct-binary-tree-from-preorder-and-postorder-traversal/">889. 根据前序和后序遍历构造二叉树</a></h4><p><img src="/images/image_11.a63fdffc.png"></p><blockquote><p>思路:<br>这题和前面两题有明显的区别 通过前序和中续,后续和中序可以得到一个唯一二叉树 但是前序和后续无法确定一个唯一的二叉树<br>具体过程:</p><ul><li>首先吧前序遍历和后序遍历的第一个和最后一个元素作为根节点的值</li><li>吧前序遍历结果的第二个元素作为左子树的根节点的值</li><li>在后序遍历中寻找左子树根节点的值,从而确定了左子树的索引边界 进而确定右子树的索引边界 递归的构造左右子树即可</li></ul></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">function</span> <span class="token function">getLongestSequence</span> <span class="token punctuation">(</span><span class="token parameter">input</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// write code here</span>  <span class="token keyword">let</span> start <span class="token operator">=</span> <span class="token number">0</span>  <span class="token keyword">let</span> end <span class="token operator">=</span> <span class="token number">0</span>  <span class="token keyword">let</span> resCount <span class="token operator">=</span> <span class="token number">0</span>  <span class="token keyword">let</span> resChar <span class="token operator">=</span> input<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span>end <span class="token operator">&lt;</span> input<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> str <span class="token operator">=</span> input<span class="token punctuation">[</span>start<span class="token punctuation">]</span> <span class="token comment">// 记录当前的字符</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">!==</span> input<span class="token punctuation">[</span><span class="token operator">++</span>end<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 如果不相同</span>      <span class="token keyword">let</span> count <span class="token operator">=</span> end <span class="token operator">-</span> start<span class="token comment">// 出现的次数</span>      <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&gt;</span> resCount<span class="token punctuation">)</span> <span class="token punctuation">{</span>        resCount <span class="token operator">=</span> count        resChar <span class="token operator">=</span> str      <span class="token punctuation">}</span>      start <span class="token operator">=</span> end <span class="token comment">// 开始和结束在相同的位置</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">''</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> resCount<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    result <span class="token operator">+=</span> resChar  <span class="token punctuation">}</span>  <span class="token keyword">return</span> result<span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="东哥带你刷二叉树序列化篇"><a href="#东哥带你刷二叉树序列化篇" class="headerlink" title="东哥带你刷二叉树序列化篇"></a>东哥带你刷二叉树序列化篇</h3><h4 id="297-二叉树的序列化与反序列化"><a href="#297-二叉树的序列化与反序列化" class="headerlink" title="297. 二叉树的序列化与反序列化"></a><a href="https://leetcode.cn/problems/serialize-and-deserialize-binary-tree/">297. 二叉树的序列化与反序列化</a></h4><p><img src="/images/image_12.0002ed64.png"></p><p>就是将这个转换成字符串  然后还可以将字符串转换成二叉树</p><p>那么这个可以转换为 2,1，#，6，#，#，3，#，# 然后可以通过这个转换成二叉树</p><p>其实就是考察二叉树的遍历方式，下面讲解三种方式</p><p><code>前序遍历解法</code></p><blockquote><p>对于这个序列化函数 可以用前序遍历 将其放入一个数组 里面当遇到这个null的时候 就放入#来占位<br>具体代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">serialize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 生成一个数组用来储存这个字符串的每个字符</span>  <span class="token keyword">function</span> <span class="token function">mySerialize</span> <span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 传入一个根节点</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">root <span class="token operator">===</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span> <span class="token comment">// 如果是空就放入# 然后返回</span>      <span class="token keyword">return</span>    <span class="token punctuation">}</span>    list<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token comment">// 如果不是空就放入这个的值</span>    <span class="token function">mySerialize</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>    <span class="token function">mySerialize</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token comment">// 递归处理左右子树</span>  <span class="token punctuation">}</span>  <span class="token function">mySerialize</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>  <span class="token keyword">return</span> list<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token comment">// 拼接成字符串</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><p>在前文的时候,我们使用这个前中后序遍历的结果需要两个互相配合才能还原二叉树,那是因为前文的遍历结果没有激励空指针的信息.这里的node列表包含了空指针的信息,所以只使用node列表就可以还原二叉树<br>反序列化的过程也是大致相同的,先确定根节点,然后遵循前序遍历的规则,递归生成左右子树即可<br>就是第一个元素是根节点 只要吧第一个元素作为根节点 后面交给递归函数取解决就行了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">deserialize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> nodes <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token comment">// 先把字符串转换成这个节点</span>  <span class="token keyword">function</span> <span class="token function">myDeserialize</span> <span class="token punctuation">(</span><span class="token parameter">nodes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 接受一个节点列表</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">nodes<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 如果这个没有了就返回null</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> first <span class="token operator">=</span> nodes<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 第一个就是 头结点</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>first <span class="token operator">===</span> <span class="token string">'#'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 如果第一个是#那就返回null</span>    <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>first<span class="token punctuation">)</span> <span class="token comment">// 生成根节点</span>    root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">myDeserialize</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span>    root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">myDeserialize</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span> <span class="token comment">// 递归处理左右的节点</span>    <span class="token keyword">return</span> root  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token function">myDeserialize</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span> <span class="token comment">// 借用辅助函数来完成这个转化</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p><code>后序遍历解法</code></p><blockquote><p>对前序遍历稍加修改就可以了 就是在遍历完成左右之后 将这个节点放入到结果数组中</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">serialize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>  <span class="token keyword">function</span> <span class="token function">postOrder</span> <span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">root <span class="token operator">===</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span>      <span class="token keyword">return</span>    <span class="token punctuation">}</span>    <span class="token function">postOrder</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>    <span class="token function">postOrder</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>    res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token function">postOrder</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">deserialize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> nodes <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token comment">// 先分成数组</span>  <span class="token keyword">function</span> <span class="token function">myDeserialize</span> <span class="token punctuation">(</span><span class="token parameter">nodes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">nodes<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token keyword">null</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> rootVal <span class="token operator">=</span> nodes<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 弹出头结点</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>rootVal <span class="token operator">===</span> <span class="token string">'#'</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span>    <span class="token comment">// 先遍历右子树 这个是后续遍历的特点决定的</span>    <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>rootVal<span class="token punctuation">)</span>    root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">myDeserialize</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span>    root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">myDeserialize</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span>    <span class="token keyword">return</span> root  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token function">myDeserialize</span><span class="token punctuation">(</span>nodes<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p><code>中序遍历解法</code></p><blockquote><p>中序遍历行不通 因为反序列化行不通,按照之前的思路 反序列化需要知道根节点 但是中序遍历 不能知道根节点 所以行不通</p></blockquote><p><code>层序遍历解法</code></p><blockquote><p>通过对层序遍历的框架进行修改 让这个层序遍历能够记录null指针</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">serialize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 通过层序遍历完成序列化</span>  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 序列化数组</span>  <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 生成一个队列</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>root <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token string">'#'</span> <span class="token comment">// 如果是null直接返回#</span>  queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token comment">// 否则吧根节点放入这个队列中</span>  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token parameter">queue<span class="token punctuation">.</span>length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当队列不为空</span>    <span class="token keyword">let</span> node <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 弹出头部</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">node <span class="token operator">===</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">// 如果这个是空 就不进行下一步了</span>      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'#'</span><span class="token punctuation">)</span>      <span class="token keyword">continue</span>    <span class="token punctuation">}</span>     res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>val<span class="token punctuation">)</span>    queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>left<span class="token punctuation">)</span>    queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>right<span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token comment">// 最后返回拼接的字符串</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><p>每一个这个根节点都对应这两个子节点 所以反序列化也是从这个角度出发</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">deserialize</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token keyword">let</span> nodes <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span> <span class="token comment">// 分隔成数组</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>nodes<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 如果没有 就返回这个null</span>  <span class="token comment">// 第一个元素就是根节点的值</span>  <span class="token keyword">let</span> rootVal <span class="token operator">=</span> nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token keyword">let</span> root <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>rootVal<span class="token punctuation">)</span> <span class="token comment">// 生成根节点</span>  <span class="token keyword">let</span> queue <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 初始化队列</span>  queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token comment">// 放入根节点</span>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 遍历这个nodes数组</span>    <span class="token keyword">let</span> parent <span class="token operator">=</span> queue<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 弹出父节点</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token comment">// 左节点就是下一个</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">!==</span> <span class="token string">'#'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 如果下一个不是空 就让这个等于父节点的左子树</span>      parent<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span>      queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token comment">// 把左子树压入到这个队列中</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      parent<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token keyword">null</span>  <span class="token comment">// 否则这个左子树就是null 不需要进入队列</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> nodes<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span> <span class="token comment">// 这个是右子树</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">===</span> <span class="token string">'#'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token comment">// 道理和左子树一样</span>      parent<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">null</span>    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>      parent<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span>      queue<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>parent<span class="token punctuation">.</span>right<span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> root<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h3 id="东哥带你刷二叉树-后序篇"><a href="#东哥带你刷二叉树-后序篇" class="headerlink" title="东哥带你刷二叉树 后序篇"></a>东哥带你刷二叉树 后序篇</h3><blockquote><p>怎么判断一道题目应该用前序还是后续呢</p><ul><li>根据题意,思考一个二叉树节点需要做什么,到底用什么遍历顺序就清楚了</li></ul></blockquote><h4 id="652-寻找重复的子树"><a href="#652-寻找重复的子树" class="headerlink" title="652. 寻找重复的子树"></a><a href="https://leetcode.cn/problems/find-duplicate-subtrees/">652. 寻找重复的子树</a></h4><p><img src="/images/image_13.baf320c7.png"></p><blockquote><p>思路<br>计算以一个节点为根的子树是否有重复子树,需要的信息</p><ul><li>以自己为根的二叉树长什么样子</li><li>以其他节点为根的子树长什么样子</li></ul></blockquote><blockquote><p>要拿到以自己为根的子树 可以使用后序遍历 然后通过拼接字符串的方式将这个二叉树序列化 用#表示空指针 用,表示间隔<br>然后借助一个外部的数据结构 把每个子树的序列化结果都存进去 这样对于每个节点 就可以知道是不是有重复的了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">findDuplicateSubtrees</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">// 在外部定义一个储存序列化结果的哈希表</span>  <span class="token keyword">let</span> hash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">// 先定义一个序列化函数</span>  <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 储存结果</span>  <span class="token keyword">function</span> <span class="token function">traverse</span> <span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">root <span class="token operator">===</span> <span class="token keyword">null</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">return</span> <span class="token string">'#'</span>    <span class="token punctuation">}</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token comment">// 对左右序列化</span>    <span class="token keyword">let</span> subTree <span class="token operator">=</span> left <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> right <span class="token operator">+</span> <span class="token string">','</span> <span class="token operator">+</span> root<span class="token punctuation">.</span>val <span class="token comment">// 生成序列化结果</span>    hash<span class="token punctuation">[</span>subTree<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>hash<span class="token punctuation">[</span>subTree<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token comment">// 记录出现的个数</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token parameter">hash<span class="token punctuation">[</span>subTree<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token number">2</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 出现两次 加入到这个结果数组中</span>      res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token comment">// 将根节点加入到这个res中</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> subTree  <span class="token punctuation">}</span>  <span class="token function">traverse</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>  <span class="token keyword">return</span> res<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h3 id="归并排序详解及其应用"><a href="#归并排序详解及其应用" class="headerlink" title="归并排序详解及其应用"></a>归并排序详解及其应用</h3><blockquote><p>所有的递归算法,本质上都是在遍历一棵树,然后在节点(前中后序)的位置上执行代码,你要写递归算法,本质上就是告诉每个节点需要做什么<br>归并排序就是先把左半部分数组排好序,再把右边数组排好序,然后把两半数组合并<br>归并排序就是用到了分解问题的思路</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/** * @param {number[]} nums * @return {number[]} */</span> <span class="token keyword">var</span> <span class="token function-variable function">sortArray</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 归并排序需要两个函数 一个是将数组分成两部分 一个是将两部分的数组合并</span>  <span class="token keyword">if</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> nums <span class="token comment">// 如果数组的长度是1 就直接返回这个数组就可以了</span>  <span class="token keyword">let</span> mid <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>nums<span class="token punctuation">.</span>length <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 取出中间的位置 为了将数组分成两部分</span>  <span class="token keyword">let</span> left <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>mid<span class="token punctuation">)</span> <span class="token comment">// 左边的部分</span>  <span class="token keyword">let</span> right <span class="token operator">=</span> nums<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span>mid<span class="token punctuation">)</span> <span class="token comment">// 右边的部分</span>  <span class="token keyword">return</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token function">sortArray</span><span class="token punctuation">(</span>left<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">sortArray</span><span class="token punctuation">(</span>right<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 递归的调用sort函数进行排序得到两个数组  然后将两个数组进行merge</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">function</span> <span class="token function">merge</span><span class="token punctuation">(</span><span class="token parameter">left<span class="token punctuation">,</span>right</span><span class="token punctuation">)</span><span class="token punctuation">{</span>  <span class="token comment">// merge函数 参数是两个数组 一个是左 一个是右</span>  <span class="token keyword">let</span> m <span class="token operator">=</span> left <span class="token operator">&amp;&amp;</span> left<span class="token punctuation">.</span>length <span class="token comment">// m 是左边数组的长度</span>  <span class="token keyword">let</span> n <span class="token operator">=</span> right <span class="token operator">&amp;&amp;</span> right<span class="token punctuation">.</span>length <span class="token comment">// n 是右边数组的长度</span>  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 结果数组</span>  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 遍历左边数组的下标</span>  <span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 遍历右边数组的下标</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> m <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> right<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>      <span class="token comment">// 如果左边数组的值小于右边数组的值</span>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 将左边数组的值放入结果数组中</span>    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>      <span class="token comment">// 否则将右边结果的值放入结果数组中</span>      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>right<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token punctuation">}</span>  <span class="token punctuation">}</span>  <span class="token comment">// 退出循环 判断左右数组是不是有生意</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> m<span class="token punctuation">)</span><span class="token punctuation">{</span>    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>left<span class="token punctuation">[</span>i<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">while</span><span class="token punctuation">(</span>j <span class="token operator">&lt;</span> n<span class="token punctuation">)</span><span class="token punctuation">{</span>    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>right<span class="token punctuation">[</span>j<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> result <span class="token comment">// 返回合并后的数组</span><span class="token punctuation">}</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sortArray</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h3 id="动规带你刷二叉树-特性篇"><a href="#动规带你刷二叉树-特性篇" class="headerlink" title="动规带你刷二叉树 特性篇"></a>动规带你刷二叉树 特性篇</h3><blockquote><p>二叉搜索树的特点</p><ul><li>对于每一个节点node左子树的节点值都比node的节点值要小,右子树的节点值 都比node的值要大</li><li>对于每一个节点,他的左右子树都是BST</li></ul></blockquote><h4 id="230-二叉搜索树中第K小的元素"><a href="#230-二叉搜索树中第K小的元素" class="headerlink" title="230. 二叉搜索树中第K小的元素"></a><a href="https://leetcode.cn/problems/kth-smallest-element-in-a-bst/">230. 二叉搜索树中第K小的元素</a></h4><p><img src="/images/image_14.37cc2046.png"></p><p>思路1:</p><ul><li>中序排序找出第k个</li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">kthSmallest</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token comment">// 中序遍历的结果就是递增排序的</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 结果</span>    <span class="token keyword">let</span> rank <span class="token operator">=</span> <span class="token number">0</span>     <span class="token keyword">function</span> <span class="token function">traversal</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span>k</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 传入这个的k饿根节点</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 退出条件如果这个是null 就直接返回</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>k<span class="token punctuation">)</span> <span class="token comment">// 递归寻找左边的</span>        <span class="token comment">// 中间处理结果 // 计数器++</span>        rank<span class="token operator">++</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>k <span class="token operator">===</span> rank<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个k等于了rank 那就直接返回</span>            result <span class="token operator">=</span> root<span class="token punctuation">.</span>val            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>k<span class="token punctuation">)</span> <span class="token comment">// 去右子树找</span>    <span class="token punctuation">}</span>    <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>k<span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="538-把二叉搜索树转换为累加树"><a href="#538-把二叉搜索树转换为累加树" class="headerlink" title="538. 把二叉搜索树转换为累加树"></a><a href="https://leetcode.cn/problems/convert-bst-to-greater-tree/">538. 把二叉搜索树转换为累加树</a></h4><p><img src="/images/image_15.a1f7f68c.png"></p><blockquote><p>找一个遍历 记录上一个节点或当前的总和,然后调整一下中序遍历的顺序就行了</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">convertBST</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> pre <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 用来记录前一个节点</span>    <span class="token keyword">function</span> <span class="token function">traversal</span><span class="token punctuation">(</span><span class="token parameter">cur</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>cur <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token comment">// 空节点直接返回</span>        <span class="token function">traversal</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token comment">// 右子树</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个前一个节点存在 修改当前节点的值</span>            cur<span class="token punctuation">.</span>val <span class="token operator">=</span> cur<span class="token punctuation">.</span>val <span class="token operator">+</span> pre<span class="token punctuation">.</span>val        <span class="token punctuation">}</span>        pre <span class="token operator">=</span> cur <span class="token comment">// 修改前一个节点</span>        <span class="token function">traversal</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token comment">// 左子树</span>    <span class="token punctuation">}</span>    <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>    <span class="token keyword">return</span> root<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token function-variable function">convertBST</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">function</span> <span class="token function">tra</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span>        <span class="token function">tra</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span>        root<span class="token punctuation">.</span>val <span class="token operator">+=</span> sum        sum <span class="token operator">=</span> root<span class="token punctuation">.</span>val        <span class="token function">tra</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token function">tra</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span>    <span class="token keyword">return</span> root<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="东哥带你刷二叉搜索树-基操篇"><a href="#东哥带你刷二叉搜索树-基操篇" class="headerlink" title="东哥带你刷二叉搜索树 基操篇"></a>东哥带你刷二叉搜索树 基操篇</h3><p>二叉搜索树数的阶解题框架</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">void</span> <span class="token constant">BST</span><span class="token punctuation">(</span><span class="token parameter">TreeNode root<span class="token punctuation">,</span> int target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">==</span> target<span class="token punctuation">)</span>        <span class="token comment">// 找到目标，做点什么</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> target<span class="token punctuation">)</span>         <span class="token constant">BST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&gt;</span> target<span class="token punctuation">)</span>        <span class="token constant">BST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="98-验证二叉搜索树"><a href="#98-验证二叉搜索树" class="headerlink" title="98. 验证二叉搜索树"></a><a href="https://leetcode.cn/problems/validate-binary-search-tree/">98. 验证二叉搜索树</a></h4><p><img src="/images/image_16.e39fedf7.png"></p><blockquote><p>思路</p><ul><li>中序排列,然后判断左边的是不是小于右边的 是不是升序的</li><li>递归的做 传入的参数是根节点 返回的是以这个为根节点的是不是二叉搜索树</li></ul></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">isValidBST</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> pre <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 定义一个集美前一个节点的变量</span>    <span class="token keyword">function</span> <span class="token function">traversal</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 传入根节点</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span> <span class="token comment">// 如果是null 就返回true</span>        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token comment">// 遍历左子树</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>pre <span class="token operator">&amp;&amp;</span> pre<span class="token punctuation">.</span>val <span class="token operator">&gt;=</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span> <span class="token comment">// 判断前一个的值是不是小于当前的</span>        pre <span class="token operator">=</span> root <span class="token comment">// 修改前一个的值</span>        <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token comment">// 右子树</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">||</span> right <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 有一个是false 就返回false</span>            <span class="token keyword">return</span> <span class="token boolean">false</span>        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 返回true</span>            <span class="token keyword">return</span> <span class="token boolean">true</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><p>思路2:</p><ul><li>其实一个函数也可以解决  对于二叉搜索树 左子树的最大值就是这个的根节点 右子树的最小值是根节点 所以可以递归的判断左右子树</li></ul></blockquote><blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">isValidBST</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> min <span class="token operator">=</span> <span class="token keyword">null</span>    <span class="token keyword">let</span> max <span class="token operator">=</span> <span class="token keyword">null</span>    <span class="token keyword">function</span> <span class="token function">traversal</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span>min<span class="token punctuation">,</span>max</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>min <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> min<span class="token punctuation">.</span>val <span class="token operator">&gt;=</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>max <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> max<span class="token punctuation">.</span>val <span class="token operator">&lt;=</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">false</span>        <span class="token keyword">return</span> <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>min<span class="token punctuation">,</span>root<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>root<span class="token punctuation">,</span>max<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">traversal</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>min<span class="token punctuation">,</span>max<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h4 id="700-二叉搜索树中的搜索"><a href="#700-二叉搜索树中的搜索" class="headerlink" title="700. 二叉搜索树中的搜索"></a><a href="https://leetcode.cn/problems/search-in-a-binary-search-tree/">700. 二叉搜索树中的搜索</a></h4><p><img src="/images/image_17.a9d10055.png"></p><blockquote><p>如果是一般的树,可以逐个的搜索左右节点 然后返回搜到的值</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">searchBST</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> root<span class="token punctuation">.</span>val <span class="token operator">===</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> root    <span class="token punctuation">}</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">searchBST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>val<span class="token punctuation">)</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">searchBST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>val<span class="token punctuation">)</span>    <span class="token keyword">return</span> left <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> right <span class="token operator">:</span> left<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><p>对于二叉搜索树可以利用二叉搜索树的性质</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">searchBST</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> root<span class="token punctuation">.</span>val <span class="token operator">===</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> root    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&gt;</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 判断左右子树的大小向左右子树寻找</span>        <span class="token keyword">return</span> <span class="token function">searchBST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>val<span class="token punctuation">)</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token function">searchBST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>val<span class="token punctuation">)</span>    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h4 id="二叉搜索树中的增删改"><a href="#二叉搜索树中的增删改" class="headerlink" title="二叉搜索树中的增删改"></a>二叉搜索树中的增删改</h4><ul><li>二叉搜索树中插入一个数<ul><li>对于二叉搜索树要插入一个元素 首先就是要找到这个元素的位置 然后在这个元素的位置生成一个新的元素 插入在这个节点 返回值也要返回treenode类型的,并且要递归调用</li></ul></li></ul><h4 id="701-二叉搜索树中的插入操作"><a href="#701-二叉搜索树中的插入操作" class="headerlink" title="701. 二叉搜索树中的插入操作"></a><a href="https://leetcode.cn/problems/insert-into-a-binary-search-tree/">701. 二叉搜索树中的插入操作</a></h4><p><img src="/images/image_18.2e1783ea.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">insertIntoBST</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token comment">// 新生成一个节点插入</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">&lt;</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>        root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">insertIntoBST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>val<span class="token punctuation">)</span> <span class="token comment">// 如果当前的值小于根节点的值 就想左子树插入</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>val <span class="token operator">&gt;</span> root<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>        root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">insertIntoBST</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>val<span class="token punctuation">)</span> <span class="token comment">// 想右子树插入</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> root <span class="token comment">// 返回插入后的根节点</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="二叉搜索树中的删除操作-450-删除二叉搜索树中的节点"><a href="#二叉搜索树中的删除操作-450-删除二叉搜索树中的节点" class="headerlink" title="二叉搜索树中的删除操作 450. 删除二叉搜索树中的节点"></a>二叉搜索树中的删除操作 <a href="https://leetcode.cn/problems/delete-node-in-a-bst/">450. 删除二叉搜索树中的节点</a></h4><p>总体思路:先找再改</p><p>对于找到之后 也要分情况</p><ul><li>没有子节点  那就直接删除就好了</li><li>有一个子节点 让子节点顶替自己的位置 然后删除原来的节点</li><li>有两个子节点<ul><li>找到左子树的最大值 替换当前的节点 这是第一个方案</li><li>找到右子树的最小值替换当前节点 这是第二个方案</li></ul></li></ul><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">deleteNode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span> root <span class="token comment">// 如果根节点是null 直接返回root</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">===</span> key<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果找的值就是当前的值 那就删除这个节点</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 判断左子树是不是null 如果是 就返回右子树就行了</span>            <span class="token keyword">return</span> root<span class="token punctuation">.</span>right         <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 判断右子树是不是null 如果是那就返回左子树就行了</span>            <span class="token keyword">return</span> root<span class="token punctuation">.</span>left        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> <span class="token comment">// 如果都不是null 那就要删除这个节点了</span>            <span class="token keyword">let</span> cur <span class="token operator">=</span> root<span class="token punctuation">.</span>right <span class="token comment">// 向右子树 找到最小的节点</span>            <span class="token keyword">while</span><span class="token punctuation">(</span>cur<span class="token punctuation">.</span>left<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 小的节点都在左边</span>                cur <span class="token operator">=</span> cur<span class="token punctuation">.</span>left            <span class="token punctuation">}</span>            cur<span class="token punctuation">.</span>left <span class="token operator">=</span> root<span class="token punctuation">.</span>left <span class="token comment">// 这个时候cur就是最小的节点了 然后将这个原来的根节点的左子树 放到cur的左子树上 这样才满足二叉搜索树的性质</span>            <span class="token keyword">return</span> root<span class="token punctuation">.</span>right <span class="token comment">// 返回删除后的右边的子树</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> key<span class="token punctuation">)</span> root<span class="token punctuation">.</span>right <span class="token operator">=</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>key<span class="token punctuation">)</span> <span class="token comment">// 如果找的值大于根节点的值 那就去右边节点去删除</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&gt;</span> key<span class="token punctuation">)</span> root<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token function">deleteNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>key<span class="token punctuation">)</span> <span class="token comment">// 如果找到的值大于根节点的值 那就去左边节点删除</span>    <span class="token keyword">return</span> root<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="东哥带你刷二叉搜索树-构造篇"><a href="#东哥带你刷二叉搜索树-构造篇" class="headerlink" title="东哥带你刷二叉搜索树 构造篇"></a>东哥带你刷二叉搜索树 构造篇</h3><h4 id="96-不同的二叉搜索树"><a href="#96-不同的二叉搜索树" class="headerlink" title="96. 不同的二叉搜索树"></a><a href="https://leetcode.cn/problems/unique-binary-search-trees/">96. 不同的二叉搜索树</a></h4><p><img src="/images/image_19.33bd6f5e.png"></p><blockquote><p>思路:<br>二叉搜索树的核心在于根节点是什么,例如 1,2,3,4,5 加入根节点是3 那么这个二叉搜索树左边就是1,2 右边就是 4,5 所以组成的个数就是左边的个数乘右边的个数 可以用递归的方式写出,见下图 但是递归的方式会超时 复杂度太大</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">numTrees</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token parameter">low<span class="token punctuation">,</span>high</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>low <span class="token operator">&gt;</span> high<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 如果一个元素没有 本身也算是一种排列</span>            <span class="token keyword">return</span> <span class="token number">1</span>        <span class="token punctuation">}</span>        <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 结果</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> low<span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> high<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从最低一直遍历到最大</span>            <span class="token comment">// 从左到右遍历</span>            <span class="token keyword">let</span> lowCount <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span>low<span class="token punctuation">,</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">let</span> highCount <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>high<span class="token punctuation">)</span>            res <span class="token operator">+=</span> lowCount <span class="token operator">*</span> highCount        <span class="token punctuation">}</span>        <span class="token keyword">return</span> res    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><p>思路2:对于递归可以用动态规划的方式来做</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">numTrees</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token keyword">function</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token parameter">low<span class="token punctuation">,</span>high</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>low <span class="token operator">&gt;</span> high<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 如果一个元素没有 本身也算是一种排列</span>            <span class="token keyword">return</span> <span class="token number">1</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>dp<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> dp<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">[</span>high<span class="token punctuation">]</span>        <span class="token punctuation">}</span>        <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 结果</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> low<span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> high<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从最低一直遍历到最大</span>            <span class="token comment">// 从左到右遍历</span>            <span class="token keyword">let</span> lowCount <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span>low<span class="token punctuation">,</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">let</span> highCount <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>high<span class="token punctuation">)</span>            res <span class="token operator">+=</span> lowCount <span class="token operator">*</span> highCount        <span class="token punctuation">}</span>        dp<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">=</span> res        <span class="token keyword">return</span> res    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span>另一种写法<span class="token keyword">var</span> <span class="token function-variable function">numTrees</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> dp <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token comment">// 有几个数的时候的最大的组合数</span>    dp<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 一个都没有是1个</span>    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从第1个开始遍历一致到n</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>j <span class="token operator">&lt;</span> i<span class="token punctuation">;</span>j<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 从左边是0 一直到右边是0</span>            dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> dp<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">*</span> dp<span class="token punctuation">[</span>i<span class="token operator">-</span>j<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> dp<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h4 id="95-不同的二叉搜索树-II"><a href="#95-不同的二叉搜索树-II" class="headerlink" title="95. 不同的二叉搜索树 II"></a><a href="https://leetcode.cn/problems/unique-binary-search-trees-ii/">95. 不同的二叉搜索树 II</a></h4><p><img src="/images/image_20.783ca926.png"></p><blockquote><p>思路<br>借助递归函数 首先传入开始和结束位置的数字 返回这个对应的范围的组成的树的列表<br>如果没有元素 就在列表里面放入null<br>如果有元素 就遍历这个递归调用生成这个的左右列表<br>遍历左右列表生成这个根节点组合<br>最后返回组合</p></blockquote><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">generateTrees</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>     <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">low<span class="token punctuation">,</span>high</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 返回这个区间的搜索二叉树</span>       `        <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 这个范围内生成树的列表</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>low <span class="token operator">&gt;</span> high<span class="token punctuation">)</span> <span class="token punctuation">{</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token comment">// 如果没有节点就返回null</span>            <span class="token keyword">return</span> path        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> low<span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> high<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">backTracking</span><span class="token punctuation">(</span>low<span class="token punctuation">,</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 左子树列表</span>            <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>high<span class="token punctuation">)</span> <span class="token comment">// 右子树列表</span>            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> leftItem <span class="token keyword">of</span> left<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 左右列表组合</span>                <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> rightItem <span class="token keyword">of</span> right<span class="token punctuation">)</span><span class="token punctuation">{</span>                    <span class="token keyword">let</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TreeNode</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 生成根节点 这样每次都生成一个新的 ,如果写在上面 因为是引用类型 后面会修改前面的</span>                    node<span class="token punctuation">.</span>left <span class="token operator">=</span> leftItem                    node<span class="token punctuation">.</span>right <span class="token operator">=</span> rightItem                    path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span>                <span class="token punctuation">}</span>            <span class="token punctuation">}</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> path <span class="token comment">// 返回根节点列表</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span>n<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="GIT原理之最近公共祖先"><a href="#GIT原理之最近公共祖先" class="headerlink" title="GIT原理之最近公共祖先"></a>GIT原理之最近公共祖先</h3><h4 id="寻找一个元素"><a href="#寻找一个元素" class="headerlink" title="寻找一个元素"></a>寻找一个元素</h4><blockquote><p>代码可以写成这样</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">findNode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span>val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果找到底部就返回null</span>        <span class="token keyword">return</span> <span class="token keyword">null</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">===</span> val<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果找到了就返回这个节点</span>        <span class="token keyword">return</span> root    <span class="token punctuation">}</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">findNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>val<span class="token punctuation">)</span> <span class="token comment">// 向左子树寻找</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> left    <span class="token punctuation">}</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">findNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>val<span class="token punctuation">)</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>right <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> right    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 都没找到就返回null</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><blockquote><p>如果把寻找的当前节点的代码放在中序,那么效率会变得更低 ,因为如果根节点找到了,就没必要去左右子树找了<br>==同理== ==将寻找当前节点的代码放在最后== ==效率会变得更低==</p></blockquote><p>如果修改题目 找值是val1或者val的话,可以这样修改代码</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">findNode</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span>val1<span class="token punctuation">,</span>val2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    if(root === null){ // 如果找到底部就返回null       </span><span class="token template-punctuation string">`</span></span>        <span class="token keyword">return</span> <span class="token keyword">null</span>    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">===</span> val2 <span class="token operator">||</span> root<span class="token punctuation">.</span>al  <span class="token operator">===</span> val2<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果找到了就返回这个节点</span>        <span class="token keyword">return</span> root    <span class="token punctuation">}</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">findNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>val1<span class="token punctuation">,</span>val2<span class="token punctuation">)</span> <span class="token comment">// 向左子树寻找</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> left    <span class="token punctuation">}</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">findNode</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>val1<span class="token punctuation">,</span>val2<span class="token punctuation">)</span>   <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    if(right !== null){       </span><span class="token template-punctuation string">`</span></span>        <span class="token keyword">return</span> right   <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">    }   </span><span class="token template-punctuation string">`</span></span>    <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 都没找到就返回null</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="236-二叉树的最近公共祖先"><a href="#236-二叉树的最近公共祖先" class="headerlink" title="236. 二叉树的最近公共祖先"></a><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree/">236. 二叉树的最近公共祖先</a></h4><p><img src="/images/image_21.e970a773.png"></p><blockquote><p>思路:<br>两个节点的最近公共祖先其实就是这两个节点向根节点的延长线的交汇点,那么对于任意一个节点,怎么知道自己是不是pq的公共祖先被<br>如果一个节点能够早左右子树中找到pq,则该节点为LCA节点<br>那么只需要在原来的后续遍历的基础上修改一下代码就能找到最近的公共祖先的解法了<br>在后续的位置,如果发现左右节点的位置都是非空那么这个节点就是公共祖先了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">lowestCommonAncestor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">===</span> p<span class="token punctuation">.</span>val <span class="token operator">||</span> root<span class="token punctuation">.</span>val <span class="token operator">===</span> q<span class="token punctuation">.</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 注意的是节点 需要对比值</span>            <span class="token keyword">return</span> root        <span class="token punctuation">}</span>        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span>        <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span> <span class="token comment">// 向左右去寻找</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> right <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 如果左右都不是这个null 说明这个就是最近的公共祖先</span>            <span class="token keyword">return</span> root        <span class="token punctuation">}</span>        <span class="token keyword">return</span> left <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> left <span class="token operator">:</span> right    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h4 id="1676-二叉树的最近公共祖先-IV"><a href="#1676-二叉树的最近公共祖先-IV" class="headerlink" title="1676. 二叉树的最近公共祖先 IV"></a><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-iv/">1676. 二叉树的最近公共祖先 IV</a></h4><p><img src="/images/image_22.559ec784.png"></p><blockquote><p>道理和上一题类似 修改一下代码就可以</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">lowestCommonAncestor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> nodes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">function</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span>nodes</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 传入根节点 和要找的数组的列表</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span> <span class="token comment">// 如果根节点是null 就返回null</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>nodes<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 如果这个节点在这个列表里面直接返回</span>            <span class="token keyword">return</span> root        <span class="token punctuation">}</span>        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>nodes<span class="token punctuation">)</span> <span class="token comment">// 向左子树来找</span>        <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>nodes<span class="token punctuation">)</span> <span class="token comment">// 向右子树来找</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> right <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> root <span class="token comment">// 如果左右都能找到 那么直接返回根节点</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> left <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> right <span class="token operator">:</span> left    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>nodes<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p><code>需要注意的是:上面两道题目都告诉了 这两个节点肯定存在于二叉树中 如果没有这个前提条件 就需要修改代码了</code></p><h4 id="1644-二叉树的最近公共祖先-II"><a href="#1644-二叉树的最近公共祖先-II" class="headerlink" title="1644. 二叉树的最近公共祖先 II"></a><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-ii/">1644. 二叉树的最近公共祖先 II</a></h4><p><img src="/images/image_23.469d366c.png"></p><blockquote><p>在前两道题目中,pq一定存在于树中,所以在遇到一个值的时候就可以立马返回,但是这个题目,这两个节点不一定在树中,所以不能按照之前的套路直接返回,而是应该对这个二叉树进行完全搜索,如果发现这两个节点不存在与树中,那么是不存在这个最近公共祖先的<br>回想之前的代码,发现将判断是不是节点的放在这个后续的位置是进行完全遍历的<br>那么解决这道问题的思路就是,只需要把判断逻辑放在后续位置就行了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">lowestCommonAncestor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> hasP <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">,</span>hasQ <span class="token operator">=</span> <span class="token boolean">false</span>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>q<span class="token punctuation">,</span>p<span class="token punctuation">)</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>hasP <span class="token operator">===</span> <span class="token boolean">false</span> <span class="token operator">||</span> hasQ <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">return</span> <span class="token keyword">null</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> res    <span class="token keyword">function</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token keyword">null</span>        <span class="token punctuation">}</span>        <span class="token keyword">let</span> left <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span> <span class="token comment">// 向左边找</span>        <span class="token keyword">let</span> right <span class="token operator">=</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>p<span class="token punctuation">,</span>q<span class="token punctuation">)</span> <span class="token comment">// 向右边找</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>left <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> right <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 如果左边右边都不是null 那么就返回这个节点</span>            <span class="token keyword">return</span> root        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> p <span class="token operator">||</span> root <span class="token operator">===</span> q<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token comment">// 如果两个有一个是和这个相等 那么记录一下</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> p<span class="token punctuation">)</span> <span class="token punctuation">{</span>                hasP <span class="token operator">=</span> <span class="token boolean">true</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> q<span class="token punctuation">)</span><span class="token punctuation">{</span>                hasQ <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 记录哪个出现过</span>            <span class="token punctuation">}</span>            <span class="token keyword">return</span> root <span class="token comment">// 返回这个节点</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> left <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">?</span> right <span class="token operator">:</span> left    <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h4 id="235-二叉搜索树的最近公共祖先"><a href="#235-二叉搜索树的最近公共祖先" class="headerlink" title="235. 二叉搜索树的最近公共祖先"></a><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-search-tree/">235. 二叉搜索树的最近公共祖先</a></h4><p><img src="/images/image_24.67e704d4.png"></p><blockquote><p>思路在之前的思路中,是判断这个节点是否存在来判断是不是这个节点,在二叉搜索树中可以利用到二叉搜索树的性质<br>首先要分析出来这两个的最大最小值<br>如果当前节点的值大于最大值 那就直接去左子树中寻找就行了<br>如果当前节点的值小于最小值 那就直接去右子树中寻找就行了<br>否则的话 当前节点的值在这两个的中间 那就直接返回就行了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">lowestCommonAncestor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> p<span class="token punctuation">,</span> q</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> max <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>val<span class="token punctuation">,</span>q<span class="token punctuation">.</span>val<span class="token punctuation">)</span>    <span class="token keyword">let</span> min <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>val<span class="token punctuation">,</span>q<span class="token punctuation">.</span>val<span class="token punctuation">)</span>    <span class="token keyword">function</span> <span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span>max<span class="token punctuation">,</span>min</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> root <span class="token comment">// 如果是null 直接返回</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&gt;</span> max<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">,</span>max<span class="token punctuation">,</span>min<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>val <span class="token operator">&lt;</span> min<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">,</span>max<span class="token punctuation">,</span>min<span class="token punctuation">)</span>        <span class="token punctuation">}</span>        <span class="token keyword">return</span> root <span class="token comment">// 在中间直接返回</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>root<span class="token punctuation">,</span>max<span class="token punctuation">,</span>min<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><h4 id="1650-二叉树的最近公共祖先-III"><a href="#1650-二叉树的最近公共祖先-III" class="headerlink" title="1650. 二叉树的最近公共祖先 III"></a><a href="https://leetcode.cn/problems/lowest-common-ancestor-of-a-binary-tree-iii/">1650. 二叉树的最近公共祖先 III</a></h4><p><img src="/images/image_25.672dff89.png"></p><p>这道题的题目意思是给出这个的两个节点p和q要返回这两个节点的最近公共祖先 每个节点还有指向父节点的指针</p><p>这个题目其实不是公共祖先问题,而是单链表相交的问题,可以把parent视作单链表的next指针</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">lowestCommonAncestor</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">p<span class="token punctuation">,</span> q</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> a <span class="token operator">=</span> p    <span class="token keyword">let</span> b <span class="token operator">=</span> q <span class="token comment">// 缓存p和q节点</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>a <span class="token operator">!==</span> b<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 寻找相交的链表</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>            a <span class="token operator">=</span> a<span class="token punctuation">.</span>parent        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            a <span class="token operator">=</span> q        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span>            b <span class="token operator">=</span> b<span class="token punctuation">.</span>parent        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>            b <span class="token operator">=</span> p        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> a<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="如何计算完全二叉树的节点数"><a href="#如何计算完全二叉树的节点数" class="headerlink" title="如何计算完全二叉树的节点数"></a>如何计算完全二叉树的节点数</h3><h4 id="222-完全二叉树的节点个数"><a href="#222-完全二叉树的节点个数" class="headerlink" title="222. 完全二叉树的节点个数"></a><a href="https://leetcode.cn/problems/count-complete-tree-nodes/">222. 完全二叉树的节点个数</a></h4><p><img src="/images/image_26.704a4448.png"></p><blockquote><p>完全二叉树的含义<br>每一层都是紧凑靠左排列的,除了最后一层每层都是满的</p><p>开始解题:怎么求一个树的节点个数呢<br>对于普通的二叉树,遍历一遍节点就行了<br>对于满二叉树:节点的个数和层数是指数的关系</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">countNodes</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> h <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>root <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        h<span class="token operator">++</span>        root <span class="token operator">=</span> root<span class="token punctuation">.</span>left    <span class="token punctuation">}</span> <span class="token comment">// 退出的时候root等于null</span>    <span class="token comment">// h就是层数</span>    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>h<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></blockquote><p>对于完全二叉树,并不能仅仅的按照满二叉树来进行计算,而是要考虑左边和右边的层数,具体代码见下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">countNodes</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">root</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> left <span class="token operator">=</span> root <span class="token comment">// 遍历左边节点</span>    <span class="token keyword">let</span> right <span class="token operator">=</span> root <span class="token comment">// 遍历右边节点</span>    <span class="token keyword">let</span> hl <span class="token operator">=</span> <span class="token number">0</span>    <span class="token keyword">let</span> hr <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 左右的层数</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>left <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        hl<span class="token operator">++</span>        left <span class="token operator">=</span> left<span class="token punctuation">.</span>left    <span class="token punctuation">}</span>    <span class="token keyword">while</span><span class="token punctuation">(</span>right <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        hr<span class="token operator">++</span>        right <span class="token operator">=</span> right<span class="token punctuation">.</span>right    <span class="token punctuation">}</span>    <span class="token keyword">if</span><span class="token punctuation">(</span>hl <span class="token operator">===</span> hr<span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token comment">// 如果两个相同 相当于满二叉树</span>        <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">pow</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span>hl<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span>    <span class="token punctuation">}</span>    <span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token function">countNodes</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token operator">+</span><span class="token function">countNodes</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token comment">// 否则返回左子树的个数+右子树的个数 因为一直划分下去 肯定两边都是满二叉树</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 二叉树总结 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浏览器渲染全集整理</title>
      <link href="/2022/07/07/liu-lan-qi-xuan-ran-quan-ji-zheng-li/"/>
      <url>/2022/07/07/liu-lan-qi-xuan-ran-quan-ji-zheng-li/</url>
      
        <content type="html"><![CDATA[<h3 id="进程和线程的概念"><a href="#进程和线程的概念" class="headerlink" title="进程和线程的概念"></a>进程和线程的概念</h3><h4 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h4><p>进程是操作系统资源分配的基本单位,进程中包括线程</p><p>简单来说进程就是计算机上正在运行的一个程序</p><h4 id="线程"><a href="#线程" class="headerlink" title="线程"></a>线程</h4><p>线程是进程所管理的,为了提升浏览器的稳定性和安全性,浏览器采用的是多进程的模型</p><ol><li>线程是进程的基本单位,一个进程包含多个线程,线程是程序执行的最小单元</li><li>线程和进程都是动态概念,存在只是暂时的,有创建有销毁</li><li>进程和线程的区别在于进程在运行的时候有独立的内存空间,每个进程所占用的内存都是独立的</li><li>多个线程是共享内存空间的,但是每个线程的执行是独立的,线程必须以来进程,单独的进程是无法执行的</li></ol><h4 id="浏览器中的5个进程"><a href="#浏览器中的5个进程" class="headerlink" title="浏览器中的5个进程"></a>浏览器中的5个进程</h4><p><img src="/images/image_1.4a0dfb81.png"></p><p><img src="/images/image_2.d46b2dec.png"></p><p>● 浏览器进程。主要负责界面显示、用户交互、子进程管理、同时提供存储等功能。</p><p>● 渲染进程。 核心任务是将HTML、CSS和JavaScript转换为用户可以与之交互的网页，排版引擎Blink和JavaScript引擎V8都运行在该进程中，默认情况下，Chrome为每一个Tab标签页创建一个渲染进程。出于安全考虑，渲染进程都是运行在沙箱模式下的。</p><p>● GPU进程。GPU图形处理器（英语：graphics processing unit，缩写：GPU）,负责3D css效果，网页，Chrome ui的绘制。</p><p>● 网络进程。主要负责页面的网络资源加载，之前是作为一个模块运行在浏览器进程里面的，直至最近才独立处理，成为单独一个进程。</p><p>● 插件进程。主要负责插件的运行，因为插件易崩溃，所以通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响。</p><h3 id="网络的七层模型"><a href="#网络的七层模型" class="headerlink" title="网络的七层模型"></a>网络的七层模型</h3><table><thead><tr><th>应用层</th><th>为应用程序提供服务</th></tr></thead><tbody><tr><td>表示层</td><td>数据格式转化、数据加密</td></tr><tr><td>会话层</td><td>建立、管理和维护会话</td></tr><tr><td>传输层</td><td>建立、管理和维护端到端的连接</td></tr><tr><td>网路层</td><td>IP地址及路由选择</td></tr><tr><td>数据链路层</td><td>提供介质访问和链路管理</td></tr><tr><td>物理层</td><td>1.互联物理链路，物质介质(网线，光纤，无线电波wifi )<br>2.数据是以0101这样的比特流存在的</td></tr></tbody></table><p><img src="/images/image_3.74c43162.png"></p><h4 id="ARP协议工作原理"><a href="#ARP协议工作原理" class="headerlink" title="ARP协议工作原理"></a>ARP协议工作原理</h4><p>ARP协议: 地址解析协议，通过对象的ip地址(域名)，寻找对象的MAC地址ARP的功能。通过ARP协议，知道对象的MAC地址，那些数据就</p><h4 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h4><blockquote><p>IP协议<br>IP(Internet Protocol)，分配给用户上网使用网际协议的设备的数字标签，分为两大类：IP4和IP6。<br>● IPv4: 32位，二进制，十进制。<br>● IPv6: 弥补IPv4地址池不够–ipv4数量有限，ipv6有128位，以16进制表达。<br>IP地址的组成<br>由32bit组成，分成4段并用”.”分割:192.168.0.1<br>IP地址的组成<br>由32bit组成，分成4段并用”.”分割:192.168.0.1<br>网路号标识的是一个子网。<br>主机号标识的是子网中的某台主机<br>子网掩码<br>作用: 用来标识子网，必须跟IP地址一起存在。<br>组成：子网掩码跟IP地址一样，二进制：也是由连续的1和0组成，连续的1表示网络地址，连续的0表示主机地址。只有网络地址相同的主机在同一个子网，才能直接通信。</p></blockquote><p><img src="/images/image_4.56944717.png"></p><p>IP地址和子网掩码  将IP地址的网络号都变成1 主机号都变成0 就形成了子网掩码</p><p><img src="/images/image_5.eef94654.png"></p><h4 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h4><p>一、三次握手/四次挥手</p><p>二、序号，确认号，标志位详解</p><p>序号seq 的作用，当TCP数据包过大时，分段传送(1,2,3…10)–按顺序重组</p><p>确认号：ack 服务器能够回应?存在于确认消息中，跟序号的关系？ seq=j;ack =j+1;表示服务器期望收到的下一个包的序号。</p><p>标志位:</p><table><thead><tr><th>SYN 建立连接（同步标志）</th><th>1发送连接消息</th><th>0确认连接消息</th></tr></thead><tbody><tr><td>ACK 响应确认(确认标志)</td><td>1是一个确认消息</td><td>0不是一个确认消息</td></tr><tr><td>FIN 关闭连接</td><td></td><td></td></tr></tbody></table><h3 id="浏览器渲染"><a href="#浏览器渲染" class="headerlink" title="浏览器渲染"></a>浏览器渲染</h3><ul><li><p>使用html解析器将html页面转换成浏览器能够理解的DOM树 parseHtml 实际就是解析为DOM树,dom树是可以通过js来进行操作的</p></li><li><p>将css解析成浏览器能够识别的css树,css树的样式和dom树里面的节点是一一对应的</p><ul><li>将cssua你换成浏览器内容理解的结构</li><li>转换样式中的属性值,使其标准化</li><li>计算出DOM中每一个节点的具体样式</li></ul></li><li><p>根据样式表中的属性,进行样式的计算</p></li><li><p>DOM树+CSS树形成布局树,dom中不可见的节点不会渲染到布局树,布局树是只包含可见元素</p></li><li><p>根据布局树生成图层树:哪几种情况可以称之为图层</p><ul><li>执行3d转换的元素</li><li>给了定位的元素</li><li>video也会生成图层</li><li>canvas也是单独的图层</li><li>css3动画的节点:执行完毕之后就不是一个单独的图层了</li></ul></li><li><p>绘制 (一个一个的绘制) 根据图层来一个一个绘制</p><ul><li>绘制指令 -&gt; 待绘制列表</li><li>栅格化操作,绘制列表指令用来记录绘制顺序和绘制指令的列表，而实际上绘制操作是由渲染引擎中的合成线程来完成</li><li>比如说，一个图层很大，页面需要滚动底部，才能全部显示。但是通过视口，用户只能看到页面很小的一部分，所以在此种情况下，要一次性绘制完图层所有的内容，会产生很大的开销，且没有必要。</li><li>合成线程将图层划分为图块,按照视口附近的图块优先生成位图,栅格化就是将图块转化为位图,图块是栅格化执行的最小单位</li></ul></li><li><p>组合图层  生成最终的页面</p></li></ul><h4 id="重排"><a href="#重排" class="headerlink" title="重排"></a>重排</h4><p>更新元素的集合属性,通过JS或css修改元素的几何位置属性，如width,height等，那么会触发浏览器的重新布局，解析之后的一系列子阶段，这个过程就叫重排。重排需要更新完整的渲染流水线，所以开销也最大的。</p><h4 id="重绘"><a href="#重绘" class="headerlink" title="重绘"></a>重绘</h4><p>修改元素的背景色，布局阶段不会执行，因为没有引起几何位置的变换，所以直接进入绘制，然后执行之后的一系列子阶段，这个过程就叫重绘。相较重排操作，重绘省去了布局和分层阶段，所以执行效率会比重排效率高。</p><h4 id="合成"><a href="#合成" class="headerlink" title="合成"></a>合成</h4><p>那如果你更改一个既不要布局也不要绘制的属性，渲染引擎将跳过布局和绘制，只执行后续的合成操作，我们把这个过程叫做合成。</p><p>在上图，我们使用CSS的transform来实现动画效果，可以避开重排和重绘阶段，直接在非主线程上执行合成动画操作。这样的效率最高，因为是在非主线程上合成的，并没有占用主线程的资源。</p><h4 id="浏览器每次可以接受多少数据"><a href="#浏览器每次可以接受多少数据" class="headerlink" title="浏览器每次可以接受多少数据"></a>浏览器每次可以接受多少数据</h4><p>64KB</p><h3 id="重绘paint和重排layout"><a href="#重绘paint和重排layout" class="headerlink" title="重绘paint和重排layout"></a>重绘paint和重排layout</h3><h4 id="重排-1"><a href="#重排-1" class="headerlink" title="重排"></a>重排</h4><p>入口没有使用link标签去引入的情况,样式还是通过html解析器来解析,新开一个线程去解析css,还有一个线程去解析html</p><ul><li><p>如果使用style形式</p><ul><li>会阻塞浏览器的渲染,就是显示的会慢一些</li><li>不会阻塞页面的渲染</li></ul></li><li><p>link标签引入 各干各的</p><ul><li>link依旧会阻塞浏览器的渲染</li><li>不会阻塞dom解析</li></ul></li><li><p>js阻塞,最好是将js卸载页面的地步</p><ul><li>阻塞浏览器渲染</li><li>阻塞DOM解析</li><li>阻塞js 执行</li></ul></li></ul><p>不会阻塞页面的渲染</p><blockquote><p>Reflow(重排)的成本比Repaint(重绘)的成本高很多。<br>一个节点的Reflow很可能会导致子节点，甚至父节点同级节点的Reflow。以下行为是成本比较高的<br>1、增加，删除，修改DOM节点时，会导致Reflow,Repaint。<br>2、移动DOM的位置。<br>3、修改css样式的时候。<br>4、当你Resize窗口的时候(移动端无此问题，因为移动端的缩放没有影响布局视口)<br>5、获取某些属性(width,height..)<br>6、display:none会触发reflow，而visibility:hidden只会触发repaint，因为没有发生位置变化。</p></blockquote><h4 id="重绘-1"><a href="#重绘-1" class="headerlink" title="重绘"></a>重绘</h4><blockquote><p>重绘: 元素样式的改变(不包含宽高，大小，位置)<br>触发重绘的属性:主要是颜色 可见性 边框颜色和样式 背景<br>color background&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outline<br>border-color background-image<br>border-style&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; background-position<br>vsibility &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; background-repeat</p></blockquote><h4 id="优化方案"><a href="#优化方案" class="headerlink" title="优化方案"></a>优化方案</h4><blockquote><p>元素位置移动变换时尽量使用css3的transform来代替top left等操作<br>  ==1、transform结合图层使用不会触发重绘，也不会触发重排==</p></blockquote><blockquote><p>  ==2、transform结合定位position:relative只触发重绘==</p></blockquote><blockquote><p>  3、transform单独使用,既重绘也重排。</p></blockquote><blockquote><p>使用opacity来替代visibility<br>  1、使用visibility不触发重排，但是依然重绘。</p></blockquote><blockquote><p>  2、使用opacity即触发重绘，又触发重排。（GPU底层设计如此）</p></blockquote><blockquote><p>  3、opacity配合图层使用，不会触发重绘也不触发重排</p></blockquote><blockquote><p>将多次改变样式的操作合并成一次<br>利用文档碎片documentFragment<br>不要把获取某些DOM节点的属性值放在一个循环里面当成是循环的变量,因为有的时候获取文档的width和height也会触发重绘和重排<br>为动画新建图层</p></blockquote><h3 id="浏览器不同页面之间的通讯"><a href="#浏览器不同页面之间的通讯" class="headerlink" title="浏览器不同页面之间的通讯"></a>浏览器不同页面之间的通讯</h3><blockquote><p>实现多个标签页之间的通信，本质上都是通过中介者模式来实现的。因为标签页之间没有办法直接通信，因此我们可以找一个中介者，让标签页和中介者进行通信，然后让这个中介者来进行消息的转发。通信方法如下：</p><ul><li>使用 websocket 协议，因为 websocket 协议可以实现服务器推送，所以服务器就可以用来当做这个中介者。标签页通过向服务器发送数据，然后由服务器向其他标签页推送转发</li><li>使用 ShareWorker 的方式，shareWorker 会在页面存在的生命周期内创建一个唯一的线程，并且开启多个页面也只会使用同一个线程。这个时候共享线程就可以充当中介者的角色。标签页间通过共享一个线程，然后通过这个共享的线程来实现数据的交换。</li><li>使<strong>用 localStorage 的方式</strong>，我们可以在一个标签页对 localStorage 的变化事件进行监听，然后当另一个标签页修改数据的时候，我们就可以通过这个监听事件来获取到数据。这个时候 localStorage 对象就是充当的中介者的角色。</li><li>使用 postMessage 方法，如果我们能够获得对应标签页的引用，就可以使用postMessage 方法，进行通信。</li></ul></blockquote><h5 id="websocket"><a href="#websocket" class="headerlink" title="websocket"></a>websocket</h5><table><thead><tr><th>==事件==</th><th>==描述==</th></tr></thead><tbody><tr><td>==Socket.onopen==</td><td>==连接建立时触发==</td></tr><tr><td>==Socket.onmessage==</td><td>==客户端接收服务端数据时触发==</td></tr><tr><td>==Socket.onerror==</td><td>==通信发生错误时触发==</td></tr><tr><td>==Socket.onclose==</td><td>==连接关闭时触发==</td></tr><tr><td>==方法==</td><td>==描述==</td></tr><tr><td>==Socket.send()==</td><td>==使用连接发送数据==</td></tr><tr><td>==Socket.close()==</td><td>==关闭连接==</td></tr></tbody></table><p>websocket实例</p><pre class="line-numbers language-none"><code class="language-none">cnpm i nodejs-websocket -S // 下载包<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">在服务端进行的设置var ws = require('nodejs-websocket')var server = ws.createServer(function(socket){// 事件名称为text(读取字符串时，就叫做text)，读取客户端传来的字符串　  var count = 1;    socket.on('text', function(str) {　　     // 在控制台输出前端传来的消息　　        console.log(str);        //向前端回复消息        socket.sendText('服务器端收到客户端端发来的消息了！' + count++);    });}).listen(3000); <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><pre class="line-numbers language-none"><code class="language-none">前端进行的设置// 打开一个 web socket  这里端口号和上面监听的需一致var ws = new WebSocket('ws://localhost:3000/');   // Web Socket 已连接上，使用 send() 方法发送数据var count =1;ws.onopen = function() {// 这里用一个延时器模拟事件    setInterval(function() {        ws.send('客户端消息:'+count++);    },2000);}// 这里接受服务器端发过来的消息ws.onmessage = function(e) {    console.log(e.data)} <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr>]]></content>
      
      
      <categories>
          
          <category> 面试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简历 </tag>
            
            <tag> 浏览器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何合理使用钩子函数</title>
      <link href="/2022/07/02/he-li-shi-yong-gou-zi-han-shu-shi-xian-shu-ju-de-jian-ting-xuan-ran-ye-mian-ye-mian-jie-dian-de-shi-li-hua/"/>
      <url>/2022/07/02/he-li-shi-yong-gou-zi-han-shu-shi-xian-shu-ju-de-jian-ting-xuan-ran-ye-mian-ye-mian-jie-dian-de-shi-li-hua/</url>
      
        <content type="html"><![CDATA[<p>vue中的钩子函数有很多,比如说声明周期的钩子函数,路由的钩子函数,页面加载的钩子函数等等</p><span id="more"></span><p>vue中的钩子函数有很多,比如说声明周期的钩子函数,路由的钩子函数,页面加载的钩子函数等等</p><h2 id="生命周期钩子函数"><a href="#生命周期钩子函数" class="headerlink" title="生命周期钩子函数"></a>生命周期钩子函数</h2><p>vue中主要的生命周期钩子函数有8个,另外还有这个keepalive对应的两个钩子函数,如下图所示</p><p><img src="/images/image_1.c0ad6a9b.png"></p><h3 id="beforeCreate-：-创建VUE实例之前"><a href="#beforeCreate-：-创建VUE实例之前" class="headerlink" title="beforeCreate ： 创建VUE实例之前"></a>beforeCreate ： 创建VUE实例之前</h3><p>这个钩子函数不能获取data中的数据；</p><ul><li>这个钩子函数不能获取data中的数据；</li><li>这个函数中不能操作DOM；</li></ul><h3 id="created-创建实例成功（一般在这里实现数据异步请求）"><a href="#created-创建实例成功（一般在这里实现数据异步请求）" class="headerlink" title="created : 创建实例成功（一般在这里实现数据异步请求）"></a>created : 创建实例成功（一般在这里实现数据异步请求）</h3><ul><li>能操作数据的，</li><li>也不能操作DOM；</li><li>一般在这里发送请求</li></ul><h3 id="beforeMount-渲染DOM之前（加载组件第一次渲染）"><a href="#beforeMount-渲染DOM之前（加载组件第一次渲染）" class="headerlink" title="beforeMount : 渲染DOM之前（加载组件第一次渲染）"></a>beforeMount : 渲染DOM之前（加载组件第一次渲染）</h3><h3 id="mounted-渲染DOM之后（加载组件第一次渲染）"><a href="#mounted-渲染DOM之后（加载组件第一次渲染）" class="headerlink" title="mounted  : 渲染DOM之后（加载组件第一次渲染）"></a>mounted  : 渲染DOM之后（加载组件第一次渲染）</h3><ul><li>挂载：把vue实例生成的虚拟的DOM装成真实的DOM，并且插入el元素中这就是挂载；</li><li>钩子函数是同步执行的，但是DOM渲染是异步的；</li></ul><h3 id="beforeUpdate-重新渲染之前（数据更新等操作控制DOM重新渲染）"><a href="#beforeUpdate-重新渲染之前（数据更新等操作控制DOM重新渲染）" class="headerlink" title="beforeUpdate :   重新渲染之前（数据更新等操作控制DOM重新渲染）"></a>beforeUpdate :   重新渲染之前（数据更新等操作控制DOM重新渲染）</h3><h3 id="updated-：-重新渲染完成"><a href="#updated-：-重新渲染完成" class="headerlink" title="updated ： 重新渲染完成"></a>updated ： 重新渲染完成</h3><p>把改变之后数据形成的虚拟的DOM和上一次的DOM进行对比，替换掉修改的那部分DOM；</p><ul><li>把改变之后数据形成的虚拟的DOM和上一次的DOM进行对比，替换掉修改的那部分DOM；</li><li>尽量以性能最高的方式更新DOM</li></ul><h3 id="beforeDestroy-销毁之前"><a href="#beforeDestroy-销毁之前" class="headerlink" title="beforeDestroy  :  销毁之前"></a>beforeDestroy  :  销毁之前</h3><ul><li>清除定时器</li><li>在这里面更新数据，DOM也不会更新</li></ul><h3 id="destroyed-销毁完成"><a href="#destroyed-销毁完成" class="headerlink" title="destroyed  :  销毁完成"></a>destroyed  :  销毁完成</h3><ul><li>当更改数据不会再视图更新了;</li><li>给元素绑定事件是不受影响的，可以继续执行</li></ul><p><img src="https://cdn.nlark.com/yuque/0/2021/png/1519405/1612753908472-b91079ec-3f20-4e90-a1b1-1fc48594bdf6.png#align=left&amp;display=inline&amp;height=3032&amp;margin=%5Bobject%20Object%5D&amp;name=332323.png&amp;originHeight=3032&amp;originWidth=2104&amp;size=715607&amp;status=done&amp;style=none&amp;width=2104" alt="332323.png"></p><h2 id="导航钩子函数"><a href="#导航钩子函数" class="headerlink" title="导航钩子函数"></a>导航钩子函数</h2><h3 id="全局的钩子函数"><a href="#全局的钩子函数" class="headerlink" title="全局的钩子函数"></a>全局的钩子函数</h3><p>beforeEach 和 afterEach</p><p>beforeEach 有三个参数，to 代表要进入的路由对象，from 代表离开的路由对象。next 是一个必须要执行的函数，如果不传参数，那就执行下一个钩子函数，如果传入 false，则终止跳转，如果传入一个路径，则导航到对应的路由，如果传入 error ，则导航终止，error 传入错误的监听函数</p><h2 id="单个路由独享的钩子函数"><a href="#单个路由独享的钩子函数" class="headerlink" title="单个路由独享的钩子函数"></a>单个路由独享的钩子函数</h2><p>beforeEnter，它是在路由配置上直接进行定义的</p><h2 id="组件内的导航钩子主要有这三种："><a href="#组件内的导航钩子主要有这三种：" class="headerlink" title="组件内的导航钩子主要有这三种："></a>组件内的导航钩子主要有这三种：</h2><p>beforeRouteEnter、beforeRouteUpdate、beforeRouteLeave。它们是直接在路由组件内部直接进行定义的</p><p>详情可以见博客另一篇文章<a href="onenote:#使用vue-router进行路由跳转&amp;section-id={FB61D1AB-6B4A-6C41-9C51-6E24C269F92E}&amp;page-id={F7065B92-62A3-47FC-A3B3-4E4F55ED385E}&amp;end&amp;base-path=https://onedriveplus-my.sharepoint.cn/personal/x76_onedriveplus_live/Documents/面试笔记1/简历问题.one">使用vue-router进行路由跳转</a><a href="https://xiaolidu11.gitee.io/2022/08/08/shi-yong-vue-router-jin-xing-lu-you-tiao-zhuan/">使用vue-router进行路由跳转 | xiaolidu-blog (gitee.io)</a></p><h2 id="vue指令里面的钩子函数"><a href="#vue指令里面的钩子函数" class="headerlink" title="vue指令里面的钩子函数"></a>vue指令里面的钩子函数</h2><p>指令定义的钩子函数有</p><p><code>bind</code>:只调用一次,就是指令第一次绑定到元素的时候调用,用这个钩子函数可以定义一个在绑定的时候执行的一次的初始化动作</p><p><code>inserted</code>:插入到父节点的时候调用</p><p><code>update</code>:在模板更新的时候调用,不论绑定值是否变化,比较前后的绑定值,可以忽略不必要的模板更新</p><p><code>componentUpdated</code>:被绑定元素所在模板完成一次更新周期时调用</p><p><code>unbind</code>:只调用一次,指令与元素解绑的时候调用</p><p>钩子函数的参数有</p><p>● <code>el</code>: 指令所绑定的元素，可以用来直接操作 DOM 。</p><p>● <code>binding</code>: 一个对象，包含以下属性：</p><p>○ <code>name</code>: 指令名，不包括 v- 前缀。</p><p>○ <code>value</code>: 指令的绑定值， 例如： v-my-directive=”1 + 1”, value 的值是 2。</p><p>○ <code>oldValue</code>: 指令绑定的前一个值，仅在 update 和 componentUpdated 钩子中可用。无论值是否改变都可用。</p><p>○ <code>expression</code>: 绑定值的表达式或变量名。 例如 v-my-directive=”1 + 1” ， expression 的值是 “1 + 1”。</p><p>○ <code>arg</code>: 传给指令的参数。例如 v-my-directive:foo， arg 的值是 “foo”。</p><p>○ <code>modifiers</code>: 一个包含修饰符的对象。 例如： v-my-directive.foo.bar, 修饰符对象 modifiers 的值是 { foo: true, bar: true }。</p><p>● <code>vnode</code>: Vue 编译生成的虚拟节点。</p><p>● <code>oldVnode</code>: 上一个虚拟节点，仅在 update 和 componentUpdated 钩子中可用。</p><h4 id="一、什么是全局API？"><a href="#一、什么是全局API？" class="headerlink" title="一、什么是全局API？"></a>一、什么是全局API？</h4><blockquote><p>全局API并不在构造器里，而是先声明全局变量或者直接在Vue上定义一些新功能，Vue内置了一些全局API，<br>今天要学习的指令Vue.directive。说的简单些就是，在构造器外部用Vue提供给我们的API函数来定义新的功能。</p></blockquote><h4 id="二、Vue-directive自定义指令"><a href="#二、Vue-directive自定义指令" class="headerlink" title="二、Vue.directive自定义指令"></a>二、Vue.directive自定义指令</h4><blockquote><p>我们也可以定义一些属于自己的指令，比如我们要定义一个v-jspang的指令，作用就是让文字变成绿色。<br>在自定义指令前我们写一个小功能，在页面上有一个数字为10，数字的下面有一个按钮，我们每点击一次按钮后，数字加1.</p></blockquote><h4 id="三、自定义指令中传递的三个参数"><a href="#三、自定义指令中传递的三个参数" class="headerlink" title="三、自定义指令中传递的三个参数"></a>三、自定义指令中传递的三个参数</h4><blockquote><p>el: 指令所绑定的元素，可以用来直接操作DOM。<br>binding: 一个对象，包含指令的很多信息。<br>vnode: Vue编译生成的虚拟节点。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 项目 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 简历 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>回溯算法秒杀所有组合子集排列问题</title>
      <link href="/2022/06/25/hui-su-suan-fa-miao-sha-suo-you-pai-lie-zu-he-zi-ji-wen-ti/"/>
      <url>/2022/06/25/hui-su-suan-fa-miao-sha-suo-you-pai-lie-zu-he-zi-ji-wen-ti/</url>
      
        <content type="html"><![CDATA[<p>回溯算法秒杀所有组合子集排列问题</p><span id="more"></span><hr><h4 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h4><p>无论是排列组合还是子集问题,捡来来说无非就是让你从序列nums中以给定规则取若干的元素,主要有以下几种变体</p><ul><li>元素无重复不可复选 ,就是说nums中的元素都是位移的,每个元素最多只能用一次,这也是最基本的形式</li><li>元素可重复不可复选,就是说nums中的元素可以重复,每个元素最多只能被使用一次</li><li>元素无重复可复选,就是说nums中的元素都是位移的,但是每个元素可以被使用若干次</li></ul><p>无论形式怎么变化,其本质就是穷举所有的解,这些解呈现出树形结构,所以合理使用回溯算法框架,稍微修改框架就可以把这些问题一网打尽</p><p><img src="/images/image_1.4bf2d382.jpg"></p><p><img src="/images/image_2.b7211c2e.jpg"></p><p>其实 组合问题和子集问题其实是等价的,置于之前所的三种形式变化,无非就是在这两棵树上剪掉或者增加一些树枝罢了</p><h4 id="子集-元素无重复不可复选"><a href="#子集-元素无重复不可复选" class="headerlink" title="子集(元素无重复不可复选)"></a>子集(元素无重复不可复选)</h4><h5 id="78-子集"><a href="#78-子集" class="headerlink" title="78. 子集"></a><a href="https://leetcode.cn/problems/subsets/">78. 子集</a></h5><p><img src="/images/image_3.489f9928.png"></p><p>因为子集是不考虑顺序的,[1,2]和[2,1]其实是同一个子集,为了让子集不出现重复,可以使用保证相对顺序来防止不出现重复的子集</p><p>代码如下:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">subsets</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">startIndex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 加入到result中</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 从下一位开始保持先后顺序不变</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="组合-元素无重不可复选"><a href="#组合-元素无重不可复选" class="headerlink" title="组合(元素无重不可复选)"></a>组合(元素无重不可复选)</h5><p>如果可以生成无重子集,那稍微修改一下代码就可以生成无重组合了</p><p>如以下例题</p><h5 id="77-组合"><a href="#77-组合" class="headerlink" title="77. 组合"></a><a href="https://leetcode.cn/problems/combinations/">77. 组合</a></h5><p><img src="/images/image_4.f1c3c86b.png"></p><p>主需要针对上面求子集的代码,修改一下退出回溯的条件就好了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">combine</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">startIndex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 只需要修改一下退出的条件就行</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="排列-元素无重不可复选"><a href="#排列-元素无重不可复选" class="headerlink" title="排列(元素无重不可复选)"></a>排列(元素无重不可复选)</h4><p>上面所讲的组合子集问题,是使用startIndex来保证元素start之后只会出现start+1中的元素,通过固定元素的相对位置保证元素不出现重复的元素</p><p>但是排列问题的本质是让穷举元素的位置,nums[i]之后也可以再出现i之前的元素,所以之前的方法是不适用的,需要使用一个used来记录那些元素使用过,那些元素没使用过</p><p>标准的全排列可以抽象成如下的一棵树</p><p><img src="/images/image_5.42ee0994.jpg"></p><p>我看使用<code>used</code>数组标记已经在路径上的元素避免重复的选择,然后收集叶子节点上的值,就是所有全排列的组合</p><h5 id="46-全排列"><a href="#46-全排列" class="headerlink" title="46. 全排列"></a><a href="https://leetcode.cn/problems/permutations/">46. 全排列</a></h5><p><img src="/images/image_6.8f2f08f2.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">permute</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> used <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果修改了一下问题,需要求元素个数为k的全排列,那么可以修改这个的base case 仅仅收集第k层的就好了</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">permute</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums<span class="token punctuation">,</span>k</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> used <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>       `        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> k<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="子集-x2F-组合-元素可重不可复选"><a href="#子集-x2F-组合-元素可重不可复选" class="headerlink" title="子集/组合(元素可重不可复选)"></a>子集/组合(元素可重不可复选)</h4><p>以上讲的题目都是没有重复元素的,但是如果存在重复元素,怎么处理呢</p><p>如以下例题</p><h5 id="90-子集-II"><a href="#90-子集-II" class="headerlink" title="90. 子集 II"></a><a href="https://leetcode.cn/problems/subsets-ii/">90. 子集 II</a></h5><p><img src="/images/image_7.e3e217fd.png"></p><p>如果以1,2,2举例,为了重复区分,可以将其视作1,2,2` 那么这个树可以简化为</p><p><img src="/images/image_8.369ed11b.jpg"></p><p>可以发现,两条值相同的相邻树枝会产生重复</p><p>所以需要对其进行剪枝,也就是一个节点有多条值相同的树枝相邻,则只遍历第一条,剩下的都剪掉,不要去遍历</p><p><img src="/images/image_9.eb8b622c.jpg"></p><p>体现在代码上,就是需要对其进行排序,让相同的元素靠在一起,如果发现后一个和前一个相同 就调过</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">subsetsWithDup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">satrtIndex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 放入这个path数组</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> satrtIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span> satrtIndex <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">// 注意这个是要大于其实位置 因为如果大于0的话 会少很多的数字</span>                <span class="token keyword">continue</span> <span class="token comment">// 如果这个值大于0 并且这个值和前一个相同 那就直接调过</span>            <span class="token punctuation">}</span>            <span class="token comment">// 否则的话</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="40-组合总和-II"><a href="#40-组合总和-II" class="headerlink" title="40. 组合总和 II"></a><a href="https://leetcode.cn/problems/combination-sum-ii/">40. 组合总和 II</a></h5><p><img src="/images/image_10.b66f1207.png"></p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">combinationSum2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">candidates<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    candidates<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token comment">// 排序一下</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">startIndex<span class="token punctuation">,</span>sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span> <span class="token comment">// 如果和是这个 那就加入到结果数组</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span> <span class="token comment">// 如果大于这个target 就直接返回</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;</span>candidates<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span>startIndex <span class="token operator">&amp;&amp;</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> candidates<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">continue</span>            <span class="token punctuation">}</span>            sum <span class="token operator">+=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>sum<span class="token punctuation">)</span>            sum <span class="token operator">-=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="排列元素可重不可复选"><a href="#排列元素可重不可复选" class="headerlink" title="排列元素可重不可复选"></a>排列元素可重不可复选</h4><p>排列问题如果存在重复值,就比子集.组合问题稍微复杂一点</p><p>如下题</p><h6 id="47-全排列-II"><a href="#47-全排列-II" class="headerlink" title="47. 全排列 II"></a><a href="https://leetcode.cn/problems/permutations-ii/">47. 全排列 II</a></h6><p><img src="/images/image_11.cf13504e.png"></p><p>对比之前的全排列,只有两个不同</p><ol><li>对这个数组进行了排序</li><li>添加了一句额外的剪枝逻辑</li></ol><p>和自己组合问题的逻辑不同,新增了!used[i-1]的逻辑判断</p><p>假设输入为 nums = [1,2,2’]，标准的全排列算法会得出如下答案：</p><p><img src="/images/image_12.e104ac08.png"></p><p>显然，这个结果存在重复，比如 [1,2,2’] 和 [1,2’,2] 应该只被算作同一个排列，但被算作了两个不同的排列。</p><p>怎么设计剪枝逻辑让这个重复的给去除掉呢</p><p>保证相同的元素在排列中的相对位置保持不变</p><p>比如说,让2永远在2`的前面,这样智能筛选出三个条件,这也就是正确的答案</p><p>这是因为<code>标准的全排列算法之所以会重复,是因为吧相同元素形成的排列序列视为了不同的序列,但是实际上他们是相同的,如果固定相同的元素形成的序列顺序,当然就避免了重复</code></p><p>反应到代码上就是<code>i &gt; 0 &amp;&amp; nums\[i\] == nums\[i - 1\] &amp;&amp; !used\[i - 1\]</code>,如果前面的相邻相等元素没有用过就跳过,这样就避免了重复的排列</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">permuteUnique</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> used <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>a<span class="token operator">-</span>b<span class="token punctuation">)</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">continue</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>used<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">continue</span>            <span class="token punctuation">}</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="子集组合-元素无重可复选"><a href="#子集组合-元素无重可复选" class="headerlink" title="子集组合(元素无重可复选)"></a>子集组合(元素无重可复选)</h4><p>数组无重复元素,每个元素可以被重复使用</p><p>例题:</p><h6 id="39-组合总和"><a href="#39-组合总和" class="headerlink" title="39. 组合总和"></a><a href="https://leetcode.cn/problems/combination-sum/">39. 组合总和</a></h6><p><img src="/images/image_13.20454318.png"></p><p>首先思考,我们在做这个之前不可复选的时候,是怎么来解决不能复选的,是通过startindex+1来进行的</p><p>那么我们只需要将这个+1给去掉就行了</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">combinationSum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">candidates<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">startIndex<span class="token punctuation">,</span>sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span>         <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;</span> candidates<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            sum <span class="token operator">+=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>sum<span class="token punctuation">)</span>            sum <span class="token operator">-=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="排列-元素无重可复选"><a href="#排列-元素无重可复选" class="headerlink" title="排列(元素无重可复选)"></a>排列(元素无重可复选)</h4><p>力扣上没有类似的题目，我们不妨先想一下，nums 数组中的元素无重复且可复选的情况下，会有哪些排列？</p><p>比如输入 nums = [1,2,3]，那么这种条件下的全排列共有 3^3 = 27 种：</p><p><img src="/images/image_14.8ad6cfe6.png"></p><p>标准的全排列 用used数组进行剪枝,避免重复使用一个元素,如果允许重复使用的话,直接放飞自我,去除所有的used数组的剪枝逻辑就行了</p><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">permuteUnique</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>      <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>      <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>              <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>                      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>                      <span class="token keyword">return</span>              <span class="token punctuation">}</span>              <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                      path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>                      <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>                      path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>              <span class="token punctuation">}</span>      <span class="token punctuation">}</span>      <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>      <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>对于这类问题 总共有三种形式</p><h5 id="元素无重不可复选-元素位移-只能选一次"><a href="#元素无重不可复选-元素位移-只能选一次" class="headerlink" title="元素无重不可复选,元素位移,只能选一次"></a>元素无重不可复选,元素位移,只能选一次</h5><p>核心代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">subsets</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">startIndex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 加入到result中</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token comment">// 从下一位开始保持先后顺序不变</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token function-variable function">permute</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> used <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="元素可重不可复选-元素可以重复-也可以重新选择"><a href="#元素可重不可复选-元素可以重复-也可以重新选择" class="headerlink" title="元素可重不可复选 元素可以重复 也可以重新选择"></a>元素可重不可复选 元素可以重复 也可以重新选择</h5><p>代码如下</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">subsetsWithDup</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">satrtIndex</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 放入这个path数组</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> satrtIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>             <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span> satrtIndex <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">// 注意这个是要大于其实位置 因为如果大于0的话 会少很多的数字</span>                <span class="token keyword">continue</span> <span class="token comment">// 如果这个值大于0 并且这个值和前一个相同 那就直接调过</span>            <span class="token punctuation">}</span>            <span class="token comment">// 否则的话</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token keyword">var</span> <span class="token function-variable function">permuteUnique</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> used <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    nums<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span>a<span class="token operator">-</span>b<span class="token punctuation">)</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>used<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">continue</span>            <span class="token punctuation">}</span>            <span class="token keyword">if</span><span class="token punctuation">(</span>i <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> nums<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>used<span class="token punctuation">[</span>i<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>                <span class="token keyword">continue</span>            <span class="token punctuation">}</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            used<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="元素无重可复选-每个元素只有一个-每个元素可以被重复使用"><a href="#元素无重可复选-每个元素只有一个-每个元素可以被重复使用" class="headerlink" title="元素无重可复选 每个元素只有一个 每个元素可以被重复使用"></a>元素无重可复选 每个元素只有一个 每个元素可以被重复使用</h5><p>代码如下:</p><pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">var</span> <span class="token function-variable function">combinationSum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">candidates<span class="token punctuation">,</span> target</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token parameter">startIndex<span class="token punctuation">,</span>sum</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">===</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>sum <span class="token operator">&gt;</span> target<span class="token punctuation">)</span><span class="token punctuation">{</span>            <span class="token keyword">return</span>         <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> startIndex<span class="token punctuation">;</span>i <span class="token operator">&lt;</span> candidates<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            sum <span class="token operator">+=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span>sum<span class="token punctuation">)</span>            sum <span class="token operator">-=</span> candidates<span class="token punctuation">[</span>i<span class="token punctuation">]</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span> <span class="token keyword">var</span> <span class="token function-variable function">permuteUnique</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">nums</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>    <span class="token keyword">function</span> <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>        <span class="token keyword">if</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span>length <span class="token operator">===</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">{</span>            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>path<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token keyword">return</span>        <span class="token punctuation">}</span>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>i <span class="token operator">&lt;</span> nums<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>            path<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>nums<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>            path<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span>    <span class="token function">backTracking</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token keyword">return</span> result<span class="token punctuation">}</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><hr><hr>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 回溯和剪枝 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
