<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
		<meta name="keywords" content="nodejs后端学习-基础, xiaolidu-blog" />
		<meta
			name="description"
			content="nodejs后端学习-基础


nodejs学习笔记一、Node基础，走进node的世界node.js是一个基于chrome v8引擎的js的运行环境,是用来方便前端工程师进行后端开发的语言
commonjs规范
commonjs是一种广泛"
		/>
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, user-scalable=no"
		/>
		<meta name="renderer" content="webkit|ie-stand|ie-comp" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta
			name="apple-mobile-web-app-status-bar-style"
			content="black-translucent"
		/>
		<meta name="referrer" content="no-referrer-when-downgrade" />
		<!-- Global site tag (gtag.js) - Google Analytics -->

		<title>nodejs后端学习-基础 | xiaolidu-blog</title>
		<link rel="icon" type="image/png" href="/favicon.png" />

		<style>
			body {
				background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
				background-repeat: no-repeat;
				background-size: 100% 100%;
				background-attachment: fixed;
			}
		</style>

		<!-- bg-cover style     -->

		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/awesome/css/all.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/materialize/materialize.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/aos/aos.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/animate/animate.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/lightGallery/css/lightgallery.min.css"
		/>
		<link rel="stylesheet" type="text/css" href="/css/matery.css" />
		<link rel="stylesheet" type="text/css" href="/css/my.css" />
		<link
			rel="stylesheet"
			type="text/css"
			href="/css/dark.css"
			media="none"
			onload="if(media!='all')media='all'"
		/>

		<link
			rel="stylesheet"
			href="/skills-github-pages/libs/tocbot/tocbot.css"
		/>
		<link rel="stylesheet" href="/css/post.css" />

		<link rel="stylesheet" type="text/css" href="/css/reward.css" />

		<script src="/skills-github-pages/libs/jquery/jquery-3.6.0.min.js"></script>

		<meta name="generator" content="Hexo 6.3.0" />
		<style>
			.github-emoji {
				position: relative;
				display: inline-block;
				width: 1.2em;
				min-height: 1.2em;
				overflow: hidden;
				vertical-align: top;
				color: transparent;
			}
			.github-emoji > span {
				position: relative;
				z-index: 10;
			}
			.github-emoji img,
			.github-emoji .fancybox {
				margin: 0 !important;
				padding: 0 !important;
				border: none !important;
				outline: none !important;
				text-decoration: none !important;
				user-select: none !important;
				cursor: auto !important;
			}
			.github-emoji img {
				height: 1.2em !important;
				width: 1.2em !important;
				position: absolute !important;
				left: 50% !important;
				top: 50% !important;
				transform: translate(-50%, -50%) !important;
				user-select: none !important;
				cursor: auto !important;
			}
			.github-emoji-fallback {
				color: inherit;
			}
			.github-emoji-fallback img {
				opacity: 0 !important;
			}
		</style>
	</head>

	<body>
		<header class="navbar-fixed">
			<nav id="headNav" class="bg-color nav-transparent">
				<div id="navContainer" class="nav-wrapper container">
					<div class="brand-logo">
						<a href="/" class="waves-effect waves-light">
							<img
								src="/medias/logo.png"
								class="logo-img"
								alt="LOGO"
							/>

							<span class="logo-span">xiaolidu-blog</span>
						</a>
					</div>

					<a
						href="#"
						data-target="mobile-nav"
						class="sidenav-trigger button-collapse"
						><i class="fas fa-bars"></i
					></a>
					<ul class="right nav-menu">
						<li class="hide-on-med-and-down nav-item">
							<a href="/" class="waves-effect waves-light">
								<i class="fas fa-home" style="zoom: 0.6"></i>

								<span>首页</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a href="/tags" class="waves-effect waves-light">
								<i class="fas fa-tags" style="zoom: 0.6"></i>

								<span>标签</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a
								href="/categories"
								class="waves-effect waves-light"
							>
								<i
									class="fas fa-bookmark"
									style="zoom: 0.6"
								></i>

								<span>分类</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a
								href="/archives"
								class="waves-effect waves-light"
							>
								<i class="fas fa-archive" style="zoom: 0.6"></i>

								<span>归档</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a href="/about" class="waves-effect waves-light">
								<i
									class="fas fa-user-circle"
									style="zoom: 0.6"
								></i>

								<span>关于</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a href="/contact" class="waves-effect waves-light">
								<i
									class="fas fa-comments"
									style="zoom: 0.6"
								></i>

								<span>留言板</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a href="/friends" class="waves-effect waves-light">
								<i
									class="fas fa-address-book"
									style="zoom: 0.6"
								></i>

								<span>友情链接</span>
							</a>
						</li>

						<li>
							<a
								href="#searchModal"
								class="modal-trigger waves-effect waves-light"
							>
								<i
									id="searchIcon"
									class="fas fa-search"
									title="搜索"
									style="zoom: 0.85"
								></i>
							</a>
						</li>
						<li>
							<a
								href="javascript:;"
								class="waves-effect waves-light"
								onclick="switchNightMode()"
								title="深色/浅色模式"
							>
								<i
									id="sum-moon-icon"
									class="fas fa-sun"
									style="zoom: 0.85"
								></i>
							</a>
						</li>
					</ul>

					<div id="mobile-nav" class="side-nav sidenav">
						<div class="mobile-head bg-color">
							<img
								src="/medias/logo.png"
								class="logo-img circle responsive-img"
							/>

							<div class="logo-name">xiaolidu-blog</div>
							<div class="logo-desc">
								Never really desperate, only the lost of the
								soul.
							</div>
						</div>

						<ul class="menu-list mobile-menu-list">
							<li class="m-nav-item">
								<a href="/" class="waves-effect waves-light">
									<i class="fa-fw fas fa-home"></i>

									首页
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/tags"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-tags"></i>

									标签
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/categories"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-bookmark"></i>

									分类
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/archives"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-archive"></i>

									归档
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/about"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-user-circle"></i>

									关于
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/contact"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-comments"></i>

									留言板
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/friends"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-address-book"></i>

									友情链接
								</a>
							</li>

							<li><div class="divider"></div></li>
							<li>
								<a
									href="https://github.com/blinkfox/hexo-theme-matery"
									class="waves-effect waves-light"
									target="_blank"
								>
									<i class="fab fa-github-square fa-fw"></i
									>Fork Me
								</a>
							</li>
						</ul>
					</div>
				</div>

				<style>
					.nav-transparent .github-corner {
						display: none !important;
					}

					.github-corner {
						position: absolute;
						z-index: 10;
						top: 0;
						right: 0;
						border: 0;
						transform: scale(1.1);
					}

					.github-corner svg {
						color: #0f9d58;
						fill: #fff;
						height: 64px;
						width: 64px;
					}

					.github-corner:hover .octo-arm {
						animation: a 0.56s ease-in-out;
					}

					.github-corner .octo-arm {
						animation: none;
					}

					@keyframes a {
						0%,
						to {
							transform: rotate(0);
						}
						20%,
						60% {
							transform: rotate(-25deg);
						}
						40%,
						80% {
							transform: rotate(10deg);
						}
					}
				</style>

				<a
					href="https://github.com/blinkfox/hexo-theme-matery"
					class="github-corner tooltipped hide-on-med-and-down"
					target="_blank"
					data-tooltip="Fork Me"
					data-position="left"
					data-delay="50"
				>
					<svg viewBox="0 0 250 250" aria-hidden="true">
						<path
							d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"
						></path>
						<path
							d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
							fill="currentColor"
							style="transform-origin: 130px 106px"
							class="octo-arm"
						></path>
						<path
							d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
							fill="currentColor"
							class="octo-body"
						></path>
					</svg>
				</a>
			</nav>
		</header>

		<script src="/skills-github-pages/libs/cryptojs/crypto-js.min.js"></script>
		<script>
			(function () {
				let pwd = '';
				if (pwd && pwd.length > 0) {
					if (
						pwd !==
						CryptoJS.SHA256(
							prompt('请输入访问本文章的密码')
						).toString(CryptoJS.enc.Hex)
					) {
						alert('密码错误，将返回主页！');
						location.href = '/';
					}
				}
			})();
		</script>

		<div
			class="bg-cover pd-header post-cover"
			style="background-image: url('/medias/featureimages/11.jpg')"
		>
			<div class="container" style="right: 0px; left: 0px">
				<div class="row">
					<div class="col s12 m12 l12">
						<div class="brand">
							<h1 class="description center-align post-title">
								nodejs后端学习-基础
							</h1>
						</div>
					</div>
				</div>
			</div>
		</div>

		<main class="post-container content">
			<div class="row">
				<div id="main-content" class="col s12 m12 l9">
					<!-- 文章内容详情 -->
					<div id="artDetail">
						<div class="card">
							<div class="card-content article-info">
								<div class="row tag-cate">
									<div class="col s7">
										<div class="article-tag">
											<a href="/tags/node/">
												<span class="chip bg-color"
													>node</span
												>
											</a>
										</div>
									</div>
									<div class="col s5 right-align">
										<div class="post-cate">
											<i
												class="fas fa-bookmark fa-fw icon-category"
											></i>

											<a
												href="/categories/%E5%85%A8%E6%A0%88%E5%AD%A6%E4%B9%A0/"
												class="post-category"
											>
												全栈学习
											</a>
										</div>
									</div>
								</div>

								<div class="post-info">
									<div class="post-date info-break-policy">
										<i
											class="far fa-calendar-minus fa-fw"
										></i
										>发布日期:&nbsp;&nbsp; 2022-10-17
									</div>

									<div class="info-break-policy">
										<i class="far fa-file-word fa-fw"></i
										>文章字数:&nbsp;&nbsp; 5k
									</div>
								</div>
							</div>
							<hr class="clearfix" />

							<!-- 是否加载使用自带的 prismjs. -->
							<link
								rel="stylesheet"
								href="/skills-github-pages/libs/prism/prism.min.css"
							/>

							<div class="card-content article-card-content">
								<div id="articleContent">
									<p>nodejs后端学习-基础</p>
									<span id="more"></span>

									<h1 id="nodejs学习笔记">
										<a
											href="#nodejs学习笔记"
											class="headerlink"
											title="nodejs学习笔记"
										></a
										>nodejs学习笔记
									</h1>
									<h1 id="一、Node基础，走进node的世界">
										<a
											href="#一、Node基础，走进node的世界"
											class="headerlink"
											title="一、Node基础，走进node的世界"
										></a
										>一、Node基础，走进node的世界
									</h1>
									<p>
										node.js是一个基于chrome
										v8引擎的js的运行环境,是用来方便前端工程师进行后端开发的语言
									</p>
									<h3 id="commonjs规范">
										<a
											href="#commonjs规范"
											class="headerlink"
											title="commonjs规范"
										></a
										>commonjs规范
									</h3>
									<ul>
										<li>
											<p>
												commonjs是一种广泛使用的js模块化规范,核心思想是通过require来同步的加载依赖的其他模块,通过module.exports导出需要暴露的接口
											</p>
										</li>
										<li>
											<p>使用演示</p>
											<ul>
												<li>
													```js<br />const xd =
													‘小滴课堂’<br />function
													fun(){<br />console.log(‘你好,commonjs’)<br />}<br />module.exports
													= {<br />xd,<br />fun,<br />}
													<pre
														class="line-numbers language-none"
													><code class="language-none">
- ```js
  const aData = require('./a')
  aData.fun()
  console.log(aData.xd)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
											</ul>
										</li>
										<li>
											<p>node需要使用commonjs的原因</p>
											<ul>
												<li>
													js自身并没有模块管理系统,不具备封闭的作用域和依赖管理
												</li>
												<li>缺少文件系统的io流api</li>
												<li>不具备包管理系统</li>
											</ul>
										</li>
										<li>
											<p>commonjs和ES6的区别</p>
											<ul>
												<li>
													commonjs输出的是值的拷贝,ES6模块输出的是值的引用
												</li>
												<li>
													commonjs模块运行的时候加载,ES6模块是编译的时候输出接口
												</li>
												<li>
													commonjs模块的require是同步加载模块,ES6模块的import命令是异步加载,有一个独立的模块依赖解析的阶段
												</li>
											</ul>
										</li>
									</ul>
									<h1
										id="二、Node基础-核心模块之文件系统fs模块的使用"
									>
										<a
											href="#二、Node基础-核心模块之文件系统fs模块的使用"
											class="headerlink"
											title="二、Node基础-核心模块之文件系统fs模块的使用"
										></a
										>二、Node基础-核心模块之文件系统fs模块的使用
									</h1>
									<h2 id="2-1-fs模块-读取文件内容">
										<a
											href="#2-1-fs模块-读取文件内容"
											class="headerlink"
											title="2.1 fs模块-读取文件内容"
										></a
										>2.1 fs模块-读取文件内容
									</h2>
									<ul>
										<li>
											<p>什么是fs模块</p>
											<ul>
												<li>
													node提供的用来操作文件的模块，模块里面有很多的属性和方法，用于处理文件
												</li>
											</ul>
										</li>
										<li>
											<p>fs读取文件内容</p>
											<ul>
												<li>
													<p>方法</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token comment">// path:路径</span>
<span class="token comment">// options:编码格式</span>
<span class="token comment">// callback:回调函数</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>options<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
												<li>
													<p>使用</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">,</span><span class="token string">'utf8'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
    	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
												<li>
													<p>注意</p>
													<p>
														fs.readFile返回数据之前将文件的内容全部读取到内存之中,因此对于大文件最好使用流来读取文件的内容
													</p>
												</li>
											</ul>
										</li>
									</ul>
									<h2 id="2-2-写入文件内容">
										<a
											href="#2-2-写入文件内容"
											class="headerlink"
											title="2.2 写入文件内容"
										></a
										>2.2 写入文件内容
									</h2>
									<ul>
										<li>
											<p>方法 fs.writeFile</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token comment">// path:路径</span>
<span class="token comment">// content:写入内容</span>
<span class="token comment">// callback:回调函数</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>content<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>使用</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">,</span><span class="token string">'我不想去工地了'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件写入成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>
												追加文件内容,使用fs.appendFile
											</p>
											<ul>
												<li>
													<p>方法</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token comment">// path:路径</span>
<span class="token comment">// content:写入内容</span>
<span class="token comment">// callback:回调函数</span>
fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>content<span class="token punctuation">,</span>callback<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
												<li>
													<p>使用</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">appendFile</span><span class="token punctuation">(</span><span class="token string">'./a.txt'</span><span class="token punctuation">,</span><span class="token string">'分分钟都盼望跟他见面'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'追加文件内容成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
												<li>
													<p>fs.模块的其他方法</p>
												</li>
											</ul>
										</li>
									</ul>
									<h2 id="2-3-个人信息表案例">
										<a
											href="#2-3-个人信息表案例"
											class="headerlink"
											title="2.3 个人信息表案例"
										></a
										>2.3 个人信息表案例
									</h2>
									<pre
										class="line-numbers language-javascript"
										data-language="javascript"
									><code class="language-javascript"><span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./b.txt'</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> str <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span><span class="token string">':'</span><span class="token punctuation">)</span>
    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span><span class="token string">'./b.txt'</span><span class="token punctuation">,</span>str<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'文件修改成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

									<h1 id="三、Node-path模块的使用">
										<a
											href="#三、Node-path模块的使用"
											class="headerlink"
											title="三、Node-path模块的使用"
										></a
										>三、Node-path模块的使用
									</h1>
									<h2 id="3-1相对路径问题">
										<a
											href="#3-1相对路径问题"
											class="headerlink"
											title="3.1相对路径问题"
										></a
										>3.1相对路径问题
									</h2>
									<ul>
										<li>
											在进行路径拼接的时候容易出现路径拼接错误
										</li>
									</ul>
									<p>解决方法</p>
									<ul>
										<li>
											<p>使用绝对路径解决</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/Users/bigz/Desktop/test_node/test.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span> <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果读取成功，err的值为nul，失败时，err的值为错误对象</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>
												可以使用__dirname来代替绝对路径的字段
											</p>
											<p>
												__dirname用来指代当前执行目录的绝对路径
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">gator<span class="token operator">-</span>app
  ├──index<span class="token punctuation">.</span>js
  ├──<span class="token keyword">public</span>
  ├──src
  │  ├──helpers<span class="token punctuation">.</span>js
  │  └──api
  │      └──crocodile<span class="token punctuation">.</span>js
  ├──cronjobs
  │  ├──swamp<span class="token operator">-</span>pix
  │  └──get<span class="token operator">-</span>latest<span class="token operator">-</span>gators<span class="token punctuation">.</span>js
  └──<span class="token keyword">package</span><span class="token punctuation">.</span>json<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

											<p>运行crocodile.js</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span>      <span class="token comment">// "/Users/Sam/gator-app/src/api"</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span><span class="token function">cwd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment">// "/Users/Sam/gator-app"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

											<p>上面的可以改为</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">'/test.txt'</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span> <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果读取成功，err的值为nul，失败时，err的值为错误对象</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
									</ul>
									<h2 id="3-2-认识path路径模块和使用">
										<a
											href="#3-2-认识path路径模块和使用"
											class="headerlink"
											title="3.2 认识path路径模块和使用"
										></a
										>3.2 认识path路径模块和使用
									</h2>
									<ul>
										<li><p>path模块的使用</p></li>
										<li>
											<p>路径的拼接方法</p>
											<ul>
												<li>
													<p>方法</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token comment">// 路径的个数没限制</span>
<span class="token keyword">const</span> path<span class="token operator">=</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span> <span class="token comment">// a/b/c</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
												</li>
												<li>
													<p>使用</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript">fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'/test.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'utf8'</span> <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 如果读取成功，err的值为nul，失败时，err的值为错误对象</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token comment">// 也可以进行路径跨域拼接</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>
fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'../a.txt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'utf-8'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
											</ul>
										</li>
									</ul>
									<h2 id="3-3-文件路径和扩展名的获取">
										<a
											href="#3-3-文件路径和扩展名的获取"
											class="headerlink"
											title="3.3 文件路径和扩展名的获取"
										></a
										>3.3 文件路径和扩展名的获取
									</h2>
									<ul>
										<li><p>文件路径和扩展名的获取</p></li>
										<li>
											<p>
												获取文件中最后一部分
												path.basename()
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token comment">// 获取文件名和扩展名,没有扩展名就不获取</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/test/something'</span><span class="token punctuation">)</span> <span class="token comment">//something</span>
<span class="token comment">// 获取文件名和扩展名 </span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/test/something.txt'</span><span class="token punctuation">)</span> <span class="token comment">//something.txt</span>
<span class="token comment">// 第二个参数是扩展名,跨域剔除扩展名</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">basename</span><span class="token punctuation">(</span><span class="token string">'/test/something.txt'</span><span class="token punctuation">,</span> <span class="token string">'.txt'</span><span class="token punctuation">)</span> <span class="token comment">//something</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>获取路径中的目录部分dirname</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token comment">// 路径的目录部分</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token string">'/test/something'</span><span class="token punctuation">)</span> <span class="token comment">// /test</span>
<span class="token comment">// 路径的目录部分</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">dirname</span><span class="token punctuation">(</span><span class="token string">'/test/something/file.txt'</span><span class="token punctuation">)</span> <span class="token comment">// /test/something</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>
												获取文件中的扩展名部分 extname
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token comment">// 就是获取文件的扩展名</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'/test/something'</span><span class="token punctuation">)</span> <span class="token comment">// ''</span>
<span class="token comment">// 就是获取文件的扩展名</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">extname</span><span class="token punctuation">(</span><span class="token string">'/test/something/file.txt'</span><span class="token punctuation">)</span> <span class="token comment">// '.txt'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
									</ul>
									<h1 id="四、Node基础-http模块的使用">
										<a
											href="#四、Node基础-http模块的使用"
											class="headerlink"
											title="四、Node基础-http模块的使用"
										></a
										>四、Node基础-http模块的使用
									</h1>
									<h2 id="4-1-快速理解http协议">
										<a
											href="#4-1-快速理解http协议"
											class="headerlink"
											title="4.1 快速理解http协议"
										></a
										>4.1 快速理解http协议
									</h2>
									<ul>
										<li>
											<p>什么是http协议</p>
											<ul>
												<li>
													超文本传输协议,是web联网的基础,也是移动或者PC联网常用的协议之一,HTTP是建立在TCP协议之上的一种应用
												</li>
												<li>
													HTTP连接最显著的特点是客户端发送的每次请求都需要服务器的响应请求,从建立连接到关闭连接的过程称之为一次连接
												</li>
												<li>HTTP请求—-&gt;HTTP响应</li>
											</ul>
										</li>
										<li>
											<p>http消息结构</p>
											<ul>
												<li>
													<p>请求报文</p>
													<p>
														<img
															src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220412142940655.png"
															alt="image-20220412142940655"
														/>
													</p>
												</li>
											</ul>
										</li>
									</ul>
									<pre
										class="line-numbers language-javascript"
										data-language="javascript"
									><code class="language-javascript">请求行：请求方法 <span class="token constant">URL</span>地址 协议名

<span class="token literal-property property">请求头：报文头包含若干个属性，格式为“属性名</span><span class="token operator">:</span>属性值”，服务端据此获取客户端的基本信息

请求体：请求的参数，可是json对象，也可以是前端表单生成的key<span class="token operator">=</span>value<span class="token operator">&amp;</span>key<span class="token operator">=</span>value的字符串<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

									<ul>
										<li>
											响应报文
											<ul>
												<li>
													<img
														src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220412143149324.png"
														alt="image-20220412143149324"
													/>
												</li>
											</ul>
										</li>
									</ul>
									<pre
										class="line-numbers language-none"
									><code class="language-none">响应行：报文协议及版本 状态码

响应头：报文头包含若干个属性，格式为“属性名:属性值”

响应正文：响应报文体，我们需要的内容，多种形式比如html、json、图片、视频文件等<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

									<ul>
										<li>
											请求方法
											<ul>
												<li>
													GET:
													向服务器发送请求获取资源
												</li>
												<li>POST: 向服务器提交数据</li>
												<li>
													Head:
													与get类似,返回响应没有具体的内容,用于获取头部信息
												</li>
											</ul>
										</li>
										<li>
											状态码
											<ul>
												<li>
													1xx
													<ul>
														<li>
															100
															收到请求,比较少用
														</li>
														<li>
															101 切换请求的协议
														</li>
													</ul>
												</li>
												<li>
													2xx
													<ul>
														<li>
															请求成功,比较常见的是200
														</li>
													</ul>
												</li>
												<li>
													3xx
													<ul>
														<li>
															重定向和协商缓存
														</li>
														<li>301:永久重定向</li>
														<li>302:临时重定向</li>
														<li>
															304:命中协商缓存
														</li>
													</ul>
												</li>
												<li>
													4xx
													<ul>
														<li>
															400
															请求出错,比如语法协议出错
														</li>
														<li>
															403: 没有访问权限
														</li>
														<li>
															404: 没有找到该资源
														</li>
														<li>
															405:
															不允许此方法进行提交
														</li>
													</ul>
												</li>
												<li>
													5xx
													<ul>
														<li>
															500:
															服务器内部报错,完成不了请求
														</li>
														<li>503: 服务器宕机</li>
													</ul>
												</li>
											</ul>
										</li>
									</ul>
									<h2 id="4-2-Node中的http谋爱的相关知识点">
										<a
											href="#4-2-Node中的http谋爱的相关知识点"
											class="headerlink"
											title="4.2 Node中的http谋爱的相关知识点"
										></a
										>4.2 Node中的http谋爱的相关知识点
									</h2>
									<ul>
										<li>
											http模块
											<ul>
												<li>
													用来创建web服务器,使用http.createServer()来创建web服务器实例
												</li>
											</ul>
										</li>
										<li>
											ip
											<ul>
												<li>
													每个服务器都有自己的一个ip,本地的是127.0.0.1或者localhost
												</li>
											</ul>
										</li>
										<li>
											域名
											<ul>
												<li>
													ip地址不方便记忆,现在诞生了域名来替换ip的访问
												</li>
												<li>
													ip地址和域名是一对多的关系,在DNS中进行保存
												</li>
											</ul>
										</li>
										<li>
											端口
											<ul>
												<li>
													端口是ip地址的窗口,不同的端口提供不同的服务
												</li>
											</ul>
										</li>
									</ul>
									<h2 id="4-3-http创建一个本地服务器">
										<a
											href="#4-3-http创建一个本地服务器"
											class="headerlink"
											title="4.3 http创建一个本地服务器"
										></a
										>4.3 http创建一个本地服务器
									</h2>
									<ul>
										<li>
											<p>http模块创建一个本地服务器</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 监听客户端的请求</span>
app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">// 输出请求的url地址</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 设置响应头 防止乱码</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span>
    <span class="token comment">// 返回响应内容</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
									</ul>
									<h2 id="4-4-根据请求路径返回不同的资源内容">
										<a
											href="#4-4-根据请求路径返回不同的资源内容"
											class="headerlink"
											title="4.4 根据请求路径返回不同的资源内容"
										></a
										>4.4 根据请求路径返回不同的资源内容
									</h2>
									<ul>
										<li>根据不同的url返回不同的内容</li>
									</ul>
									<pre
										class="line-numbers language-javascript"
										data-language="javascript"
									><code class="language-javascript"><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'request'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> mess <span class="token operator">=</span> <span class="token string">'404 页面未找到'</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/'</span> <span class="token operator">||</span> req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/home'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        mess <span class="token operator">=</span> <span class="token string">'&lt;h1&gt;首页&lt;/h1&gt;'</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url <span class="token operator">===</span> <span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        mess <span class="token operator">=</span> <span class="token string">'&lt;h1&gt;登录页&lt;/h1&gt;'</span>
    <span class="token punctuation">}</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">,</span><span class="token string">'text/html;charset=utf-8'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span>mess<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

									<h1 id="五、核心模块Buffer和Stream模块">
										<a
											href="#五、核心模块Buffer和Stream模块"
											class="headerlink"
											title="五、核心模块Buffer和Stream模块"
										></a
										>五、核心模块Buffer和Stream模块
									</h1>
									<h2 id="5-1-剖析Buffer缓冲区">
										<a
											href="#5-1-剖析Buffer缓冲区"
											class="headerlink"
											title="5.1 剖析Buffer缓冲区"
										></a
										>5.1 剖析Buffer缓冲区
									</h2>
									<ul>
										<li>
											<p>buffer定义</p>
											<ul>
												<li>
													Buffer是内存区域，是固定大小的内存块，可以将buffer视作数组，每个元素代表一个数据字节，由buffer类实现
												</li>
											</ul>
										</li>
										<li>
											<p>Buffer的数据形式</p>
											<ul>
												<li>
													<p>
														保存在Buffer中的数据是用16进制的形式展示的，更加简短，但是计算机底层处理的还是二进制数据
													</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token keyword">const</span> buf <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'nihao'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;Buffer 6e 69 68 61 6f&gt;</span>

<span class="token keyword">const</span> buf1 <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'你好'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>buf1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &lt;Buffer e4 bd a0 e5 a5 bd&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
												<li>
													<p>
														由上述可以看出
														对于英文字符
														一个字符对应的是一个16进制的数字,
														而对于汉字来说,一个字符是三个16进制的数字表示
													</p>
												</li>
											</ul>
											<p>
												<img
													src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413221013999.png"
													alt="image-20220413221013999"
												/>
											</p>
										</li>
									</ul>
									<p>
										<img
											src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413120543295.png"
											alt="image-20220413120543295"
										/>
									</p>
									<pre
										class="line-numbers language-javascript"
										data-language="javascript"
									><code class="language-javascript"><span class="token comment">// 内存的单位</span>
1bit <span class="token number">1</span>位
8bit <span class="token operator">=</span> 1byte  <span class="token number">1</span>字节
1024byte <span class="token operator">=</span> 1kb
1024kb <span class="token operator">=</span> 1mb
1024mb <span class="token operator">=</span> 1gb
1024gb <span class="token operator">=</span> 1tb<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

									<ul>
										<li>
											为什么需要Buffer
											<ul>
												<li>
													帮助开发者处理二进制数据,传统上数组只是处理字符串,而不是处理二进制的数据,例如图片音视频等
												</li>
												<li>
													当文件进行IO操作的时候，输出的速度大于输入的速度，就会讲数据存储到Buffer中
												</li>
												<li>
													<img
														src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413213228294.png"
														alt="image-20220413213228294"
													/>
												</li>
											</ul>
										</li>
									</ul>
									<h2 id="5-2-Buffer的使用">
										<a
											href="#5-2-Buffer的使用"
											class="headerlink"
											title="5.2 Buffer的使用"
										></a
										>5.2 Buffer的使用
									</h2>
									<ul>
										<li>
											<p>
												Buffer.from 将字符串转换为Buffer
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'xiaodiketang'</span><span class="token punctuation">)</span>
<span class="token comment">// &lt;Buffer 78 69 61 6f 64 69 6b 65 74 61 6e 67&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>
												Buffer.alloc(size)
												创建一个指定大小的Buffer,无法调整大小,
												但是指定的是一个空的buffer
												可以看出内容是00
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">Buffer<span class="token punctuation">.</span><span class="token function">alloc</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">//&lt;Buffer 00 00 00 00 00 00 00 00 00 00&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>
												Buffer.allocUnsafe(size)
												在Buffer池中使用原有的Buffer,可能含有敏感的数据,但是性能会更好.但是buffer中有的不是00
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">Buffer<span class="token punctuation">.</span><span class="token function">allocUnsafe</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token comment">//&lt;Buffer 00 00 00 00 00 00 00 00 64 69&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>
												Buffer.toString
												将buffer转换为字符串
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> buffer <span class="token operator">=</span> Buffer<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">'小滴课堂'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> str <span class="token operator">=</span> buffer<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// 小滴课堂</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
									</ul>
									<h2 id="5-3-深入理解stream流">
										<a
											href="#5-3-深入理解stream流"
											class="headerlink"
											title="5.3 深入理解stream流"
										></a
										>5.3 深入理解stream流
									</h2>
									<ul>
										<li>
											stream是什么
											<ul>
												<li>
													是一种高校的处理读写io操作,网络通讯,或者任何类型的端到端的信息交换的方式
												</li>
												<li>
													在传统的方式中,读取文件的时候,会将文件从头到尾读入内存(buffer)中,然后进行处理
												</li>
												<li>
													使用流,则可以逐个片段的读取并处理(而无需全部保存在内存中)
												</li>
												<li>如下图所示</li>
											</ul>
										</li>
									</ul>
									<p>
										<img
											src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413152709631.png"
											alt="image-20220413152709631"
										/>
									</p>
									<p>
										<img
											src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220413153202765.png"
											alt="image-20220413153202765"
										/>
									</p>
									<h2 id="5-4-stream的使用">
										<a
											href="#5-4-stream的使用"
											class="headerlink"
											title="5.4 stream的使用"
										></a
										>5.4 stream的使用
									</h2>
									<ul>
										<li>
											<p>创建可读流 createReadStream</p>
										</li>
										<li>
											<p>创建可写流 createWriteStream</p>
										</li>
										<li>
											<p>实现</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token comment">// 通过下面的方式,可以完成一个文件的复制</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span>

<span class="token comment">// 创建可读流</span>
<span class="token keyword">const</span> flowa <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createReadStream</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'/a.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// 创建可写流</span>
<span class="token keyword">const</span> flowb <span class="token operator">=</span> fs<span class="token punctuation">.</span><span class="token function">createWriteStream</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span><span class="token string">'/b.txt'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 将可读流注入到可写流</span>
flowa<span class="token punctuation">.</span><span class="token function">pipe</span><span class="token punctuation">(</span>flowb<span class="token punctuation">)</span>

<span class="token comment">// 监听注入结束</span>
flowa<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'数据流向成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此时已经复制了一个文件</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
									</ul>
									<h1 id="六、玩转express框架">
										<a
											href="#六、玩转express框架"
											class="headerlink"
											title="六、玩转express框架"
										></a
										>六、玩转express框架
									</h1>
									<h2 id="6-1-深入理解express框架">
										<a
											href="#6-1-深入理解express框架"
											class="headerlink"
											title="6.1 深入理解express框架"
										></a
										>6.1 深入理解express框架
									</h2>
									<ul>
										<li>
											<p>定义</p>
											<ul>
												<li>
													基于nodejs平台,快速开放极简的web开发框架
												</li>
												<li>
													其实就是node
													npm包管理工具的第三方的包
													可以使用express快速创建服务器
												</li>
											</ul>
										</li>
										<li>
											<p>其他的node框架</p>
											<ul>
												<li>koa2</li>
												<li>egg</li>
												<li>nest.js</li>
											</ul>
										</li>
										<li>
											<p>
												node可以通过http创建服务器,为什么还需要express呢
											</p>
											<ul>
												<li>
													内置http模块比较复杂,降低开发效率
												</li>
												<li>
													express框架是局域http框架开发而来的,在创建服务器或者编写接口的时候更加方便
												</li>
											</ul>
										</li>
										<li>
											<p>安装</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">yarn add express <span class="token comment">// 这样就ok了</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
										</li>
										<li>
											<p>创建服务器</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
									</ul>
									<h2 id="6-2-监听数据请求和参数处理">
										<a
											href="#6-2-监听数据请求和参数处理"
											class="headerlink"
											title="6.2 监听数据请求和参数处理"
										></a
										>6.2 监听数据请求和参数处理
									</h2>
									<ul>
										<li>
											<p>get请求</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'&lt;h1&gt;你好&lt;/h1&gt;'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>
												post请求,
												进行这一步操作的时候需要下载postman软件进行接口模拟,可以自行查找方法
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'&lt;h1&gt;你好&lt;/h1&gt;'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1&gt;这是登录页面&lt;/h1&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>postman需要了解的知识</p>
											<ul>
												<li>postman的安装使用</li>
												<li>接口请求的方法设置</li>
												<li>接口请求的参数编写</li>
												<li>保存接口信息</li>
											</ul>
										</li>
									</ul>
									<h2 id="6-3-路由配置模块化">
										<a
											href="#6-3-路由配置模块化"
											class="headerlink"
											title="6.3 路由配置模块化"
										></a
										>6.3 路由配置模块化
									</h2>
									<ul>
										<li>
											<p>express中的路由</p>
											<ul>
												<li>
													前端中的路由router一样,在不同的路由展示不同的内容
												</li>
												<li>
													express中的路由就是不同路径的接口,响应客户端不同的数据
												</li>
											</ul>
										</li>
										<li>
											<p>创建路由模块</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 创建路由模块</span>

<span class="token comment">// 创建路由接口</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'登录'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/userInfo'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'获取用户数据'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 导出路由模块</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>使用中间件注册路由模块</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./03.创建路由模块'</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
									</ul>
									<h1 id="七、express中间件">
										<a
											href="#七、express中间件"
											class="headerlink"
											title="七、express中间件"
										></a
										>七、express中间件
									</h1>
									<h2 id="7-1-初识中间件">
										<a
											href="#7-1-初识中间件"
											class="headerlink"
											title="7.1 初识中间件"
										></a
										>7.1 初识中间件
									</h2>
									<ul>
										<li>
											<p>中间件</p>
											<ul>
												<li>
													<p>业务逻辑中的中间换届</p>
												</li>
												<li>
													<p>例子</p>
													<p>
														<img
															src="https://file.xdclass.net/note/2022/79-vue3%2Bnode%2Bmysql/images/image-20220414112254403.png"
															alt="image-20220414112254403"
														/>
													</p>
												</li>
												<li>
													<p>
														如果在阀门注入珍珠，name这个阀门下游的所有东西都会含有这个新添加的珍珠原料，仪表可以检测到当前的管道流量
													</p>
												</li>
												<li>
													<p>
														在express程序中，可以通过app.use这个方法向管道中添加新的中间件,比如有些接口需要token验证,则可以使用use方法插入token校验中间件,或者在业务逻辑的最下游加上错误中间件,根据不同的错误类型抛出对应的错误信息
													</p>
												</li>
												<li>
													<p>
														对于每一个中间件则需要在执行完逻辑之后调用next(),让程序继续执行下去
													</p>
												</li>
											</ul>
										</li>
									</ul>
									<h2 id="7-2-全局和局部中间件">
										<a
											href="#7-2-全局和局部中间件"
											class="headerlink"
											title="7.2 全局和局部中间件"
										></a
										>7.2 全局和局部中间件
									</h2>
									<ul>
										<li>
											<p>中间件函数</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token comment">// 中间件是一个函数,有三个参数,请求参数,相应参数以及next参数,用于放行</span>
<span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'一个中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> middle<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>在主函数中引入</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 引入中间件</span>
<span class="token keyword">const</span> middle <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./01.中间件函数'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middle<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>注册全局生效的中间件</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是一个中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/**
     * 逻辑处理
     */</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 必须要调用这个next 进行放行</span>
<span class="token punctuation">}</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middle<span class="token punctuation">)</span>

<span class="token comment">// 登录接口</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'登录'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 注册接口</span>
app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login/register'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'注册'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 监听3000端口</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>
												定义公共的属性和方法,对于req和res是共享的
											</p>
										</li>
										<li>
											<p>
												定义多个中间件,按照注册的顺序执行
											</p>
										</li>
										<li>
											<p>
												具备生效的中间件,不是使用app.use注册的中间件
											</p>
											<p>
												这个设置的是只有在访问user/login的时候才会触发这个中间件
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 中间件</span>
<span class="token keyword">const</span> <span class="token function-variable function">middle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'这是一个局部中间件'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">,</span>middle<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'登录'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user/register'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'注册'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>
												多个局部中间件,可以在上面的请求的参数的第二个中间件参数设置为数组
											</p>
										</li>
									</ul>
									<h2 id="7-3-常见的5种类型的中间件">
										<a
											href="#7-3-常见的5种类型的中间件"
											class="headerlink"
											title="7.3 常见的5种类型的中间件"
										></a
										>7.3 常见的5种类型的中间件
									</h2>
									<ul>
										<li>
											<p>内置中间件</p>
											<ul>
												<li>
													<p>比较重要的</p>
													<ul>
														<li>
															<p>
																解析json数据的中间件
															</p>
															<pre
																class="line-numbers language-javascript"
																data-language="javascript"
															><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
														</li>
														<li>
															<p>
																解析url-encoded的中间件
															</p>
															<pre
																class="line-numbers language-javascript"
																data-language="javascript"
															><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extend</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
														</li>
													</ul>
												</li>
											</ul>
										</li>
										<li>
											<p>应用级别中间件</p>
											<ul>
												<li>
													<p>
														全局中间件和局部中间件直接绑定在app的实例上,就叫做应用级别的中间件
													</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token comment">// 全局中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middleware<span class="token punctuation">)</span>
<span class="token comment">// 局部中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span>middleware<span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
											</ul>
										</li>
										<li>
											<p>路由级别中间件</p>
											<ul>
												<li>
													<p>
														中间件绑定在路由router实例上
													</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript">router<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>middleware<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
												</li>
											</ul>
										</li>
										<li>
											<p>错误级别中间件</p>
											<p>
												全局项目中捕获错误异常,防止项目报错异常崩溃
											</p>
											<p>
												错误中间件一般放在项目的最后,这个中间件有四个参数,第一个是err就是错误信息,后面可以通过这个错误信息来对项目的报错进行判断
											</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'项目发生了错误'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'响应成功了'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>第三方在中间件</p>
											<ul>
												<li>
													<p>
														body-parser中间件,可以用来加载json,url-encoded数据
													</p>
												</li>
												<li>
													<p>下载安装</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript">npm install body<span class="token operator">-</span>parser<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
												</li>
												<li>
													<p>使用</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'body-parser'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 用于解析json数据</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extend</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token comment">// 解析url-encoded数据</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
												</li>
											</ul>
										</li>
									</ul>
									<h2 id="7-4-中间件注意事项和自定义中间件">
										<a
											href="#7-4-中间件注意事项和自定义中间件"
											class="headerlink"
											title="7.4 中间件注意事项和自定义中间件"
										></a
										>7.4 中间件注意事项和自定义中间件
									</h2>
									<ul>
										<li>
											<p>注意事项</p>
											<ul>
												<li>
													一定要遭注册路由之前注册中间件,否则中间件不会生效
												</li>
												<li>
													客户端发起的请求,服务端可以使用多个中间件进行处理
												</li>
												<li>
													在中间件处理函数中,写了业务逻辑的代码之后一定要在最后调用next()除了错误中间件
												</li>
												<li>
													在调用next之后,不要在写额外的逻辑代码
												</li>
												<li>
													多个中间件是可以共享req,res对象的
												</li>
											</ul>
										</li>
										<li>
											<p>自定义解析表单数据的中间件</p>
											<ul>
												<li>创建自定义中间件文件</li>
												<li>
													监听接受客户端数据的req.data时间
												</li>
												<li>
													监听客户端数据接受完成的req.end时间
												</li>
												<li>
													引入querystringfy模块解析请求体的数据
												</li>
												<li>
													请求数据解析完成之后,将req.body替换成解析的数据
												</li>
											</ul>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'querystring'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token function-variable function">middleware</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> mess <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token comment">// 监听data事件,将接受到的内容拼接到信息记录下来</span>
    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'data'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        mess <span class="token operator">+=</span> val
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 监听req的end事件,利用qs模块进行解析</span>
    req<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'end'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        req<span class="token punctuation">.</span>body <span class="token operator">=</span> qs<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>mess<span class="token punctuation">)</span>
        <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">//导出这个中间件</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> middleware<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
									</ul>
									<h1 id="八、玩转express框架开发-接口篇">
										<a
											href="#八、玩转express框架开发-接口篇"
											class="headerlink"
											title="八、玩转express框架开发-接口篇"
										></a
										>八、玩转express框架开发-接口篇
									</h1>
									<h2 id="8-1-后端接口的编写">
										<a
											href="#8-1-后端接口的编写"
											class="headerlink"
											title="8.1 后端接口的编写"
										></a
										>8.1 后端接口的编写
									</h2>
									<ul>
										<li>
											<p>
												首先需要对项目进行一个简单的设计
											</p>
											<ul>
												<li>
													有一个主要的app.js入口文件,负责服务器的启动.
												</li>
												<li>
													针对不同的请求,需要不同的后端路由文件,后面需要引入到appjs中注册
												</li>
												<li>
													主要中间件,处理get请求和post请求的参数
												</li>
											</ul>
										</li>
										<li>
											<p>app.js主文件</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 引入路由</span>
<span class="token keyword">const</span> userRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router/userRouter'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> courseRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./router/courseRouter'</span><span class="token punctuation">)</span>

<span class="token comment">// 处理路由中间件</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extended</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 注册路由</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api/v1/user'</span><span class="token punctuation">,</span>userRouter<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/api/v1/course'</span><span class="token punctuation">,</span>courseRouter<span class="token punctuation">)</span>


app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'监听3000端口成功'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>其他路由文件</p>
											<ul>
												<li>
													<p>courseRouter.js</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * 课程查询接口
 */</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/find'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> query <span class="token operator">=</span> req<span class="token punctuation">.</span>query
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span><span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token literal-property property">data</span><span class="token operator">:</span>query
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
												<li>
													<p>userRouter.js</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * 登录接口
 */</span>
router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>username<span class="token punctuation">,</span>password<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body <span class="token comment">// 解析username和密码数据</span>
    <span class="token keyword">let</span> mess <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1&gt;登录成功,用户名是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,密码是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h1&gt;</span><span class="token template-punctuation string">`</span></span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mess<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/**
 * 注册接口
 */</span>
 router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/register'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>username<span class="token punctuation">,</span>password<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body <span class="token comment">// 解析username和密码数据</span>
    <span class="token keyword">let</span> mess <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1&gt;注册成功,用户名是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>username<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,密码是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>password<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/h1&gt;</span><span class="token template-punctuation string">`</span></span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mess<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
											</ul>
										</li>
									</ul>
									<h2 id="8-2-使用cors解决跨域问题">
										<a
											href="#8-2-使用cors解决跨域问题"
											class="headerlink"
											title="8.2 使用cors解决跨域问题"
										></a
										>8.2 使用cors解决跨域问题
									</h2>
									<ul>
										<li>
											<p>什么是跨域问题</p>
											<ul>
												<li>
													客户端的浏览器有同源策略,不同源会导致请求发生跨域,后端跨域通过相关的配置解决跨域的问题
												</li>
											</ul>
										</li>
										<li>
											<p>CORS</p>
											<ul>
												<li>
													是express的第三方中间件,通过安装和配置cors中间件,解决跨域问题
												</li>
											</ul>
										</li>
										<li>
											<p>安装</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript">npm install cors<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
										</li>
										<li>
											<p>配置</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token keyword">const</span> cors <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'cors'</span><span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">cors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
										</li>
										<li>
											<p>原理</p>
											<pre
												class="line-numbers language-javascript"
												data-language="javascript"
											><code class="language-javascript"><span class="token comment">// 设置响应头</span>
res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Origin'</span><span class="token punctuation">,</span><span class="token string">'*'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
										</li>
									</ul>
									<h2 id="8-3-使用JSONP解决跨域问题">
										<a
											href="#8-3-使用JSONP解决跨域问题"
											class="headerlink"
											title="8.3 使用JSONP解决跨域问题"
										></a
										>8.3 使用JSONP解决跨域问题
									</h2>
									<ul>
										<li>
											<p>定义</p>
											<ul>
												<li>
													利用script的src属性,请求url不存在跨域的问题,所以可以用接口传递函数拿到服务端的数据
												</li>
											</ul>
										</li>
										<li>
											<p>使用</p>
											<ul>
												<li>
													通过使用script标签的src属性,增加一个函数参数,请求服务端,同时在服务端拿到函数,把作为参数传入函数中,拼接成函数调用的字符串
												</li>
											</ul>
										</li>
										<li>
											<p>详细配置</p>
											<ul>
												<li>
													<p>
														前端.传入的是一个函数名字
													</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token constant">DOCTYPE</span> html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">"en"</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">"UTF-8"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta http<span class="token operator">-</span>equiv<span class="token operator">=</span><span class="token string">"X-UA-Compatible"</span> content<span class="token operator">=</span><span class="token string">"IE=edge"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>meta name<span class="token operator">=</span><span class="token string">"viewport"</span> content<span class="token operator">=</span><span class="token string">"width=device-width, initial-scale=1.0"</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Document<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
        <span class="token keyword">function</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>script src<span class="token operator">=</span><span class="token string">"http://localhost:3000/api/v1/course/jsonp?callback=getData"</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
												<li>
													<p>
														后端:
														传出的是这个函数名字的调用
													</p>
													<pre
														class="line-numbers language-javascript"
														data-language="javascript"
													><code class="language-javascript"><span class="token comment">/**
 * jsonp接口
 */</span>
router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/jsonp'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span>callback<span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>query
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>callback<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">('你好')</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
												</li>
											</ul>
										</li>
										<li>
											<p>
												注意:
												使用jsonp的方式解决跨域,只能使用get的方式
											</p>
										</li>
									</ul>
								</div>
								<hr />

								<div class="reprint" id="reprint-statement">
									<div class="reprint__author">
										<span
											class="reprint-meta"
											style="font-weight: bold"
										>
											<i class="fas fa-user">
												文章作者:
											</i>
										</span>
										<span class="reprint-info">
											<a
												href="/about"
												rel="external nofollow noreferrer"
												>Xiaolidu11</a
											>
										</span>
									</div>
									<div class="reprint__type">
										<span
											class="reprint-meta"
											style="font-weight: bold"
										>
											<i class="fas fa-link">
												文章链接:
											</i>
										</span>
										<span class="reprint-info">
											<a
												href="https://xiaolidu11.gitee.io/2022/10/17/nodejs-hou-duan-xue-xi-ji-chu/"
												>https://xiaolidu11.gitee.io/2022/10/17/nodejs-hou-duan-xue-xi-ji-chu/</a
											>
										</span>
									</div>
									<div class="reprint__notice">
										<span
											class="reprint-meta"
											style="font-weight: bold"
										>
											<i class="fas fa-copyright">
												版权声明:
											</i>
										</span>
										<span class="reprint-info">
											本博客所有文章除特別声明外，均采用
											<a
												href="https://creativecommons.org/licenses/by/4.0/deed.zh"
												rel="external nofollow noreferrer"
												target="_blank"
												>CC BY 4.0</a
											>
											许可协议。转载请注明来源
											<a href="/about" target="_blank"
												>Xiaolidu11</a
											>
											!
										</span>
									</div>
								</div>

								<script async defer>
									document.addEventListener(
										'copy',
										function (e) {
											let toastHTML =
												'<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
											M.toast({ html: toastHTML });
										}
									);

									function navToReprintStatement() {
										$('html, body').animate(
											{
												scrollTop:
													$(
														'#reprint-statement'
													).offset().top - 80,
											},
											800
										);
									}
								</script>

								<div class="tag_share" style="display: block">
									<div
										class="post-meta__tag-list"
										style="display: inline-block"
									>
										<div class="article-tag">
											<a href="/tags/node/">
												<span class="chip bg-color"
													>node</span
												>
											</a>
										</div>
									</div>
									<div
										class="post_share"
										style="
											zoom: 80%;
											width: fit-content;
											display: inline-block;
											float: right;
											margin: -0.15rem 0;
										"
									>
										<link
											rel="stylesheet"
											type="text/css"
											href="/skills-github-pages/libs/share/css/share.min.css"
										/>
										<div id="article-share">
											<div
												class="social-share"
												data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin"
												data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"
											></div>
											<script src="/skills-github-pages/libs/share/js/social-share.min.js"></script>
										</div>
									</div>
								</div>

								<div id="reward">
									<a
										href="#rewardModal"
										class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red"
										>赏</a
									>

									<!-- Modal Structure -->
									<div id="rewardModal" class="modal">
										<div class="modal-content">
											<a class="close modal-close"
												><i class="fas fa-times"></i
											></a>
											<h4 class="reward-title">
												你的赏识是我前进的动力
											</h4>
											<div class="reward-content">
												<div class="reward-tabs">
													<ul class="tabs row">
														<li
															class="tab col s6 alipay-tab waves-effect waves-light"
														>
															<a href="#alipay"
																>支付宝</a
															>
														</li>
														<li
															class="tab col s6 wechat-tab waves-effect waves-light"
														>
															<a href="#wechat"
																>微 信</a
															>
														</li>
													</ul>
													<div id="alipay">
														<img
															src="/medias/reward/alipay.jpg"
															class="reward-img"
															alt="支付宝打赏二维码"
														/>
													</div>
													<div id="wechat">
														<img
															src="/medias/reward/wechat.png"
															class="reward-img"
															alt="微信打赏二维码"
														/>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>

								<script>
									$(function () {
										$('.tabs').tabs();
									});
								</script>
							</div>
						</div>

						<article id="prenext-posts" class="prev-next articles">
							<div class="row article-row">
								<div
									class="article col s12 m6"
									data-aos="fade-up"
								>
									<div
										class="article-badge left-badge text-color"
									>
										<i class="fas fa-chevron-left"></i
										>&nbsp;上一篇
									</div>
									<div class="card">
										<a
											href="/2022/10/23/shi-docker-rong-qi-shi-an-zhuang-mysql/"
										>
											<div class="card-image">
												<img
													src="/medias/featureimages/2.jpg"
													class="responsive-img"
													alt="docker容器式安装mysql"
												/>

												<span class="card-title"
													>docker容器式安装mysql</span
												>
											</div>
										</a>
										<div
											class="card-content article-content"
										>
											<div
												class="summary block-with-text"
											>
												公共组件的封装
											</div>
											<div class="publish-info">
												<span class="publish-date">
													<i
														class="far fa-clock fa-fw icon-date"
													></i
													>2022-10-23
												</span>
												<span class="publish-author">
													<i
														class="fas fa-bookmark fa-fw icon-category"
													></i>

													<a
														href="/categories/%E5%85%A8%E6%A0%88%E5%AD%A6%E4%B9%A0/"
														class="post-category"
													>
														全栈学习
													</a>
												</span>
											</div>
										</div>

										<div class="card-action article-tags">
											<a href="/tags/node/">
												<span class="chip bg-color"
													>node</span
												>
											</a>
										</div>
									</div>
								</div>

								<div
									class="article col s12 m6"
									data-aos="fade-up"
								>
									<div
										class="article-badge right-badge text-color"
									>
										下一篇&nbsp;<i
											class="fas fa-chevron-right"
										></i>
									</div>
									<div class="card">
										<a
											href="/2022/10/13/shou-xie-ti-hui-zong-cang-ku/"
										>
											<div class="card-image">
												<img
													src="/medias/featureimages/14.jpg"
													class="responsive-img"
													alt="手写题汇总仓库"
												/>

												<span class="card-title"
													>手写题汇总仓库</span
												>
											</div>
										</a>
										<div
											class="card-content article-content"
										>
											<div
												class="summary block-with-text"
											>
												手写题汇总仓库
											</div>
											<div class="publish-info">
												<span class="publish-date">
													<i
														class="far fa-clock fa-fw icon-date"
													></i
													>2022-10-13
												</span>
												<span class="publish-author">
													<i
														class="fas fa-bookmark fa-fw icon-category"
													></i>

													<a
														href="/categories/%E6%89%8B%E5%86%99%E9%A2%98/"
														class="post-category"
													>
														手写题
													</a>
												</span>
											</div>
										</div>

										<div class="card-action article-tags">
											<a
												href="/tags/%E6%89%8B%E5%86%99%E9%A2%98%E6%B1%87%E6%80%BB/"
											>
												<span class="chip bg-color"
													>手写题汇总</span
												>
											</a>
										</div>
									</div>
								</div>
							</div>
						</article>
					</div>

					<!-- 代码块功能依赖 -->
					<script
						type="text/javascript"
						src="/skills-github-pages/libs/codeBlock/codeBlockFuction.js"
					></script>

					<!-- 是否加载使用自带的 prismjs. -->
					<script
						type="text/javascript"
						src="/skills-github-pages/libs/prism/prism.min.js"
					></script>

					<!-- 代码语言 -->

					<script
						type="text/javascript"
						src="/skills-github-pages/libs/codeBlock/codeLang.js"
					></script>

					<!-- 代码块复制 -->

					<script
						type="text/javascript"
						src="/skills-github-pages/libs/codeBlock/codeCopy.js"
					></script>

					<!-- 代码块收缩 -->

					<script
						type="text/javascript"
						src="/skills-github-pages/libs/codeBlock/codeShrink.js"
					></script>
				</div>
				<div
					id="toc-aside"
					class="expanded col l3 hide-on-med-and-down"
				>
					<div
						class="toc-widget card"
						style="background-color: white"
					>
						<div class="toc-title">
							<i class="far fa-list-alt"></i>&nbsp;&nbsp;目录
						</div>
						<div id="toc-content"></div>
					</div>
				</div>
			</div>

			<!-- TOC 悬浮按钮. -->

			<div id="floating-toc-btn" class="hide-on-med-and-down">
				<a class="btn-floating btn-large bg-color">
					<i class="fas fa-list-ul"></i>
				</a>
			</div>

			<script src="/skills-github-pages/libs/tocbot/tocbot.min.js"></script>
			<script>
				$(function () {
					tocbot.init({
						tocSelector: '#toc-content',
						contentSelector: '#articleContent',
						headingsOffset: -($(window).height() * 0.4 - 45),
						collapseDepth: Number('0'),
						headingSelector: 'h2, h3, h4',
					});

					// Set scroll toc fixed.
					let tocHeight = parseInt($(window).height() * 0.4 - 64);
					let $tocWidget = $('.toc-widget');
					$(window).scroll(function () {
						let scroll = $(window).scrollTop();
						/* add post toc fixed. */
						if (scroll > tocHeight) {
							$tocWidget.addClass('toc-fixed');
						} else {
							$tocWidget.removeClass('toc-fixed');
						}
					});

					/* 修复文章卡片 div 的宽度. */
					let fixPostCardWidth = function (srcId, targetId) {
						let srcDiv = $('#' + srcId);
						if (srcDiv.length === 0) {
							return;
						}

						let w = srcDiv.width();
						if (w >= 450) {
							w = w + 21;
						} else if (w >= 350 && w < 450) {
							w = w + 18;
						} else if (w >= 300 && w < 350) {
							w = w + 16;
						} else {
							w = w + 14;
						}
						$('#' + targetId).width(w);
					};

					// 切换TOC目录展开收缩的相关操作.
					const expandedClass = 'expanded';
					let $tocAside = $('#toc-aside');
					let $mainContent = $('#main-content');
					$('#floating-toc-btn .btn-floating').click(function () {
						if ($tocAside.hasClass(expandedClass)) {
							$tocAside.removeClass(expandedClass).hide();
							$mainContent.removeClass('l9');
						} else {
							$tocAside.addClass(expandedClass).show();
							$mainContent.addClass('l9');
						}
						fixPostCardWidth('artDetail', 'prenext-posts');
					});
				});
			</script>
		</main>

		<footer class="page-footer bg-color">
			<div
				class="container row center-align"
				style="margin-bottom: 0px !important"
			>
				<div class="col s12 m8 l8 copy-right">
					Copyright&nbsp;&copy;

					<span id="year"> 2019-2023 </span>

					<a href="/about" target="_blank"> Xiaolidu11 </a>
					|&nbsp;Powered by&nbsp;<a
						href="https://hexo.io/"
						target="_blank"
						>Hexo</a
					>
					|&nbsp;Theme&nbsp;<a
						href="https://github.com/blinkfox/hexo-theme-matery"
						target="_blank"
						>Matery</a
					>
					<br />
					<!-- 站点总字数 -->

					&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数
					:&nbsp;<span class="white-color"> 117.3k </span>

					<!-- 总访问量 -->

					<!-- 总访问人数 -->

					<span id="busuanzi_container_site_pv">
						&nbsp;|&nbsp;<i class="far fa-eye"></i
						>&nbsp;总访问量:&nbsp;
						<span
							id="busuanzi_value_site_pv"
							class="white-color"
						></span>
					</span>

					<span id="busuanzi_container_site_uv">
						&nbsp;|&nbsp;<i class="fas fa-users"></i
						>&nbsp;总访问人数:&nbsp;
						<span
							id="busuanzi_value_site_uv"
							class="white-color"
						></span>
					</span>

					<br />

					<!-- 运行天数提醒. -->

					<br />
				</div>
				<div class="col s12 m4 l4 social-link">
					<a
						href="https://github.com/xiaolidu111"
						class="tooltipped"
						target="_blank"
						data-tooltip="访问我的GitHub"
						data-position="top"
						data-delay="50"
					>
						<i class="fab fa-github"></i>
					</a>

					<a
						href="mailto:xiaolidu11@163.com"
						class="tooltipped"
						target="_blank"
						data-tooltip="邮件联系我"
						data-position="top"
						data-delay="50"
					>
						<i class="fas fa-envelope-open"></i>
					</a>

					<a
						href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1724689773"
						class="tooltipped"
						target="_blank"
						data-tooltip="QQ联系我: 1724689773"
						data-position="top"
						data-delay="50"
					>
						<i class="fab fa-qq"></i>
					</a>

					<a
						href="xiaolidu111"
						class="tooltipped"
						target="_blank"
						data-tooltip="关注我的微信: xiaolidu111"
						data-position="top"
						data-delay="50"
					>
						<i class="fab fa-weixin"></i>
					</a>
				</div>
			</div>
		</footer>

		<div class="progress-bar"></div>

		<!-- 搜索遮罩框 -->
		<div id="searchModal" class="modal">
			<div class="modal-content">
				<div class="search-header">
					<span class="title"
						><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span
					>
					<input
						type="search"
						id="searchInput"
						name="s"
						placeholder="请输入搜索的关键字"
						class="search-input"
					/>
				</div>
				<div id="searchResult"></div>
			</div>
		</div>

		<script type="text/javascript">
			$(function () {
				var searchFunc = function (path, search_id, content_id) {
					'use strict';
					$.ajax({
						url: path,
						dataType: 'xml',
						success: function (xmlResponse) {
							// get the contents from search data
							var datas = $('entry', xmlResponse)
								.map(function () {
									return {
										title: $('title', this).text(),
										content: $('content', this).text(),
										url: $('url', this).text(),
									};
								})
								.get();
							var $input = document.getElementById(search_id);
							var $resultContent =
								document.getElementById(content_id);
							$input.addEventListener('input', function () {
								var str = '<ul class="search-result-list">';
								var keywords = this.value
									.trim()
									.toLowerCase()
									.split(/[\s\-]+/);
								$resultContent.innerHTML = '';
								if (this.value.trim().length <= 0) {
									return;
								}
								// perform local searching
								datas.forEach(function (data) {
									var isMatch = true;
									var data_title = data.title
										.trim()
										.toLowerCase();
									var data_content = data.content
										.trim()
										.replace(/<[^>]+>/g, '')
										.toLowerCase();
									var data_url = data.url;
									data_url =
										data_url.indexOf('/') === 0
											? data.url
											: '/' + data_url;
									var index_title = -1;
									var index_content = -1;
									var first_occur = -1;
									// only match artiles with not empty titles and contents
									if (
										data_title !== '' &&
										data_content !== ''
									) {
										keywords.forEach(function (keyword, i) {
											index_title =
												data_title.indexOf(keyword);
											index_content =
												data_content.indexOf(keyword);
											if (
												index_title < 0 &&
												index_content < 0
											) {
												isMatch = false;
											} else {
												if (index_content < 0) {
													index_content = 0;
												}
												if (i === 0) {
													first_occur = index_content;
												}
											}
										});
									}
									// show search results
									if (isMatch) {
										str +=
											"<li><a href='" +
											data_url +
											"' class='search-result-title'>" +
											data_title +
											'</a>';
										var content = data.content
											.trim()
											.replace(/<[^>]+>/g, '');
										if (first_occur >= 0) {
											// cut out 100 characters
											var start = first_occur - 20;
											var end = first_occur + 80;
											if (start < 0) {
												start = 0;
											}
											if (start === 0) {
												end = 100;
											}
											if (end > content.length) {
												end = content.length;
											}
											var match_content = content.substr(
												start,
												end
											);
											// highlight all keywords
											keywords.forEach(function (
												keyword
											) {
												var regS = new RegExp(
													keyword,
													'gi'
												);
												match_content =
													match_content.replace(
														regS,
														'<em class="search-keyword">' +
															keyword +
															'</em>'
													);
											});

											str +=
												'<p class="search-result">' +
												match_content +
												'...</p>';
										}
										str += '</li>';
									}
								});
								str += '</ul>';
								$resultContent.innerHTML = str;
							});
						},
					});
				};

				searchFunc('/search.xml', 'searchInput', 'searchResult');
			});
		</script>

		<!-- 白天和黑夜主题 -->
		<div class="stars-con">
			<div id="stars"></div>
			<div id="stars2"></div>
			<div id="stars3"></div>
		</div>

		<script>
			function switchNightMode() {
				$(
					'<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>'
				).appendTo($('body')),
					setTimeout(function () {
						$('body').hasClass('DarkMode')
							? ($('body').removeClass('DarkMode'),
							  localStorage.setItem('isDark', '0'),
							  $('#sum-moon-icon')
									.removeClass('fa-sun')
									.addClass('fa-moon'))
							: ($('body').addClass('DarkMode'),
							  localStorage.setItem('isDark', '1'),
							  $('#sum-moon-icon')
									.addClass('fa-sun')
									.removeClass('fa-moon')),
							setTimeout(function () {
								$('.Cuteen_DarkSky').fadeOut(1e3, function () {
									$(this).remove();
								});
							}, 2e3);
					});
			}
		</script>

		<!-- 回到顶部按钮 -->
		<div id="backTop" class="top-scroll">
			<a
				class="btn-floating btn-large waves-effect waves-light"
				href="#!"
			>
				<i class="fas fa-arrow-up"></i>
			</a>
		</div>

		<script src="/skills-github-pages/libs/materialize/materialize.min.js"></script>
		<script src="/skills-github-pages/libs/masonry/masonry.pkgd.min.js"></script>
		<script src="/skills-github-pages/libs/aos/aos.js"></script>
		<script src="/skills-github-pages/libs/scrollprogress/scrollProgress.min.js"></script>
		<script src="/skills-github-pages/libs/lightGallery/js/lightgallery-all.min.js"></script>
		<script src="/js/matery.js"></script>

		<!-- 雪花特效 -->

		<!-- 鼠标星星特效 -->

		<script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
		<script src="/skills-github-pages/libs/others/TencentCaptcha.js"></script>
		<button
			id="TencentCaptcha"
			data-appid="xxxxxxxxxx"
			data-cbfn="callback"
			type="button"
			hidden
		></button>

		<!-- Baidu Analytics -->

		<!-- Baidu Push -->

		<script>
			(function () {
				var bp = document.createElement('script');
				var curProtocol = window.location.protocol.split(':')[0];
				if (curProtocol === 'https') {
					bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
				} else {
					bp.src = 'http://push.zhanzhang.baidu.com/push.js';
				}
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(bp, s);
			})();
		</script>

		<!--腾讯兔小巢-->

		<script
			src="/skills-github-pages/libs/instantpage/instantpage.js"
			type="module"
		></script>
	</body>
</html>
