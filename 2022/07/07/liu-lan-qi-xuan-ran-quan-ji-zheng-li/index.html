<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta charset="utf-8" />
		<meta name="keywords" content="浏览器渲染全集整理, xiaolidu-blog" />
		<meta name="description" content="主要讲解浏览器相关内容" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, user-scalable=no"
		/>
		<meta name="renderer" content="webkit|ie-stand|ie-comp" />
		<meta name="mobile-web-app-capable" content="yes" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta
			name="apple-mobile-web-app-status-bar-style"
			content="black-translucent"
		/>
		<meta name="referrer" content="no-referrer-when-downgrade" />
		<!-- Global site tag (gtag.js) - Google Analytics -->

		<title>浏览器渲染全集整理 | xiaolidu-blog</title>
		<link rel="icon" type="image/png" href="/favicon.png" />

		<style>
			body {
				background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
				background-repeat: no-repeat;
				background-size: 100% 100%;
				background-attachment: fixed;
			}
		</style>

		<!-- bg-cover style     -->

		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/awesome/css/all.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/materialize/materialize.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/aos/aos.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/animate/animate.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/libs/lightGallery/css/lightgallery.min.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/css/matery.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/css/my.css"
		/>
		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/css/dark.css"
			media="none"
			onload="if(media!='all')media='all'"
		/>

		<link
			rel="stylesheet"
			href="/skills-github-pages/libs/tocbot/tocbot.css"
		/>
		<link rel="stylesheet" href="/skills-github-pages/css/post.css" />

		<link
			rel="stylesheet"
			type="text/css"
			href="/skills-github-pages/css/reward.css"
		/>

		<script src="/skills-github-pages/libs/jquery/jquery-3.6.0.min.js"></script>

		<meta name="generator" content="Hexo 6.3.0" />
		<style>
			.github-emoji {
				position: relative;
				display: inline-block;
				width: 1.2em;
				min-height: 1.2em;
				overflow: hidden;
				vertical-align: top;
				color: transparent;
			}
			.github-emoji > span {
				position: relative;
				z-index: 10;
			}
			.github-emoji img,
			.github-emoji .fancybox {
				margin: 0 !important;
				padding: 0 !important;
				border: none !important;
				outline: none !important;
				text-decoration: none !important;
				user-select: none !important;
				cursor: auto !important;
			}
			.github-emoji img {
				height: 1.2em !important;
				width: 1.2em !important;
				position: absolute !important;
				left: 50% !important;
				top: 50% !important;
				transform: translate(-50%, -50%) !important;
				user-select: none !important;
				cursor: auto !important;
			}
			.github-emoji-fallback {
				color: inherit;
			}
			.github-emoji-fallback img {
				opacity: 0 !important;
			}
		</style>
	</head>

	<body>
		<header class="navbar-fixed">
			<nav id="headNav" class="bg-color nav-transparent">
				<div id="navContainer" class="nav-wrapper container">
					<div class="brand-logo">
						<a href="/" class="waves-effect waves-light">
							<img
								src="/skills-github-pages/medias/logo.png"
								class="logo-img"
								alt="LOGO"
							/>

							<span class="logo-span">xiaolidu-blog</span>
						</a>
					</div>

					<a
						href="#"
						data-target="mobile-nav"
						class="sidenav-trigger button-collapse"
						><i class="fas fa-bars"></i
					></a>
					<ul class="right nav-menu">
						<li class="hide-on-med-and-down nav-item">
							<a href="/" class="waves-effect waves-light">
								<i class="fas fa-home" style="zoom: 0.6"></i>

								<span>首页</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a href="/tags" class="waves-effect waves-light">
								<i class="fas fa-tags" style="zoom: 0.6"></i>

								<span>标签</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a
								href="/categories"
								class="waves-effect waves-light"
							>
								<i
									class="fas fa-bookmark"
									style="zoom: 0.6"
								></i>

								<span>分类</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a
								href="/archives"
								class="waves-effect waves-light"
							>
								<i class="fas fa-archive" style="zoom: 0.6"></i>

								<span>归档</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a href="/about" class="waves-effect waves-light">
								<i
									class="fas fa-user-circle"
									style="zoom: 0.6"
								></i>

								<span>关于</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a href="/contact" class="waves-effect waves-light">
								<i
									class="fas fa-comments"
									style="zoom: 0.6"
								></i>

								<span>留言板</span>
							</a>
						</li>

						<li class="hide-on-med-and-down nav-item">
							<a href="/friends" class="waves-effect waves-light">
								<i
									class="fas fa-address-book"
									style="zoom: 0.6"
								></i>

								<span>友情链接</span>
							</a>
						</li>

						<li>
							<a
								href="#searchModal"
								class="modal-trigger waves-effect waves-light"
							>
								<i
									id="searchIcon"
									class="fas fa-search"
									title="搜索"
									style="zoom: 0.85"
								></i>
							</a>
						</li>
						<li>
							<a
								href="javascript:;"
								class="waves-effect waves-light"
								onclick="switchNightMode()"
								title="深色/浅色模式"
							>
								<i
									id="sum-moon-icon"
									class="fas fa-sun"
									style="zoom: 0.85"
								></i>
							</a>
						</li>
					</ul>

					<div id="mobile-nav" class="side-nav sidenav">
						<div class="mobile-head bg-color">
							<img
								src="/skills-github-pages/medias/logo.png"
								class="logo-img circle responsive-img"
							/>

							<div class="logo-name">xiaolidu-blog</div>
							<div class="logo-desc">
								Never really desperate, only the lost of the
								soul.
							</div>
						</div>

						<ul class="menu-list mobile-menu-list">
							<li class="m-nav-item">
								<a href="/" class="waves-effect waves-light">
									<i class="fa-fw fas fa-home"></i>

									首页
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/tags"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-tags"></i>

									标签
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/categories"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-bookmark"></i>

									分类
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/archives"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-archive"></i>

									归档
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/about"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-user-circle"></i>

									关于
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/contact"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-comments"></i>

									留言板
								</a>
							</li>

							<li class="m-nav-item">
								<a
									href="/friends"
									class="waves-effect waves-light"
								>
									<i class="fa-fw fas fa-address-book"></i>

									友情链接
								</a>
							</li>

							<li><div class="divider"></div></li>
							<li>
								<a
									href="https://github.com/blinkfox/hexo-theme-matery"
									class="waves-effect waves-light"
									target="_blank"
								>
									<i class="fab fa-github-square fa-fw"></i
									>Fork Me
								</a>
							</li>
						</ul>
					</div>
				</div>

				<style>
					.nav-transparent .github-corner {
						display: none !important;
					}

					.github-corner {
						position: absolute;
						z-index: 10;
						top: 0;
						right: 0;
						border: 0;
						transform: scale(1.1);
					}

					.github-corner svg {
						color: #0f9d58;
						fill: #fff;
						height: 64px;
						width: 64px;
					}

					.github-corner:hover .octo-arm {
						animation: a 0.56s ease-in-out;
					}

					.github-corner .octo-arm {
						animation: none;
					}

					@keyframes a {
						0%,
						to {
							transform: rotate(0);
						}
						20%,
						60% {
							transform: rotate(-25deg);
						}
						40%,
						80% {
							transform: rotate(10deg);
						}
					}
				</style>

				<a
					href="https://github.com/blinkfox/hexo-theme-matery"
					class="github-corner tooltipped hide-on-med-and-down"
					target="_blank"
					data-tooltip="Fork Me"
					data-position="left"
					data-delay="50"
				>
					<svg viewBox="0 0 250 250" aria-hidden="true">
						<path
							d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"
						></path>
						<path
							d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
							fill="currentColor"
							style="transform-origin: 130px 106px"
							class="octo-arm"
						></path>
						<path
							d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
							fill="currentColor"
							class="octo-body"
						></path>
					</svg>
				</a>
			</nav>
		</header>

		<script src="/skills-github-pages/libs/cryptojs/crypto-js.min.js"></script>
		<script>
			(function () {
				let pwd = '';
				if (pwd && pwd.length > 0) {
					if (
						pwd !==
						CryptoJS.SHA256(
							prompt('请输入访问本文章的密码')
						).toString(CryptoJS.enc.Hex)
					) {
						alert('密码错误，将返回主页！');
						location.href = '/';
					}
				}
			})();
		</script>

		<div
			class="bg-cover pd-header post-cover"
			style="background-image: url('/medias/featureimages/8.jpg')"
		>
			<div class="container" style="right: 0px; left: 0px">
				<div class="row">
					<div class="col s12 m12 l12">
						<div class="brand">
							<h1 class="description center-align post-title">
								浏览器渲染全集整理
							</h1>
						</div>
					</div>
				</div>
			</div>
		</div>

		<main class="post-container content">
			<div class="row">
				<div id="main-content" class="col s12 m12 l9">
					<!-- 文章内容详情 -->
					<div id="artDetail">
						<div class="card">
							<div class="card-content article-info">
								<div class="row tag-cate">
									<div class="col s7">
										<div class="article-tag">
											<a href="/tags/%E7%AE%80%E5%8E%86/">
												<span class="chip bg-color"
													>简历</span
												>
											</a>

											<a
												href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"
											>
												<span class="chip bg-color"
													>浏览器</span
												>
											</a>
										</div>
									</div>
									<div class="col s5 right-align">
										<div class="post-cate">
											<i
												class="fas fa-bookmark fa-fw icon-category"
											></i>

											<a
												href="/categories/%E9%9D%A2%E8%AF%95/"
												class="post-category"
											>
												面试
											</a>
										</div>
									</div>
								</div>

								<div class="post-info">
									<div class="post-date info-break-policy">
										<i
											class="far fa-calendar-minus fa-fw"
										></i
										>发布日期:&nbsp;&nbsp; 2022-07-07
									</div>

									<div class="info-break-policy">
										<i class="far fa-file-word fa-fw"></i
										>文章字数:&nbsp;&nbsp; 3.2k
									</div>
								</div>
							</div>
							<hr class="clearfix" />

							<!-- 是否加载使用自带的 prismjs. -->
							<link
								rel="stylesheet"
								href="/skills-github-pages/libs/prism/prism.min.css"
							/>

							<div class="card-content article-card-content">
								<div id="articleContent">
									<h3 id="进程和线程的概念">
										<a
											href="#进程和线程的概念"
											class="headerlink"
											title="进程和线程的概念"
										></a
										>进程和线程的概念
									</h3>
									<h4 id="进程">
										<a
											href="#进程"
											class="headerlink"
											title="进程"
										></a
										>进程
									</h4>
									<p>
										进程是操作系统资源分配的基本单位,进程中包括线程
									</p>
									<p>
										简单来说进程就是计算机上正在运行的一个程序
									</p>
									<h4 id="线程">
										<a
											href="#线程"
											class="headerlink"
											title="线程"
										></a
										>线程
									</h4>
									<p>
										线程是进程所管理的,为了提升浏览器的稳定性和安全性,浏览器采用的是多进程的模型
									</p>
									<ol>
										<li>
											线程是进程的基本单位,一个进程包含多个线程,线程是程序执行的最小单元
										</li>
										<li>
											线程和进程都是动态概念,存在只是暂时的,有创建有销毁
										</li>
										<li>
											进程和线程的区别在于进程在运行的时候有独立的内存空间,每个进程所占用的内存都是独立的
										</li>
										<li>
											多个线程是共享内存空间的,但是每个线程的执行是独立的,线程必须以来进程,单独的进程是无法执行的
										</li>
									</ol>
									<h4 id="浏览器中的5个进程">
										<a
											href="#浏览器中的5个进程"
											class="headerlink"
											title="浏览器中的5个进程"
										></a
										>浏览器中的5个进程
									</h4>
									<p>
										<img
											src="/images/image_1.4a0dfb81.png"
										/>
									</p>
									<p>
										<img
											src="/images/image_2.d46b2dec.png"
										/>
									</p>
									<p>
										●
										浏览器进程。主要负责界面显示、用户交互、子进程管理、同时提供存储等功能。
									</p>
									<p>
										● 渲染进程。
										核心任务是将HTML、CSS和JavaScript转换为用户可以与之交互的网页，排版引擎Blink和JavaScript引擎V8都运行在该进程中，默认情况下，Chrome为每一个Tab标签页创建一个渲染进程。出于安全考虑，渲染进程都是运行在沙箱模式下的。
									</p>
									<p>
										● GPU进程。GPU图形处理器（英语：graphics
										processing unit，缩写：GPU）,负责3D
										css效果，网页，Chrome ui的绘制。
									</p>
									<p>
										●
										网络进程。主要负责页面的网络资源加载，之前是作为一个模块运行在浏览器进程里面的，直至最近才独立处理，成为单独一个进程。
									</p>
									<p>
										●
										插件进程。主要负责插件的运行，因为插件易崩溃，所以通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响。
									</p>
									<h3 id="网络的七层模型">
										<a
											href="#网络的七层模型"
											class="headerlink"
											title="网络的七层模型"
										></a
										>网络的七层模型
									</h3>
									<table>
										<thead>
											<tr>
												<th>应用层</th>
												<th>为应用程序提供服务</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>表示层</td>
												<td>数据格式转化、数据加密</td>
											</tr>
											<tr>
												<td>会话层</td>
												<td>建立、管理和维护会话</td>
											</tr>
											<tr>
												<td>传输层</td>
												<td>
													建立、管理和维护端到端的连接
												</td>
											</tr>
											<tr>
												<td>网路层</td>
												<td>IP地址及路由选择</td>
											</tr>
											<tr>
												<td>数据链路层</td>
												<td>提供介质访问和链路管理</td>
											</tr>
											<tr>
												<td>物理层</td>
												<td>
													1.互联物理链路，物质介质(网线，光纤，无线电波wifi
													)<br />2.数据是以0101这样的比特流存在的
												</td>
											</tr>
										</tbody>
									</table>
									<p>
										<img
											src="/images/image_3.74c43162.png"
										/>
									</p>
									<h4 id="ARP协议工作原理">
										<a
											href="#ARP协议工作原理"
											class="headerlink"
											title="ARP协议工作原理"
										></a
										>ARP协议工作原理
									</h4>
									<p>
										ARP协议:
										地址解析协议，通过对象的ip地址(域名)，寻找对象的MAC地址ARP的功能。通过ARP协议，知道对象的MAC地址，那些数据就
									</p>
									<h4 id="IP协议">
										<a
											href="#IP协议"
											class="headerlink"
											title="IP协议"
										></a
										>IP协议
									</h4>
									<blockquote>
										<p>
											IP协议<br />IP(Internet
											Protocol)，分配给用户上网使用网际协议的设备的数字标签，分为两大类：IP4和IP6。<br />●
											IPv4: 32位，二进制，十进制。<br />●
											IPv6:
											弥补IPv4地址池不够–ipv4数量有限，ipv6有128位，以16进制表达。<br />IP地址的组成<br />由32bit组成，分成4段并用”.”分割:192.168.0.1<br />IP地址的组成<br />由32bit组成，分成4段并用”.”分割:192.168.0.1<br />网路号标识的是一个子网。<br />主机号标识的是子网中的某台主机<br />子网掩码<br />作用:
											用来标识子网，必须跟IP地址一起存在。<br />组成：子网掩码跟IP地址一样，二进制：也是由连续的1和0组成，连续的1表示网络地址，连续的0表示主机地址。只有网络地址相同的主机在同一个子网，才能直接通信。
										</p>
									</blockquote>
									<p>
										<img
											src="/images/image_4.56944717.png"
										/>
									</p>
									<p>
										IP地址和子网掩码 将IP地址的网络号都变成1
										主机号都变成0 就形成了子网掩码
									</p>
									<p>
										<img
											src="/images/image_5.eef94654.png"
										/>
									</p>
									<h4 id="TCP协议">
										<a
											href="#TCP协议"
											class="headerlink"
											title="TCP协议"
										></a
										>TCP协议
									</h4>
									<p>一、三次握手/四次挥手</p>
									<p>二、序号，确认号，标志位详解</p>
									<p>
										序号seq
										的作用，当TCP数据包过大时，分段传送(1,2,3…10)–按顺序重组
									</p>
									<p>
										确认号：ack
										服务器能够回应?存在于确认消息中，跟序号的关系？
										seq=j;ack
										=j+1;表示服务器期望收到的下一个包的序号。
									</p>
									<p>标志位:</p>
									<table>
										<thead>
											<tr>
												<th>
													SYN 建立连接（同步标志）
												</th>
												<th>1发送连接消息</th>
												<th>0确认连接消息</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>ACK 响应确认(确认标志)</td>
												<td>1是一个确认消息</td>
												<td>0不是一个确认消息</td>
											</tr>
											<tr>
												<td>FIN 关闭连接</td>
												<td></td>
												<td></td>
											</tr>
										</tbody>
									</table>
									<h3 id="浏览器渲染">
										<a
											href="#浏览器渲染"
											class="headerlink"
											title="浏览器渲染"
										></a
										>浏览器渲染
									</h3>
									<ul>
										<li>
											<p>
												使用html解析器将html页面转换成浏览器能够理解的DOM树
												parseHtml
												实际就是解析为DOM树,dom树是可以通过js来进行操作的
											</p>
										</li>
										<li>
											<p>
												将css解析成浏览器能够识别的css树,css树的样式和dom树里面的节点是一一对应的
											</p>
											<ul>
												<li>
													将cssua你换成浏览器内容理解的结构
												</li>
												<li>
													转换样式中的属性值,使其标准化
												</li>
												<li>
													计算出DOM中每一个节点的具体样式
												</li>
											</ul>
										</li>
										<li>
											<p>
												根据样式表中的属性,进行样式的计算
											</p>
										</li>
										<li>
											<p>
												DOM树+CSS树形成布局树,dom中不可见的节点不会渲染到布局树,布局树是只包含可见元素
											</p>
										</li>
										<li>
											<p>
												根据布局树生成图层树:哪几种情况可以称之为图层
											</p>
											<ul>
												<li>执行3d转换的元素</li>
												<li>给了定位的元素</li>
												<li>video也会生成图层</li>
												<li>canvas也是单独的图层</li>
												<li>
													css3动画的节点:执行完毕之后就不是一个单独的图层了
												</li>
											</ul>
										</li>
										<li>
											<p>
												绘制 (一个一个的绘制)
												根据图层来一个一个绘制
											</p>
											<ul>
												<li>
													绘制指令 -&gt; 待绘制列表
												</li>
												<li>
													栅格化操作,绘制列表指令用来记录绘制顺序和绘制指令的列表，而实际上绘制操作是由渲染引擎中的合成线程来完成
												</li>
												<li>
													比如说，一个图层很大，页面需要滚动底部，才能全部显示。但是通过视口，用户只能看到页面很小的一部分，所以在此种情况下，要一次性绘制完图层所有的内容，会产生很大的开销，且没有必要。
												</li>
												<li>
													合成线程将图层划分为图块,按照视口附近的图块优先生成位图,栅格化就是将图块转化为位图,图块是栅格化执行的最小单位
												</li>
											</ul>
										</li>
										<li><p>组合图层 生成最终的页面</p></li>
									</ul>
									<h4 id="重排">
										<a
											href="#重排"
											class="headerlink"
											title="重排"
										></a
										>重排
									</h4>
									<p>
										更新元素的集合属性,通过JS或css修改元素的几何位置属性，如width,height等，那么会触发浏览器的重新布局，解析之后的一系列子阶段，这个过程就叫重排。重排需要更新完整的渲染流水线，所以开销也最大的。
									</p>
									<h4 id="重绘">
										<a
											href="#重绘"
											class="headerlink"
											title="重绘"
										></a
										>重绘
									</h4>
									<p>
										修改元素的背景色，布局阶段不会执行，因为没有引起几何位置的变换，所以直接进入绘制，然后执行之后的一系列子阶段，这个过程就叫重绘。相较重排操作，重绘省去了布局和分层阶段，所以执行效率会比重排效率高。
									</p>
									<h4 id="合成">
										<a
											href="#合成"
											class="headerlink"
											title="合成"
										></a
										>合成
									</h4>
									<p>
										那如果你更改一个既不要布局也不要绘制的属性，渲染引擎将跳过布局和绘制，只执行后续的合成操作，我们把这个过程叫做合成。
									</p>
									<p>
										在上图，我们使用CSS的transform来实现动画效果，可以避开重排和重绘阶段，直接在非主线程上执行合成动画操作。这样的效率最高，因为是在非主线程上合成的，并没有占用主线程的资源。
									</p>
									<h4 id="浏览器每次可以接受多少数据">
										<a
											href="#浏览器每次可以接受多少数据"
											class="headerlink"
											title="浏览器每次可以接受多少数据"
										></a
										>浏览器每次可以接受多少数据
									</h4>
									<p>64KB</p>
									<h3 id="重绘paint和重排layout">
										<a
											href="#重绘paint和重排layout"
											class="headerlink"
											title="重绘paint和重排layout"
										></a
										>重绘paint和重排layout
									</h3>
									<h4 id="重排-1">
										<a
											href="#重排-1"
											class="headerlink"
											title="重排"
										></a
										>重排
									</h4>
									<p>
										入口没有使用link标签去引入的情况,样式还是通过html解析器来解析,新开一个线程去解析css,还有一个线程去解析html
									</p>
									<ul>
										<li>
											<p>如果使用style形式</p>
											<ul>
												<li>
													会阻塞浏览器的渲染,就是显示的会慢一些
												</li>
												<li>不会阻塞页面的渲染</li>
											</ul>
										</li>
										<li>
											<p>link标签引入 各干各的</p>
											<ul>
												<li>
													link依旧会阻塞浏览器的渲染
												</li>
												<li>不会阻塞dom解析</li>
											</ul>
										</li>
										<li>
											<p>
												js阻塞,最好是将js卸载页面的地步
											</p>
											<ul>
												<li>阻塞浏览器渲染</li>
												<li>阻塞DOM解析</li>
												<li>阻塞js 执行</li>
											</ul>
										</li>
									</ul>
									<p>不会阻塞页面的渲染</p>
									<blockquote>
										<p>
											Reflow(重排)的成本比Repaint(重绘)的成本高很多。<br />一个节点的Reflow很可能会导致子节点，甚至父节点同级节点的Reflow。以下行为是成本比较高的<br />1、增加，删除，修改DOM节点时，会导致Reflow,Repaint。<br />2、移动DOM的位置。<br />3、修改css样式的时候。<br />4、当你Resize窗口的时候(移动端无此问题，因为移动端的缩放没有影响布局视口)<br />5、获取某些属性(width,height..)<br />6、display:none会触发reflow，而visibility:hidden只会触发repaint，因为没有发生位置变化。
										</p>
									</blockquote>
									<h4 id="重绘-1">
										<a
											href="#重绘-1"
											class="headerlink"
											title="重绘"
										></a
										>重绘
									</h4>
									<blockquote>
										<p>
											重绘:
											元素样式的改变(不包含宽高，大小，位置)<br />触发重绘的属性:主要是颜色
											可见性 边框颜色和样式 背景<br />color
											background&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outline<br />border-color
											background-image<br />border-style&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
											background-position<br />vsibility
											&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
											background-repeat
										</p>
									</blockquote>
									<h4 id="优化方案">
										<a
											href="#优化方案"
											class="headerlink"
											title="优化方案"
										></a
										>优化方案
									</h4>
									<blockquote>
										<p>
											元素位置移动变换时尽量使用css3的transform来代替top
											left等操作<br />
											==1、transform结合图层使用不会触发重绘，也不会触发重排==
										</p>
									</blockquote>
									<blockquote>
										<p>
											==2、transform结合定位position:relative只触发重绘==
										</p>
									</blockquote>
									<blockquote>
										<p>
											3、transform单独使用,既重绘也重排。
										</p>
									</blockquote>
									<blockquote>
										<p>
											使用opacity来替代visibility<br />
											1、使用visibility不触发重排，但是依然重绘。
										</p>
									</blockquote>
									<blockquote>
										<p>
											2、使用opacity即触发重绘，又触发重排。（GPU底层设计如此）
										</p>
									</blockquote>
									<blockquote>
										<p>
											3、opacity配合图层使用，不会触发重绘也不触发重排
										</p>
									</blockquote>
									<blockquote>
										<p>
											将多次改变样式的操作合并成一次<br />利用文档碎片documentFragment<br />不要把获取某些DOM节点的属性值放在一个循环里面当成是循环的变量,因为有的时候获取文档的width和height也会触发重绘和重排<br />为动画新建图层
										</p>
									</blockquote>
									<h3 id="浏览器不同页面之间的通讯">
										<a
											href="#浏览器不同页面之间的通讯"
											class="headerlink"
											title="浏览器不同页面之间的通讯"
										></a
										>浏览器不同页面之间的通讯
									</h3>
									<blockquote>
										<p>
											实现多个标签页之间的通信，本质上都是通过中介者模式来实现的。因为标签页之间没有办法直接通信，因此我们可以找一个中介者，让标签页和中介者进行通信，然后让这个中介者来进行消息的转发。通信方法如下：
										</p>
										<ul>
											<li>
												使用 websocket 协议，因为
												websocket
												协议可以实现服务器推送，所以服务器就可以用来当做这个中介者。标签页通过向服务器发送数据，然后由服务器向其他标签页推送转发
											</li>
											<li>
												使用 ShareWorker
												的方式，shareWorker
												会在页面存在的生命周期内创建一个唯一的线程，并且开启多个页面也只会使用同一个线程。这个时候共享线程就可以充当中介者的角色。标签页间通过共享一个线程，然后通过这个共享的线程来实现数据的交换。
											</li>
											<li>
												使<strong
													>用 localStorage
													的方式</strong
												>，我们可以在一个标签页对
												localStorage
												的变化事件进行监听，然后当另一个标签页修改数据的时候，我们就可以通过这个监听事件来获取到数据。这个时候
												localStorage
												对象就是充当的中介者的角色。
											</li>
											<li>
												使用 postMessage
												方法，如果我们能够获得对应标签页的引用，就可以使用postMessage
												方法，进行通信。
											</li>
										</ul>
									</blockquote>
									<h5 id="websocket">
										<a
											href="#websocket"
											class="headerlink"
											title="websocket"
										></a
										>websocket
									</h5>
									<table>
										<thead>
											<tr>
												<th>==事件==</th>
												<th>==描述==</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td>==Socket.onopen==</td>
												<td>==连接建立时触发==</td>
											</tr>
											<tr>
												<td>==Socket.onmessage==</td>
												<td>
													==客户端接收服务端数据时触发==
												</td>
											</tr>
											<tr>
												<td>==Socket.onerror==</td>
												<td>==通信发生错误时触发==</td>
											</tr>
											<tr>
												<td>==Socket.onclose==</td>
												<td>==连接关闭时触发==</td>
											</tr>
											<tr>
												<td>==方法==</td>
												<td>==描述==</td>
											</tr>
											<tr>
												<td>==Socket.send()==</td>
												<td>==使用连接发送数据==</td>
											</tr>
											<tr>
												<td>==Socket.close()==</td>
												<td>==关闭连接==</td>
											</tr>
										</tbody>
									</table>
									<p>websocket实例</p>
									<pre
										class="line-numbers language-none"
									><code class="language-none">cnpm i nodejs-websocket -S // 下载包<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

									<pre
										class="line-numbers language-none"
									><code class="language-none">在服务端进行的设置
var ws = require('nodejs-websocket')
var server = ws.createServer(function(socket){
// 事件名称为text(读取字符串时，就叫做text)，读取客户端传来的字符串
　  var count = 1;
    socket.on('text', function(str) {
　　     // 在控制台输出前端传来的消息　　
        console.log(str);
        //向前端回复消息
        socket.sendText('服务器端收到客户端端发来的消息了！' + count++);
    });
}).listen(3000); <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

									<pre
										class="line-numbers language-none"
									><code class="language-none">前端进行的设置
// 打开一个 web socket  这里端口号和上面监听的需一致
var ws = new WebSocket('ws://localhost:3000/');
   
// Web Socket 已连接上，使用 send() 方法发送数据
var count =1;
ws.onopen = function() {
// 这里用一个延时器模拟事件
    setInterval(function() {
        ws.send('客户端消息:'+count++);
    },2000);
}
// 这里接受服务器端发过来的消息
ws.onmessage = function(e) {
    console.log(e.data)
}
 <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

									<hr />
								</div>
								<hr />

								<div class="reprint" id="reprint-statement">
									<div class="reprint__author">
										<span
											class="reprint-meta"
											style="font-weight: bold"
										>
											<i class="fas fa-user">
												文章作者:
											</i>
										</span>
										<span class="reprint-info">
											<a
												href="/about"
												rel="external nofollow noreferrer"
												>Xiaolidu</a
											>
										</span>
									</div>
									<div class="reprint__type">
										<span
											class="reprint-meta"
											style="font-weight: bold"
										>
											<i class="fas fa-link">
												文章链接:
											</i>
										</span>
										<span class="reprint-info">
											<a
												href="https://xiaolidu11.gitee.io/2022/07/07/liu-lan-qi-xuan-ran-quan-ji-zheng-li/"
												>https://xiaolidu11.gitee.io/2022/07/07/liu-lan-qi-xuan-ran-quan-ji-zheng-li/</a
											>
										</span>
									</div>
									<div class="reprint__notice">
										<span
											class="reprint-meta"
											style="font-weight: bold"
										>
											<i class="fas fa-copyright">
												版权声明:
											</i>
										</span>
										<span class="reprint-info">
											本博客所有文章除特別声明外，均采用
											<a
												href="https://creativecommons.org/licenses/by/4.0/deed.zh"
												rel="external nofollow noreferrer"
												target="_blank"
												>CC BY 4.0</a
											>
											许可协议。转载请注明来源
											<a href="/about" target="_blank"
												>Xiaolidu</a
											>
											!
										</span>
									</div>
								</div>

								<script async defer>
									document.addEventListener(
										'copy',
										function (e) {
											let toastHTML =
												'<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
											M.toast({ html: toastHTML });
										}
									);

									function navToReprintStatement() {
										$('html, body').animate(
											{
												scrollTop:
													$(
														'#reprint-statement'
													).offset().top - 80,
											},
											800
										);
									}
								</script>

								<div class="tag_share" style="display: block">
									<div
										class="post-meta__tag-list"
										style="display: inline-block"
									>
										<div class="article-tag">
											<a href="/tags/%E7%AE%80%E5%8E%86/">
												<span class="chip bg-color"
													>简历</span
												>
											</a>

											<a
												href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8/"
											>
												<span class="chip bg-color"
													>浏览器</span
												>
											</a>
										</div>
									</div>
									<div
										class="post_share"
										style="
											zoom: 80%;
											width: fit-content;
											display: inline-block;
											float: right;
											margin: -0.15rem 0;
										"
									>
										<link
											rel="stylesheet"
											type="text/css"
											href="/skills-github-pages/libs/share/css/share.min.css"
										/>
										<div id="article-share">
											<div
												class="social-share"
												data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin"
												data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"
											></div>
											<script src="/skills-github-pages/libs/share/js/social-share.min.js"></script>
										</div>
									</div>
								</div>

								<div id="reward">
									<a
										href="#rewardModal"
										class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red"
										>赏</a
									>

									<!-- Modal Structure -->
									<div id="rewardModal" class="modal">
										<div class="modal-content">
											<a class="close modal-close"
												><i class="fas fa-times"></i
											></a>
											<h4 class="reward-title">
												你的赏识是我前进的动力
											</h4>
											<div class="reward-content">
												<div class="reward-tabs">
													<ul class="tabs row">
														<li
															class="tab col s6 alipay-tab waves-effect waves-light"
														>
															<a href="#alipay"
																>支付宝</a
															>
														</li>
														<li
															class="tab col s6 wechat-tab waves-effect waves-light"
														>
															<a href="#wechat"
																>微 信</a
															>
														</li>
													</ul>
													<div id="alipay">
														<img
															src="/skills-github-pages/medias/reward/alipay.jpg"
															class="reward-img"
															alt="支付宝打赏二维码"
														/>
													</div>
													<div id="wechat">
														<img
															src="/skills-github-pages/medias/reward/wechat.png"
															class="reward-img"
															alt="微信打赏二维码"
														/>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>

								<script>
									$(function () {
										$('.tabs').tabs();
									});
								</script>
							</div>
						</div>

						<article id="prenext-posts" class="prev-next articles">
							<div class="row article-row">
								<div
									class="article col s12 m6"
									data-aos="fade-up"
								>
									<div
										class="article-badge left-badge text-color"
									>
										<i class="fas fa-chevron-left"></i
										>&nbsp;上一篇
									</div>
									<div class="card">
										<a
											href="/2022/07/10/er-cha-shu-zong-jie/"
										>
											<div class="card-image">
												<img
													src="/skills-github-pages/medias/featureimages/4.jpg"
													class="responsive-img"
													alt="二叉树总结"
												/>

												<span class="card-title"
													>二叉树总结</span
												>
											</div>
										</a>
										<div
											class="card-content article-content"
										>
											<div
												class="summary block-with-text"
											>
												二叉树全总结
											</div>
											<div class="publish-info">
												<span class="publish-date">
													<i
														class="far fa-clock fa-fw icon-date"
													></i
													>2022-07-10
												</span>
												<span class="publish-author">
													<i
														class="fas fa-bookmark fa-fw icon-category"
													></i>

													<a
														href="/categories/%E7%AE%97%E6%B3%95/"
														class="post-category"
													>
														算法
													</a>
												</span>
											</div>
										</div>

										<div class="card-action article-tags">
											<a
												href="/tags/%E4%BA%8C%E5%8F%89%E6%A0%91%E6%80%BB%E7%BB%93/"
											>
												<span class="chip bg-color"
													>二叉树总结</span
												>
											</a>
										</div>
									</div>
								</div>

								<div
									class="article col s12 m6"
									data-aos="fade-up"
								>
									<div
										class="article-badge right-badge text-color"
									>
										下一篇&nbsp;<i
											class="fas fa-chevron-right"
										></i>
									</div>
									<div class="card">
										<a
											href="/2022/07/02/he-li-shi-yong-gou-zi-han-shu-shi-xian-shu-ju-de-jian-ting-xuan-ran-ye-mian-ye-mian-jie-dian-de-shi-li-hua/"
										>
											<div class="card-image">
												<img
													src="/skills-github-pages/medias/featureimages/20.jpg"
													class="responsive-img"
													alt="如何合理使用钩子函数"
												/>

												<span class="card-title"
													>如何合理使用钩子函数</span
												>
											</div>
										</a>
										<div
											class="card-content article-content"
										>
											<div
												class="summary block-with-text"
											>
												vue中的钩子函数有很多,比如说声明周期的钩子函数,路由的钩子函数,页面加载的钩子函数等等
											</div>
											<div class="publish-info">
												<span class="publish-date">
													<i
														class="far fa-clock fa-fw icon-date"
													></i
													>2022-07-02
												</span>
												<span class="publish-author">
													<i
														class="fas fa-bookmark fa-fw icon-category"
													></i>

													<a
														href="/categories/%E9%A1%B9%E7%9B%AE/"
														class="post-category"
													>
														项目
													</a>
												</span>
											</div>
										</div>

										<div class="card-action article-tags">
											<a href="/tags/%E7%AE%80%E5%8E%86/">
												<span class="chip bg-color"
													>简历</span
												>
											</a>
										</div>
									</div>
								</div>
							</div>
						</article>
					</div>

					<!-- 代码块功能依赖 -->
					<script
						type="text/javascript"
						src="/skills-github-pages/libs/codeBlock/codeBlockFuction.js"
					></script>

					<!-- 是否加载使用自带的 prismjs. -->
					<script
						type="text/javascript"
						src="/skills-github-pages/libs/prism/prism.min.js"
					></script>

					<!-- 代码语言 -->

					<script
						type="text/javascript"
						src="/skills-github-pages/libs/codeBlock/codeLang.js"
					></script>

					<!-- 代码块复制 -->

					<script
						type="text/javascript"
						src="/skills-github-pages/libs/codeBlock/codeCopy.js"
					></script>

					<!-- 代码块收缩 -->

					<script
						type="text/javascript"
						src="/skills-github-pages/libs/codeBlock/codeShrink.js"
					></script>
				</div>
				<div
					id="toc-aside"
					class="expanded col l3 hide-on-med-and-down"
				>
					<div
						class="toc-widget card"
						style="background-color: white"
					>
						<div class="toc-title">
							<i class="far fa-list-alt"></i>&nbsp;&nbsp;目录
						</div>
						<div id="toc-content"></div>
					</div>
				</div>
			</div>

			<!-- TOC 悬浮按钮. -->

			<div id="floating-toc-btn" class="hide-on-med-and-down">
				<a class="btn-floating btn-large bg-color">
					<i class="fas fa-list-ul"></i>
				</a>
			</div>

			<script src="/skills-github-pages/libs/tocbot/tocbot.min.js"></script>
			<script>
				$(function () {
					tocbot.init({
						tocSelector: '#toc-content',
						contentSelector: '#articleContent',
						headingsOffset: -($(window).height() * 0.4 - 45),
						collapseDepth: Number('0'),
						headingSelector: 'h2, h3, h4',
					});

					// Set scroll toc fixed.
					let tocHeight = parseInt($(window).height() * 0.4 - 64);
					let $tocWidget = $('.toc-widget');
					$(window).scroll(function () {
						let scroll = $(window).scrollTop();
						/* add post toc fixed. */
						if (scroll > tocHeight) {
							$tocWidget.addClass('toc-fixed');
						} else {
							$tocWidget.removeClass('toc-fixed');
						}
					});

					/* 修复文章卡片 div 的宽度. */
					let fixPostCardWidth = function (srcId, targetId) {
						let srcDiv = $('#' + srcId);
						if (srcDiv.length === 0) {
							return;
						}

						let w = srcDiv.width();
						if (w >= 450) {
							w = w + 21;
						} else if (w >= 350 && w < 450) {
							w = w + 18;
						} else if (w >= 300 && w < 350) {
							w = w + 16;
						} else {
							w = w + 14;
						}
						$('#' + targetId).width(w);
					};

					// 切换TOC目录展开收缩的相关操作.
					const expandedClass = 'expanded';
					let $tocAside = $('#toc-aside');
					let $mainContent = $('#main-content');
					$('#floating-toc-btn .btn-floating').click(function () {
						if ($tocAside.hasClass(expandedClass)) {
							$tocAside.removeClass(expandedClass).hide();
							$mainContent.removeClass('l9');
						} else {
							$tocAside.addClass(expandedClass).show();
							$mainContent.addClass('l9');
						}
						fixPostCardWidth('artDetail', 'prenext-posts');
					});
				});
			</script>
		</main>

		<footer class="page-footer bg-color">
			<div
				class="container row center-align"
				style="margin-bottom: 0px !important"
			>
				<div class="col s12 m8 l8 copy-right">
					Copyright&nbsp;&copy;

					<span id="year"> 2019-2023 </span>

					<a href="/about" target="_blank"> Xiaolidu11 </a>
					|&nbsp;Powered by&nbsp;<a
						href="https://hexo.io/"
						target="_blank"
						>Hexo</a
					>
					|&nbsp;Theme&nbsp;<a
						href="https://github.com/blinkfox/hexo-theme-matery"
						target="_blank"
						>Matery</a
					>
					<br />
					<!-- 站点总字数 -->

					&nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数
					:&nbsp;<span class="white-color"> 117.3k </span>

					<!-- 总访问量 -->

					<!-- 总访问人数 -->

					<span id="busuanzi_container_site_pv">
						&nbsp;|&nbsp;<i class="far fa-eye"></i
						>&nbsp;总访问量:&nbsp;
						<span
							id="busuanzi_value_site_pv"
							class="white-color"
						></span>
					</span>

					<span id="busuanzi_container_site_uv">
						&nbsp;|&nbsp;<i class="fas fa-users"></i
						>&nbsp;总访问人数:&nbsp;
						<span
							id="busuanzi_value_site_uv"
							class="white-color"
						></span>
					</span>

					<br />

					<!-- 运行天数提醒. -->

					<br />
				</div>
				<div class="col s12 m4 l4 social-link">
					<a
						href="https://github.com/xiaolidu111"
						class="tooltipped"
						target="_blank"
						data-tooltip="访问我的GitHub"
						data-position="top"
						data-delay="50"
					>
						<i class="fab fa-github"></i>
					</a>

					<a
						href="mailto:xiaolidu11@163.com"
						class="tooltipped"
						target="_blank"
						data-tooltip="邮件联系我"
						data-position="top"
						data-delay="50"
					>
						<i class="fas fa-envelope-open"></i>
					</a>

					<a
						href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1724689773"
						class="tooltipped"
						target="_blank"
						data-tooltip="QQ联系我: 1724689773"
						data-position="top"
						data-delay="50"
					>
						<i class="fab fa-qq"></i>
					</a>

					<a
						href="xiaolidu111"
						class="tooltipped"
						target="_blank"
						data-tooltip="关注我的微信: xiaolidu111"
						data-position="top"
						data-delay="50"
					>
						<i class="fab fa-weixin"></i>
					</a>
				</div>
			</div>
		</footer>

		<div class="progress-bar"></div>

		<!-- 搜索遮罩框 -->
		<div id="searchModal" class="modal">
			<div class="modal-content">
				<div class="search-header">
					<span class="title"
						><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span
					>
					<input
						type="search"
						id="searchInput"
						name="s"
						placeholder="请输入搜索的关键字"
						class="search-input"
					/>
				</div>
				<div id="searchResult"></div>
			</div>
		</div>

		<script type="text/javascript">
			$(function () {
				var searchFunc = function (path, search_id, content_id) {
					'use strict';
					$.ajax({
						url: path,
						dataType: 'xml',
						success: function (xmlResponse) {
							// get the contents from search data
							var datas = $('entry', xmlResponse)
								.map(function () {
									return {
										title: $('title', this).text(),
										content: $('content', this).text(),
										url: $('url', this).text(),
									};
								})
								.get();
							var $input = document.getElementById(search_id);
							var $resultContent =
								document.getElementById(content_id);
							$input.addEventListener('input', function () {
								var str = '<ul class="search-result-list">';
								var keywords = this.value
									.trim()
									.toLowerCase()
									.split(/[\s\-]+/);
								$resultContent.innerHTML = '';
								if (this.value.trim().length <= 0) {
									return;
								}
								// perform local searching
								datas.forEach(function (data) {
									var isMatch = true;
									var data_title = data.title
										.trim()
										.toLowerCase();
									var data_content = data.content
										.trim()
										.replace(/<[^>]+>/g, '')
										.toLowerCase();
									var data_url = data.url;
									data_url =
										data_url.indexOf('/') === 0
											? data.url
											: '/' + data_url;
									var index_title = -1;
									var index_content = -1;
									var first_occur = -1;
									// only match artiles with not empty titles and contents
									if (
										data_title !== '' &&
										data_content !== ''
									) {
										keywords.forEach(function (keyword, i) {
											index_title =
												data_title.indexOf(keyword);
											index_content =
												data_content.indexOf(keyword);
											if (
												index_title < 0 &&
												index_content < 0
											) {
												isMatch = false;
											} else {
												if (index_content < 0) {
													index_content = 0;
												}
												if (i === 0) {
													first_occur = index_content;
												}
											}
										});
									}
									// show search results
									if (isMatch) {
										str +=
											"<li><a href='" +
											data_url +
											"' class='search-result-title'>" +
											data_title +
											'</a>';
										var content = data.content
											.trim()
											.replace(/<[^>]+>/g, '');
										if (first_occur >= 0) {
											// cut out 100 characters
											var start = first_occur - 20;
											var end = first_occur + 80;
											if (start < 0) {
												start = 0;
											}
											if (start === 0) {
												end = 100;
											}
											if (end > content.length) {
												end = content.length;
											}
											var match_content = content.substr(
												start,
												end
											);
											// highlight all keywords
											keywords.forEach(function (
												keyword
											) {
												var regS = new RegExp(
													keyword,
													'gi'
												);
												match_content =
													match_content.replace(
														regS,
														'<em class="search-keyword">' +
															keyword +
															'</em>'
													);
											});

											str +=
												'<p class="search-result">' +
												match_content +
												'...</p>';
										}
										str += '</li>';
									}
								});
								str += '</ul>';
								$resultContent.innerHTML = str;
							});
						},
					});
				};

				searchFunc('/search.xml', 'searchInput', 'searchResult');
			});
		</script>

		<!-- 白天和黑夜主题 -->
		<div class="stars-con">
			<div id="stars"></div>
			<div id="stars2"></div>
			<div id="stars3"></div>
		</div>

		<script>
			function switchNightMode() {
				$(
					'<div class="Cuteen_DarkSky"><div class="Cuteen_DarkPlanet"></div></div>'
				).appendTo($('body')),
					setTimeout(function () {
						$('body').hasClass('DarkMode')
							? ($('body').removeClass('DarkMode'),
							  localStorage.setItem('isDark', '0'),
							  $('#sum-moon-icon')
									.removeClass('fa-sun')
									.addClass('fa-moon'))
							: ($('body').addClass('DarkMode'),
							  localStorage.setItem('isDark', '1'),
							  $('#sum-moon-icon')
									.addClass('fa-sun')
									.removeClass('fa-moon')),
							setTimeout(function () {
								$('.Cuteen_DarkSky').fadeOut(1e3, function () {
									$(this).remove();
								});
							}, 2e3);
					});
			}
		</script>

		<!-- 回到顶部按钮 -->
		<div id="backTop" class="top-scroll">
			<a
				class="btn-floating btn-large waves-effect waves-light"
				href="#!"
			>
				<i class="fas fa-arrow-up"></i>
			</a>
		</div>

		<script src="/skills-github-pages/libs/materialize/materialize.min.js"></script>
		<script src="/skills-github-pages/libs/masonry/masonry.pkgd.min.js"></script>
		<script src="/skills-github-pages/libs/aos/aos.js"></script>
		<script src="/skills-github-pages/libs/scrollprogress/scrollProgress.min.js"></script>
		<script src="/skills-github-pages/libs/lightGallery/js/lightgallery-all.min.js"></script>
		<script src="/skills-github-pages/js/matery.js"></script>

		<!-- 雪花特效 -->

		<!-- 鼠标星星特效 -->

		<script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
		<script src="/skills-github-pages/libs/others/TencentCaptcha.js"></script>
		<button
			id="TencentCaptcha"
			data-appid="xxxxxxxxxx"
			data-cbfn="callback"
			type="button"
			hidden
		></button>

		<!-- Baidu Analytics -->

		<!-- Baidu Push -->

		<script>
			(function () {
				var bp = document.createElement('script');
				var curProtocol = window.location.protocol.split(':')[0];
				if (curProtocol === 'https') {
					bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
				} else {
					bp.src = 'http://push.zhanzhang.baidu.com/push.js';
				}
				var s = document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(bp, s);
			})();
		</script>

		<!--腾讯兔小巢-->

		<script
			src="/skills-github-pages/libs/instantpage/instantpage.js"
			type="module"
		></script>
	</body>
</html>
